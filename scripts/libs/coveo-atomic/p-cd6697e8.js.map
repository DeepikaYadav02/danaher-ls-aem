{"version":3,"names":["WrapHighlight","props","children","h","class","part","QuerySummaryCommon","querySummaryState","hasError","firstSearchExecuted","key","hasQuery","params","first","firstResult","toLocaleString","last","lastResult","total","query","count","hasResults","isLoading","setAriaLive","bindings","i18n","t","paramsWithHighlights","Fragment","LocalizedString","hasDuration","durationInSeconds"],"sources":["src/components/common/query-summary/query-summary-common.tsx"],"sourcesContent":["import {Fragment, FunctionalComponent, h} from '@stencil/core';\nimport {LocalizedString} from '../../../utils/jsx-utils';\nimport {AnyBindings} from '../interface/bindings';\n\ninterface QuerySummaryCommonProps {\n  bindings: AnyBindings;\n  querySummaryState: {\n    hasDuration: boolean;\n    durationInSeconds: number;\n    lastResult: number;\n    firstResult: number;\n    total: number;\n    query: string;\n    isLoading: boolean;\n    hasQuery: boolean;\n    hasError: boolean;\n    firstSearchExecuted: boolean;\n    hasResults: boolean;\n  };\n  setAriaLive: (message: string) => void;\n}\n\nconst WrapHighlight: FunctionalComponent<{part?: string}> = (\n  props,\n  children\n) => {\n  return (\n    <span\n      class=\"font-bold\"\n      part={`highlight${props.part ? ` ${props.part}` : ''}`}\n    >\n      {children}\n    </span>\n  );\n};\n\nexport const QuerySummaryCommon: FunctionalComponent<\n  QuerySummaryCommonProps\n> = (props) => {\n  if (props.querySummaryState.hasError) {\n    return;\n  }\n  if (!props.querySummaryState.firstSearchExecuted) {\n    return (\n      <div\n        part=\"placeholder\"\n        aria-hidden=\"true\"\n        class=\"h-6 my-2 w-60 bg-neutral rounded animate-pulse\"\n      ></div>\n    );\n  }\n\n  const key = props.querySummaryState.hasQuery\n    ? 'showing-results-of-with-query'\n    : 'showing-results-of';\n\n  const params = {\n    first: props.querySummaryState.firstResult.toLocaleString(),\n    last: props.querySummaryState.lastResult.toLocaleString(),\n    total: props.querySummaryState.total.toLocaleString(),\n    query: props.querySummaryState.query,\n    count: props.querySummaryState.lastResult,\n  };\n\n  if (props.querySummaryState.hasResults) {\n    if (props.querySummaryState.isLoading) {\n      props.setAriaLive(props.bindings.i18n.t('loading-results'));\n    } else {\n      props.setAriaLive(props.bindings.i18n.t(key, params));\n    }\n  }\n\n  const paramsWithHighlights = {\n    first: <WrapHighlight>{params.first}</WrapHighlight>,\n    last: <WrapHighlight>{params.last}</WrapHighlight>,\n    total: <WrapHighlight>{params.total}</WrapHighlight>,\n    query: <WrapHighlight part=\"query\">{params.query}</WrapHighlight>,\n  };\n\n  return (\n    <div class=\"text-on-background\" part=\"container\">\n      {props.querySummaryState.hasResults && (\n        <Fragment>\n          <LocalizedString\n            key={key}\n            bindings={props.bindings}\n            params={paramsWithHighlights}\n            count={params.count}\n          />\n          {props.querySummaryState.hasDuration && (\n            <span class=\"hidden\" part=\"duration\">\n              &nbsp;\n              <LocalizedString\n                key=\"in-seconds\"\n                bindings={props.bindings}\n                params={{\n                  count:\n                    props.querySummaryState.durationInSeconds.toLocaleString(),\n                }}\n              />\n            </span>\n          )}\n        </Fragment>\n      )}\n    </div>\n  );\n};\n"],"mappings":"+EAsBA,MAAMA,EAAsD,CAC1DC,EACAC,IAGEC,EAAA,QACEC,MAAM,YACNC,KAAM,YAAYJ,EAAMI,KAAO,IAAIJ,EAAMI,OAAS,MAEjDH,G,MAKMI,EAERL,IACH,GAAIA,EAAMM,kBAAkBC,SAAU,CACpC,M,CAEF,IAAKP,EAAMM,kBAAkBE,oBAAqB,CAChD,OACEN,EAAA,OACEE,KAAK,cAAa,cACN,OACZD,MAAM,kD,CAKZ,MAAMM,EAAMT,EAAMM,kBAAkBI,SAChC,gCACA,qBAEJ,MAAMC,EAAS,CACbC,MAAOZ,EAAMM,kBAAkBO,YAAYC,iBAC3CC,KAAMf,EAAMM,kBAAkBU,WAAWF,iBACzCG,MAAOjB,EAAMM,kBAAkBW,MAAMH,iBACrCI,MAAOlB,EAAMM,kBAAkBY,MAC/BC,MAAOnB,EAAMM,kBAAkBU,YAGjC,GAAIhB,EAAMM,kBAAkBc,WAAY,CACtC,GAAIpB,EAAMM,kBAAkBe,UAAW,CACrCrB,EAAMsB,YAAYtB,EAAMuB,SAASC,KAAKC,EAAE,mB,KACnC,CACLzB,EAAMsB,YAAYtB,EAAMuB,SAASC,KAAKC,EAAEhB,EAAKE,G,EAIjD,MAAMe,EAAuB,CAC3Bd,MAAOV,EAACH,EAAa,KAAEY,EAAOC,OAC9BG,KAAMb,EAACH,EAAa,KAAEY,EAAOI,MAC7BE,MAAOf,EAACH,EAAa,KAAEY,EAAOM,OAC9BC,MAAOhB,EAACH,EAAa,CAACK,KAAK,SAASO,EAAOO,QAG7C,OACEhB,EAAA,OAAKC,MAAM,qBAAqBC,KAAK,aAClCJ,EAAMM,kBAAkBc,YACvBlB,EAACyB,EAAQ,KACPzB,EAAC0B,EAAe,CACdnB,IAAKA,EACLc,SAAUvB,EAAMuB,SAChBZ,OAAQe,EACRP,MAAOR,EAAOQ,QAEfnB,EAAMM,kBAAkBuB,aACvB3B,EAAA,QAAMC,MAAM,SAASC,KAAK,Y,IAExBF,EAAC0B,EAAe,CACdnB,IAAI,aACJc,SAAUvB,EAAMuB,SAChBZ,OAAQ,CACNQ,MACEnB,EAAMM,kBAAkBwB,kBAAkBhB,sBAOpD,S"}