import{b as t}from"./p-92adf573.js";import{d as i}from"./p-a5540571.js";const s="atomic/accessibility/findAriaLive";function e(e,n=!1){function i(){const e=t(s,{});document.dispatchEvent(e);const{element:n}=e.detail;return n}function o(t){var s;null===(s=i())||void 0===s||s.updateMessage(e,t,n)}function r(){var t;null===(t=i())||void 0===t||t.registerRegion(e,n)}return(t,e)=>{const{componentWillRender:n}=t;Object.defineProperty(t,e,{set:t=>o(t)}),t.componentWillRender=function(){n&&n.call(this),r()}}}class n{constructor(t){this.component=t,this.doFocusAfterSearch=!1,this.doFocusOnNextTarget=!1,this.bindings=t.bindings,this.handleComponentRenderLoop()}setTarget(t){t&&(this.element=t,this.doFocusOnNextTarget&&(this.doFocusOnNextTarget=!1,this.focus()))}async focus(){var t,e;await i(),null===(t=this.element)||void 0===t||t.focus(),null===(e=this.onFocusCallback)||void 0===e||e.call(this)}focusAfterSearch(){return this.lastSearchId=this.bindings.store.getUniqueIDFromEngine(this.bindings.engine),this.doFocusAfterSearch=!0,new Promise((t=>this.onFocusCallback=t))}focusOnNextTarget(){return this.doFocusOnNextTarget=!0,new Promise((t=>this.onFocusCallback=t))}disableForCurrentSearch(){this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId&&(this.doFocusAfterSearch=!1)}handleComponentRenderLoop(){const t=this.component.componentDidRender;this.component.componentDidRender=()=>{if(t&&t.call(this.component),this.bindings&&this.doFocusAfterSearch&&this.bindings.store.getUniqueIDFromEngine(this.bindings.engine)!==this.lastSearchId&&(this.doFocusAfterSearch=!1,this.element)){const t=this.element;i().then((()=>{var e;t.focus(),null===(e=this.onFocusCallback)||void 0===e||e.call(this)}))}}}}function r(t){if("-1"===t.getAttribute("tabindex"))return!1;if(t.hasAttribute("tabindex"))return!0;if("true"===t.getAttribute("contentEditable"))return!0;switch(t.tagName){case"A":case"AREA":return t.hasAttribute("href");case"INPUT":case"SELECT":case"TEXTAREA":case"BUTTON":return!t.hasAttribute("disabled");case"IFRAME":return!0;default:return!1}}function*o(t){r(t)&&(yield t);let e=Array.from(t.children);t instanceof HTMLSlotElement?e=t.assignedElements():t.shadowRoot&&e.push(...Array.from(t.shadowRoot.children));for(const t of e)yield*o(t)}function a(t){var e;return null!==(e=o(t).next().value)&&void 0!==e?e:null}export{e as A,n as F,a as g};