{"version":3,"names":["PagerCommon","props","radioGroupName","randomID","focusOnFirstResultAndScrollToTop","async","_a","bindings","store","state","resultList","focusOnFirstResultAfterNextSearch","_b","eventEmitter","emit","selectPage","page","pager","nextButtonIcon","ArrowRightIcon","previousButtonIcon","ArrowLeftIcon","defaultIconStyle","renderPreviousButton","h","Button","style","ariaLabel","i18n","t","onClick","previousPage","part","disabled","pagerState","hasPreviousPage","class","icon","renderPages","pages","currentPages","role","map","renderPage","isSelected","isCurrentPage","parts","push","RadioButton","key","groupName","checked","ariaCurrent","onChecked","join","text","toLocaleString","language","ref","el","activePage","setTarget","undefined","renderNextButton","nextPage","hasNextPage","searchStatusState","hasError","Hidden","isAppLoaded","hasResults"],"sources":["src/components/common/pager/pager-common.tsx"],"sourcesContent":["import {EventEmitter, FunctionalComponent, h} from '@stencil/core';\nimport ArrowLeftIcon from '../../../images/arrow-left-rounded.svg';\nimport ArrowRightIcon from '../../../images/arrow-right-rounded.svg';\nimport {FocusTargetController} from '../../../utils/accessibility-utils';\nimport {randomID} from '../../../utils/utils';\nimport {Button} from '../button';\nimport {Hidden} from '../hidden';\nimport {AnyBindings} from '../interface/bindings';\nimport {RadioButton} from '../radio-button';\n\ninterface PagerProps {\n  bindings: AnyBindings;\n  searchStatusState: {\n    hasResults: boolean;\n    hasError: boolean;\n  };\n  pagerState: {\n    hasPreviousPage: boolean;\n    currentPages: number[];\n    hasNextPage: boolean;\n  };\n  eventEmitter: EventEmitter;\n  activePage: FocusTargetController | undefined;\n  pager: {\n    selectPage: (page: number) => void;\n    nextPage: () => void;\n    previousPage: () => void;\n    isCurrentPage: (page: number) => boolean;\n    state: {};\n  };\n  previousButtonIcon?: string;\n  nextButtonIcon?: string;\n}\n\nexport const PagerCommon: FunctionalComponent<PagerProps> = (props) => {\n  const radioGroupName = randomID('atomic-insight-pager-');\n\n  const focusOnFirstResultAndScrollToTop = async () => {\n    await props.bindings.store.state.resultList?.focusOnFirstResultAfterNextSearch();\n    props.eventEmitter?.emit();\n  };\n\n  const selectPage = async (page: number) => {\n    props.pager.selectPage(page);\n    focusOnFirstResultAndScrollToTop();\n  };\n\n  const nextButtonIcon = props.nextButtonIcon || ArrowRightIcon;\n  const previousButtonIcon = props.previousButtonIcon || ArrowLeftIcon;\n  const defaultIconStyle = 'w-5 align-middle';\n\n  const renderPreviousButton = () => {\n    return (\n      <Button\n        style=\"outline-primary\"\n        ariaLabel={props.bindings.i18n.t('previous')}\n        onClick={() => {\n          props.pager.previousPage();\n          focusOnFirstResultAndScrollToTop();\n        }}\n        part=\"previous-button\"\n        disabled={!props.pagerState.hasPreviousPage}\n        class=\"p-1 min-w-[2.5rem] min-h-[2.5rem]\"\n      >\n        <atomic-icon\n          icon={previousButtonIcon}\n          part=\"previous-button-icon\"\n          class={defaultIconStyle}\n        ></atomic-icon>\n      </Button>\n    );\n  };\n\n  const renderPages = () => {\n    const pages = props.pagerState.currentPages;\n    return (\n      <div part=\"page-buttons\" role=\"radiogroup\" class=\"contents\">\n        {pages.map(renderPage)}\n      </div>\n    );\n  };\n\n  const renderPage = (page: number) => {\n    const isSelected = props.pager.isCurrentPage(page);\n    const parts = ['page-button'];\n    if (isSelected) {\n      parts.push('active-page-button');\n    }\n    return (\n      <RadioButton\n        key={page}\n        groupName={radioGroupName}\n        style=\"outline-neutral\"\n        checked={isSelected}\n        ariaCurrent={isSelected ? 'page' : 'false'}\n        ariaLabel={props.bindings.i18n.t('page-number', {page})}\n        onChecked={() => selectPage(page)}\n        class=\"btn-page focus-visible:bg-neutral-light p-1 min-w-[2.5rem] min-h-[2.5rem]\"\n        part={parts.join(' ')}\n        text={page.toLocaleString(props.bindings.i18n.language)}\n        ref={isSelected ? (el) => props.activePage?.setTarget(el) : undefined}\n      ></RadioButton>\n    );\n  };\n\n  const renderNextButton = () => {\n    return (\n      <Button\n        style=\"outline-primary\"\n        ariaLabel={props.bindings.i18n.t('next')}\n        onClick={() => {\n          props.pager.nextPage();\n          focusOnFirstResultAndScrollToTop();\n        }}\n        part=\"next-button\"\n        disabled={!props.pagerState.hasNextPage}\n        class=\"p-1 min-w-[2.5rem] min-h-[2.5rem]\"\n      >\n        <atomic-icon\n          icon={nextButtonIcon}\n          part=\"next-button-icon\"\n          class={defaultIconStyle}\n        ></atomic-icon>\n      </Button>\n    );\n  };\n\n  if (props.searchStatusState.hasError) {\n    return <Hidden />;\n  }\n\n  if (\n    !props.bindings.store.isAppLoaded() ||\n    !props.searchStatusState.hasResults\n  ) {\n    return;\n  }\n\n  return (\n    <nav aria-label={props.bindings.i18n.t('pagination')}>\n      <div part=\"buttons\" class=\"flex gap-2 flex-wrap\">\n        {renderPreviousButton()}\n        {renderPages()}\n        {renderNextButton()}\n      </div>\n    </nav>\n  );\n};\n"],"mappings":"kQAkCaA,EAAgDC,IAC3D,MAAMC,EAAiBC,EAAS,yBAEhC,MAAMC,EAAmCC,U,eACjCC,EAAAL,EAAMM,SAASC,MAAMC,MAAMC,cAAU,MAAAJ,SAAA,SAAAA,EAAEK,sCAC7CC,EAAAX,EAAMY,gBAAY,MAAAD,SAAA,SAAAA,EAAEE,MAAM,EAG5B,MAAMC,EAAaV,MAAOW,IACxBf,EAAMgB,MAAMF,WAAWC,GACvBZ,GAAkC,EAGpC,MAAMc,EAAiBjB,EAAMiB,gBAAkBC,EAC/C,MAAMC,EAAqBnB,EAAMmB,oBAAsBC,EACvD,MAAMC,EAAmB,mBAEzB,MAAMC,EAAuB,IAEzBC,EAACC,EAAM,CACLC,MAAM,kBACNC,UAAW1B,EAAMM,SAASqB,KAAKC,EAAE,YACjCC,QAAS,KACP7B,EAAMgB,MAAMc,eACZ3B,GAAkC,EAEpC4B,KAAK,kBACLC,UAAWhC,EAAMiC,WAAWC,gBAC5BC,MAAM,qCAENZ,EAAA,eACEa,KAAMjB,EACNY,KAAK,uBACLI,MAAOd,KAMf,MAAMgB,EAAc,KAClB,MAAMC,EAAQtC,EAAMiC,WAAWM,aAC/B,OACEhB,EAAA,OAAKQ,KAAK,eAAeS,KAAK,aAAaL,MAAM,YAC9CG,EAAMG,IAAIC,GACP,EAIV,MAAMA,EAAc3B,IAClB,MAAM4B,EAAa3C,EAAMgB,MAAM4B,cAAc7B,GAC7C,MAAM8B,EAAQ,CAAC,eACf,GAAIF,EAAY,CACdE,EAAMC,KAAK,qB,CAEb,OACEvB,EAACwB,EAAW,CACVC,IAAKjC,EACLkC,UAAWhD,EACXwB,MAAM,kBACNyB,QAASP,EACTQ,YAAaR,EAAa,OAAS,QACnCjB,UAAW1B,EAAMM,SAASqB,KAAKC,EAAE,cAAe,CAACb,SACjDqC,UAAW,IAAMtC,EAAWC,GAC5BoB,MAAM,4EACNJ,KAAMc,EAAMQ,KAAK,KACjBC,KAAMvC,EAAKwC,eAAevD,EAAMM,SAASqB,KAAK6B,UAC9CC,IAAKd,EAAce,IAAE,IAAArD,EAAK,OAAAA,EAAAL,EAAM2D,cAAU,MAAAtD,SAAA,SAAAA,EAAEuD,UAAUF,EAAG,EAAGG,WAC/C,EAInB,MAAMC,EAAmB,IAErBvC,EAACC,EAAM,CACLC,MAAM,kBACNC,UAAW1B,EAAMM,SAASqB,KAAKC,EAAE,QACjCC,QAAS,KACP7B,EAAMgB,MAAM+C,WACZ5D,GAAkC,EAEpC4B,KAAK,cACLC,UAAWhC,EAAMiC,WAAW+B,YAC5B7B,MAAM,qCAENZ,EAAA,eACEa,KAAMnB,EACNc,KAAK,mBACLI,MAAOd,KAMf,GAAIrB,EAAMiE,kBAAkBC,SAAU,CACpC,OAAO3C,EAAC4C,EAAM,K,CAGhB,IACGnE,EAAMM,SAASC,MAAM6D,gBACrBpE,EAAMiE,kBAAkBI,WACzB,CACA,M,CAGF,OACE9C,EAAA,oBAAiBvB,EAAMM,SAASqB,KAAKC,EAAE,eACrCL,EAAA,OAAKQ,KAAK,UAAUI,MAAM,wBACvBb,IACAe,IACAyB,KAEC,S"}