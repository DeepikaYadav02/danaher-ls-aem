import{h as e}from"./p-591772f1.js";import{H as t}from"./p-a52ecd94.js";import{H as s}from"./p-a096f4ab.js";import{B as r}from"./p-59a8a3f5.js";import{R as i}from"./p-e503a21c.js";const n='<svg fill="none" width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6.5" stroke="currentColor" stroke-linecap="round"/><path d="M4 7.07692L6 9L10 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>',o='<svg fill="none" width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><circle cx="7" cy="7" r="6.5" stroke="currentColor" stroke-linecap="round"/><path d="M5 9L9 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 9L5 5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>',a=t=>{const s="feedback-inquiry-"+t.id,a="feedback-thank-you-"+t.id,p="feedback-options-"+t.id,l=()=>e("span",{id:a,part:"feedback-thank-you",class:"inline-flex"},t.i18n.t("smart-snippet-feedback-thanks")),d=()=>e(r,{part:"feedback-explain-why-button",style:"text-primary",onClick:()=>t.onPressExplainWhy(),ref:e=>{var i;return null===(i=t.explainWhyRef)||void 0===i?void 0:i.call(t,e)}},t.i18n.t("smart-snippet-feedback-explain-why"));return e("div",{part:"feedback-banner",class:"flex flex-wrap items-center gap-4 text-sm leading-4"},e("div",{part:"feedback-inquiry-and-buttons",role:"radiogroup","aria-labelledby":s,class:"inline-flex flex-wrap gap-4"},e((()=>e("span",{id:s,part:"feedback-inquiry",class:"shrink-0"},t.i18n.t("smart-snippet-feedback-inquiry"))),null),e((()=>e("div",{part:"feedback-buttons",class:"flex gap-x-4"},e("label",{part:"feedback-like-button",class:"flex items-center gap-x-1.5 "+(t.liked?"text-success":"cursor-pointer hover:underline")},e("atomic-icon",{icon:n,class:"w-3.5"}),e(i,{groupName:p,text:t.i18n.t("yes"),checked:t.liked,onChecked:()=>t.onLike(),class:"text-inherit cursor-inherit"})),e("label",{part:"feedback-dislike-button",class:"flex items-center gap-x-1.5 "+(t.disliked?"text-error":"cursor-pointer hover:underline")},e("atomic-icon",{icon:o,class:"w-3.5"}),e(i,{groupName:p,text:t.i18n.t("no"),checked:t.disliked,onChecked:()=>t.onDislike(),class:"text-inherit cursor-inherit"})))),null)),e((({visible:i})=>i?e("div",{part:"feedback-thank-you-wrapper",class:"flex flex-wrap gap-1"},e(l,null),t.disliked&&!t.feedbackSent?e(d,null):[]):[]),{visible:t.liked||t.disliked}))};class l{constructor(e){this.props=e}get style(){var e;const t=null===(e=this.props.getHost().querySelector("template"))||void 0===e?void 0:e.content.querySelector("style");return t?t.innerHTML:this.props.getSnippetStyle()}loadModal(){if(this.props.getModalRef())return;const e=document.createElement(this.props.modalTagName);e.addEventListener("feedbackSent",(()=>{this.props.setFeedbackSent(!0)})),this.props.setModalRef(e),this.props.getHost().insertAdjacentElement("beforebegin",e)}renderQuestion(){const i=this.props.getHeadingLevel();return e(t,{level:i?i+1:0,class:"text-xl font-bold",part:"question"},this.props.getSmartSnippetState().question)}canSnippetCollapse(){var e,t;return void 0!==(null===(t=(e=this.props).getSnippetMaximumHeight)||void 0===t?void 0:t.call(e))}renderContent(){const t=this.props.getSmartSnippetState();return this.canSnippetCollapse()?e("div",{part:"truncated-answer"},e("atomic-smart-snippet-answer",{exportparts:"answer",part:"body",htmlContent:t.answer,innerStyle:this.style})):e("atomic-smart-snippet-expandable-answer",{exportparts:"answer,show-more-button,show-less-button,truncated-answer",part:"body",htmlContent:t.answer,expanded:t.expanded,maximumHeight:this.props.getMaximumHeight(),collapsedHeight:this.props.getCollapsedHeight(),snippetStyle:this.style,onExpand:()=>this.props.getSmartSnippet().expand(),onCollapse:()=>this.props.getSmartSnippet().collapse()})}renderFeedbackBanner(){const t=this.props.getSmartSnippetState();return e(a,{i18n:this.props.getBindings().i18n,id:this.props.id,liked:t.liked,disliked:t.disliked,feedbackSent:this.props.getFeedbackSent(),onLike:()=>this.props.getSmartSnippet().like(),onDislike:()=>{this.loadModal(),this.props.getSmartSnippet().dislike()},onPressExplainWhy:()=>this.props.getModalRef().isOpen=!0,explainWhyRef:e=>{this.props.getModalRef()&&(this.props.getModalRef().source=e)}})}hideDuringRender(e){const t=this.props.getHost();t.style.visibility=e?"hidden":"",t.style.position=e?"absolute":""}render(){var i,r,n,o,a,p,l;if(!this.props.getSmartSnippetState().answerFound)return e(s,null);this.props.getHost().classList.contains("atomic-hidden")&&this.hideDuringRender(!0);const d=this.props.getSmartSnippetState().source;return e("aside",null,e(t,{level:null!==(i=this.props.getHeadingLevel())&&void 0!==i?i:0,class:"accessibility-only"},this.props.getBindings().i18n.t("smart-snippet")),e("article",{class:"bg-background border border-neutral rounded-lg p-6 pb-4 text-on-background",part:"smart-snippet"},e("atomic-smart-snippet-collapse-wrapper",{maximumHeight:null===(n=(r=this.props).getSnippetMaximumHeight)||void 0===n?void 0:n.call(r),collapsedHeight:null===(a=(o=this.props).getSnippetCollapsedHeight)||void 0===a?void 0:a.call(o)},this.renderQuestion(),this.renderContent(),e("footer",{part:"footer","aria-label":this.props.getBindings().i18n.t("smart-snippet-source")},d&&e("atomic-smart-snippet-source",{anchorAttributes:null===(l=(p=this.props).getSourceAnchorAttributes)||void 0===l?void 0:l.call(p),source:d,onSelectSource:this.props.getSmartSnippet().selectSource,onBeginDelayedSelectSource:this.props.getSmartSnippet().beginDelayedSelectSource,onCancelPendingSelectSource:this.props.getSmartSnippet().cancelPendingSelectSource}),this.renderFeedbackBanner()))))}}export{l as S};