/*! For license information please see p-d2151deb.js.LICENSE.txt */
var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,a=e=>t(e,"__esModule",{value:!0}),o=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)((function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')})),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,r)=>{for(var n in a(e),r)t(e,n,{get:r[n],enumerable:!0})},l=(e,a,i)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let o of n(a))!u.call(e,o)&&"default"!==o&&t(e,o,{get:()=>a[o],enumerable:!(i=r(a,o))||i.enumerable});return e},d=r=>l(a(t(null!=r?e(i(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),f=s(((e,t)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})),h=s(((e,t)=>{var r=f().default;t.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports})),v=s(((e,t)=>{var r=f().default,n=h();t.exports=function(e){var t=n(e,"string");return"symbol"===r(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports})),p=s(((e,t)=>{var r=v();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports})),g=s(((e,t)=>{var r=p();function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},t.exports.__esModule=!0,t.exports.default=t.exports})),y=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(g());function r(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var n="function"==typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function o(e,t,a){var s;if("function"==typeof t&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error(r(0));if("function"==typeof t&&void 0===a&&(a=t,t=void 0),void 0!==a){if("function"!=typeof a)throw new Error(r(1));return a(o)(e,t)}if("function"!=typeof e)throw new Error(r(2));var u=e,l=t,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function h(){if(f)throw new Error(r(3));return l}function g(e){if("function"!=typeof e)throw new Error(r(4));if(f)throw new Error(r(5));var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error(r(6));t=!1,p();var n=d.indexOf(e);d.splice(n,1),c=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(r(7));if(void 0===e.type)throw new Error(r(8));if(f)throw new Error(r(9));try{f=!0,l=u(l,e)}finally{f=!1}for(var t=c=d,n=0;n<t.length;n++)(0,t[n])();return e}return v({type:i.INIT}),s={dispatch:v,subscribe:g,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(r(10));u=e,v({type:i.REPLACE})}},s[n]=function(){var e,t=g;return e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(r(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}},e[n]=function(){return this},e},s}var s=o;function u(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw new Error(r(12));if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error(r(13))}))}function l(e,t){return function(){return t(e.apply(this,arguments))}}function c(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}e.__DO_NOT_USE__ActionTypes=i,e.applyMiddleware=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(e){return function(){var a=e.apply(void 0,arguments),i=function(){throw new Error(r(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=n.map((function(e){return e(o)}));return i=c.apply(void 0,s)(a.dispatch),t.default(t.default({},a),{},{dispatch:i})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error(r(16));var n={};for(var a in e){var i=e[a];"function"==typeof i&&(n[a]=l(i,t))}return n},e.combineReducers=function(e){for(var t=Object.keys(e),n={},a=0;a<t.length;a++){var i=t[a];"function"==typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{u(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var a=!1,i={},u=0;u<s.length;u++){var l=s[u],c=n[l],d=e[l],f=c(d,t);if(void 0===f)throw new Error(r(14));i[l]=f,a=a||f!==d}return(a=a||s.length!==Object.keys(e).length)?i:e}},e.compose=c,e.createStore=o,e.legacy_createStore=s})),m=s(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=new Array(i);o[0]=a(e);for(var s=1;s<i;s++)o[s]=a(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var u=t.length;if(0===u)return e;for(var l="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=u||null==t[c])break;d<p&&(l+=e.slice(d,p)),l+=Number(t[c]),d=p+2,p++;break;case 105:if(c>=u||null==t[c])break;d<p&&(l+=e.slice(d,p)),l+=Math.floor(Number(t[c])),d=p+2,p++;break;case 79:case 111:case 106:if(c>=u||void 0===t[c])break;d<p&&(l+=e.slice(d,p));var h=typeof t[c];if("string"===h){l+="'"+t[c]+"'",d=p+2,p++;break}if("function"===h){l+=t[c].name||"<anonymous>",d=p+2,p++;break}l+=a(t[c]),d=p+2,p++;break;case 115:if(c>=u)break;d<p&&(l+=e.slice(d,p)),l+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(l+=e.slice(d,p)),l+="%",d=p+2,p++,c--}++c}++p}return-1===d?e:(d<f&&(l+=e.slice(d)),l)}})),w=s(((e,t)=>{var r=m();t.exports=d;var n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},a={mapHttpRequest:w,mapHttpResponse:w,wrapRequestSerializer:I,wrapResponseSerializer:I,wrapErrorSerializer:I,req:w,res:w,err:S,errWithCause:S};function i(e,t){return"silent"===e?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(e,t){let r={logger:t,parent:e[s]};t[s]=r}function c(e,t,r){let a={};t.forEach((e=>{a[e]=r[e]?r[e]:n[e]||n[u[e]||"log"]||q})),e[o]=a}function d(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},o=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,a),s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let u=Object.keys(e.customLevels||{}),d=["error","fatal","warn","info","debug","trace"].concat(u);"function"==typeof r&&d.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let h=e.level||"info",g=Object.create(r);g.log||(g.log=q),c(g,d,r),l({},g),Object.defineProperty(g,"levelVal",{get:function(){return i(this.level,this)}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,p(this,m,g,"error"),p(this,m,g,"fatal"),p(this,m,g,"warn"),p(this,m,g,"info"),p(this,m,g,"debug"),p(this,m,g,"trace"),u.forEach((e=>{p(this,m,g,e)}))}});let m={transmit:t,serialize:o,asObject:e.browser.asObject,levels:d,timestamp:b(e)};return g.levels=f(e),g.level=h,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=q,g.serializers=a,g._serialize=o,g._stdErrSerialize=s,g.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let i=n.serializers;if(o&&i){var s=Object.assign({},a,i),u=!0===e.browser.serialize?Object.keys(s):o;delete r.serializers,v([r],u,s,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.bindings=r,s&&(this.serializers=s,this._serialize=u),t&&(this._logEvent=y([].concat(e._logEvent.bindings,r)))}c.prototype=this;let d=new c(this);return l(this,d),d.level=this.level,d},t&&(g._logEvent=y()),g}function f(e){let t=e.customLevels||{},r=Object.assign({},d.levels.values,t),n=Object.assign({},d.levels.labels,function(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}(t));return{values:r,labels:n}}function p(e,t,r,n){if(e[n]=i(e.level,r)>i(n,r)?q:r[o][n],!t.transmit&&e[n]===q)return;e[n]=h(e,t,r,n);let a=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[s];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==a.length&&(e[n]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(a,e[n]))}function h(e,t,r,a){return function(o){return function(){let s=t.timestamp(),u=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var c=0;c<u.length;c++)u[c]=arguments[c];if(t.serialize&&!t.asObject&&v(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?o.call(l,g(this,a,u,s)):o.apply(l,u),t.transmit){let n=t.transmit.level||e._level,o=r.levels.values[n],l=r.levels.values[a];if(l<o)return;!function(e,t,r){let n=t.send,a=t.ts,i=t.methodLevel,o=t.methodValue,s=t.val,u=e._logEvent.bindings;v(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=o,n(i,e._logEvent,s),e._logEvent=y(u)}(this,{ts:s,methodLevel:a,methodValue:l,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:i(e._level,r)},u)}}}(e[o][a])}function g(e,t,n,a){e._serialize&&v(n,e._serialize,e.serializers,e._stdErrSerialize);let i=n.slice(),o=i[0],s={};a&&(s.time=a),s.level=e.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==o&&"object"==typeof o){for(;u--&&"object"==typeof i[0];)Object.assign(s,i.shift());o=i.length?r(i.shift(),i):void 0}else"string"==typeof o&&(o=r(i.shift(),i));return void 0!==o&&(s.msg=o),s}function v(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=d.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function y(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function S(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function b(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?O:k}function w(){return{}}function I(e){return e}function q(){}function O(){return!1}function k(){return Date.now()}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=a,d.stdTimeFunctions=Object.assign({},{nullTime:O,epochTime:k,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=d,t.exports.pino=d})),b=s(((e,t)=>{var r=Function.prototype,n=Object.prototype,a=r.toString,i=n.hasOwnProperty,o=a.call(Object),s=n.toString,u=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);t.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=s.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch{}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=i.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&a.call(r)==o}})),S=s((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.applyMiddleware.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))((function(){var e=[],t=[];return{getState:function(){return n(a)?a(e):a},getActions:function(){return e},dispatch:function(n){if(!(0,r.default)(n))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===n.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(n));e.push(n);for(var a=0;a<t.length;a++)t[a]();return n},clearActions:function(){e=[]},subscribe:function(e){return n(e)&&t.push(e),function(){var r=t.indexOf(e);r<0||t.splice(r,1)}},replaceReducer:function(e){if(!n(e))throw new Error("Expected the nextReducer to be a function.")}}}));return i()}};var t=y(),r=function(e){return e&&e.__esModule?e:{default:e}}(b()),n=function(e){return"function"==typeof e}})),I=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs=n()}(e,(function(){var e=6e4,t=36e5,r="millisecond",n="second",a="minute",i="hour",o="day",s="week",u="month",l="quarter",c="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,u),i=r-a<0,o=t.clone().add(n+(i?-1:1),u);return+(-(n+(r-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:c,w:s,d:o,D:d,h:i,m:a,s:n,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=g;var b="$isDayjsObject",w=function(e){return e instanceof k||!(!e||!e[b])},I=function e(t,r,n){var a;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();S[i]&&(a=i),r&&(S[i]=r,a=i);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,a=s}return!n&&a&&(y=a),a||!n&&y},q=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new k(r)},O=m;O.l=I,O.i=w,O.w=function(e,t){return q(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var k=function(){function g(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return O},v.isValid=function(){return this.$d.toString()!==f},v.isSame=function(e,t){var r=q(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return q(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<q(e)},v.$g=function(e,t,r){return O.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,l=!!O.u(t)||t,f=O.p(e),p=function(e,t){var n=O.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return l?n:n.endOf(o)},h=function(e,t){return O.w(r.toDate()[e].apply(r.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,v=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case c:return l?p(1,0):p(31,11);case u:return l?p(1,v):p(0,v+1);case s:var S=this.$locale().weekStart||0,b=(g<S?g+7:g)-S;return p(l?m-b:m+(6-b),v);case o:case d:return h(y+"Hours",0);case i:return h(y+"Minutes",1);case a:return h(y+"Seconds",2);case n:return h(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var s,l=O.p(e),f="set"+(this.$u?"UTC":""),p=(s={},s[o]=f+"Date",s[d]=f+"Date",s[u]=f+"Month",s[c]=f+"FullYear",s[i]=f+"Hours",s[a]=f+"Minutes",s[n]=f+"Seconds",s[r]=f+"Milliseconds",s)[l],h=l===o?this.$D+(t-this.$W):t;if(l===u||l===c){var g=this.clone().set(d,1);g.$d[p](h),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[O.p(e)]()},v.add=function(r,l){var d,f=this;r=Number(r);var p=O.p(l),h=function(e){var t=q(f);return O.w(t.date(t.date()+Math.round(e*r)),f)};if(p===u)return this.set(u,this.$M+r);if(p===c)return this.set(c,this.$y+r);if(p===o)return h(1);if(p===s)return h(7);var g=(d={},d[a]=e,d[i]=t,d[n]=1e3,d)[p]||1,v=this.$d.getTime()+r*g;return O.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=O.z(this),i=this.$H,o=this.$m,s=this.$M,u=r.weekdays,l=r.months,c=r.meridiem,d=function(e,r,a,i){return e&&(e[r]||e(t,n))||a[r].slice(0,i)},p=function(e){return O.s(i%12||12,e,"0")},g=c||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(h,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return O.s(t.$y,4,"0");case"M":return s+1;case"MM":return O.s(s+1,2,"0");case"MMM":return d(r.monthsShort,s,l,3);case"MMMM":return d(l,s);case"D":return t.$D;case"DD":return O.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(i);case"HH":return O.s(i,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(i,o,!0);case"A":return g(i,o,!1);case"m":return String(o);case"mm":return O.s(o,2,"0");case"s":return String(t.$s);case"ss":return O.s(t.$s,2,"0");case"SSS":return O.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,f){var p,h=this,g=O.p(d),v=q(r),m=(v.utcOffset()-this.utcOffset())*e,y=this-v,S=function(){return O.m(h,v)};switch(g){case c:p=S()/12;break;case u:p=S();break;case l:p=S()/3;break;case s:p=(y-m)/6048e5;break;case o:p=(y-m)/864e5;break;case i:p=y/t;break;case a:p=y/e;break;case n:p=y/1e3;break;default:p=y}return f?p:O.a(p)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return S[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=I(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return O.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),A=k.prototype;return q.prototype=A,[["$ms",r],["$s",n],["$m",a],["$H",i],["$W",o],["$M",u],["$y",c],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),q.extend=function(e,t){return e.$i||(e(t,k,q),e.$i=!0),q},q.locale=I,q.isDayjs=w,q.unix=function(e){return q(1e3*e)},q.en=S[y],q.Ls=S,q.p={},q}))})),O=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_timezone=n()}(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,o=function(e,r,n){void 0===n&&(n={});var a=new Date(e),i=function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",a=e+"|"+n,i=t[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[a]=i),i}(r,n);return i.formatToParts(a)},s=function(t,r){for(var n=o(t,r),i=[],s=0;s<n.length;s+=1){var u=n[s],l=u.type,c=u.value,d=e[l];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],p=24===f?0:f,h=i[0]+"-"+i[1]+"-"+i[2]+" "+p+":"+i[4]+":"+i[5]+":000",g=+t;return(a.utc(h).valueOf()-(g-=g%1e3))/6e4},u=n.prototype;u.tz=function(e,t){void 0===e&&(e=i);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),u=a(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var l=u.utcOffset();u=u.add(r-l,"minute")}return u.$x.$timezone=e,u},u.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var l=u.startOf;u.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return l.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return l.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,o=r||t||i,u=s(+a(),o);if("string"!=typeof e)return a(e).tz(o);var l=function(e,t,r){var n=e-60*t*1e3,a=s(n,r);if(t===a)return[n,t];var i=s(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),u,o),c=l[0],d=l[1],f=a(c).utcOffset(d);return f.$x.$timezone=o,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}}))})),q=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_utc=n()}(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(e){return new a({date:e,utc:!0,args:arguments})},o.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var l=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?l.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n),null===n))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(a)return s.$offset=o,s.$u=0===n,s;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+u,e)).$offset=o,s.$x.$localOffset=u}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}}))})),A=s(((e,t)=>{t.exports=fetch})),j=s((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),k=s((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),x=s((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),R=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=k(),r=x();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),C=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=R(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),F=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):a(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t(a,e),a.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(a.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),a}(C().Delay);e.SkipFirstDelay=a})),E=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(C().Delay);e.AlwaysDelay=r})),M=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=F(),r=E();function n(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}e.DelayFactory=function(e,t){var r=n(e);return r.setAttemptNumber(t),r}})),D=s((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):a(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=j(),a=M();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(a),[4,new i(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),T=s(((e,t)=>{function r(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");if((e=(e=`${e}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",n=0,a=0;for(let i=0;i<e.length;i++)n<<=6,n|=r(e[i]),a+=6,24===a&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=a=0);return 12===a?(n>>=4,t+=String.fromCharCode(n)):18===a&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n)),t}})),P=s(((e,t)=>{function r(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let n="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=63&e.charCodeAt(t+2));for(let e=0;e<a.length;e++)void 0===a[e]?n+="=":n+=r(a[e])}return n}})),U=s(((e,t)=>{var r=T(),n=P();t.exports={atob:r,btoa:n}})),V=s(((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController})),$=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_quarterOfYear=n()}(e,(function(){var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var o=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var s=this.quarter()-1;return i?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}))})),L=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_customParseFormat=n()}(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},o=function(e){return(e=+e)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],l=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[a,function(e){this.afternoon=c(e,!1)}],a:[a,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[a,function(e){var t=i.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,s("month")],MM:[r,s("month")],MMM:[a,function(e){var t=l("months"),r=(l("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[a,function(e){var t=l("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function f(r){var n,a;n=r,a=i&&i.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,u=0;u<s;u+=1){var l=o[u],c=d[l],f=c&&c[0],p=c&&c[1];o[u]=p?{regex:f,parser:p}:l.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var a=o[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,u=a.parser,l=e.slice(n),c=i.exec(l)[0];u.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var n=t.prototype,a=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var s=o[1];if("string"==typeof s){var u=!0===o[2],l=!0===o[3],c=u||l,d=o[2];l&&(d=o[2]),i=this.$locale(),!u&&d&&(i=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var n=f(t)(e),a=n.year,i=n.month,o=n.day,s=n.hours,u=n.minutes,l=n.seconds,c=n.milliseconds,d=n.zone,p=new Date,h=o||(a||i?1:p.getDate()),g=a||p.getFullYear(),v=0;a&&!i||(v=i>0?i-1:p.getMonth());var m=s||0,y=u||0,S=l||0,b=c||0;return d?new Date(Date.UTC(g,v,h,m,y,S,b+60*d.offset*1e3)):r?new Date(Date.UTC(g,v,h,m,y,S,b)):new Date(g,v,h,m,y,S,b)}catch{return new Date("")}}(t,s,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),c&&t!=this.format(s)&&(this.$d=new Date("")),i={}}else if(s instanceof Array)for(var p=s.length,h=1;h<=p;h+=1){o[1]=s[h-1];var g=r.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}h===p&&(this.$d=new Date(""))}else a.call(this,e)}}}))})),_=s(((e,t)=>{t.exports=()=>document.cookie.includes("Coveo-Pendagron")})),N=()=>global.crypto,Q=()=>{"undefined"==typeof window&&(N()||(global.crypto=o("crypto")),!N().getRandomValues&&N().webcrypto&&(global.crypto.getRandomValues=N().webcrypto.getRandomValues.bind(N().webcrypto)))},B={};function z(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function H(e){return!!e&&!!e[Pe]}function Y(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Ue}(e)||Array.isArray(e)||!!e[Te]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Te])||te(e)||re(e))}function J(e){return H(e)||z(23,e),e[Pe].t}function W(e,t,r){void 0===r&&(r=!1),0===G(e)?(r?Object.keys:Ve)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function G(e){var t=e[Pe];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:te(e)?2:re(e)?3:0}function K(e,t){return 2===G(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Z(e,t){return 2===G(e)?e.get(t):e[t]}function X(e,t,r){var n=G(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function ee(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function te(e){return Fe&&e instanceof Map}function re(e){return Ee&&e instanceof Set}function ne(e){return e.o||e.t}function ie(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=$e(e);delete t[Pe];for(var r=Ve(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function ue(e,t){return void 0===t&&(t=!1),oe(e)||H(e)||!Y(e)||(G(e)>1&&(e.set=e.add=e.clear=e.delete=ae),Object.freeze(e),t&&W(e,(function(e,t){return ue(t,!0)}),!0)),e}function ae(){z(2)}function oe(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function se(e){var t=Le[e];return t||z(18,e),t}function ce(e,t){Le[e]||(Le[e]=t)}function le(){return Re}function de(e,t){t&&(se("Patches"),e.u=[],e.s=[],e.v=t)}function fe(e){he(e),e.p.forEach(pe),e.p=null}function he(e){e===Re&&(Re=e.l)}function ve(e){return Re={p:[],l:Re,h:e,m:!0,_:0}}function pe(e){var t=e[Pe];0===t.i||1===t.i?t.j():t.g=!0}function ge(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||se("ES5").S(t,e,n),n?(r[Pe].P&&(fe(t),z(4)),Y(e)&&(e=ye(t,e),t.l||we(t,e)),t.u&&se("Patches").M(r[Pe].t,e,t.u,t.s)):e=ye(t,r,[]),fe(t),t.u&&t.v(t.u,t.s),e!==De?e:void 0}function ye(e,t,r){if(oe(t))return t;var n=t[Pe];if(!n)return W(t,(function(a,i){return me(e,n,t,a,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return we(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=ie(n.k):n.o,i=a,o=!1;3===n.i&&(i=new Set(a),a.clear(),o=!0),W(i,(function(t,i){return me(e,n,a,t,i,r,o)})),we(e,a,!1),r&&e.u&&se("Patches").N(n,r,e.u,e.s)}return n.o}function me(e,t,r,n,a,i,o){if(H(a)){var s=ye(e,a,i&&t&&3!==t.i&&!K(t.R,n)?i.concat(n):void 0);if(X(r,n,s),!H(s))return;e.m=!1}else o&&r.add(a);if(Y(a)&&!oe(a)){if(!e.h.D&&e._<1)return;ye(e,a),t&&t.A.l||we(e,a)}}function we(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&ue(t,r)}function be(e,t){var r=e[Pe];return(r?ne(r):e)[t]}function Se(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Ie(e){e.P||(e.P=!0,e.l&&Ie(e.l))}function Oe(e){e.o||(e.o=ie(e.t))}function qe(e,t,r){var n=te(t)?se("MapSet").F(t,r):re(t)?se("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:le(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,i=_e;r&&(a=[n],i=Ne);var o=Proxy.revocable(a,i),s=o.revoke,u=o.proxy;return n.k=u,n.j=s,u}(t,r):se("ES5").J(t,r);return(r?r.A:le()).p.push(n),n}function Ae(e){return H(e)||z(22,e),function e(t){if(!Y(t))return t;var r,n=t[Pe],a=G(t);if(n){if(!n.P&&(n.i<4||!se("ES5").K(n)))return n.t;n.I=!0,r=je(t,a),n.I=!1}else r=je(t,a);return W(r,(function(t,a){n&&Z(n.t,t)===a||X(r,t,e(a))})),3===a?new Set(r):r}(e)}function je(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ie(e)}function ke(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[Pe];return _e.get(t,e)},set:function(t){var r=this[Pe];_e.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][Pe];if(!a.P)switch(a.i){case 5:n(a)&&Ie(a);break;case 4:r(a)&&Ie(a)}}}function r(e){for(var t=e.t,r=e.k,n=Ve(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==Pe){var o=t[i];if(void 0===o&&!K(t,i))return!0;var s=r[i],u=s&&s[Pe];if(u?u.t!==o:!ee(s,o))return!0}}var l=!!t[Pe];return n.length!==Ve(t).length+(l?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var a={};ce("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=$e(r);delete i[Pe];for(var o=Ve(i),s=0;s<o.length;s++){var u=o[s];i[u]=e(u,t||!!i[u].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:le(),P:!1,I:!1,R:{},l:r,t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,Pe,{value:i,writable:!0}),a},S:function(e,r,a){a?H(r)&&r[Pe].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[Pe];if(r){var a=r.t,i=r.k,o=r.R,s=r.i;if(4===s)W(i,(function(t){t!==Pe&&(void 0!==a[t]||K(a,t)?o[t]||e(i[t]):(o[t]=!0,Ie(r)))})),W(a,(function(e){void 0!==i[e]||K(i,e)||(o[e]=!1,Ie(r))}));else if(5===s){if(n(r)&&(Ie(r),o.length=!0),i.length<a.length)for(var u=i.length;u<a.length;u++)o[u]=!1;else for(var l=a.length;l<i.length;l++)o[l]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)i.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}c(B,{EnhancerArray:()=>Et,MiddlewareArray:()=>Ft,SHOULD_AUTOBATCH:()=>on,TaskAbortError:()=>$r,addListener:()=>tn,autoBatchEnhancer:()=>hn,clearAllListeners:()=>rn,configureStore:()=>Bt,createAction:()=>qt,createActionCreatorInvariantMiddleware:()=>Ct,createAsyncThunk:()=>hr,createDraftSafeSelector:()=>bt,createEntityAdapter:()=>ar,createImmutableStateInvariantMiddleware:()=>Tt,createListenerMiddleware:()=>an,createNextState:()=>He,createReducer:()=>Yt,createSelector:()=>tt,createSerializableStateInvariantMiddleware:()=>$t,createSlice:()=>Wt,current:()=>Ae,findNonSerializableValue:()=>Ut,freeze:()=>ue,getDefaultMiddleware:()=>Nt,getType:()=>Rt,isAction:()=>At,isActionCreator:()=>jt,isAllOf:()=>mr,isAnyOf:()=>yr,isAsyncThunkAction:()=>Ar,isDraft:()=>H,isFluxStandardAction:()=>kt,isFulfilled:()=>qr,isImmutableDefault:()=>Dt,isPending:()=>Sr,isPlain:()=>Pt,isPlainObject:()=>It,isRejected:()=>Ir,isRejectedWithValue:()=>Or,miniSerializeError:()=>fr,nanoid:()=>sr,original:()=>J,prepareAutoBatched:()=>sn,removeListener:()=>nn,unwrapResult:()=>vr});var xe,Re,Ce="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Fe="undefined"!=typeof Map,Ee="undefined"!=typeof Set,Me="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,De=Ce?Symbol.for("immer-nothing"):((xe={})["immer-nothing"]=!0,xe),Te=Ce?Symbol.for("immer-draftable"):"__$immer_draftable",Pe=Ce?Symbol.for("immer-state"):"__$immer_state",Ue=""+Object.prototype.constructor,Ve="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,$e=Object.getOwnPropertyDescriptors||function(e){var t={};return Ve(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Le={},_e={get:function(e,t){if(t===Pe)return e;var r=ne(e);if(!K(r,t))return function(e,t,r){var n,a=Se(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!Y(n)?n:n===be(e.t,t)?(Oe(e),e.o[t]=qe(e.A.h,n,e)):n},has:function(e,t){return t in ne(e)},ownKeys:function(e){return Reflect.ownKeys(ne(e))},set:function(e,t,r){var n=Se(ne(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=be(ne(e),t),i=null==a?void 0:a[Pe];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(ee(r,a)&&(void 0!==r||K(e.t,t)))return!0;Oe(e),Ie(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==be(e.t,t)||t in e.t?(e.R[t]=!1,Oe(e),Ie(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=ne(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){z(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){z(12)}},Ne={};W(_e,(function(e,t){Ne[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ne.deleteProperty=function(e,t){return Ne.set.call(this,e,t,void 0)},Ne.set=function(e,t,r){return _e.set.call(this,e[0],t,r,e[0])};var Qe=function(){function e(e){var t=this;this.O=Me,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var a=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&z(6),void 0!==n&&"function"!=typeof n&&z(7),Y(e)){var s=ve(t),u=qe(t,e,void 0),l=!0;try{o=r(u),l=!1}finally{l?fe(s):he(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return de(s,n),ge(e,s)}),(function(e){throw fe(s),e})):(de(s,n),ge(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===De&&(o=void 0),t.D&&ue(o,!0),n){var c=[],d=[];se("Patches").M(e,o,c,d),n(c,d)}return o}z(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(a))}))};var n,a,i=t.produce(e,r,(function(e,t){n=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,a]})):[i,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Y(e)||z(8),H(e)&&(e=Ae(e));var t=ve(this),r=qe(this,e,void 0);return r[Pe].C=!0,he(t),r},t.finishDraft=function(e,t){var r=(e&&e[Pe]).A;return de(r,t),ge(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Me&&z(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=se("Patches").$;return H(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),Be=new Qe,ze=Be.produce;Be.produceWithPatches.bind(Be),Be.setAutoFreeze.bind(Be),Be.setUseProxies.bind(Be),Be.applyPatches.bind(Be),Be.createDraft.bind(Be),Be.finishDraft.bind(Be);var He=ze;l(B,d(y()));var Ye="NOT_FOUND";function Je(e){var t;return{get:function(r){return t&&e(t.key,r)?t.value:Ye},put:function(e,r){t={key:e,value:r}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}function We(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var a=r[n];return n>0&&(r.splice(n,1),r.unshift(a)),a.value}return Ye}return{get:n,put:function(t,a){n(t)===Ye&&(r.unshift({key:t,value:a}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}var Ge=function(e,t){return e===t};function Ke(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}}function Ze(e,t){var r="object"==typeof t?t:{equalityCheck:t},n=r.equalityCheck,a=void 0===n?Ge:n,i=r.maxSize,o=void 0===i?1:i,s=r.resultEqualityCheck,u=Ke(a),l=1===o?Je(u):We(o,u);function c(){var t=l.get(arguments);if(t===Ye){if(t=e.apply(null,arguments),s){var r=l.getEntries().find((function(e){return s(e.value,t)}));r&&(t=r.value)}l.put(arguments,t)}return t}return c.clearCache=function(){return l.clear()},c}function Xe(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}function et(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var i,o=0,s={memoizeOptions:void 0},u=n.pop();if("object"==typeof u&&(s=u,u=n.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var l=s.memoizeOptions,c=void 0===l?r:l,d=Array.isArray(c)?c:[c],f=Xe(n),p=e.apply(void 0,[function(){return o++,u.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],t=f.length,r=0;r<t;r++)e.push(f[r].apply(null,arguments));return i=p.apply(null,e)}));return Object.assign(h,{resultFunc:u,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}var tt=et(Ze),rt=d(y()),nt=d(y());function it(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var ut=it();ut.withExtraArgument=it;var at=ut,ot=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),st=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return u([e,t])}}function u(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ct=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},lt=Object.defineProperty,dt=Object.defineProperties,ft=Object.getOwnPropertyDescriptors,ht=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,gt=function(e,t,r){return t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},yt=function(e,t){for(var r in t||(t={}))vt.call(t,r)&&gt(e,r,t[r]);if(ht)for(var n=0,a=ht(t);n<a.length;n++)r=a[n],pt.call(t,r)&&gt(e,r,t[r]);return e},mt=function(e,t){return dt(e,ft(t))},wt=function(e,t,r){return new Promise((function(n,a){var i=function(e){try{s(r.next(e))}catch(e){a(e)}},o=function(e){try{s(r.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,o)};s((r=r.apply(e,t)).next())}))},bt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=tt.apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,ct([H(e)?Ae(e):e],t))}},St="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?nt.compose:nt.compose.apply(null,arguments)};function It(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}var Ot=function(e){return e&&"function"==typeof e.match};function qt(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var a=t.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return yt(yt({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function At(e){return It(e)&&"type"in e}function jt(e){return"function"==typeof e&&"type"in e&&Ot(e)}function kt(e){return At(e)&&"string"==typeof e.type&&Object.keys(e).every(xt)}function xt(e){return["type","payload","error","meta"].indexOf(e)>-1}function Rt(e){return""+e}function Ct(e){return function(){return function(e){return function(t){return e(t)}}}}var Ft=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return ot(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ct([void 0],e[0].concat(this)))):new(t.bind.apply(t,ct([void 0],e.concat(this))))},t}(Array),Et=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return ot(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,ct([void 0],e[0].concat(this)))):new(t.bind.apply(t,ct([void 0],e.concat(this))))},t}(Array);function Mt(e){return Y(e)?He(e,(function(){})):e}function Dt(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function Tt(e){return function(){return function(e){return function(t){return e(t)}}}}function Pt(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||It(e)}function Ut(e,t,r,n,a,i){var o;if(void 0===t&&(t=""),void 0===r&&(r=Pt),void 0===a&&(a=[]),!r(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e||(null==i?void 0:i.has(e)))return!1;for(var s=null!=n?n(e):Object.entries(e),u=a.length>0,l=function(e,s){var l=t?t+"."+e:e;if(u){var c=a.some((function(e){return e instanceof RegExp?e.test(l):l===e}));if(c)return"continue"}return r(s)?"object"==typeof s&&(o=Ut(s,l,r,n,a,i))?{value:o}:void 0:{value:{keyPath:l,value:s}}},c=0,d=s;c<d.length;c++){var f=d[c],p=l(f[0],f[1]);if("object"==typeof p)return p.value}return i&&Vt(e)&&i.add(e),!1}function Vt(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var n=r[t];if("object"==typeof n&&null!==n&&!Vt(n))return!1}return!0}function $t(e){return function(){return function(e){return function(t){return e(t)}}}}function Lt(e){return"boolean"==typeof e}function _t(){return function(e){return Nt(e)}}function Nt(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=new Ft;return r&&(Lt(r)?n.push(at):n.push(at.withExtraArgument(r.extraArgument))),n}var Qt=!0;function Bt(e){var t,r=_t(),n=e||{},a=n.reducer,i=void 0===a?void 0:a,o=n.middleware,s=void 0===o?r():o,u=n.devTools,l=void 0===u||u,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)t=i;else{if(!It(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,rt.combineReducers)(i)}var h=s;if("function"==typeof h&&(h=h(r),!Qt))throw new Error("when using a middleware builder function, an array of middleware must be returned");var g=rt.applyMiddleware.apply(void 0,h),v=rt.compose;l&&(v=St(yt({trace:!Qt},"object"==typeof l&&l)));var m=new Et(g),y=m;Array.isArray(p)?y=ct([g],p):"function"==typeof p&&(y=p(m));var S=v.apply(void 0,y);return(0,rt.createStore)(t,d,S)}function zt(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw new Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}function Ht(e){return"function"==typeof e}function Yt(e,t,r,n){void 0===r&&(r=[]);var a,i="function"==typeof t?zt(t):[t,r,n],o=i[0],s=i[1],u=i[2];if(Ht(e))a=function(){return Mt(e())};else{var l=Mt(e);a=function(){return l}}function c(e,t){void 0===e&&(e=a());var r=ct([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[u]),r.reduce((function(e,r){if(r){var n;if(H(e))return void 0===(n=r(e,t))?e:n;if(Y(e))return He(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return c.getInitialState=a,c}function Jt(e,t){return e+"/"+t}function Wt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:Mt(e.initialState),a=e.reducers||{},i=Object.keys(a),o={},s={},u={};function l(){var t="function"==typeof e.extraReducers?zt(e.extraReducers):[e.extraReducers],r=t[0],a=void 0===r?{}:r,i=t[1],o=void 0===i?[]:i,u=t[2],l=void 0===u?void 0:u,c=yt(yt({},a),s);return Yt(n,(function(e){for(var t in c)e.addCase(t,c[t]);for(var r=0,n=o;r<n.length;r++){var a=n[r];e.addMatcher(a.matcher,a.reducer)}l&&e.addDefaultCase(l)}))}return i.forEach((function(e){var r,n,i=a[e],l=Jt(t,e);"reducer"in i?(r=i.reducer,n=i.prepare):r=i,o[e]=r,s[l]=r,u[e]=n?qt(l,n):qt(l)})),{name:t,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:o,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}function Gt(){return{ids:[],entities:{}}}function Kt(){return{getInitialState:function(e){return void 0===e&&(e={}),Object.assign(Gt(),e)}}}function Zt(){return{getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=bt(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),a=function(e,t){return t},i=function(e,t){return e[t]},o=bt(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:o,selectById:bt(r,a,i)};var s=bt(e,r);return{selectIds:bt(e,t),selectEntities:s,selectAll:bt(e,n),selectTotal:bt(e,o),selectById:bt(s,a,i)}}}}function Xt(e){var t=er((function(t,r){return e(r)}));return function(e){return t(e,void 0)}}function er(e){return function(t,r){var n=function(t){!function(e){return kt(e)}(r)?e(r,t):e(r.payload,t)};return H(t)?(n(t),t):He(t,n)}}function tr(e,t){return t(e)}function rr(e){return Array.isArray(e)||(e=Object.values(e)),e}function nr(e,t,r){for(var n=[],a=[],i=0,o=e=rr(e);i<o.length;i++){var s=o[i],u=tr(s,t);u in r.entities?a.push({id:u,changes:s}):n.push(s)}return[n,a]}function ir(e){function t(t,r){var n=tr(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){for(var n=0,a=e=rr(e);n<a.length;n++)t(a[n],r)}function n(t,r){var n=tr(t,e);n in r.entities||r.ids.push(n),r.entities[n]=t}function a(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function i(t,r,n){var a=n.entities[r.id],i=Object.assign({},a,r.changes),o=tr(i,e),s=o!==r.id;return s&&(t[r.id]=o,delete n.entities[r.id]),n.entities[o]=i,s}function o(e,t){var r={},n={};e.forEach((function(e){e.id in t.entities&&(n[e.id]={id:e.id,changes:yt(yt({},n[e.id]?n[e.id].changes:null),e.changes)})})),(e=Object.values(n)).length>0&&e.filter((function(e){return i(r,e,t)})).length>0&&(t.ids=Object.keys(t.entities))}function s(t,n){var a=nr(t,e,n),i=a[0];o(a[1],n),r(i,n)}return{removeAll:Xt((function(e){Object.assign(e,{ids:[],entities:{}})})),addOne:er(t),addMany:er(r),setOne:er(n),setMany:er((function(e,t){for(var r=0,a=e=rr(e);r<a.length;r++)n(a[r],t)})),setAll:er((function(e,t){e=rr(e),t.ids=[],t.entities={},r(e,t)})),updateOne:er((function(e,t){return o([e],t)})),updateMany:er(o),upsertOne:er((function(e,t){return s([e],t)})),upsertMany:er(s),removeOne:er((function(e,t){return a([e],t)})),removeMany:er(a)}}function ur(e,t){var r=ir(e);function n(t,r){var n=(t=rr(t)).filter((function(t){return!(tr(t,e)in r.entities)}));0!==n.length&&s(n,r)}function a(e,t){0!==(e=rr(e)).length&&s(e,t)}function i(t,r){for(var n=!1,a=0,i=t;a<i.length;a++){var o=i[a],s=r.entities[o.id];if(s){n=!0,Object.assign(s,o.changes);var l=e(s);o.id!==l&&(delete r.entities[o.id],r.entities[l]=s)}}n&&u(r)}function o(t,r){var a=nr(t,e,r),o=a[0];i(a[1],r),n(o,r)}function s(t,r){t.forEach((function(t){r.entities[e(t)]=t})),u(r)}function u(r){var n=Object.values(r.entities);n.sort(t);var a=n.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(r.ids,a)||(r.ids=a)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:er((function(e,t){return n([e],t)})),updateOne:er((function(e,t){return i([e],t)})),upsertOne:er((function(e,t){return o([e],t)})),setOne:er((function(e,t){return a([e],t)})),setMany:er(a),setAll:er((function(e,t){e=rr(e),t.entities={},t.ids=[],n(e,t)})),addMany:er(n),updateMany:er(i),upsertMany:er(o)}}function ar(e){void 0===e&&(e={});var t=yt({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,a=Kt(),i=Zt(),o=n?ur(r,n):ir(r);return yt(yt(yt({selectId:r,sortComparer:n},a),i),o)}var or="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",sr=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+=or[64*Math.random()|0];return t},cr=["name","message","stack","code"],lr=function(e,t){this.payload=e,this.meta=t},dr=function(e,t){this.payload=e,this.meta=t},fr=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=cr;r<n.length;r++){var a=n[r];"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}},hr=function(){function e(e,t,r){var n=qt(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:mt(yt({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),a=qt(e+"/pending",(function(e,t,r){return{payload:void 0,meta:mt(yt({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=qt(e+"/rejected",(function(e,t,n,a,i){return{payload:a,error:(r&&r.serializeError||fr)(e||"Rejected"),meta:mt(yt({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,l){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):sr(),f=new o;function p(e){c=e,f.abort()}var h=function(){return wt(this,null,(function(){var o,h,g,v,m,y;return st(this,(function(S){switch(S.label){case 0:return S.trys.push([0,4,,5]),pr(v=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:u,extra:l}))?[4,v]:[3,2];case 1:v=S.sent(),S.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return m=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(a(d,e,null==(h=null==r?void 0:r.getPendingMeta)?void 0:h.call(r,{requestId:d,arg:e},{getState:u,extra:l}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:d,signal:f.signal,abort:p,rejectWithValue:function(e,t){return new lr(e,t)},fulfillWithValue:function(e,t){return new dr(e,t)}})).then((function(t){if(t instanceof lr)throw t;return t instanceof dr?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return g=S.sent(),[3,5];case 4:return y=S.sent(),g=y instanceof lr?i(null,d,e,y.payload,y.meta):i(y,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(g)&&g.meta.condition||s(g),[2,g]}}))}))}();return Object.assign(h,{abort:p,requestId:d,arg:e,unwrap:function(){return h.then(vr)}})}}),{pending:a,rejected:i,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function vr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function pr(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}var gr=function(e,t){return Ot(e)?e.match(t):e(t)};function yr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return gr(e,t)}))}}function mr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return gr(e,t)}))}}function wr(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function br(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Sr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return wr(e,["pending"])}:br(e)?function(t){var r=e.map((function(e){return e.pending}));return yr.apply(void 0,r)(t)}:Sr()(e[0])}function Ir(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return wr(e,["rejected"])}:br(e)?function(t){var r=e.map((function(e){return e.rejected}));return yr.apply(void 0,r)(t)}:Ir()(e[0])}function Or(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||br(e)?function(t){return mr(Ir.apply(void 0,e),r)(t)}:Or()(e[0])}function qr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return wr(e,["fulfilled"])}:br(e)?function(t){var r=e.map((function(e){return e.fulfilled}));return yr.apply(void 0,r)(t)}:qr()(e[0])}function Ar(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return wr(e,["pending","fulfilled","rejected"])}:br(e)?function(t){for(var r=[],n=0,a=e;n<a.length;n++){var i=a[n];r.push(i.pending,i.rejected,i.fulfilled)}return yr.apply(void 0,r)(t)}:Ar()(e[0])}var jr=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},kr=function(){},xr=function(e,t){return void 0===t&&(t=kr),e.catch(t),e},Rr=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Cr=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Fr="task",Er="listener",Mr="completed",Dr="cancelled",Tr="task-"+Dr,Pr="task-"+Mr,Ur=Er+"-"+Dr,Vr=Er+"-"+Mr,$r=function(e){this.code=e,this.name="TaskAbortError",this.message=Fr+" "+Dr+" (reason: "+e+")"},Lr=function(e){if(e.aborted)throw new $r(e.reason)};function _r(e,t){var r=kr;return new Promise((function(n,a){var i=function(){return a(new $r(e.reason))};e.aborted?i():(r=Rr(e,i),t.finally((function(){return r()})).then(n,a))})).finally((function(){r=kr}))}var Nr=function(e,t){return wt(void 0,null,(function(){var r;return st(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return[2,{status:"ok",value:n.sent()}];case 3:return[2,{status:(r=n.sent())instanceof $r?"cancelled":"rejected",error:r}];case 4:return null==t||t(),[7];case 5:return[2]}}))}))},Qr=function(e){return function(t){return xr(_r(e,t).then((function(t){return Lr(e),t})))}},Br=function(e){var t=Qr(e);return function(e){return t(new Promise((function(t){return setTimeout(t,e)})))}},zr=Object.assign,Hr={},Yr="listenerMiddleware",Jr=function(e,t){return function(r,n){jr(r,"taskExecutor");var a=new AbortController;!function(t){Rr(e,(function(){return Cr(t,e.reason)}))}(a);var i=Nr((function(){return wt(void 0,null,(function(){var t;return st(this,(function(n){switch(n.label){case 0:return Lr(e),Lr(a.signal),[4,r({pause:Qr(a.signal),delay:Br(a.signal),signal:a.signal})];case 1:return t=n.sent(),Lr(a.signal),[2,t]}}))}))}),(function(){return Cr(a,Pr)}));return(null==n?void 0:n.autoJoin)&&t.push(i),{result:Qr(e)(i),cancel:function(){Cr(a,Tr)}}}},Wr=function(e,t){var r=function(r,n){return wt(void 0,null,(function(){var a,i,o,s;return st(this,(function(u){switch(u.label){case 0:Lr(t),a=function(){},i=new Promise((function(t,n){var i=e({predicate:r,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});a=function(){i(),n()}})),o=[i],null!=n&&o.push(new Promise((function(e){return setTimeout(e,n,null)}))),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,_r(t,Promise.race(o))];case 2:return s=u.sent(),Lr(t),[2,s];case 3:return a(),[7];case 4:return[2]}}))}))};return function(e,t){return xr(r(e,t))}},Gr=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,a=e.predicate,i=e.effect;if(t)a=qt(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return jr(i,"options.listener"),{predicate:a,type:t,effect:i}},Kr=function(e){var t=Gr(e),r=t.type,n=t.predicate,a=t.effect;return{id:sr(),effect:a,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},Zr=function(e){e.pending.forEach((function(e){Cr(e,Ur)}))},Xr=function(e){return function(){e.forEach(Zr),e.clear()}},en=function(e,t,r){try{e(t,r)}catch(e){setTimeout((function(){throw e}),0)}},tn=qt(Yr+"/add"),rn=qt(Yr+"/removeAll"),nn=qt(Yr+"/remove"),un=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ct([Yr+"/error"],e))};function an(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,a=e.onError,i=void 0===a?un:a;jr(i,"onError");var o=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var a=n[t];if(e(a))return a}},s=function(e){var t=o((function(t){return t.effect===e.effect}));return t||(t=Kr(e)),function(e){return e.unsubscribe=function(){return r.delete(e.id)},r.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&Zr(e)}}(t)},u=function(e){var t=Gr(e),r=t.type,n=t.effect,a=t.predicate,i=o((function(e){return("string"==typeof r?e.type===r:e.predicate===a)&&e.effect===n}));return i&&(i.unsubscribe(),e.cancelActive&&Zr(i)),!!i},l=function(e,a,o,u){return wt(t,null,(function(){var t,l,c,d;return st(this,(function(f){switch(f.label){case 0:t=new AbortController,l=Wr(s,t.signal),c=[],f.label=1;case 1:return f.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(a,zr({},o,{getOriginalState:u,condition:function(e,t){return l(e,t).then(Boolean)},take:l,delay:Br(t.signal),pause:Qr(t.signal),extra:n,signal:t.signal,fork:Jr(t.signal,c),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach((function(e,r,n){e!==t&&(Cr(e,Ur),n.delete(e))}))}})))];case 2:return f.sent(),[3,6];case 3:return(d=f.sent())instanceof $r||en(i,d,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(c)];case 5:return f.sent(),Cr(t,Vr),e.pending.delete(t),[7];case 6:return[2]}}))}))},c=Xr(r);return{middleware:function(e){return function(t){return function(n){if(!At(n))return t(n);if(tn.match(n))return s(n.payload);if(!rn.match(n)){if(nn.match(n))return u(n.payload);var a,o=e.getState(),d=function(){if(o===Hr)throw new Error(Yr+": getOriginalState can only be called synchronously");return o};try{if(a=t(n),r.size>0)for(var f=e.getState(),p=Array.from(r.values()),h=0,g=p;h<g.length;h++){var v=g[h],m=!1;try{m=v.predicate(n,f,o)}catch(e){m=!1,en(i,e,{raisedBy:"predicate"})}!m||l(v,n,e,d)}}finally{o=Hr}return a}c()}}},startListening:s,stopListening:u,clearListeners:c}}var cn,on="RTK_autoBatch",sn=function(){return function(e){var t;return{payload:e,meta:(t={},t[on]=!0,t)}}},ln="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(cn||(cn=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},dn=function(e){return function(t){setTimeout(t,e)}},fn="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:dn(10),hn=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(void 0,r),i=!0,o=!1,s=!1,u=new Set,l="tick"===e.type?ln:"raf"===e.type?fn:"callback"===e.type?e.queueNotification:dn(e.timeout),c=function(){s=!1,o&&(o=!1,u.forEach((function(e){return e()})))};return Object.assign({},a,{subscribe:function(e){var t=a.subscribe((function(){return i&&e()}));return u.add(e),function(){t(),u.delete(e)}},dispatch:function(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[on]),(o=!i)&&(s||(s=!0,l(c))),a.dispatch(e)}finally{i=!0}}})}}};ke(),d(w()),d(S());var vn=e=>t=>r=>{var n,a;let i=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==i&&(null==(a=r.payload)||delete a.analyticsAction);let o=t(r);return"search/executeSearch/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with product recommendation:",r),void 0!==i&&e.dispatch(i),o};function pn(e){return e.instantlyCallable}var gn=()=>e=>t=>e(pn(t)?t():t),yn=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;return(null==(n=r.payload)?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},mn=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function wn(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new bn(r)}var bn=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Sn=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw wn(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},In=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&An(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function On(e){return void 0===e}function qn(e){return null===e}function An(e){return On(e)||qn(e)}var jn=class{constructor(e={}){this.config=e,this.value=new In(e)}validate(e){return this.value.validate(e)||(kn(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function kn(e){return On(e)||xn(e)}function xn(e){return"number"==typeof e&&!isNaN(e)}var Rn=class{constructor(e={}){this.value=new In(e)}validate(e){return this.value.validate(e)||(Cn(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function Cn(e){return On(e)||Fn(e)}function Fn(e){return"boolean"==typeof e}var En=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,Mn=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new In(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(On(e)?null:Dn(e)?t||e.length?r&&!En.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Dn(e){return"[object String]"===Object.prototype.toString.call(e)}var Tn=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(On(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Pn(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&An(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function Pn(e){return void 0!==e&&"object"==typeof e}var Un=class{constructor(e={}){this.config=e,this.value=new In(this.config)}validate(e){if(!An(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(An(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&An(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return Fn(e)||Dn(e)||xn(e)||Pn(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Vn(e){return Array.isArray(e)}var $n=class{constructor(e){this.config=e,this.value=new In(e)}validate(e){let t=this.value.validate(e);return null!==t?t:On(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},Ln=new Mn({required:!0,emptyAllowed:!1}),_n=new Mn({required:!1,emptyAllowed:!1}),Nn=new Mn({required:!0,emptyAllowed:!0}),Qn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Bn=(e,t)=>{if("required"in t)return{payload:new Sn({value:t}).validate({value:e}).value};let r=new Tn({options:{required:!0},values:t}).validate(e);if(r)throw new bn(r);return{payload:e}},zn=(e,t)=>{try{return Bn(e,t)}catch(t){return{payload:e,error:Qn(t)}}},Hn=(e,t,r,n)=>Jn(e,t,r,`Check the initialState of ${n}`,"Controller initialization error"),Yn=(e,t,r,n)=>Jn(e,t,r,`Check the options of ${n}`,"Controller initialization error"),Jn=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,a),t}},Wn=d(I()),Gn=d(O()),Kn=d(q()),Zn=d(A()),Xn=d(D()),ei=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},ti=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}},ri=d(U()),ni=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function ii(e){return Array.isArray(e)}function ui(e){return""===e.trim()}function ai(e,t){return[...e.reduce(((e,r)=>{let n=t(r);return e.has(n)||e.set(n,r),e}),new Map).values()]}function oi(e){return("undefined"!=typeof btoa?btoa:ri.btoa)(encodeURI(e))}function si(e,t){let{[e]:r,...n}=t;return n}function ci(e){return oi(JSON.stringify(e))}var li=new Set(["1",1,"yes",!0]);function di(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>li.has(e)))}function fi(e){let t={};for(let[r,n]of e)t[r]=n;return t}function hi(e,t,r){return clearTimeout(t),setTimeout(e,r)}function vi(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function pi(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function gi(e){return!("object"!=typeof e||!e)&&Object.values(e).every(yi)}function yi(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function mi(e){return 429===e}var wi=class{static async call(e){let t=qi(e),{logger:r}=e,n=await wi.preprocessRequest(t,e);r.info(n,"Platform request");let{url:a,...i}=n,o=async()=>{let e=await(0,Zn.default)(a,i);if(mi(e.status))throw e;return e};try{let e=await(0,Xn.backOff)(o,{retry:e=>{let t=e&&mi(e.status);return t&&r.info("Platform retrying request"),t}});if(419===e.status)throw r.info("Platform renewing token"),new ei;if(404===e.status)throw new ti(a,e.status);return r.info({response:e,requestInfo:n},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new ti(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:a,requestMetadata:i}=t,{signal:o,...s}=e,u=vi(s);try{let t=await n(e,r,i);return{...e,...t}}catch(e){a.error(e,"Platform request preprocessing failed. Returning default request options.")}return u}};function bi(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function Si(e,t="prod"){let r="prod"===t?"":t,n=`https://${e}.org${r}.coveo.com`;return{platform:n,analytics:`https://${e}.analytics.org${r}.coveo.com`,search:`${n}/rest/search/v2`,admin:`https://${e}.admin.org${r}.coveo.com`}}function Ii(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:bi("platform",e)}function Oi(e){return bi("analytics",e)}function qi(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s="POST"===e.method||"PUT"===e.method,u=Ai(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:u},signal:o}}function Ai(e,t){return"application/x-www-form-urlencoded"===t?gi(e)?pi(e):"":JSON.stringify(e)}Wn.default.extend(Kn.default),Wn.default.extend(Gn.default);var ji="/rest/search/v2",ki="/rest/ua",xi=()=>({organizationId:"",accessToken:"",platformUrl:Ii(),search:{apiBaseUrl:`${Ii()}${ji}`,locale:"en-US",timezone:Wn.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Oi()}${ki}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}}),Ri=()=>!1;function Ci(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var Fi=()=>"default",Ei=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Ei||{}),Mi=(e=>(e.Ascending="asc",e.Descending="desc",e))(Mi||{});d(w());var Di=e=>e;function Ti(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Pi(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Ti(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Ti(),extendedResults:{}}}function Ui(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var Vi=e=>{let{response:t}=e;return t.body?$i(e):Li(t)},$i=e=>Ni(e)?Qi(e):_i(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},Li=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function _i(e){return void 0!==e.body.statusCode}function Ni(e){return void 0!==e.body.exception}var Qi=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function Bi(){if("undefined"==typeof window){let{AbortController:e}=V();return new e}return"undefined"==typeof AbortController?null:new AbortController}var zi=class{constructor(){this.currentAbortController=null}async enqueue(e,t){var r;let n=this.currentAbortController,a=this.currentAbortController=Bi();n&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),n.abort());try{return await e(null!=(r=null==a?void 0:a.signal)?r:null)}finally{this.currentAbortController===a&&(this.currentAbortController=null)}}},Hi=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},Yi=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Ji=(e,t)=>{let r=Wi(e);return r&&r.organizationId===t?r:null},Wi=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(null==t?void 0:t.groups)?t.groups:null},Gi=(e,t,r,n)=>{let a=new Hi(`${e.url}${n}`);return a.addParam("organizationId",e.organizationId),e.authentication&&a.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:a.href,origin:"searchApiFetch"}},Ki=(e,t)=>{let r=new Hi(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),void 0!==e.q&&r.addParam("q",e.q),void 0!==e.enableNavigation&&r.addParam("enableNavigation",`${e.enableNavigation}`),void 0!==e.requestedOutputSize&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),void 0!==e.visitorId&&r.addParam("visitorId",`${e.visitorId}`),r.href},Zi=async(e,t)=>{let r=await wi.call({...Gi(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Ui(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=await r.text();return Xi(n)?{success:n}:{error:Vi({response:r,body:n})}};function Xi(e){return"string"==typeof e}function eu(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function tu(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function ru(e,t){if(t&&"AbortError"===e.name)return{error:tu(e)};if(e instanceof ti)return{error:eu(e)};throw e}var nu=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new zi,mainSearch:new zi,facetValues:new zi,foldingCollection:new zi,instantResults:new zi}}async plan(e){let t=await wi.call({...Gi(e,"POST","application/json","/plan"),requestParams:Ui(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return ru(t);let r=await t.json();return cu(r)?{success:r}:{error:Vi({response:t,body:r})}}async querySuggest(e){let t=await wi.call({...Gi(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Ui(e),...this.options});if(t instanceof Error)return ru(t);let r=await t.json(),n={response:t,body:r};return su(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:Vi(n)}}async search(e,t){var r;let n=null!=(r=null==t?void 0:t.origin)?r:"unknown",a=await this.apiCallsQueues[n].enqueue((r=>wi.call({...Gi(e,"POST","application/json",""),requestParams:Ui(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0})),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(a instanceof Error)return ru(a,null==t?void 0:t.disableAbortWarning);let i=await a.json(),o={response:a,body:i};return au(i)?(o.body=ou(i),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:Vi(o)}}async facetSearch(e){let t=await wi.call({...Gi(e,"POST","application/json","/facet"),requestParams:Ui(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await wi.call({...Gi(e,"POST","application/json",""),requestParams:Ui(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return au(r)?{success:r}:{error:Vi({response:t,body:r})}}async html(e){return Zi(e,{...this.options})}async productRecommendations(e){let t=await wi.call({...Gi(e,"POST","application/json",""),requestParams:Ui(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return au(r)?{success:r}:{error:Vi({response:t,body:r})}}async fieldDescriptions(e){let t=await wi.call({...Gi(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return lu(r)?{success:r}:{error:Vi({response:t,body:r})}}},iu=e=>void 0!==e.success,uu=e=>void 0!==e.error;function au(e){return void 0!==e.results}function ou(e){let t=Ti();return An(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function su(e){return void 0!==e.completions}function cu(e){return void 0!==e.preprocessingOutput}function lu(e){return void 0!==e.fields}var du=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function fu(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:du(),originalQuery:"",automaticallyCorrectQuery:!0}}function hu(){return{enabled:!0}}function vu(){return{freezeFacetOrder:!1,facets:{}}}function pu(){return{}}function gu(){return{}}function yu(e){return{request:e,hasBreadcrumbs:!0}}function mu(){return{}}function wu(e){return{request:e}}function bu(){return{}}function Su(e){return{request:e}}function Iu(){return{}}var Ou=["author","language","urihash","objecttype","collection","source","permanentid"],qu=[...Ou,"date","filetype","parents"],Au=[...qu,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],ju=()=>({fieldsToInclude:Ou,fetchAllFields:!1,fieldsDescription:[]}),ku=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function xu(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Ru(){return{}}var Cu=()=>({}),Fu=()=>({q:"",enableQuerySyntax:!1}),Eu=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),Mu=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Mu||{}),Du=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Du||{}),Tu=e=>{if(Vn(e))return e.map((e=>Tu(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Pu=()=>({by:"relevancy"}),Uu=e=>({by:"date",order:e}),Vu=(e,t)=>({by:"field",order:t,field:e}),$u=()=>({by:"qre"}),Lu=()=>({by:"nosort"}),_u=new Tn({values:{by:new $n({enum:Du,required:!0}),order:new $n({enum:Mu}),field:new Mn}});function Nu(){return Tu(Pu())}function Qu(){return{}}function Bu(){return{}}function zu(){return{contextValues:{}}}function Hu(){return[]}function Yu(){return{}}var Ju=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function Wu(){return{contextValues:{}}}var Gu=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),Ku=()=>"";d(w());var Zu=e=>e,Xu=e=>e,ea=e=>e,ta=e=>({past:[],present:e,future:[]}),ra=e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},na=e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e},ia=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i],present:o,future:[]}:ta(o)},ua=e=>{let{actionTypes:t,reducer:r}=e,n=ta();return(e=n,a)=>{switch(a.type){case t.undo:return ra(e);case t.redo:return na(e);case t.snapshot:return ia({state:e,reducer:r,action:a});default:return e}}};function aa(){return{length:void 0}}var oa=1,sa=10,ca=5,la=1,da=8;function fa(){return{desiredCount:ca,numberOfValues:da,set:{}}}function ha(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1}}function va(){return{}}function pa(e){return!!e&&e.expiresAt&&Date.now()>=e.expiresAt}function ga(){return ya({})}function ya(e){var t,r,n;return{context:e.context||zu(),dictionaryFieldContext:e.dictionaryFieldContext||Wu(),facetSet:e.facetSet||mu(),numericFacetSet:e.numericFacetSet||Iu(),dateFacetSet:e.dateFacetSet||bu(),categoryFacetSet:e.categoryFacetSet||pu(),automaticFacetSet:null!=(t=e.automaticFacetSet)?t:fa(),pagination:e.pagination||xu(),query:e.query||Fu(),tabSet:e.tabSet||Bu(),advancedSearchQueries:e.advancedSearchQueries||Gu(),staticFilterSet:e.staticFilterSet||Qu(),querySet:e.querySet||Ru(),instantResults:e.instantResults||va(),sortCriteria:e.sortCriteria||Nu(),pipeline:e.pipeline||Ku(),searchHub:e.searchHub||Fi(),facetOptions:e.facetOptions||vu(),facetOrder:null!=(r=e.facetOrder)?r:Hu(),debug:null!=(n=e.debug)?n:Ri()}}function ma(){return{queries:[],maxLength:10}}function wa(){return{results:[],maxLength:10}}function ba(){return{}}var Sa=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}}),Ia={};function Oa(e){if(ui(e.openingDelimiter)||ui(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(An(e.content)||ui(e.content))return e.content;if(0===e.highlights.length)return ja(e.content);let t=e.content.length,r="",n=0;for(let a=0;a<e.highlights.length;a++){let i=e.highlights[a],o=i.offset,s=o+i.length;if(s>t)break;r+=ja(e.content.slice(n,o)),r+=e.openingDelimiter,r+=ja(e.content.slice(o,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=ja(e.content.slice(n))),r}function qa(e,t){return(e=ja(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,a)=>r?Aa(r,t.notMatchDelimiters):n?Aa(n,t.exactMatchDelimiters):a?Aa(a,t.correctionDelimiters):e))}function Aa(e,t){return t?t.open+e+t.close:e}function ja(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return n.test(e)?e.replace(a,(e=>t[e])):e}async function ka(e,t){let r,n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}function xa(e){let t,r,n,a=!1;return function(i){void 0===t?(t=i,r=0,n=-1):t=Ca(t,i);let o=t.length,s=0;for(;r<o;){a&&(10===t[r]&&(s=++r),a=!1);let i=-1;for(;r<o&&-1===i;++r)switch(t[r]){case 58:-1===n&&(n=r-s);break;case 13:a=!0;case 10:i=r}if(-1===i)break;e(t.subarray(s,i),n),s=r,n=-1}s===o?t=void 0:0!==s&&(t=t.subarray(s),r-=s)}}function Ra(e,t,r){let n=Fa(),a=new TextDecoder;return function(i,o){if(0===i.length)null==r||r(n),n=Fa();else if(o>0){let r=a.decode(i.subarray(0,o)),s=o+(32===i[o+1]?2:1),u=a.decode(i.subarray(s));switch(r){case"data":n.data=n.data?n.data+"\n"+u:u;break;case"event":n.event=u;break;case"id":e(n.id=u);break;case"retry":let r=parseInt(u,10);isNaN(r)||t(n.retry=r)}}}}function Ca(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function Fa(){return{data:"",event:"",id:"",retry:void 0}}c(Ia,{escape:()=>ja,getHighlightedSuggestion:()=>qa,highlightString:()=>Oa});var Ea=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},Ma="text/event-stream",Da=1e3,Ta="last-event-id";function Pa(e,t){var{signal:r,headers:n,onopen:a,onmessage:i,onclose:o,onerror:s,openWhenHidden:u,fetch:l}=t,c=Ea(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f,p=Object.assign({},n);function h(){f?.abort(),document.hidden||b()}p.accept||(p.accept=Ma),u||document.addEventListener("visibilitychange",h);let g=Da,v=0;function m(){document.removeEventListener("visibilitychange",h),window.clearTimeout(v),f?.abort()}null==r||r.addEventListener("abort",(()=>{m(),t()}));let y=l??window.fetch,S=a??Ua;async function b(){var r;f="undefined"==typeof AbortController?null:new AbortController;try{let r=await y(e,Object.assign(Object.assign({},c),{headers:p,signal:f?.signal}));await S(r),await ka(r.body,xa(Ra((e=>{e?p[Ta]=e:delete p[Ta]}),(e=>{g=e}),i))),null==o||o(),m(),t()}catch(e){if(!f?.signal.aborted)try{let t=null!==(r=null==s?void 0:s(e))&&void 0!==r?r:g;window.clearTimeout(v),v=window.setTimeout(b,t)}catch(e){m(),d(e)}}}b()}))}function Ua(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(Ma)))throw new Error(`Expected content-type to be ${Ma}, Actual: ${t}`)}var Ja,Va=(e,t,r)=>new Hi(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,$a=3,La=5e3,_a="text/event-stream",Na=1,Qa=class extends Error{},Ba=class extends Error{constructor(e){super(e.message),this.payload=e}},za=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:a,accessToken:i}=e,{write:o,abort:s,close:u,resetAnswer:l}=t;if(!a)return void this.logger.error("No stream ID found");let c,d=0,f=()=>{null==p||p.abort(),l(),h()},p=Bi(),h=()=>Pa(Va(r,n,a),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:null==p?void 0:p.signal,async onopen(e){if(!e.ok||e.headers.get("content-type")!==_a)throw e.status>=400&&e.status<500&&429!==e.status?new Ba({message:"Error opening stream",code:e.status}):new Qa},onmessage:e=>{let t=JSON.parse(e.data);if("ERROR"===t.finishReason)return clearTimeout(c),null==p||p.abort(),void s({message:t.errorMessage,code:t.statusCode});o(t),d=0,"COMPLETED"===t.finishReason?(clearTimeout(c),u()):c=hi(f,c,La)},onerror:e=>{if(clearTimeout(c),e instanceof Ba)throw null==p||p.abort(),s(e),e;if(++d>$a){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:Na};throw null==p||p.abort(),s(e),new Ba(e)}this.logger.info(`Retrying...(${d}/${$a})`),l()}});return h(),p}};function Ha(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function Ya(e,t,r,n){function a(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):a(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}function Wa(){return"undefined"!=typeof window}function Ga(){return"undefined"!=typeof navigator}function Ka(){return"undefined"!=typeof document}function Za(){try{return"undefined"!=typeof localStorage}catch{return!1}}function Xa(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}function eo(){return Ga()&&navigator.cookieEnabled}!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(Ja||(Ja={}));var to=[Ja.click,Ja.custom,Ja.search,Ja.view],ro=(e,t)=>-1!==to.indexOf(e)?Object.assign({language:Ka()?document.documentElement.lang:"unknown",userAgent:Ga()?navigator.userAgent:"unknown"},t):t,no=class{static set(e,t,r){var n,a,i;r&&(n=new Date).setTime(n.getTime()+r),-1===(i=window.location.hostname).indexOf(".")?io(e,t,n):io(e,t,n,(a=i.split("."))[a.length-2]+"."+a[a.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0===(a=a.replace(/^\s+/,"")).lastIndexOf(t,0))return a.substring(t.length,a.length)}return null}static erase(e){no.set(e,"",-1)}};function io(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function uo(){return Za()?localStorage:eo()?new ao:Xa()?sessionStorage:new so}var ao=class{getItem(e){return no.get(`${ao.prefix}${e}`)}removeItem(e){no.erase(`${ao.prefix}${e}`)}setItem(e,t,r){no.set(`${ao.prefix}${e}`,t,r)}};ao.prefix="coveo_";var mo,oo=class{constructor(){this.cookieStorage=new ao}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},so=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},co="__coveo.analytics.history",lo=20,fo=6e4,ho=75,vo=class{constructor(e){this.store=e||uo()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Ya(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Ya(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(co);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Ya(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(co);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(co,JSON.stringify(e.slice(0,lo)))}catch{}}clear(){try{this.store.removeItem(co)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,ho)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>fo}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},po=Object.freeze({__proto__:null,HistoryStore:vo,MAX_NUMBER_OF_HISTORY_ELEMENTS:lo,MAX_VALUE_SIZE:ho,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:fo,STORE_KEY:co,default:vo}),go=(e,t)=>Ya(void 0,void 0,void 0,(function*(){return e===Ja.view?(yield yo(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),yo=e=>Ya(void 0,void 0,void 0,(function*(){let t=new vo,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),wo=new Uint8Array(16);function bo(){if(!mo&&!(mo="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mo(wo)}var So=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Io(e){return"string"==typeof e&&So.test(e)}var Oo=[];for(let e=0;e<256;++e)Oo.push((e+256).toString(16).slice(1));function qo(e,t=0){return(Oo[e[t+0]]+Oo[e[t+1]]+Oo[e[t+2]]+Oo[e[t+3]]+"-"+Oo[e[t+4]]+Oo[e[t+5]]+"-"+Oo[e[t+6]]+Oo[e[t+7]]+"-"+Oo[e[t+8]]+Oo[e[t+9]]+"-"+Oo[e[t+10]]+Oo[e[t+11]]+Oo[e[t+12]]+Oo[e[t+13]]+Oo[e[t+14]]+Oo[e[t+15]]).toLowerCase()}function Ao(e){if(!Io(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function jo(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ko="6ba7b810-9dad-11d1-80b4-00c04fd430c8",xo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ro(e,t,r){function n(e,n,a,i){var o;if("string"==typeof e&&(e=jo(e)),"string"==typeof n&&(n=Ao(n)),16!==(null===(o=n)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=s[e];return a}return qo(s)}try{n.name=e}catch{}return n.DNS=ko,n.URL=xo,n}var Co="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fo={randomUUID:Co};function Eo(e,t,r){if(Fo.randomUUID&&!t&&!e)return Fo.randomUUID();let n=(e=e||{}).random||(e.rng||bo)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return qo(n)}function Mo(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function Do(e,t){return e<<t|e>>>32-t}function To(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,a=Math.ceil(n/16),i=new Array(a);for(let t=0;t<a;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];i[t]=r}i[a-1][14]=8*(e.length-1)/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=i[e][t];for(let e=16;e<80;++e)n[e]=Do(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let a=r[0],o=r[1],s=r[2],u=r[3],l=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),i=Do(a,5)+Mo(r,o,s,u)+l+t[r]+n[e]>>>0;l=u,u=s,s=Do(o,30)>>>0,o=a,a=i}r[0]=r[0]+a>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var Po=Ro("v5",80,To),Uo=Po,Vo="2.28.20",$o={pageview:"pageview",event:"event"},Lo=class{constructor(e,t){if(!Io(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Lo.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(e){let t=e.split(".");if(2!==t.length)return null;let[r,n]=t;if(32!==r.length||isNaN(parseInt(n)))return null;let a=r.substring(0,8)+"-"+r.substring(8,12)+"-"+r.substring(12,16)+"-"+r.substring(16,20)+"-"+r.substring(20,32);return Io(a)?new Lo(a,1e3*Number.parseInt(n)):null}};Lo.cvo_cid="cvo_cid",Lo.expirationTime=120;var _o=Object.keys;function No(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var Qo={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Bo=_o(Qo).map((e=>Qo[e])),zo=[...Bo].join("|"),Ho=new RegExp(`^(${zo}$)`),Yo={svcAction:"svc_action",svcActionData:"svc_action_data"},Jo=e=>Ho.test(e),Wo=[Jo],Go={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Ko={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Zo={action:"pa",list:"pal",listSource:"pls"},Xo={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},es=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],ts={id:"quoteId",affiliation:"quoteAffiliation"},rs={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},ns={add:Zo,bookmark_add:Zo,bookmark_remove:Zo,click:Zo,checkout:Zo,checkout_option:Zo,detail:Zo,impression:Zo,remove:Zo,refund:Object.assign(Object.assign({},Zo),Xo),purchase:Object.assign(Object.assign({},Zo),Xo),quickview:Zo,quote:Object.assign(Object.assign({},Zo),ts),review:Object.assign(Object.assign({},Zo),rs)},is=_o(Go).map((e=>Go[e])),us=_o(Ko).map((e=>Ko[e])),as=_o(Zo).map((e=>Zo[e])),os=_o(Xo).map((e=>Xo[e])),ss=_o(rs).map((e=>rs[e])),cs=_o(ts).map((e=>ts[e])),ls=[...is,"custom"].join("|"),ds=[...us,"custom"].join("|"),fs="(pr[0-9]+)",hs="(il[0-9]+pi[0-9]+)",vs=new RegExp(`^${fs}(${ls})$`),ps=new RegExp(`^(${hs}(${ds}))|(il[0-9]+nm)$`),gs=new RegExp(`^(${as.join("|")})$`),ys=new RegExp(`^(${os.join("|")})$`),ms=new RegExp(`^${fs}custom$`),ws=new RegExp(`^${hs}custom$`),bs=new RegExp(`^(${[...es,...ss,...cs].join("|")})$`),Ss=e=>vs.test(e),Is=e=>ps.test(e),Os=e=>gs.test(e),qs=e=>ys.test(e),As=e=>bs.test(e),js=[Is,Ss,Os,qs,As],ks=[ms,ws],xs={anonymizeIp:"aip"},Rs={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Cs={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},Fs=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Es=Object.assign(Object.assign(Object.assign(Object.assign({},xs),Rs),Cs),Fs.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),Ms=Object.assign(Object.assign({},Es),Yo),Ds=e=>{let t=!!e.action&&ns[e.action]||{};return _o(e).reduce(((r,n)=>{let a=t[n]||Ms[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})}),{})},Ts=_o(Ms).map((e=>Ms[e])),Ps=e=>-1!==Ts.indexOf(e),Us=e=>"custom"===e,Vs=e=>[...js,...Wo,Ps,Us].some((t=>t(e))),$s=e=>_o(e).reduce(((t,r)=>{let n=Ls(r);return n?Object.assign(Object.assign({},t),_s(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),Ls=e=>{let t;return[...ks].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},_s=(e,t)=>_o(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Ns=class{constructor(e){this.opts=e}sendEvent(e,t){return Ya(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(e),{url:i,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${a}`,t,n),s=this.encodeForEventType(e,o),u=new Blob([s],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,u)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Ya(this,void 0,void 0,(function*(){let n=e,a=t;if(r){let i=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:s}=i;n=o||e;try{a=JSON.parse(s)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:a,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return Ya(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Ja.click,Ja.custom,Ja.search,Ja.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}},Qs=class{sendEvent(e,t){return Ya(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Ya(this,void 0,void 0,(function*(){return Promise.resolve()}))}},Bs=window.fetch,zs=class{constructor(e){this.opts=e}sendEvent(e,t){return Ya(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:u}=s,l=Ha(s,["url"]),c=yield Bs(u,l);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}deleteHttpCookieVisitorId(){return Ya(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield Bs(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return-1!==[Ja.click,Ja.custom,Ja.search,Ja.view].indexOf(e)}getVisitorIdParam(){return Ya(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Hs=class{constructor(e,t){Za()&&eo()?this.storage=new oo:Za()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new so),this.client=new zs(e),this.beaconClient=new Ns(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Ys=class{constructor(e,t){this.storage=t||new so,this.client=new zs(e)}getClientDependingOnEventType(e){return this.client}},Js=class{constructor(){this.storage=new so,this.client=new Qs}getClientDependingOnEventType(e){return this.client}},Ws="xx",Gs=e=>(null==e?void 0:e.startsWith(Ws))||!1,Ks="\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    ";function Zs(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}var Xs=["1",1,"yes",!0];function ec(){return Ga()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>-1!==Xs.indexOf(e)))}var tc="v15",rc={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function nc(e=rc.default,t=tc,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var ac,oc,ic="38824e1f-37f5-42d3-8372-a4b8fa9df946",uc=class{get defaultOptions(){return{endpoint:rc.default,isCustomEndpoint:!1,token:"",version:tc,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Vo}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[go,ro].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),ec()&&(this.clear(),this.runtime.storage=new so)}initRuntime(e){return Wa()&&Ka()?new Hs(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(Zs()&&console.warn(Ks),new Ys(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Ya(this,void 0,void 0,(function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Eo()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Eo()}}))}getCurrentVisitorId(){return Ya(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Ya(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Ya(this,void 0,void 0,(function*(){if(Io(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Uo(e,Uo(t,ic)))}}))}getParameters(e,...t){return Ya(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Ya(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(Eo()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(ec())return null;try{let t=new URL(e).searchParams.get(Lo.cvo_cid);if(null==t)return null;let r=Lo.fromString(t);return r&&Ka()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch{}return null}resolveParameters(e,...t){return Ya(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Ya(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Ya(this,void 0,void 0,(function*(){return i?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Ya(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Ya(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Ya(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?Ds(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Ya(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Ya(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:a,log:t=>Ya(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},a),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Ya(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new vo).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Ya(this,void 0,void 0,(function*(){return this.makeEvent(Ja.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ha(e,["searchQueryUid"]);return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Ya(this,void 0,void 0,(function*(){return this.makeEvent(Ja.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ha(e,["searchQueryUid"]);return Ya(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Ya(this,void 0,void 0,(function*(){return this.makeEvent(Ja.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ha(e,["lastSearchQueryUid"]);return Ya(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Ya(this,void 0,void 0,(function*(){return this.makeEvent(Ja.view,e)}))}sendViewEvent(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Ya(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Ya(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(!Array.isArray(e)||!e.every((e=>"string"==typeof e)))throw Error("Parameter should be an array of domain strings");this.acceptedLinkReferrers=e}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Ja.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>null!=e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(Vs(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Ha(e,["custom"]),n={};t&&No(t)&&(n=this.lowercaseKeys(t));let a=$s(r);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ha(e,["custom"]);if(t&&No(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Ha(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())&&(n.anonymizeIp=1),(t==Ja.view||t==Ja.click||t==Ja.search||t==Ja.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==Ja.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ha(e,["userId"]);return Gs(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ha(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&No(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&No(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return nc(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}};!function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView"}(ac||(ac={})),function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"}(oc||(oc={}));var sc={[oc.triggerNotify]:"queryPipelineTriggers",[oc.triggerExecute]:"queryPipelineTriggers",[oc.triggerQuery]:"queryPipelineTriggers",[oc.triggerRedirect]:"queryPipelineTriggers",[oc.queryError]:"errors",[oc.queryErrorBack]:"errors",[oc.queryErrorClear]:"errors",[oc.queryErrorRetry]:"errors",[oc.pagerNext]:"getMoreResults",[oc.pagerPrevious]:"getMoreResults",[oc.pagerNumber]:"getMoreResults",[oc.pagerResize]:"getMoreResults",[oc.pagerScrolling]:"getMoreResults",[oc.facetSearch]:"facet",[oc.facetShowLess]:"facet",[oc.facetShowMore]:"facet",[oc.recommendation]:"recommendation",[oc.likeSmartSnippet]:"smartSnippet",[oc.dislikeSmartSnippet]:"smartSnippet",[oc.expandSmartSnippet]:"smartSnippet",[oc.collapseSmartSnippet]:"smartSnippet",[oc.openSmartSnippetFeedbackModal]:"smartSnippet",[oc.closeSmartSnippetFeedbackModal]:"smartSnippet",[oc.sendSmartSnippetReason]:"smartSnippet",[oc.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[oc.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[oc.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[oc.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[oc.clearRecentQueries]:"recentQueries",[oc.recentResultClick]:"recentlyClickedDocuments",[oc.clearRecentResults]:"recentlyClickedDocuments",[oc.showLessFoldedResults]:"folding",[ac.expandToFullUI]:"interface",[ac.openUserActions]:"User Actions",[ac.showPrecedingSessions]:"User Actions",[ac.showFollowingSessions]:"User Actions",[ac.clickViewedDocument]:"User Actions",[ac.clickPageView]:"User Actions",[oc.caseDetach]:"case",[oc.likeGeneratedAnswer]:"generatedAnswer",[oc.dislikeGeneratedAnswer]:"generatedAnswer",[oc.openGeneratedAnswerSource]:"generatedAnswer",[oc.generatedAnswerStreamEnd]:"generatedAnswer",[oc.generatedAnswerSourceHover]:"generatedAnswer",[oc.generatedAnswerCopyToClipboard]:"generatedAnswer",[oc.generatedAnswerHideAnswers]:"generatedAnswer",[oc.generatedAnswerShowAnswers]:"generatedAnswer",[oc.generatedAnswerFeedbackSubmit]:"generatedAnswer"},cc=class{constructor(){this.runtime=new Js,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(Ja.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(Ja.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(Ja.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(Ja.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Vo}};function lc(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function dc(e){return e.map((e=>e.replace(/;/g,"")))}function fc(e){let t=e.join(";");return t.length<=256?t:fc(e.slice(1))}var hc=e=>fc(lc(dc(e)));function vc(e){let t="string"==typeof e.partialQueries?e.partialQueries:hc(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:hc(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var yc,mc,wc,pc=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||ec();this.coveoAnalyticsClient=r?new cc:new uc(e)}disable(){this.coveoAnalyticsClient instanceof uc&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new cc}enable(){this.coveoAnalyticsClient=new uc(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(oc.interfaceLoad)}logInterfaceLoad(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(oc.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(oc.recommendation)}logRecommendation(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(oc.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(oc.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(oc.staticFilterSelect,e)}logStaticFilterSelect(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(oc.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(oc.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(oc.interfaceChange,e)}logInterfaceChange(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(oc.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(oc.didyoumeanClick)}logDidYouMeanClick(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(oc.resultsSort,e)}logResultsSort(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(oc.searchboxSubmit)}logSearchboxSubmit(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(oc.searchboxClear)}logSearchboxClear(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(oc.searchboxAsYouType)}logSearchboxAsYouType(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(oc.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(oc.breadcrumbResetAll)}logBreadcrumbResetAll(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(oc.documentQuickview,e,t)}logDocumentQuickview(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(oc.documentOpen,e,t)}logDocumentOpen(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(oc.omniboxAnalytics,vc(e))}logOmniboxAnalytics(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(oc.omniboxFromLink,vc(e))}logOmniboxFromLink(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(oc.searchFromLink)}logSearchFromLink(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(oc.triggerNotify,e)}logTriggerNotify(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(oc.triggerExecute,e)}logTriggerExecute(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(oc.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(oc.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(oc.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(oc.pagerResize,e)}logPagerResize(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(oc.pagerNumber,e)}logPagerNumber(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(oc.pagerNext,e)}logPagerNext(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(oc.pagerPrevious,e)}logPagerPrevious(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(oc.pagerScrolling)}logPagerScrolling(){return Ya(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(oc.facetClearAll,e)}logFacetClearAll(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(oc.facetSearch,e)}logFacetSearch(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(oc.facetSelect,e)}logFacetSelect(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(oc.facetDeselect,e)}logFacetDeselect(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(oc.facetExclude,e)}logFacetExclude(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(oc.facetUnexclude,e)}logFacetUnexclude(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(oc.facetSelectAll,e)}logFacetSelectAll(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(oc.facetUpdateSort,e)}logFacetUpdateSort(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(oc.facetShowMore,e)}logFacetShowMore(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(oc.facetShowLess,e)}logFacetShowLess(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(oc.queryError,e)}logQueryError(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Ya(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(oc.queryErrorBack);return{description:e.description,log:()=>Ya(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(oc.queryErrorBack)}))}}))}logQueryErrorBack(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Ya(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(oc.queryErrorRetry);return{description:e.description,log:()=>Ya(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(oc.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Ya(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(oc.queryErrorClear);return{description:e.description,log:()=>Ya(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(oc.queryErrorClear)}))}}))}logQueryErrorClear(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(oc.likeSmartSnippet)}logLikeSmartSnippet(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(oc.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(oc.expandSmartSnippet)}logExpandSmartSnippet(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(oc.collapseSmartSnippet)}logCollapseSmartSnippet(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(oc.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(oc.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(oc.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(oc.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(oc.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(oc.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(oc.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(oc.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(oc.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(oc.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(oc.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(oc.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(oc.recentQueryClick)}logRecentQueryClick(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(oc.clearRecentQueries)}logClearRecentQueries(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(oc.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(oc.clearRecentResults)}logClearRecentResults(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(oc.noResultsBack)}logNoResultsBack(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(oc.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(oc.showLessFoldedResults)}logShowLessFoldedResults(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:null===(r=e.payload)||void 0===r?void 0:r.customData}}makeCustomEvent(e,t,r=sc[e]){return Ya(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=sc[e]){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Ya(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Ya(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Ya(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Ya(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Ya(this,void 0,void 0,(function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Ya(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Ya(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Ya(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof uc?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(oc.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(oc.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(oc.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(oc.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(oc.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(oc.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(oc.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(oc.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(oc.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(oc.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Ya(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(oc.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Ya(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},gc=Object.assign({},$o);Object.keys(gc).map((e=>gc[e])),function(e){e.click="click",e.flowStart="flowStart"}(yc||(yc={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(mc||(mc={})),function(e){e.quit="Quit",e.solved="Solved"}(wc||(wc={}));var bc=e=>new uc(e).getCurrentVisitorId(),Sc=e=>{let t=new uc(e);t.clear(),t.deleteHttpOnlyVisitorId()},Ic=new po.HistoryStore,Oc=(e,t)=>"function"==typeof t?(...r)=>{let n=vi(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,qc=(e,t)=>(...r)=>{let n=vi(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}},Ac="2.38.3",jc=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},kc=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return jc(this.state)}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[e,n]of Object.entries(t))r[`context_${e}`]=n;return r.coveoHeadlessVersion=Ac,r}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Fi()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},xc=(e,t)=>"productListing"in e&&e.productListing?e.productListing.facets.results.find((e=>e.facetId===t)):"search"in e&&e.search?e.search.response.facets.find((e=>e.facetId===t)):void 0,Rc=(e,t)=>{var r;return null==(r=e.facetSet[t])?void 0:r.request};function Cc(e,t){return!!t&&t.facetId in e.facetSet}var Fc=(e,t)=>{let r=xc(e,t);if(Cc(e,r))return r},Ec=(e,t)=>{let r=Fc(e,t);return r?r.values.filter((e=>"idle"!==e.state)):[]},Mc=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function Dc(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Tc(e){let{activeValue:t,ancestryMap:r}=Pc(e);return t?Uc(t,r):[]}function Pc(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function Uc(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}function Vc(e,t){return!!t&&t.facetId in e.categoryFacetSet}var $c=(e,t)=>{let r=xc(e,t);if(Vc(e,r))return r},Lc=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},_c=(e,t)=>{var r;let n=$c(e,t);return Tc(null!=(r=null==n?void 0:n.values)?r:[])},Nc=(e,t)=>{var r;let n=Lc(e,t);return Tc(null!=(r=null==n?void 0:n.currentValues)?r:[])},Qc=(e,t)=>{let r=ul(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:il(n,e)}};function Bc(e,t){let{facetId:r,facetValue:n}=e;return{...Qc(r,t),facetValue:"hierarchical"===al(t,r)?el(t,r):n}}function zc(e){var t,r,n,a,i;return{facetSet:null!=(t=e.facetSet)?t:mu(),categoryFacetSet:null!=(r=e.categoryFacetSet)?r:pu(),dateFacetSet:null!=(n=e.dateFacetSet)?n:bu(),numericFacetSet:null!=(a=e.numericFacetSet)?a:Iu(),automaticFacetSet:null!=(i=e.automaticFacetSet)?i:fa()}}var Hc=e=>{let t=[];return Wc(e).forEach(((r,n)=>{let a=al(e,r.facetId),i=nl(r,n+1);if(Jc(r)){if(!Nc(e,r.facetId).length)return;t.push({...i,...tl(e,r.facetId),facetType:a,state:"selected"})}else r.currentValues.forEach(((e,n)=>{if("idle"===e.state)return;let o=Kc(e,n+1,a),s=Yc(r)?Xc(e):Zc(e);t.push({...i,...o,...s})}))})),Gc(e).forEach(((e,r)=>{let n=rl(e,r+1);e.values.forEach(((e,r)=>{if("idle"===e.state)return;let a=Kc(e,r+1,"specific"),i=Xc(e);t.push({...n,...a,...i})}))})),t},Yc=e=>"specific"===e.type,Jc=e=>"hierarchical"===e.type,Wc=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),Gc=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),Kc=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Zc=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Xc=e=>({displayValue:e.value,value:e.value}),el=(e,t)=>Nc(e,t).map((e=>e.value)).join(";"),tl=(e,t)=>{let r=el(e,t);return{value:r,valuePosition:1,displayValue:r}},rl=(e,t)=>({title:il(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),nl=(e,t)=>({title:il(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),il=(e,t)=>`${e}_${t}`,ul=(e,t)=>{var r,n,a,i,o;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(a=e.dateFacetSet[t])?void 0:a.request)||(null==(i=e.numericFacetSet[t])?void 0:i.request)||(null==(o=e.automaticFacetSet.set[t])?void 0:o.response)},al=(e,t)=>{let r=ul(e,t);return r?r.type:"specific"},ol=class extends kc{constructor(){super(...arguments),this.initialState=Ju()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},sl=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new ol(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,l=i.configuration.analytics.enabled,c=new pc({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Oc(e,n),beforeSendHooks:[qc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return l||c.disable(),c};async function cl({config:e,environment:t,event:r}){let{url:n,token:a}=e,i={"Content-Type":"application/json",Authorization:`Bearer ${a}`},o=await t.fetch(`${n}/validate`,{method:"POST",body:JSON.stringify([r]),headers:i}),s=await o.json();if(!o.ok)throw new Error({...s});if(!s)return{valid:!1,errors:[{type:"",message:"disabled",path:""}]};let{valid:u,errors:l}=s[0];return{valid:u,errors:l??[]}}async function ll(e){let{listenerManager:t,event:r,config:n}=e;return"disabled"!==n.mode&&t.call(r),"validate"===n.mode?cl(e):dl(e)}async function dl({event:e,config:t,environment:r}){let{url:n,token:a}=t;return r.send(n,a,JSON.stringify([e]))}var fl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function hl(e){return"string"==typeof e&&fl.test(e)}function vl(e){let t="visitorId";return{getClientId:()=>{let r=e.storage,n=r.getItem(t),a=n&&hl(n)?n:e.generateUUID();return r.setItem(t,a),a},clear:()=>{e.storage.removeItem(t)}}}var pl=gl();function gl(){let e="coveo_";return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(0===t.lastIndexOf(r,0))return t.substring(r.length,t.length)}return null},setItem(t,r,n){let a=(e=>{let t=window.location.hostname.split(".").slice(-2);return 2==t.length?t.join("."):""})(),i=`;expires=${new Date((new Date).getTime()+n).toUTCString()}`,o=a?`;domain=${a}`:"";document.cookie=`${e}${t}=${r}${i}${o};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function yl(){return{getItem:e=>pl.getItem(e)||localStorage.getItem(e),removeItem(e){pl.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),pl.setItem(e,t,31556952e3)}}}async function ml(e,t){return fetch(e,t).catch((e=>{throw new Error(`${e.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:e})}))}function wl(){let e=document.referrer;return""===e?null:e}function bl(){return{runtime:"browser",fetch:(e,t)=>ml(e,t),send:async(e,t,r)=>{if(!navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([r],{type:"application/json"})))throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.");return null},getReferrerUrl:()=>wl(),getUrl:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:yl()}}function Sl(){return{getItem:()=>null,removeItem(){},setItem(){}}}function Il(){return{runtime:"node",fetch:(e,t)=>ml(e,t),send:async(e,t,r)=>(ml(e,{method:"POST",body:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),null),getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:Sl()}}function Ol(){return ql()?bl():Il()}function ql(){try{return"object"==typeof window}catch{return!1}}var Al="0.6.3";function jl(e){let{trackingId:t}=e;return{trackingId:t}}function kl(){return`relay@${Al}`}function xl(e,t,r,n){let{getReferrerUrl:a,getUrl:i,getUserAgent:o}=r,s=jl(t),u=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:kl(),clientId:u,userAgent:o(),referrerUrl:a(),url:i()})}function Rl(e,t,r,n,a){return{...t,meta:xl(e,r,n,a)}}var Cl="*";function Fl(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(t){if(t===Cl)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function n(r){let n=t(r);n>=0&&e.splice(n,1)}function a(e,t){t?n({type:e,callback:t}):r(e)}return{add:function(r){return t(r)<0&&e.push(r),()=>a(r.type,r.callback)},call:function(t){e.forEach((e=>{if(function(e,t){return"*"===e.type||t===e.type}(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))},remove:a}}function El({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode}})}function Ml(e){let t=El(e);return{get:()=>t,update:e=>{t=El({...t,...e})}}}function Dl(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>null,getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Sl()}}function Tl(e){let t=Ml(e),r=Fl(),n=()=>"disabled"==t.get().mode?Dl():Ol(),a=vl(n());return{emit:(e,i)=>{let o=t.get(),s=n();return ll({config:o,environment:s,event:Rl(e,i,o,s,a),listenerManager:r})},getMeta:e=>xl(e,t.get(),n(),a),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:Al,clearStorage:()=>{a.clear()}}}var Pl=class extends kc{getFacetState(){return Hc(zc(this.getState()))}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||Pl.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||Pi().response.searchUid}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.search)?void 0:e.response.pipeline)||this.state.pipeline||Pl.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),a=super.getBaseMetadata(),i=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return i&&(a.generativeQuestionAnsweringId=i),a}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return void 0!==(null==(e=t.generatedAnswer)?void 0:e.isVisible)&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||Fu().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||Pi().duration}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||Pi().response.totalCountFiltered}},Ul=Pl;Ul.fallbackPipelineName="default";var Vl=e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:n}=Tl({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return n},$l=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new Ul(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,u=i.configuration.analytics.runtimeEnvironment,l=i.configuration.analytics.enabled,c=new pc({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:Oc(e,n),beforeSendHooks:[qc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return l||c.disable(),c},Ll=()=>{let e=Ic.getHistory().reverse().find((e=>"PageView"===e.name&&e.value));return e?e.value:""};function _l(e){let t=Nl(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return ai([e,...t,...r],(e=>e.uniqueId))}function Nl(e){return e.childResults?e.childResults.flatMap((e=>[e,...Nl(e)])):[]}function Ql(e){return Object.assign(e,{instantlyCallable:!0})}function Bl(e,t){let r=t=>Ql(hr(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:a,preprocessRequest:i,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:a,preprocessRequest:i,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:a,logger:i})=>{let{description:o,log:s}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:a,logger:i});return{description:o,action:r((async(e,{getState:t,extra:r})=>await s({state:t(),extra:r})))}}}),n}var zl=(e,t,r)=>function(...n){let a=1===n.length?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Jl(a)},Hl=e=>"legacy"===e.configuration.analytics.analyticsMode,Yl=e=>"next"===e.configuration.analytics.analyticsMode,Jl=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:a,analyticsConfigurator:i,providerClass:o})=>(null!=r||(r=e=>new o(e)),Bl(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:s,logger:u})=>{let l=[],c={log:async({state:e})=>{for(let t of l)await t(e)}},d=e(),f=i({getState:e,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:r(e)}),p=await t(f,e());c.description=null==p?void 0:p.description,l.push((async e=>{Hl(e)&&await Wl(p,r,e,u,f.coveoAnalyticsClient)}));let h=Vl(d);return l.push((async e=>{if(Yl(e)&&a&&n){let t=n(e);await ld(h,a,t)}})),c})));async function Wl(e,t,r,n,a){t((()=>r));let i=await(null==e?void 0:e.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:a,response:i},"Analytics response")}var Gl=zl($l,(e=>e),Ul),Kl=zl(sl,(e=>e),ol),Zl=(e,t)=>{var r;let n=-1,a=null==(r=t.search)?void 0:r.results;return n=cd(e,a),n<0&&(n=sd(e,a)),n<0&&(n=0),Xl(e,(e=>{var r,n;return e+(null!=(n=null==(r=t.pagination)?void 0:r.firstResult)?n:0)})(n),t)};function Xl(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:ud(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:ad(e),queryPipeline:r.pipeline||Ku()}}var ed=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),td={urihash:new Mn,sourcetype:new Mn,permanentid:new Mn},rd={uniqueId:Ln,raw:new Tn({values:td}),title:Ln,uri:Ln,clickUri:Ln,rankingModifier:new Mn({required:!1,emptyAllowed:!0})};function nd(e){return Object.assign({},...Object.keys(td).map((t=>({[t]:e[t]}))))}function id(e){return Object.assign({},...Object.keys(rd).map((t=>({[t]:e[t]}))),{raw:nd(e.raw)})}function ud(e){let t=e.raw.author;return An(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function ad(e){let t=e.raw.source;return An(t)?"unknown":t}var od=e=>new Sn(rd).validate(id(e));function sd(e,t){for(let[r,n]of t.entries())if(-1!==cd(e,_l(n)))return r;return-1}function cd(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}async function ld(e,t,r){await e(t,r)}var dd=()=>Gl("analytics/interface/load",(e=>e.makeInterfaceLoad())),fd=()=>Gl("analytics/interface/change",((e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2}))),hd=()=>Gl("analytics/interface/searchFromLink",(e=>e.makeSearchFromLink())),vd=e=>Gl("analytics/interface/omniboxFromLink",(t=>t.makeOmniboxFromLink(e))),pd=()=>_n,gd=()=>Ln,yd=qt("configuration/updateBasicConfiguration",(e=>zn(e,{accessToken:_n,organizationId:_n,platformUrl:_n}))),md=qt("configuration/updateSearchConfiguration",(e=>zn(e,{apiBaseUrl:_n,pipeline:new Mn({required:!1,emptyAllowed:!0}),searchHub:_n,timezone:_n,locale:_n,authenticationProviders:new Un({required:!1,each:Ln})}))),wd=qt("configuration/updateAnalyticsConfiguration",(e=>(di()&&(e.enabled=!1),zn(e,{enabled:new Rn({default:!0}),originContext:pd(),originLevel2:pd(),originLevel3:pd(),apiBaseUrl:_n,nextApiBaseUrl:_n,runtimeEnvironment:new In,anonymous:new Rn({default:!1}),deviceId:_n,userDisplayName:_n,documentLocation:_n,trackingId:_n,analyticsMode:new Mn({constrainTo:["legacy","next"],required:!1,default:"legacy"})})))),bd=qt("configuration/analytics/disable"),Sd=qt("configuration/analytics/enable"),Id=qt("configuration/analytics/originlevel2",(e=>zn(e,{originLevel2:gd()}))),Od=qt("configuration/analytics/originlevel3",(e=>zn(e,{originLevel3:gd()}))),qd={q:new Mn,enableQuerySyntax:new Rn,aq:new Mn,cq:new Mn,firstResult:new jn({min:0}),numberOfResults:new jn({min:0}),sortCriteria:new Mn,f:new Tn,fExcluded:new Tn,cf:new Tn,nf:new Tn,df:new Tn,debug:new Rn,sf:new Tn,tab:new Mn,af:new Tn},Ad=qt("searchParameters/restore",(e=>zn(e,qd))),jd=qt("debug/enable"),kd=qt("debug/disable"),xd=Yt(Ri(),(e=>{e.addCase(jd,(()=>!0)).addCase(kd,(()=>!1)).addCase(Ad,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),Rd=qt("history/undo"),Cd=qt("history/redo"),Fd=qt("history/snapshot"),Ed=hr("history/back",(async(e,{dispatch:t})=>{t(Rd()),await t(Dd())})),Md=hr("history/forward",(async(e,{dispatch:t})=>{t(Cd()),await t(Dd())})),Dd=hr("history/change",(async(e,{getState:t})=>t().history.present)),Td=qt("pipeline/set",(e=>zn(e,new Mn({required:!0,emptyAllowed:!0})))),Pd=Yt(Ku(),(e=>{e.addCase(Td,((e,t)=>t.payload)).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase(md,((e,t)=>t.payload.pipeline||e))})),Ud=qt("searchHub/set",(e=>zn(e,new Mn({required:!0,emptyAllowed:!0})))),Vd=Yt(Fi(),(e=>{e.addCase(Ud,((e,t)=>t.payload)).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase(md,((e,t)=>t.payload.searchHub||e))})),$d=qt("breadcrumb/deselectAll"),Ld=qt("breadcrumb/deselectAllNonBreadcrumbs"),_d=qt("facet/updateFacetAutoSelection",(e=>zn(e,{allow:new Rn({required:!0})}))),Nd=class extends Ul{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:Fu().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:Pi().duration}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:Pi().response.totalCountFiltered}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}},Qd=e=>Gl("analytics/instantResult/open",((t,r)=>(od(e),t.makeDocumentOpen(Zl(e,r),ed(e)))),(e=>new Nd(e))),Bd=()=>Gl("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new Nd(e))),zd={id:Ln},Hd={...zd,q:Nn},Yd=qt("instantResults/register",(e=>zn(e,zd))),Jd=qt("instantResults/updateQuery",(e=>zn(e,Hd))),Wd=qt("instantResults/clearExpired",(e=>zn(e,zd))),Gd=new jn({required:!0,min:0}),Kd=qt("pagination/registerNumberOfResults",(e=>zn(e,Gd))),Zd=qt("pagination/updateNumberOfResults",(e=>zn(e,Gd))),Xd=qt("pagination/registerPage",(e=>zn(e,Gd))),ef=qt("pagination/updatePage",(e=>zn(e,Gd))),tf=qt("pagination/nextPage"),rf=qt("pagination/previousPage"),nf=qt("query/updateQuery",(e=>zn(e,{q:new Mn,enableQuerySyntax:new Rn}))),uf=async(e,t)=>({analytics:{clientId:await bc(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Ll()&&{pageId:Ll()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:"next"===e.analyticsMode}}),af=async(e,t)=>{var r,n,a,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await bc(e.configuration.analytics),actionsHistory:Ic.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(a=e.advancedSearchQueries)?void 0:a.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(i=e.advancedSearchQueries)?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await uf(e.configuration.analytics,t),...e.excerptLength&&!An(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},of=qt("didYouMean/enable"),sf=qt("didYouMean/disable"),cf=qt("didYouMean/automaticCorrections/disable"),lf=qt("didYouMean/automaticCorrections/enable"),df=qt("didYouMean/correction",(e=>zn(e,Ln))),ff=()=>Gl("analytics/didyoumean/click",(e=>e.makeDidYouMeanClick())),hf=()=>Gl("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic())),vf=new Tn({values:{undoneQuery:Nn},options:{required:!0}}),pf=()=>Gl("analytics/trigger/query",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null})),gf=e=>Gl("analytics/trigger/query/undo",(t=>(zn(e,vf),t.makeUndoTriggerQuery(e)))),yf=()=>Gl("analytics/trigger/notify",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null})),mf=qt("trigger/query/ignore",(e=>zn(e,new Mn({emptyAllowed:!0,required:!0})))),wf=qt("trigger/query/modification",(e=>zn(e,new Tn({values:{originalQuery:_n,modification:_n}})))),bf=()=>Gl("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Sf=e=>Gl("search/queryError",((t,r)=>{var n,a,i,o;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||Fu().q,aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||Gu().aq,cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||Gu().cq,dq:(null==(o=r.advancedSearchQueries)?void 0:o.dq)||Gu().dq,errorType:e.type,errorMessage:e.message})})),If=d(I()),Of=d($()),qf=d(I()),Af=d(L());qf.default.extend(Af.default);var jf="YYYY/MM/DD@HH:mm:ss",kf="1401-01-01";function xf(e,t){let r=(0,qf.default)(e,t);return r.isValid()||t?r:(0,qf.default)(e,jf)}function Rf(e){return e.format(jf)}function Cf(e){return Rf(xf(e))===e}function Ff(e,t){let r=xf(e,t);if(!r.isValid())throw new Error(`Could not parse the provided date "${e}"${t?` with the format "${t}""`:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."}`);Ef(r)}function Ef(e){if(e.isBefore(kf))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}If.default.extend(Of.default);var Mf=["past","now","next"],Df=["minute","hour","day","week","month","quarter","year"],Tf=e=>{let t="now"===e;return{amount:new jn({required:!t,min:1}),unit:new Mn({required:!t,constrainTo:Df}),period:new Mn({required:!0,constrainTo:Mf})}};function Pf(e){if("string"==typeof e&&!_f(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?Qf(e):e;new Sn(Tf(t.period)).validate(t);let r=Vf(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Ef(r)}function Uf(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Vf(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,If.default)().subtract(r,n);case"next":return(0,If.default)().add(r,n);case"now":return(0,If.default)()}}function $f(e){return Rf(Vf(Qf(e)))}function Lf(e){return e.toLocaleLowerCase().split("-")}function _f(e){let[t,r,n]=Lf(e);if("now"===t)return!0;if(!Mf.includes(t)||!Df.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function Nf(e){return!!e&&"object"==typeof e&&"period"in e}function Qf(e){let[t,r,n]=Lf(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Bf(e){return Pf(e),Qf(e)}function zf(e){return"dateRange"===e.type}function Hf(e){return`start${e}`}function Yf(e){return`end${e}`}var Jf=()=>({dateFacetValueMap:{}});function Wf(e,t,r){let n=e.start,a=e.end;return _f(n)&&(n=$f(n),r.dateFacetValueMap[t][Hf(n)]=e.start),_f(a)&&(a=$f(a),r.dateFacetValueMap[t][Yf(a)]=e.end),{...e,start:n,end:a}}function Gf(e,t){if(zf(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>Wf(e,r,t)))}}return e}function Kf(e){var t;let r=Jf();return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>Gf(e,r)))},mappings:r}}function Zf(e,t,r){return{...e,start:r.dateFacetValueMap[t][Hf(e.start)]||e.start,end:r.dateFacetValueMap[t][Yf(e.end)]||e.end}}function Xf(e,t){return e.facetId in t.dateFacetValueMap}function eh(e,t){return Xf(e,t)?{...e,values:e.values.map((r=>Zf(r,e.facetId,t)))}:e}function th(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>eh(e,t)))}}:e}function rh(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let a=Object.values(r);return[...n,...a]}function nh(e){return Object.values(e).map((e=>e.request))}var ih=1,uh=5e3,ah=async(e,t)=>{var r,n;let a=vh(e),i=oh(e),o=sh(e);return Kf({...await af(e,t),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...a&&{cq:a},...i.length&&{facets:i},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>uh?uh-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...(null==(n=e.generatedAnswer)?void 0:n.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function oh(e){var t;return rh(lh(e),null!=(t=e.facetOrder)?t:[])}function sh(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map((e=>e.response)).map(ch).filter((e=>e.currentValues.length>0)):void 0}function ch(e){let{field:t,label:r,values:n}=e,a=n.filter((e=>"selected"===e.state));return{field:t,label:r,currentValues:a}}function lh(e){return dh(e).filter((({facetId:t})=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a}))}function dh(e){var t,r,n,a;return[...fh(null!=(t=e.facetSet)?t:{}),...hh(null!=(r=e.numericFacetSet)?r:{}),...hh(null!=(n=e.dateFacetSet)?n:{}),...nh(null!=(a=e.categoryFacetSet)?a:{})]}function fh(e){return nh(e).map((e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function hh(e){return nh(e).map((e=>{let t=e.currentValues.some((({state:e})=>"idle"!==e));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function vh(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive));return[r,(null==n?void 0:n.expression.trim())||"",...ph(e)].filter((e=>!!e)).join(" AND ")}function ph(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var gh=class{constructor(e,t=(e=>{this.dispatch(nf({q:e}))})){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let a=(new Date).getTime();return{response:th(await this.extra.apiClient.search(t,r),e),duration:(new Date).getTime()-a,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return uu(e.response)?(this.dispatch(Sf(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:o}=r;if(0!==i.length||0===o.length||!n||!a)return null;let s=this.getCurrentQuery(),{correctedQuery:u}=r.queryCorrections[0],l=await this.automaticallyRetryQueryWithCorrection(u);return uu(l.response)?(this.dispatch(Sf(l.response.error)),this.rejectWithValue(l.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra),this.dispatch(Fd(ya(this.getState()))),{...l,response:{...l.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:s,analyticsAction:hf()})}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find((e=>"query"===e.type)))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(mf("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return uu(o.response)?(this.dispatch(Sf(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Fd(ya(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:pf()})}processSuccessResponse(e){return this.dispatch(Fd(ya(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return iu(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await ah(this.getState()),{origin:"mainSearch"});return this.dispatch(df(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(wf({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await ah(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,t,r,n){var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)?i:Fu().enableQuerySyntax},search:{...Pi(),duration:t,response:n,results:n.results}}}getCurrentQuery(){var e;let t=this.getState();return void 0!==(null==(e=t.query)?void 0:e.q)?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}},yh=hr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;zn(e,{q:new Mn,enableQuerySyntax:new Rn,clearFilters:new Rn}),e.clearFilters&&(r($d()),r(Ld())),r(_d({allow:!0})),r(nf({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ef(1))})),mh=hr("search/executeSearch",(async(e,t)=>{let r=t.getState();jh(r);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=await ah(r,o),u=new gh({...t,analyticsAction:e}),l=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(l)})),wh=hr("search/fetchPage",(async(e,t)=>{let r=t.getState();jh(r);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new gh({...t,analyticsAction:e}),u=await ah(r,o),l=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(l)})),bh=hr("search/fetchMoreResults",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await bf().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new gh({...t,analyticsAction:bf()}),u=await Oh(r,o),l=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(l)})),Sh=hr("search/fetchFacetValues",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new gh({...t,analyticsAction:e}),u=await Ah(r,o),l=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(l)})),Ih=hr("search/fetchInstantResults",(async(e,t)=>{zn(e,{id:Ln,q:Ln,maxResultsPerQuery:new jn({required:!0,min:1}),cacheTimeout:new jn});let{q:r,maxResultsPerQuery:n}=e,a=t.getState(),i=new gh({...t,analyticsAction:Bd()},(r=>{t.dispatch(Jd({q:r,id:e.id}))})),o=await qh(a,r,n),s=await i.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),u=await i.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u})),Oh=async(e,t)=>{var r,n,a,i;let o=await ah(e,t);return o.request={...o.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(i=null==(a=e.search)?void 0:a.results.length)?i:0)},o},qh=async(e,t,r)=>Kf({...await af(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t}),Ah=async(e,t)=>{let r=await ah(e,t);return r.request.numberOfResults=0,r},jh=e=>{var t;e.configuration.analytics.enabled&&Ic.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},kh=(e,t)=>{let r=e;return An(r[t])?An(e.raw[t])?null:e.raw[t]:r[t]},xh=e=>t=>e.every((e=>!An(kh(t,e)))),Rh=e=>t=>e.every((e=>An(kh(t,e)))),Ch=(e,t)=>r=>{let n=Eh(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},Fh=(e,t)=>r=>{let n=Eh(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},Eh=(e,t)=>{let r=kh(t,e);return ii(r)?r:[r]};function Mh(e){return""!==e.search.response.searchUid}function Dh(e,t,r){return e.search.results.find((e=>kh(e,t)===r))}function Th(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response=Pi().response,e.results=[],e.questionAnswer=Ti()),e.error=n,e.isLoading=!1}function Ph(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Uh(e,t){Ph(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function Vh(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var $h=Yt(Pi(),(e=>{e.addCase(mh.rejected,((e,t)=>Th(e,t))),e.addCase(bh.rejected,((e,t)=>Th(e,t))),e.addCase(wh.rejected,((e,t)=>Th(e,t))),e.addCase(mh.fulfilled,((e,t)=>{Uh(e,t)})),e.addCase(bh.fulfilled,((e,t)=>{Ph(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(wh.fulfilled,((e,t)=>{Ph(e,t),e.results=t.payload.response.results})),e.addCase(Sh.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(mh.pending,Vh),e.addCase(bh.pending,Vh),e.addCase(wh.pending,Vh)})),Lh=Yt(Ac,(e=>e)),_h=d(_()),Nh=qt("tab/register",(e=>{let t=new Tn({values:{id:Ln,expression:Nn}});return zn(e,t)})),Qh=qt("tab/updateActiveTab",(e=>zn(e,Ln)));function Bh(e,t){if(Yi(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+ki;let r=Ji(e,t);return r?Si(t,r.environment).analytics:e}var zh=Yt(xi(),(e=>e.addCase(yd,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${ji}`,e.analytics.apiBaseUrl=Bh(t.payload.platformUrl,e.organizationId))})).addCase(md,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(wd,((e,t)=>{An(t.payload.enabled)||(!t.payload.enabled&&e.analytics.enabled&&Sc(e.analytics),e.analytics.enabled=t.payload.enabled),An(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),An(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),An(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),An(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),An(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),An(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),An(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),(0,_h.default)()&&(e.analytics.analyticsMode="next"),An(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),An(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),An(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),An(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),An(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(bd,(e=>{e.analytics.enabled=!1,Sc(e.analytics)})).addCase(Sd,(e=>{e.analytics.enabled=!0})).addCase(Id,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Od,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(Qh,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(Ad,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),Hh=zh;function Yh(e,t){let r,n={...e};return{get combinedReducer(){let e=fi(Object.entries(t).filter((([e])=>!(e in n))).map((([e,t])=>[e,()=>t])));return(e=>(t,n)=>{let a=e(t,n);return r?r(a,n):a})((0,B.combineReducers)({...e,...n}))},containsAll:e=>Object.keys(e).every((e=>e in n)),add(e){Object.keys(e).filter((e=>!(e in n))).forEach((t=>n[t]=e[t]))},addCrossReducer(e){r=e}}}function Jh(e,t,r){var n,a,i;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(a=r.callback)&&a,u=r.maxWait,l=Date.now(),c=[];function d(){if(void 0!==u){var e=Date.now()-l;if(e+t>=u)return u-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,a){var u=o&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,l=Date.now(),!o){var n=e.apply(r,t);s&&s(n),c.forEach((function(e){return(0,e.resolve)(n)})),c=[]}}),d()),u){var f=e.apply(r,t);return s&&s(f),n(f)}c.push({resolve:n,reject:a})}))};return f.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},f}function Wh(e,t){let r=0,n=Jh((()=>r=0),500);return a=>i=>async o=>{if("function"!=typeof o)return i(o);let s=await i(o);if(!Gh(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await Kh(t);a.dispatch(yd({accessToken:u})),a.dispatch(o)}}function Gh(e){var t;return(null==(t=null==e?void 0:e.error)?void 0:t.name)===(new ei).name}async function Kh(e){try{return await e()}catch(e){return""}}function Zh({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return Bt({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:a,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),mn(n.logger)]})}var Xh={configuration:Hh,version:Lh};function ev(e,t){var r,n;let a=(null==(r=e.configuration.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:i,...o}=null!=(n=e.configuration.analytics)?n:{},s={...o,nextApiBaseUrl:`${a}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:a};return di()?(t.info("Analytics disabled since doNotTrack is active."),{...s,enabled:!1}):s}function tv(e,t){var r;let n=rv(e,t),{accessToken:a,organizationId:i}=e.configuration,{organizationEndpoints:o}=e.configuration,s=(null==o?void 0:o.platform)||e.configuration.platformUrl;av(e)&&n.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),uv(e)?n.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):ov(e)&&n.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${null==(r=e.configuration.organizationEndpoints)?void 0:r.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),n.dispatch(yd({accessToken:a,organizationId:i,platformUrl:s}));let u=ev(e,n.logger);return u&&n.dispatch(wd(u)),n}function rv(e,t){var r;let{reducers:n}=e,a=Yh({...Xh,...n},null!=(r=e.preloadedState)?r:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let i=t.logger,o=nv(e,t,a);return{addReducers(e){a.containsAll(e)||(a.add(e),o.replaceReducer(a.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(Sd())},disableAnalytics(){o.dispatch(bd())},get state(){return o.getState()},logger:i,store:o}}function nv(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=iv(e,t.logger);return Zh({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}function iv(e,t){let{renewAccessToken:r}=e.configuration,n=Wh(t,r);return[gn,n,yn(t),vn].concat(e.middlewares||[])}function uv(e){return On(e.configuration.organizationEndpoints)}function av(e){var t;return!An(e.configuration.platformUrl)||An(null==(t=e.configuration.organizationEndpoints)?void 0:t.platform)}function ov(e){let{platform:t}=e.configuration.organizationEndpoints;if(On(t))return!1;let r=Wi(t);return r&&r.organizationId!==e.configuration.organizationId}var sv=d(w());function cv(e){return(0,sv.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter}})}function lv(e,t){return{analyticsClientMiddleware:dv(e),validatePayload:Bn,preprocessRequest:fv(e),logger:t}}function dv(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}function fv(e){return e.preprocessRequest||Di}var hv=d(U()),vv=(e,t,r,n,a,i)=>{let o=e[t];An(o)||An(a)||a!==o&&a!==n&&(i.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),i.warn(`To remove this warning, make sure that access token value [${o}] matches engine configuration value [${r}]`))},pv=(e,t)=>!(An(e)||t===e),gv=e=>{try{let t=("undefined"!=typeof atob?atob:hv.atob)(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"));if(!t)return!1;let r=decodeURIComponent(t.split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(r)}catch(e){return!1}},yv=(e,t)=>(pv(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),mv=(e,t,r,n)=>(vv(e,"searchHub",t.searchHub,Fi(),r,n),yv(e,t)),wv=(e,t)=>(pv(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),bv=(e,t,r,n)=>(vv(e,"pipeline",t.pipeline,Ku(),r,n),wv(e,t)),Sv=(e,t)=>(pv(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),Iv=(e,t,r,n)=>(vv(e,"userDisplayName",t.configuration.analytics.userDisplayName,xi().analytics.userDisplayName,r,n),Sv(e,t)),Ov=e=>Yt({},(t=>{t.addCase(Ud,((t,r)=>{let n=gv(t.configuration.accessToken);return n?mv(n,t,r.payload,e):t})).addCase(Td,((t,r)=>{let n=gv(t.configuration.accessToken);return n?bv(n,t,r.payload,e):t})).addCase(yd,((e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=gv(r);return n?[wv,yv,Sv].reduce(((e,t)=>t(n,e)),e):e})).addCase(md,((t,r)=>{var n;let a=gv(t.configuration.accessToken);if(!a)return t;let i=mv(a,t,r.payload.searchHub,e);return bv(a,i,null==(n=r.payload)?void 0:n.pipeline,e)})).addCase(wd,((t,r)=>{let n=gv(t.configuration.accessToken);return n?Iv(n,t,r.payload.userDisplayName,e):t}))})),qv={organizationId:Ln,accessToken:Ln,platformUrl:new Mn({required:!1,emptyAllowed:!1}),name:new Mn({required:!1,emptyAllowed:!1}),analytics:new Tn({options:{required:!1},values:{enabled:new Rn({required:!1}),originContext:new Mn({required:!1}),originLevel2:new Mn({required:!1}),originLevel3:new Mn({required:!1}),analyticsMode:new Mn({constrainTo:["legacy","next"],required:!1})}})},Av=new Sn({...qv,search:new Tn({options:{required:!1},values:{pipeline:new Mn({required:!1,emptyAllowed:!0}),searchHub:_n,locale:_n,timezone:_n,authenticationProviders:new Un({required:!1,each:Ln})}})}),jv={debug:xd,pipeline:Pd,searchHub:Vd,search:$h};function kv(e){var t;return{...e.configuration.search,apiBaseUrl:(null==(t=e.configuration.organizationEndpoints)?void 0:t.search)||void 0}}function xv(e){let t=cv(e.loggerOptions);Rv(e.configuration,t);let r=Cv(e.configuration,t),n=Fv(t),a={...lv(e.configuration,t),apiClient:r,streamingClient:n},i=tv({...e,reducers:jv,crossReducer:Ov(t)},a),o=kv(e);return o&&i.dispatch(md(o)),{...i,get state(){return i.state},executeFirstSearch(e=dd()){if(Mh(i.state))return;let t=mh(e);i.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e,n=r&&"omniboxFromLink"===t?vd(r):hd();this.executeFirstSearch(n)}}}function Rv(e,t){try{Av.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}function Cv(e,t){let{search:r}=e;return new nu({logger:t,preprocessRequest:e.preprocessRequest||Di,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||Zu,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||Xu,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||ea})}function Fv(e){return new za({logger:e})}function Ev(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(a){a();let i,o=Symbol();return n()&&(t=JSON.stringify(this.state),i=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&i&&i()}},get state(){return{}}}}var Mv=new Un({each:Ln,required:!0}),Dv=qt("fields/registerFieldsToInclude",(e=>zn(e,Mv))),Tv=qt("fields/fetchall/enable"),Pv=qt("fields/fetchall/disable"),Uv=hr("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return uu(u)?n(u.error):u.success.fields})),Vv={collectionField:new Mn({emptyAllowed:!1,required:!1}),parentField:new Mn({emptyAllowed:!1,required:!1}),childField:new Mn({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new jn({min:0,required:!1})},$v=qt("folding/register",(e=>zn(e,Vv))),Lv=hr("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await af(a),o=await n.search({...i,q:_v(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return uu(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:a.folding.collections[e].result}}));function _v(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Nv=Yt(ju(),(e=>e.addCase(Dv,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(Tv,(e=>{e.fetchAllFields=!0})).addCase(Pv,(e=>{e.fetchAllFields=!1})).addCase(Uv.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase($v,((e,{payload:t})=>{var r,n,a;let i=ku().fields;e.fieldsToInclude.push(null!=(r=t.collectionField)?r:i.collection,null!=(n=t.parentField)?n:i.parent,null!=(a=t.childField)?a:i.child)})))),Qv=new Un({each:Ln,required:!0}),Bv=(e,t)=>(zn(e,Ln),Dn(t)?zn(t,Ln):zn(t,Qv),{payload:{contextKey:e,contextValue:t}}),zv=qt("context/set",(e=>{for(let[t,r]of Object.entries(e))Bv(t,r);return{payload:e}})),Hv=qt("context/add",(e=>Bv(e.contextKey,e.contextValue))),Yv=qt("context/remove",(e=>zn(e,Ln)));Yt(zu(),(e=>{e.addCase(zv,((e,t)=>{e.contextValues=t.payload})).addCase(Hv,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Yv,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Dd.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))}));var Jv=qt("dictionaryFieldContext/set",(e=>{let t=new Tn({options:{required:!0}}),r=zn(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new Un({each:Nn}),i=zn(n,a).error;return i?{payload:e,error:i}:{payload:e}})),Wv=qt("dictionaryFieldContext/add",(e=>{let t=new Tn({options:{required:!0},values:{field:Nn,key:Nn}});return zn(e,t)})),Gv=qt("dictionaryFieldContext/remove",(e=>zn(e,Nn)));Yt(Wu(),(e=>{e.addCase(Jv,((e,t)=>{e.contextValues=t.payload})).addCase(Wv,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(Gv,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Dd.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));var Kv=Yt(fu(),(e=>{e.addCase(of,(e=>{e.enableDidYouMean=!0})).addCase(sf,(e=>{e.enableDidYouMean=!1})).addCase(lf,(e=>{e.automaticallyCorrectQuery=!0})).addCase(cf,(e=>{e.automaticallyCorrectQuery=!1})).addCase(mh.pending,(e=>{e.queryCorrection=du(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(mh.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||du(),e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(df,((e,t)=>{e.wasCorrectedTo=t.payload}))}));function Zv(e,t={}){Xv(e);let r=Ev(e),{dispatch:n}=e;n(of()),!1===t.automaticallyCorrectQuery&&n(cf());let a=()=>e.state;return{...r,get state(){let e=a();return{originalQuery:e.didYouMean.originalQuery,wasCorrectedTo:e.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:e.didYouMean.wasAutomaticallyCorrected,queryCorrection:e.didYouMean.queryCorrection,hasQueryCorrection:""!==e.didYouMean.queryCorrection.correctedQuery||""!==e.didYouMean.wasCorrectedTo}},applyCorrection(){n(df(this.state.queryCorrection.correctedQuery))}}}function Xv(e){return e.addReducers({configuration:Hh,didYouMean:Kv}),!0}function ep(e){let t=Zv(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(mh(ff()))}}}var tp=Ln,rp=qt("facetOptions/update",((e={freezeFacetOrder:!0})=>zn(e,{freezeFacetOrder:new Rn({required:!1})}))),np=qt("facetOptions/facet/enable",(e=>zn(e,tp))),ip=qt("facetOptions/facet/disable",(e=>zn(e,tp))),up={facetId:tp,captions:new Tn({options:{required:!1}}),numberOfValues:new jn({required:!1,min:1}),query:new Mn({required:!1,emptyAllowed:!0})},ap={path:new Un({required:!0,each:Ln}),displayValue:Nn,rawValue:Nn,count:new jn({required:!0,min:0})},op=qt("categoryFacet/selectSearchResult",(e=>zn(e,{facetId:tp,value:new Tn({values:ap})}))),sp=qt("categoryFacetSearch/register",(e=>zn(e,up)));function cp(e,t){var r;let{facetId:n,criterion:a}=t,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)}function lp(e){!e||(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function dp(e,t){!e||(e.numberOfValues=t)}function fp(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function hp(e,t,r){e.currentValues=vp(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function vp(e,t){if(!e.length)return[];let r=pp(e[0],t),n=r;for(let r of e.splice(1)){let e=pp(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}function pp(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var gp={state:new In({required:!0}),numberOfResults:new jn({required:!0,min:0}),value:new Mn({required:!0,emptyAllowed:!0}),path:new Un({required:!0,each:Ln}),moreValuesAvailable:new Rn({required:!1})};function yp(e){e.children.forEach((e=>{yp(e)})),Bn({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},gp)}var mp={facetId:tp,field:Ln,delimitingCharacter:new Mn({required:!1,emptyAllowed:!0}),filterFacetCount:new Rn({required:!1}),injectionDepth:new jn({required:!1,min:0}),numberOfValues:new jn({required:!1,min:1}),sortCriteria:new In({required:!1}),basePath:new Un({required:!1,each:Ln}),filterByBasePath:new Rn({required:!1})},wp=qt("categoryFacet/register",(e=>zn(e,mp))),bp=qt("categoryFacet/toggleSelectValue",(e=>{try{return Bn(e.facetId,Ln),yp(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Qn(t)}}})),Sp=qt("categoryFacet/deselectAll",(e=>zn(e,mp.facetId))),Ip=qt("categoryFacet/updateNumberOfValues",(e=>zn(e,{facetId:mp.facetId,numberOfValues:mp.numberOfValues}))),Op=qt("categoryFacet/updateSortCriterion",(e=>zn(e,{facetId:mp.facetId,criterion:new In}))),qp=qt("categoryFacet/updateBasePath",(e=>zn(e,{facetId:mp.facetId,basePath:new Un({each:Ln})}))),Ap=Yt(pu(),(e=>{e.addCase(wp,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let a=xp(r),i=a.numberOfValues;e[n]={request:a,initialNumberOfValues:i}})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e})).addCase(Ad,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&hp(n,a,e[t].initialNumberOfValues)}))})).addCase(Op,((e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)})).addCase(qp,((e,t)=>{var r;let{facetId:n,basePath:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.basePath=[...a])})).addCase(bp,((e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=a,u=kp(o,s.slice(0,s.length-1),i);if(u.length){let e=u[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}let l=Rp(a.value,i);l.state="selected",u.push(l),o.numberOfValues=1})).addCase(Sp,((e,t)=>{fp(e,t.payload)})).addCase($d,(e=>{Object.keys(e).forEach((t=>fp(e,t)))})).addCase(_d,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(Ip,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return dp(i,a);Fp(e,t.payload)}})).addCase(op,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];hp(a.request,i,a.initialNumberOfValues)})).addCase(Sh.fulfilled,((e,t)=>{Cp(e,t.payload.response.facets)})).addCase(mh.fulfilled,((e,t)=>{Cp(e,t.payload.response.facets)})).addCase(ip,((e,t)=>{fp(e,t.payload)}))})),jp={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function kp(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=Rp(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}function xp(e){return{...jp,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function Rp(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function Cp(e,t){t.forEach((t=>{var r;if(!Ep(e,t))return;let n=t.facetId,a=null==(r=e[n])?void 0:r.request;if(!a)return;let i=Mp(a,t);a.currentValues=i?[]:a.currentValues,a.preventAutoSelect=!1}))}function Fp(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&"selected"!==(null==i?void 0:i.state);)i=i.children[0];i.retrieveCount=a}}function Ep(e,t){return t.facetId in e}function Mp(e,t){let r=Tc(e.currentValues),n=Tc(t.values);return r.length!==n.length}function Dp(e,t,r){let{facetId:n}=t;if(e[n])return;let a={..._p,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function Tp(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function Pp(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function Up(e,t){let r=e[t];!r||(r.isLoading=!1)}function Vp(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function $p(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=_p.query)}function Lp(e,t){Object.keys(e).forEach((r=>$p(e,{facetId:r},t)))}var _p={captions:{},numberOfValues:10,query:""},Np=async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:i,query:o,numberOfValues:s}=n,{field:u,delimitingCharacter:l,basePath:c,filterFacetCount:d}=a,f=Qp(a),p=f.length?[f]:[],h=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:c,captions:i,numberOfValues:s,query:h,field:u,delimitingCharacter:l,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await ah(t)).request}}},Qp=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},Bp=async(e,t,r)=>{let{captions:n,query:a,numberOfValues:i}=t.facetSearchSet[e].options,{field:o,currentValues:s,filterFacetCount:u}=t.facetSet[e].request,l=s.filter((e=>"idle"!==e.state)).map((e=>e.value)),c=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:i,query:c,field:o,ignoreValues:l,filterFacetCount:u,type:"specific",...r?{}:{searchContext:(await ah(t)).request}}},zp=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i,o=r();return a(t,Ln),i=Wp(o,t)?await Bp(t,o,e):await Np(t,o,e),{facetId:t,response:await n.facetSearch(i)}},Hp=hr("facetSearch/executeSearch",zp(!1)),Yp=hr("facetSearch/executeSearch",zp(!0)),Jp=qt("facetSearch/clearResults",(e=>zn(e,{facetId:tp}))),Wp=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],Gp={facetId:tp,value:new Tn({values:{displayValue:Nn,rawValue:Nn,count:new jn({required:!0,min:0})}})},Kp=qt("facetSearch/register",(e=>zn(e,up))),Zp=qt("facetSearch/update",(e=>zn(e,up))),Xp=qt("facetSearch/toggleSelectValue",(e=>zn(e,Gp))),eg=qt("facetSearch/toggleExcludeValue",(e=>zn(e,Gp))),tg=Yt(Yu(),(e=>{e.addCase(sp,((e,t)=>{Dp(e,t.payload,rg)})).addCase(Zp,((e,t)=>{Tp(e,t.payload)})).addCase(Hp.pending,((e,t)=>{Pp(e,t.meta.arg,t.meta.requestId)})).addCase(Hp.rejected,((e,t)=>{Up(e,t.meta.arg)})).addCase(Hp.fulfilled,((e,t)=>{Vp(e,t.payload,t.meta.requestId)})).addCase(Jp,((e,{payload:{facetId:t}})=>{$p(e,{facetId:t},rg)})).addCase(mh.fulfilled,(e=>{Lp(e,rg)}))}));function rg(){return{moreValuesAvailable:!1,values:[]}}var ng=e=>Gl("analytics/facet/showMore",((t,r)=>{zn(e,tp);let n=Qc(e,zc(r));return t.makeFacetShowMore(n)})),ig=e=>Gl("analytics/facet/showLess",((t,r)=>{zn(e,tp);let n=Qc(e,zc(r));return t.makeFacetShowLess(n)})),ug=e=>Gl("analytics/facet/sortChange",((t,r)=>{zn(e,{facetId:tp,criterion:new In({required:!0})});let{facetId:n,criterion:a}=e,i=zc(r),o={...Qc(n,i),criteria:a};return t.makeFacetUpdateSort(o)})),ag=e=>Gl("analytics/facet/reset",((t,r)=>{zn(e,tp);let n=zc(r),a=Qc(e,n);return t.makeFacetClearAll(a)})),og=e=>Gl("analytics/facet/select",((t,r)=>{zn(e,{facetId:tp,facetValue:Ln});let n=zc(r),a=Bc(e,n);return t.makeFacetSelect(a)})),sg=e=>Gl("analytics/facet/exclude",((t,r)=>{zn(e,{facetId:tp,facetValue:Ln});let n=zc(r),a=Bc(e,n);return t.makeFacetExclude(a)})),cg=e=>Gl("analytics/facet/deselect",((t,r)=>{zn(e,{facetId:tp,facetValue:Ln});let n=zc(r),a=Bc(e,n);return t.makeFacetDeselect(a)})),lg=e=>Gl("analytics/facet/breadcrumb",((t,r)=>{zn(e,{facetId:tp,facetValue:Ln});let n=Bc(e,zc(r));return t.makeBreadcrumbFacet(n)})),dg=(e,t)=>{var r,n;return null==(n=null==(r=e.facetOptions.facets[t])?void 0:r.enabled)||n},fg=new Mn({regex:/^[a-zA-Z0-9-_]+$/}),hg=new Mn({required:!0}),vg=new Un({each:new Mn}),pg=new Mn,gg=new Rn,yg=new Rn,mg=new jn({min:0}),wg=new jn({min:1}),bg=new Rn({required:!0}),Sg=new Tn,Ig=new Mn,Og={captions:Sg,numberOfValues:wg,query:Ig},qg=new Tn({values:Og}),Ag=new Tn({options:{required:!1},values:{type:new Mn({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new Un({required:!0,max:25,each:new Mn({emptyAllowed:!1,required:!0})})}}),jg=new Rn,kg=new Un({min:1,max:25,required:!1,each:new Mn({emptyAllowed:!1,required:!0})}),xg={value:Ln,numberOfResults:new jn({min:0}),state:Ln},Rg={facetId:tp,field:new Mn({required:!0,emptyAllowed:!0}),filterFacetCount:new Rn({required:!1}),injectionDepth:new jn({required:!1,min:0}),numberOfValues:new jn({required:!1,min:1}),sortCriteria:new In({required:!1}),resultsMustMatch:new In({required:!1}),allowedValues:Ag,customSort:kg},Cg=qt("facet/register",(e=>zn(e,Rg))),Fg=qt("facet/toggleSelectValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:xg})}))),Eg=qt("facet/toggleExcludeValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:xg})}))),Mg=qt("facet/deselectAll",(e=>zn(e,tp))),Dg=qt("facet/updateSortCriterion",(e=>zn(e,{facetId:tp,criterion:new In({required:!0})}))),Tg=qt("facet/updateNumberOfValues",(e=>zn(e,{facetId:tp,numberOfValues:new jn({required:!0,min:1})}))),Pg=qt("facet/updateIsFieldExpanded",(e=>zn(e,{facetId:tp,isFieldExpanded:new Rn({required:!0})}))),Ug=qt("facet/updateFreezeCurrentValues",(e=>zn(e,{facetId:tp,freezeCurrentValues:new Rn({required:!0})})));function Vg(e){var t,r;return{start:$g(e.start,e),end:$g(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function $g(e,t){let{dateFormat:r}=t;return Nf(e)?(Pf(e),Uf(e)):"string"==typeof e&&_f(e)?(Pf(e),e):(Ff(e,r),Rf(xf(e,r)))}var Lg=qt("rangeFacet/updateSortCriterion",(e=>zn(e,{facetId:tp,criterion:new In({required:!0})}))),_g={state:Ln,start:new jn({required:!0}),end:new jn({required:!0}),endInclusive:new Rn({required:!0}),numberOfResults:new jn({required:!0,min:0})},Ng={start:Ln,end:Ln,endInclusive:new Rn({required:!0}),state:Ln,numberOfResults:new jn({required:!0,min:0})},Qg=e=>({facetId:tp,selection:"string"==typeof e.start?new Tn({values:Ng}):new Tn({values:_g})}),Bg={start:Ln,end:Ln,endInclusive:new Rn({required:!0}),state:Ln},zg={facetId:tp,field:Ln,currentValues:new Un({required:!1,each:new Tn({values:Bg})}),generateAutomaticRanges:new Rn({required:!0}),filterFacetCount:new Rn({required:!1}),injectionDepth:new jn({required:!1,min:0}),numberOfValues:new jn({required:!1,min:1}),sortCriteria:new In({required:!1}),rangeAlgorithm:new In({required:!1})};function Hg(e){return _f(e)?$f(e):e}function Yg(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=Vg(e);if(xf(Hg(t)).isAfter(xf(Hg(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Jg=qt("dateFacet/register",(e=>{try{return Bn(e,zg),Yg(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qn(t)}}})),Wg=qt("dateFacet/toggleSelectValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:Ng})}))),Gg=qt("dateFacet/toggleExcludeValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:Ng})}))),Kg=qt("dateFacet/updateFacetValues",(e=>{try{return Bn(e,{facetId:tp,values:new Un({each:new Tn({values:Ng})})}),Yg({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qn(t)}}})),Zg=Lg,Xg=Mg,ey={state:Ln,start:new jn({required:!0}),end:new jn({required:!0}),endInclusive:new Rn({required:!0})},ty={facetId:tp,field:Ln,currentValues:new Un({required:!1,each:new Tn({values:ey})}),generateAutomaticRanges:new Rn({required:!0}),filterFacetCount:new Rn({required:!1}),injectionDepth:new jn({required:!1,min:0}),numberOfValues:new jn({required:!1,min:1}),sortCriteria:new In({required:!1}),rangeAlgorithm:new In({required:!1})};function ry(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var ny=qt("numericFacet/register",(e=>{try{return zn(e,ty),ry(e),{payload:e,error:null}}catch(t){return{payload:e,error:Qn(t)}}})),iy=qt("numericFacet/toggleSelectValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:_g})}))),uy=qt("numericFacet/toggleExcludeValue",(e=>zn(e,{facetId:tp,selection:new Tn({values:_g})}))),ay=qt("numericFacet/updateFacetValues",(e=>{try{return Bn(e,{facetId:tp,values:new Un({each:new Tn({values:_g})})}),ry({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Qn(t)}}})),oy=Lg,sy=Mg,cy=Yt(vu(),(e=>{e.addCase(rp,((e,t)=>({...e,...t.payload}))).addCase(mh.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(mh.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e})).addCase(wp,((e,t)=>{e.facets[t.payload.facetId]=hu()})).addCase(Cg,((e,t)=>{e.facets[t.payload.facetId]=hu()})).addCase(Jg,((e,t)=>{e.facets[t.payload.facetId]=hu()})).addCase(ny,((e,t)=>{e.facets[t.payload.facetId]=hu()})).addCase(np,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(ip,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(Ad,((e,t)=>{var r,n,a,i,o;[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.fExcluded)?n:{}),...Object.keys(null!=(a=t.payload.cf)?a:{}),...Object.keys(null!=(i=t.payload.nf)?i:{}),...Object.keys(null!=(o=t.payload.df)?o:{})].forEach((t=>{t in e||(e.facets[t]=hu()),e.facets[t].enabled=!0}))}))}));function ly(e,t){let{field:r,state:n}=e;if(!dy(e))return r;let a=`${r}_`,i=fy(a,n);return py(r,t),`${a}${i}`}function dy(e){let{field:t,state:r}=e;return hy(r).some((e=>e&&t in e))}function fy(e,t){let r=hy(t).map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]);return vy(r,e)+1}function hy(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}function vy(e,t){let r=e.map((e=>{let r=e.split(t)[1],n=parseInt(r,10);return Number.isNaN(n)?0:n})).sort().pop();return null!=r?r:0}function py(e,t){let r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function gy(e,t){let{state:r,logger:n}=e,{field:a,facetId:i}=t;return i||ly({field:a,state:r},n)}var yy=["alphanumeric","occurrences"],my=new Sn({field:hg,basePath:vg,delimitingCharacter:pg,facetId:fg,facetSearch:qg,filterByBasePath:gg,filterFacetCount:yg,injectionDepth:mg,numberOfValues:wg,sortCriteria:new Mn({constrainTo:yy})});function wy(e,t){by(e);let r=Ev(e),{dispatch:n}=e,a=gy(e,t.options),i={...jp,...si("facetSearch",t.options),field:t.options.field,facetId:a},o={facetSearch:{..._p,...t.options.facetSearch},...i};Yn(e,my,o,"buildCategoryFacet");let s=()=>Lc(e.state,a),u=()=>$c(e.state,a),l=()=>Mc(e.state),c=()=>dg(e.state,a);return n(wp(i)),{...r,toggleSelect(e){let t=o.numberOfValues;n(bp({facetId:a,selection:e,retrieveCount:t})),n(rp())},deselectAll(){n(Sp(a)),n(rp())},sortBy(e){n(Op({facetId:a,criterion:e})),n(rp())},isSortedBy:e=>s().sortCriteria===e,showMoreValues(){var e;let{numberOfValues:t}=o,{activeValue:r,valuesAsTrees:i}=this.state,s=(null!=(e=null==r?void 0:r.children.length)?e:i.length)+t;n(Ip({facetId:a,numberOfValues:s})),n(rp())},showLessValues(){let{numberOfValues:e}=o;n(Ip({facetId:a,numberOfValues:e})),n(rp())},enable(){n(np(a))},disable(){n(ip(a))},get state(){var e,t,r,n;let i=s(),d=u(),f=l(),p=c(),h=null!=(e=null==d?void 0:d.values)?e:[],g=null!=(t=h.some((e=>e.children.length>0)))&&t,{parents:v,values:m}=Dc(null==d?void 0:d.values),y=Tc(h),S=y.length?y[y.length-1]:void 0,b=!!S,w=null!=(n=null!=(r=null==S?void 0:S.moreValuesAvailable)?r:null==d?void 0:d.moreValuesAvailable)&&n,I=S?S.children.length>o.numberOfValues:h.length>o.numberOfValues;return{facetId:a,parents:v,selectedValueAncestry:y,values:m,isHierarchical:g,valuesAsTrees:h,activeValue:S,isLoading:f,hasActiveValues:b,canShowMoreValues:w,canShowLessValues:I,sortCriteria:i.sortCriteria,enabled:p}}}}function by(e){return e.addReducers({categoryFacetSet:Ap,categoryFacetSearchSet:tg,facetOptions:cy,configuration:Hh,search:$h}),!0}function Sy(e,t){let r=e.dispatch,{options:n,getFacetSearch:a}=t,{facetId:i}=n;return{updateText(e){r(Zp({facetId:i,query:e,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=a();r(Zp({facetId:i,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?Yp(i):Hp(i))},search(){r(t.isForFieldSuggestions?Yp(i):Hp(i))},clear(){r(Jp({facetId:i}))},updateCaptions(e){r(Zp({facetId:i,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=a(),{query:n}=r,i=e.values;return{...e,values:i,isLoading:t,query:n}}}}function Iy(e,t){let{dispatch:r}=e,n={..._p,...t.options},{facetId:a}=n;r(sp(n));let i=Sy(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a],isForFieldSuggestions:t.isForFieldSuggestions});return{...i,select(e){r(op({facetId:a,value:e}))},get state(){return i.state}}}function Oy(e,t){let{dispatch:r}=e,n={..._p,...t.options},{facetId:a}=n,i=Iy(e,{options:{...n},isForFieldSuggestions:t.isForFieldSuggestions});r(sp(n));let o=Sy(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a],isForFieldSuggestions:t.isForFieldSuggestions});return{...o,...i,select:e=>{i.select(e),r(rp()),r(mh(og({facetId:a,facetValue:e.rawValue})))},get state(){return{...o.state,...i.state}}}}function qy(e,t){Ay(e);let r=wy(e,t),{dispatch:n}=e,a=()=>r.state.facetId,i=Oy(e,{options:{facetId:a(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:o,...s}=i;return{...r,facetSearch:s,toggleSelect(e){r.toggleSelect(e);let t=jy(a(),e);n(mh(t))},deselectAll(){r.deselectAll(),n(mh(ag(a())))},sortBy(e){r.sortBy(e),n(mh(ug({facetId:a(),criterion:e})))},showMoreValues(){r.showMoreValues(),n(Sh(ng(a())))},showLessValues(){r.showLessValues(),n(Sh(ig(a())))},get state(){return{...r.state,facetSearch:i.state}}}}function Ay(e){return e.addReducers({categoryFacetSet:Ap,categoryFacetSearchSet:tg,configuration:Hh,search:$h}),!0}function jy(e,t){let r={facetId:e,facetValue:t.value};return"selected"===t.state?cg(r):og(r)}var ky=Yt(gu(),(e=>{e.addCase(Kp,((e,t)=>{Dp(e,t.payload,xy)})).addCase(Zp,((e,t)=>{Tp(e,t.payload)})).addCase(Hp.pending,((e,t)=>{Pp(e,t.meta.arg,t.meta.requestId)})).addCase(Hp.rejected,((e,t)=>{Up(e,t.meta.arg)})).addCase(Hp.fulfilled,((e,t)=>{Vp(e,t.payload,t.meta.requestId)})).addCase(Jp,((e,{payload:t})=>{$p(e,t,xy)})).addCase(mh.fulfilled,(e=>{Lp(e,xy)}))}));function xy(){return{moreValuesAvailable:!1,values:[]}}var Ry=()=>Kl("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new ol(e)));qt("productlisting/setUrl",(e=>zn(e,{url:new Mn({required:!0,url:!0})}))),qt("productlisting/setAdditionalFields",(e=>zn(e,{additionalFields:new Un({required:!0,each:new Mn({required:!0,emptyAllowed:!1})})})));var Cy=hr("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await Fy(i));return uu(s)?(r(Sf(s.error)),n(s.error)):{response:s.success,analyticsAction:Ry()}})),Fy=async e=>{var t,r,n;let a=My(e),i=await bc(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Ey(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||Ei.Relevance)!==Ei.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Ey(e){return e.debug}function My(e){var t;return rh(Dy(e),null!=(t=e.facetOrder)?t:[])}function Dy(e){var t,r,n,a;return[...nh(null!=(t=e.facetSet)?t:{}),...nh(null!=(r=e.numericFacetSet)?r:{}),...nh(null!=(n=e.dateFacetSet)?n:{}),...nh(null!=(a=e.categoryFacetSet)?a:{})]}var Ty=Yt(mu(),(e=>{e.addCase(Cg,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=yu($y(t.payload)))})).addCase(Dd.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(Ad,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:a}=e[t],i=r[t]||[],o=n[t]||[],s=a.currentValues.filter((e=>!i.includes(e.value)&&!o.includes(e.value)));a.currentValues=[...i.map(_y),...o.map(Ny),...s.map(Qy)],a.preventAutoSelect=i.length>0,a.numberOfValues=Math.max(i.length+o.length,a.numberOfValues)}))})).addCase(Fg,((e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find((e=>e.value===a.value));if(!o)return void Py(i,a);let s="selected"===o.state;o.state=s?"idle":"selected",i.freezeCurrentValues=!0})).addCase(Eg,((e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find((e=>e.value===a.value));if(!o)return void Py(i,a);let s="excluded"===o.state;o.state=s?"idle":"excluded",i.freezeCurrentValues=!0})).addCase(Ug,((e,t)=>{var r;let{facetId:n,freezeCurrentValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.freezeCurrentValues=a)})).addCase(Mg,((e,t)=>{var r;lp(null==(r=e[t.payload])?void 0:r.request)})).addCase($d,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>lp(e)))})).addCase(Ld,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>lp(e)))})).addCase(_d,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(Dg,((e,t)=>{cp(e,t.payload)})).addCase(Tg,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload;dp(null==(r=e[n])?void 0:r.request,a)})).addCase(Pg,((e,t)=>{var r;let{facetId:n,isFieldExpanded:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.isFieldExpanded=a)})).addCase(mh.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return Uy(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Cy.fulfilled,((e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach((t=>{var r;return Uy(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Sh.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return Uy(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Xp,((e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find((e=>e.value===o));u?u.state="selected":(Py(i,_y(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0)})).addCase(eg,((e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,u=s.find((e=>e.value===o));u?u.state="excluded":(Py(i,Ny(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0)})).addCase(ip,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];lp(r)}))}));function Py(e,t){let{currentValues:r}=e,n=r.findIndex((e=>"idle"===e.state)),a=-1===n?r.length:n,i=r.slice(0,a),o=r.slice(a+1);e.currentValues=[...i,t,...o],e.numberOfValues=e.currentValues.length}function Uy(e,t){!e||(e.currentValues=t.values.map(Ly),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Vy={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function $y(e){return{...Vy,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Ly(e){let{value:t,state:r}=e;return{value:t,state:r}}function _y(e){return{value:e,state:"selected"}}function Ny(e){return{value:e,state:"excluded"}}function Qy(e){return{...e,state:"idle"}}var By=e=>"selected"===e.state,zy=e=>"excluded"===e.state,Hy=(e,t)=>{let r={facetId:e,facetValue:t.value};return By(t)?cg(r):og(r)},Yy=(e,t)=>{let r={facetId:e,facetValue:t.value};return zy(t)?cg(r):sg(r)};function Jy(e,t){let{dispatch:r}=e,{options:n,select:a,exclude:i,isForFieldSuggestions:o}=t,{facetId:s}=n;r(Kp(n));let u=Sy(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[s],isForFieldSuggestions:o});return{...u,select(e){r(Xp({facetId:s,value:e})),a(e)},exclude(e){r(eg({facetId:s,value:e})),i(e)},singleSelect(e){r(Mg(s)),r(Xp({facetId:s,value:e})),a(e)},singleExclude(e){r(Mg(s)),r(eg({facetId:s,value:e})),i(e)},get state(){let{values:e}=u.state;return{...u.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}var Wy={facetId:tp,selection:new Tn({values:xg})},Gy=hr("facet/executeToggleSelect",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},Wy),n(Fg({facetId:e,selection:t})),n(rp())})),Ky=hr("facet/executeToggleExclude",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},Wy),n(Eg({facetId:e,selection:t})),n(rp())})),Zy=["allValues","atLeastOneValue"],Xy=["score","alphanumeric","alphanumericDescending","occurrences","automatic"],em=new Sn({facetId:fg,field:hg,filterFacetCount:yg,injectionDepth:mg,numberOfValues:wg,sortCriteria:new Mn({constrainTo:Xy}),resultsMustMatch:new Mn({constrainTo:Zy}),facetSearch:qg});function tm(e,t,r=em){rm(e);let{dispatch:n}=e,a=Ev(e),i=gy(e,t.options),o={...Vy,...si("facetSearch",t.options),field:t.options.field,facetId:i},s={facetSearch:{..._p,...t.options.facetSearch},...o};Yn(e,r,s,"buildFacet");let u=()=>Rc(e.state,i),l=()=>Fc(e.state,i),c=()=>Mc(e.state),d=()=>dg(e.state,i),f=()=>{let{currentValues:e}=u(),t=s.numberOfValues,r=!!e.find((e=>"idle"===e.state));return t<e.length&&r};return n(Cg(o)),{...a,toggleSelect:e=>n(Gy({facetId:s.facetId,selection:e})),toggleExclude:e=>n(Ky({facetId:s.facetId,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&n(Mg(i)),this.toggleSelect(e)},toggleSingleExclude:function(e){"idle"===e.state&&n(Mg(i)),this.toggleExclude(e)},isValueSelected:By,isValueExcluded:zy,deselectAll(){n(Mg(i)),n(rp())},sortBy(e){n(Dg({facetId:i,criterion:e})),n(rp())},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=u().numberOfValues,t=s.numberOfValues;n(Tg({facetId:i,numberOfValues:e+(t-e%t)})),n(Pg({facetId:i,isFieldExpanded:!0})),n(rp())},showLessValues(){let e=s.numberOfValues,t=Math.max(e,(()=>{let{currentValues:e}=u();return e.filter((e=>"idle"!==e.state)).length})());n(Tg({facetId:i,numberOfValues:t})),n(Pg({facetId:i,isFieldExpanded:!1})),n(rp())},enable(){n(np(i))},disable(){n(ip(i))},get state(){let e,t=u(),r=l(),n=c(),a=d();e="object"==typeof t.sortCriteria?"descending"===t.sortCriteria.order?"alphanumericDescending":"alphanumeric":t.sortCriteria;let o=r?r.values:[],s=o.some((e=>"idle"!==e.state)),p=!!r&&r.moreValuesAvailable,h=t.resultsMustMatch;return{facetId:i,values:o,sortCriterion:e,resultsMustMatch:h,isLoading:n,hasActiveValues:s,canShowMoreValues:p,canShowLessValues:f(),enabled:a}}}}function rm(e){return e.addReducers({facetSet:Ty,facetOptions:cy,configuration:Hh,facetSearchSet:ky}),!0}var nm=new Sn({facetId:fg,field:hg,filterFacetCount:yg,injectionDepth:mg,numberOfValues:wg,sortCriteria:new Mn({constrainTo:Xy}),resultsMustMatch:new Mn({constrainTo:Zy}),facetSearch:qg,allowedValues:Ag,hasBreadcrumbs:jg,customSort:kg});function im(e,t){um(e);let{dispatch:r}=e,n=tm(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},nm),a=()=>n.state.facetId,i=(()=>{let{facetSearch:n}=t.options;return Jy(e,{options:{facetId:a(),...n},select:e=>{r(rp()),r(mh(og({facetId:a(),facetValue:e.rawValue})))},exclude:e=>{r(rp()),r(mh(sg({facetId:a(),facetValue:e.rawValue})))},isForFieldSuggestions:!1})})(),{state:o,...s}=i;return{...n,facetSearch:s,toggleSelect(e){n.toggleSelect(e),r(mh(Hy(a(),e)))},toggleExclude(e){n.toggleExclude(e),r(mh(Yy(a(),e)))},deselectAll(){n.deselectAll(),r(mh(ag(a())))},sortBy(e){n.sortBy(e),r(mh(ug({facetId:a(),criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(Sh(ng(a())))},showLessValues(){n.showLessValues(),r(Sh(ig(a())))},get state(){return{...n.state,facetSearch:i.state}}}}function um(e){return e.addReducers({facetSet:Ty,configuration:Hh,facetSearchSet:ky,search:$h}),!0}var am=e=>"selected"===e.state,om=e=>"excluded"===e.state,sm=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return am(t)?cg(r):og(r)},cm=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return om(t)?cg(r):sg(r)},lm=qt("rangeFacet/executeToggleSelect",(e=>zn(e,Qg(e.selection)))),dm=qt("rangeFacet/executeToggleExclude",(e=>zn(e,Qg(e.selection)))),fm={facetId:tp,selection:new Tn({values:Ng})},hm=hr("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,fm),t(Wg(e)),t(lm(e)),t(rp())})),vm=hr("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,fm),t(Gg(e)),t(dm(e)),t(rp())})),pm={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function gm(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let a=qm(r);r.numberOfValues=a,e[n]=t}function ym(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=qm(a))}function mm(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=Om(a.currentValues,r);if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected",a.preventAutoSelect=!0}function wm(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=Om(a.currentValues,r);if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded",a.preventAutoSelect=!0}function bm(e,t){var r;let n=null==(r=e[t])?void 0:r.request;!n||n.currentValues.forEach((e=>e.state="idle"))}function Sm(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!Om(n,e);return e.state=t?"selected":"idle",e}));let a=n.filter((e=>!Om(r.currentValues,e))),i=r.currentValues;i.push(...a),r.numberOfValues=Math.max(r.numberOfValues,i.length)}))}function Im(e,t,r){t.forEach((t=>{var n;let a=t.facetId,i=null==(n=e[a])?void 0:n.request;if(!i)return;let o=r(t.values);i.currentValues=o,i.preventAutoSelect=!1}))}function Om(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function qm(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Am=Yt(bu(),(e=>{e.addCase(Jg,((e,t)=>{let{payload:r}=t;gm(e,wu(jm(r)))})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e})).addCase(Ad,((e,t)=>{Sm(e,t.payload.df||{})})).addCase(Wg,((e,t)=>{let{facetId:r,selection:n}=t.payload;mm(e,r,n)})).addCase(Gg,((e,t)=>{let{facetId:r,selection:n}=t.payload;wm(e,r,n)})).addCase(Kg,((e,t)=>{let{facetId:r,values:n}=t.payload;ym(e,r,n)})).addCase(Xg,((e,t)=>{bm(e,t.payload)})).addCase($d,(e=>{Object.keys(e).forEach((t=>{bm(e,t)}))})).addCase(Zg,((e,t)=>{cp(e,t.payload)})).addCase(mh.fulfilled,((e,t)=>{Im(e,t.payload.response.facets,km)})).addCase(Cy.fulfilled,((e,t)=>{var r,n;Im(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],km)})).addCase(ip,((e,t)=>{bm(e,t.payload)}))}));function jm(e){return{...pm,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function km(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}function xm(e,t){let{facetId:r,getRequest:n}=t,a=Ev(e),i=e.dispatch;return{...a,isValueSelected:am,isValueExcluded:om,deselectAll(){i(Mg(r)),i(rp())},sortBy(e){i(Lg({facetId:r,criterion:e})),i(rp())},isSortedBy(e){return this.state.sortCriterion===e},enable(){i(np(r))},disable(){i(ip(r))},get state(){let t=n(),a=xc(e.state,r),i=t.sortCriteria,o=t.resultsMustMatch,s=a?a.values:[],u=Mc(e.state),l=dg(e.state,r),c=s.some((e=>"idle"!==e.state));return{facetId:r,values:s,sortCriterion:i,resultsMustMatch:o,hasActiveValues:c,isLoading:u,enabled:l}}}}function Rm(e,t){if(!e.generateAutomaticRanges&&void 0===e.currentValues)throw new Error(`currentValues should be specified for ${t} when generateAutomaticRanges is false.`)}var Cm=["idle","selected","excluded"],Fm=["ascending","descending"],Em=["even","equiprobable"],Mm={start:new Mn,end:new Mn,endInclusive:new Rn,state:new Mn({constrainTo:Cm})},Dm=new Sn({facetId:fg,field:hg,generateAutomaticRanges:bg,filterFacetCount:yg,injectionDepth:mg,numberOfValues:wg,currentValues:new Un({each:new Tn({values:Mm})}),sortCriteria:new Mn({constrainTo:Fm}),rangeAlgorithm:new Mn({constrainTo:Em})});function Tm(e,t){Yn(e,Dm,t,"buildDateFacet"),Yg(t)}function Pm(e,t){Um(e),Rm(t.options,"buildDateFacet");let r=e.dispatch,n=gy(e,t.options),a={currentValues:[],...t.options,facetId:n};Tm(e,a),r(Jg(a));let i=xm(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...i,toggleSelect:e=>r(hm({facetId:n,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&r(Mg(n)),this.toggleSelect(e)},toggleExclude:e=>r(vm({facetId:n,selection:e})),toggleSingleExclude:function(e){"idle"===e.state&&r(Mg(n)),this.toggleExclude(e)},get state(){return i.state}}}function Um(e){return e.addReducers({configuration:Hh,search:$h,dateFacetSet:Am,facetOptions:cy}),!0}function Vm(e,t){let r=Pm(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(mh(ag(a())))},sortBy(e){r.sortBy(e),n(mh(ug({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(mh(sm(a(),e)))},toggleExclude:e=>{r.toggleExclude(e),n(mh(cm(a(),e)))},get state(){return r.state}}}var $m=Yt(Iu(),(e=>{e.addCase(ny,((e,t)=>{let{payload:r}=t;gm(e,Su(Lm(r)))})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e})).addCase(Ad,((e,t)=>{Sm(e,t.payload.nf||{})})).addCase(iy,((e,t)=>{let{facetId:r,selection:n}=t.payload;mm(e,r,n)})).addCase(uy,((e,t)=>{let{facetId:r,selection:n}=t.payload;wm(e,r,n)})).addCase(ay,((e,t)=>{let{facetId:r,values:n}=t.payload;ym(e,r,n)})).addCase(sy,((e,t)=>{bm(e,t.payload)})).addCase($d,(e=>{Object.keys(e).forEach((t=>{bm(e,t)}))})).addCase(oy,((e,t)=>{cp(e,t.payload)})).addCase(mh.fulfilled,((e,t)=>{Im(e,t.payload.response.facets,_m)})).addCase(Cy.fulfilled,((e,t)=>{var r,n;Im(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],_m)})).addCase(ip,((e,t)=>{bm(e,t.payload)}))}));function Lm(e){return{...pm,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function _m(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var Nm={facetId:tp,selection:new Tn({values:_g})},Qm=hr("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Nm),t(iy(e)),t(lm(e)),t(rp())}));hr("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Nm),t(uy(e)),t(dm(e)),t(rp())}));var Bm={start:new jn,end:new jn,endInclusive:new Rn,state:new Mn({constrainTo:Cm})},zm=new Sn({facetId:fg,field:hg,generateAutomaticRanges:bg,filterFacetCount:yg,injectionDepth:mg,numberOfValues:wg,currentValues:new Un({each:new Tn({values:Bm})}),sortCriteria:new Mn({constrainTo:Fm}),resultsMustMatch:new Mn({constrainTo:Zy}),rangeAlgorithm:new Mn({constrainTo:Em})});function Hm(e,t){Yn(e,zm,t,"buildNumericFacet"),ry(t)}function Ym(e){return{endInclusive:!1,state:"idle",...e}}function Jm(e,t){Wm(e),Rm(t.options,"buildNumericFacet");let r=e.dispatch,n=gy(e,t.options),a={currentValues:[],...t.options,facetId:n};Hm(e,a),r(ny(a));let i=xm(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...i,toggleSelect:e=>r(Qm({facetId:n,selection:e})),toggleSingleSelect(e){"idle"===e.state&&r(Mg(n)),this.toggleSelect(e)},get state(){return i.state}}}function Wm(e){return e.addReducers({numericFacetSet:$m,facetOptions:cy,configuration:Hh,search:$h}),!0}function Gm(e,t){Km(e);let r=Jm(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(mh(ag(a())))},sortBy(e){r.sortBy(e),n(mh(ug({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(mh(sm(a(),e)))},get state(){return{...r.state}}}}function Km(e){return e.addReducers({numericFacetSet:$m,configuration:Hh,search:$h}),!0}function Zm(e,t){return!!t&&t.facetId in e.numericFacetSet}var Xm=(e,t)=>{let r=xc(e,t);if(Zm(e,r))return r},ew=(e,t)=>(Xm(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state)),tw=(e,t)=>(Xm(e,t)||{values:[]}).values.filter((e=>"selected"===e.state));function rw(e,t){var r;nw(e);let n=Ev(e),{dispatch:a}=e,i=()=>e.state,o=gy(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Hm(e,s),a(ny(s));let u=()=>dg(e.state,o);return{...n,clear:()=>{a(ay({facetId:o,values:[]})),a(rp())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=ay({facetId:o,values:[t]});return!r.error&&(a(r),a(rp()),!0)},enable(){a(np(o))},disable(){a(ip(o))},get state(){let e=Mc(i()),t=u(),r=tw(i(),o),n=r.length?r[0]:void 0;return{facetId:o,isLoading:e,range:n,enabled:t}}}}function nw(e){return e.addReducers({numericFacetSet:$m,facetOptions:cy,configuration:Hh,search:$h}),!0}function iw(e,t){uw(e);let r=rw(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(mh(ag(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(mh(og({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}function uw(e){return e.addReducers({numericFacetSet:$m,configuration:Hh,search:$h}),!0}function aw(e,t){return!!t&&t.facetId in e.dateFacetSet}var ow=(e,t)=>{let r=xc(e,t);if(aw(e,r))return r},sw=(e,t)=>(ow(e,t)||{values:[]}).values.filter((e=>"selected"===e.state)),cw=(e,t)=>(ow(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state));function lw(e,t){var r;dw(e);let n=Ev(e),{dispatch:a}=e,i=()=>e.state,o=gy(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};Tm(e,s),a(Jg(s));let u=()=>dg(e.state,o);return{...n,clear:()=>{a(Kg({facetId:o,values:[]})),a(rp())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Kg({facetId:o,values:[t]});return!r.error&&(a(r),a(rp()),!0)},enable(){a(np(o))},disable(){a(ip(o))},get state(){let e=Mc(i()),t=u(),r=sw(i(),o),n=r.length?r[0]:void 0;return{facetId:o,isLoading:e,range:n,enabled:t}}}}function dw(e){return e.addReducers({dateFacetSet:Am,facetOptions:cy,configuration:Hh,search:$h}),!0}function fw(e,t){hw(e);let r=lw(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(mh(ag(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(mh(og({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}function hw(e){return e.addReducers({dateFacetSet:Am,configuration:Hh,search:$h}),!0}var vw=Yt(Hu(),(e=>{e.addCase(mh.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e}))})),pw=()=>Gl("history/analytics/forward",(e=>e.makeSearchEvent("historyForward"))),gw=()=>Gl("history/analytics/backward",(e=>e.makeSearchEvent("historyBackward"))),yw=()=>Gl("history/analytics/noresultsback",(e=>e.makeNoResultsBack())),mw=Object.getOwnPropertyNames,ww=Object.getOwnPropertySymbols,bw=Object.prototype.hasOwnProperty;function Sw(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function Iw(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,i=a.get(t),o=a.get(r);if(i&&o)return i===r&&o===t;a.set(t,r),a.set(r,t);var s=e(t,r,n);return a.delete(t),a.delete(r),s}}function Ow(e){return mw(e).concat(ww(e))}var qw=Object.hasOwn||function(e,t){return bw.call(e,t)};function Aw(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var jw="_owner",kw=Object.getOwnPropertyDescriptor,xw=Object.keys;function Rw(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Cw(e,t){return Aw(e.getTime(),t.getTime())}function Fw(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.entries(),s=0;(n=o.next())&&!n.done;){for(var u=t.entries(),l=!1,c=0;(a=u.next())&&!a.done;){var d=n.value,f=d[0],p=d[1],h=a.value,g=h[0],v=h[1];!l&&!i[c]&&(l=r.equals(f,g,s,c,e,t,r)&&r.equals(p,v,f,g,e,t,r))&&(i[c]=!0),c++}if(!l)return!1;s++}return!0}function Ew(e,t,r){var n,a=xw(e),i=a.length;if(xw(t).length!==i)return!1;for(;i-- >0;)if((n=a[i])===jw&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!qw(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Mw(e,t,r){var n,a,i,o=Ow(e),s=o.length;if(Ow(t).length!==s)return!1;for(;s-- >0;)if((n=o[s])===jw&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!qw(t,n)||!r.equals(e[n],t[n],n,n,e,t,r)||(a=kw(e,n),i=kw(t,n),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable)))return!1;return!0}function Dw(e,t){return Aw(e.valueOf(),t.valueOf())}function Tw(e,t){return e.source===t.source&&e.flags===t.flags}function Pw(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.values();(n=o.next())&&!n.done;){for(var s=t.values(),u=!1,l=0;(a=s.next())&&!a.done;)!u&&!i[l]&&(u=r.equals(n.value,a.value,n.value,a.value,e,t,r))&&(i[l]=!0),l++;if(!u)return!1}return!0}function Uw(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Vw="[object Arguments]",$w="[object Boolean]",Lw="[object Date]",_w="[object Map]",Nw="[object Number]",Qw="[object Object]",Bw="[object RegExp]",zw="[object Set]",Hw="[object String]",Yw=Array.isArray,Jw="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ww=Object.assign,Gw=Object.prototype.toString.call.bind(Object.prototype.toString);function Kw(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,a=e.areObjectsEqual,i=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,s=e.areSetsEqual,u=e.areTypedArraysEqual;return function(e,l,c){if(e===l)return!0;if(null==e||null==l||"object"!=typeof e||"object"!=typeof l)return e!=e&&l!=l;var d=e.constructor;if(d!==l.constructor)return!1;if(d===Object)return a(e,l,c);if(Yw(e))return t(e,l,c);if(null!=Jw&&Jw(e))return u(e,l,c);if(d===Date)return r(e,l,c);if(d===RegExp)return o(e,l,c);if(d===Map)return n(e,l,c);if(d===Set)return s(e,l,c);var f=Gw(e);return f===Lw?r(e,l,c):f===Bw?o(e,l,c):f===_w?n(e,l,c):f===zw?s(e,l,c):f===Qw?"function"!=typeof e.then&&"function"!=typeof l.then&&a(e,l,c):f===Vw?a(e,l,c):(f===$w||f===Nw||f===Hw)&&i(e,l,c)}}function Zw(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?Mw:Rw,areDatesEqual:Cw,areMapsEqual:n?Sw(Fw,Mw):Fw,areObjectsEqual:n?Mw:Ew,arePrimitiveWrappersEqual:Dw,areRegExpsEqual:Tw,areSetsEqual:n?Sw(Pw,Mw):Pw,areTypedArraysEqual:n?Mw:Uw};if(r&&(a=Ww({},a,r(a))),t){var i=Iw(a.areArraysEqual),o=Iw(a.areMapsEqual),s=Iw(a.areObjectsEqual),u=Iw(a.areSetsEqual);a=Ww({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:u})}return a}function Xw(e){return function(t,r,n,a,i,o,s){return e(t,r,s)}}function eb(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(e,o){var s=n(),u=s.cache,l=void 0===u?t?new WeakMap:void 0:u,c=s.meta;return r(e,o,{cache:l,equals:a,meta:c,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return r(e,t,o)}}function tb(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=void 0!==i&&i,s=Kw(Zw(e));return eb({circular:r,comparator:s,createState:a,equals:n?n(s):Xw(s),strict:o})}function rb(e,t,r=((e,t)=>e===t)){return e.length===t.length&&-1===e.findIndex(((e,n)=>!r(t[n],e)))}function nb(e,t){return e.length===t.length&&e.every((e=>-1!==t.findIndex((t=>ib(e,t)))))}tb(),tb({strict:!0}),tb({circular:!0}),tb({circular:!0,strict:!0}),tb({createInternalComparator:function(){return Aw}}),tb({strict:!0,createInternalComparator:function(){return Aw}}),tb({circular:!0,createInternalComparator:function(){return Aw}}),tb({circular:!0,createInternalComparator:function(){return Aw},strict:!0});var ib=tb({createCustomConfig:e=>({...e,areArraysEqual:nb})}),ub=Yt(ga(),(e=>{e.addCase(Fd,((e,t)=>ab(e,t.payload)?void 0:t.payload))})),ab=(e,t)=>ob(e.context,t.context)&&sb(e.dictionaryFieldContext,t.dictionaryFieldContext)&&mb(e.advancedSearchQueries,t.advancedSearchQueries)&&cb(e.tabSet,t.tabSet)&&db(e.staticFilterSet,t.staticFilterSet)&&hb(e.facetSet,t.facetSet)&&hb(e.dateFacetSet,t.dateFacetSet)&&hb(e.numericFacetSet,t.numericFacetSet)&&pb(e.automaticFacetSet,t.automaticFacetSet)&&vb(e.categoryFacetSet,t.categoryFacetSet)&&gb(e.pagination,t.pagination)&&yb(e.query,t.query)&&wb(e,t)&&bb(e.pipeline,t.pipeline)&&Sb(e.searchHub,t.searchHub)&&Ib(e.facetOrder,t.facetOrder)&&Ob(e.debug,t.debug),ob=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),sb=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),cb=(e,t)=>{let r=lb(e),n=lb(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},lb=e=>Object.values(e).find((e=>e.isActive)),db=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=fb(e[r]),a=fb(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},fb=e=>e.values.filter((e=>"idle"!==e.state)),hb=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter((e=>"idle"!==e.state)),a=n.request.currentValues.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},vb=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let t=Tc(null==(r=e[n])?void 0:r.request.currentValues).map((({value:e})=>e)),i=Tc(null==a?void 0:a.request.currentValues).map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},pb=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter((e=>"idle"!==e.state)),a=n.response.values.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},gb=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,yb=(e,t)=>JSON.stringify(e)===JSON.stringify(t),mb=(e,t)=>JSON.stringify(e)===JSON.stringify(t),wb=(e,t)=>e.sortCriteria===t.sortCriteria,bb=(e,t)=>e===t,Sb=(e,t)=>e===t,Ib=(e,t)=>rb(e,t),Ob=(e,t)=>e===t,qb=ua({actionTypes:{redo:Cd.type,undo:Rd.type,snapshot:Fd.type},reducer:ub});function Ab(e){jb(e);let t=Ev(e),{dispatch:r}=e,n=e=>e.past.length>0&&!An(e.present);return{...t,get state(){return e.state.history},async back(){!n(this.state)||(await r(Ed()),r(mh(gw())))},async forward(){!this.state.future.length||!this.state.present||(await r(Md()),r(mh(pw())))},async backOnNoResults(){!n(this.state)||(await r(Ed()),r(mh(yw())))}}}function jb(e){return e.addReducers({history:qb,configuration:Hh,facetOrder:vw}),!0}var kb=new jn({min:la,default:da,required:!1}),xb=new jn({min:oa,max:sa,default:ca,required:!1}),Rb={desiredCount:xb,numberOfValues:kb},Cb=qt("automaticFacet/setOptions",(e=>zn(e,Rb))),Fb=qt("automaticFacet/deselectAll",(e=>zn(e,tp))),Eb=Ln,Mb=qt("automaticFacet/toggleSelectValue",(e=>zn(e,{field:Eb,selection:new Tn({values:xg})}))),Db=Yt(xu(),(e=>{e.addCase(Kd,((e,t)=>{let r=Pb(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=Vb(r,n)})).addCase(Zd,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(Qh,(e=>{e.firstResult=0})).addCase(Xd,((e,t)=>{let r=t.payload;e.firstResult=Vb(r,e.numberOfResults)})).addCase(ef,((e,t)=>{let r=t.payload;e.firstResult=Vb(r,e.numberOfResults)})).addCase(rf,(e=>{let t=Pb(e),r=Math.max(t-1,ih);e.firstResult=Vb(r,e.numberOfResults)})).addCase(tf,(e=>{let t=Pb(e),r=Ub(e),n=Math.min(t+1,r);e.firstResult=Vb(n,e.numberOfResults)})).addCase(Dd.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Ad,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults})).addCase(mh.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Cy.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(Mg,(e=>{Tb(e)})).addCase(Fg,(e=>{Tb(e)})).addCase(Sp,(e=>{Tb(e)})).addCase(bp,(e=>{Tb(e)})).addCase(op,(e=>{Tb(e)})).addCase(Wg,(e=>{Tb(e)})).addCase(iy,(e=>{Tb(e)})).addCase($d,(e=>{Tb(e)})).addCase(Kg,(e=>{Tb(e)})).addCase(ay,(e=>{Tb(e)})).addCase(Xp,(e=>{Tb(e)})).addCase(Mb,(e=>{Tb(e)}))}));function Tb(e){e.firstResult=xu().firstResult}function Pb(e){let{firstResult:t,numberOfResults:r}=e;return $b(t,r)}function Ub(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Lb(t,r)}function Vb(e,t){return(e-1)*t}function $b(e,t){return Math.round(e/t)+1}function Lb(e,t){let r=Math.min(e,uh);return Math.ceil(r/t)}function _b(e){return e.pagination.firstResult}function Nb(e){return e.pagination.numberOfResults}function Qb(e){return e.pagination.totalCountFiltered}var Bb=e=>$b(_b(e),Nb(e)),zb=e=>Lb(Qb(e),Nb(e)),Hb=(e,t)=>{let r=Bb(e),n=zb(e),a=Yb(r,t);return a=Jb(a),a=Wb(a,n),Gb(a)};function Yb(e,t){let r=t%2==0,n=Math.floor(t/2);return{start:e-n,end:e+(r?n-1:n)}}function Jb(e){let t=Math.max(ih-e.start,0);return{start:e.start+t,end:e.end+t}}function Wb(e,t){let r=Math.max(e.end-t,0);return{start:Math.max(e.start-r,ih),end:e.end-r}}function Gb(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var Kb=()=>Gl("analytics/pager/resize",((e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||xu().numberOfResults})})),Zb=()=>Gl("analytics/pager/number",((e,t)=>e.makePagerNumber({pagerNumber:Bb(t)}))),Xb=()=>Gl("analytics/pager/next",((e,t)=>e.makePagerNext({pagerNumber:Bb(t)}))),eS=()=>Gl("analytics/pager/previous",((e,t)=>e.makePagerPrevious({pagerNumber:Bb(t)}))),tS=new Sn({numberOfPages:new jn({default:5,min:0})}),rS=new Sn({page:new jn({min:1})});function nS(e,t={}){iS(e);let r=Ev(e),{dispatch:n}=e,a=Yn(e,tS,t.options,"buildPager"),i=Hn(e,rS,t.initialState,"buildPager").page;i&&n(Xd(i));let o=()=>Bb(e.state),s=()=>{let{numberOfPages:t}=a;return Hb(e.state,t)},u=()=>zb(e.state);return{...r,get state(){let e=o(),t=u(),r=e>ih&&t>0,n=e<t;return{currentPage:e,currentPages:s(),maxPage:t,hasPreviousPage:r,hasNextPage:n}},selectPage(e){n(ef(e))},nextPage(){n(tf())},previousPage(){n(rf())},isCurrentPage(e){return e===this.state.currentPage}}}function iS(e){return e.addReducers({configuration:Hh,pagination:Db}),!0}function uS(e,t={}){let{dispatch:r}=e,n=nS(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(wh(Zb()))},nextPage(){n.nextPage(),r(wh(Xb()))},previousPage(){n.previousPage(),r(wh(eS()))}}}function aS(e){oS(e);let t=Ev(e),r=()=>e.state;return{...t,get state(){return{hasError:null!==r().search.error,error:r().search.error}}}}function oS(e){return e.addReducers({search:$h}),!0}function sS(e){return aS(e)}function cS(e){lS(e);let t=Ev(e),r=()=>e.state;return{...t,get state(){let e=r();return{hasError:null!==e.search.error,isLoading:e.search.isLoading,hasResults:!!e.search.results.length,firstSearchExecuted:Mh(e)}}}}function lS(e){return e.addReducers({search:$h}),!0}function dS(e){fS(e);let t=Ev(e),r=cS(e),n=()=>e.state,a=()=>{let e=n().search.duration/1e3;return Math.round(100*(e+Number.EPSILON))/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:a(),firstResult:n().pagination.firstResult+1,hasDuration:0!==n().search.duration,hasQuery:""!==n().search.queryExecuted,lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function fS(e){return e.addReducers({search:$h,pagination:Db}),!0}function hS(e){return dS(e)}var vS=new Sn({fieldsToInclude:new Un({required:!1,each:new Mn({required:!0,emptyAllowed:!1})})});function pS(e,t){gS(e);let r=Ev(e),n=cS(e),{dispatch:a}=e,i=()=>e.state,o=Yn(e,vS,null==t?void 0:t.options,"buildCoreResultList");o.fieldsToInclude&&a(Dv(o.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,l=0,c=!1;return{...r,get state(){let e=i();return{...n.state,results:e.search.results,moreResultsAvailable:s(),searchResponseId:e.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading)if(s()){if(Date.now()-u<200){if(l++,l>=5)return u=Date.now(),!c&&e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),void(c=!0)}else l=0;c=!1,(null==t?void 0:t.fetchMoreResultsActionCreator)&&a(null==t?void 0:t.fetchMoreResultsActionCreator()).then((()=>u=Date.now()))}else e.logger.info("No more results are available for the result list to fetch.")}}}function gS(e){return e.addReducers({search:$h,configuration:Hh,fields:Nv}),!0}function yS(e,t){return pS(e,{...t,fetchMoreResultsActionCreator:bh})}var mS={results:new Un({required:!0,each:new Tn({values:rd})}),maxLength:new jn({required:!0,min:1,default:10})},wS=qt("recentResults/registerRecentResults",(e=>zn(e,mS))),bS=qt("recentResults/pushRecentResult",(e=>(od(e),{payload:e}))),SS=qt("recentResults/clearRecentResults"),IS=e=>Gl("analytics/result/open",((t,r)=>(od(e),t.makeDocumentOpen(Zl(e,r),ed(e)))));function OS(e,t,r){qS(e);let n,a={selectionDelay:1e3,debounceWait:1e3,...t.options};return{select:Jh(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function qS(e){return e.addReducers({configuration:Hh}),!0}function AS(e,t){let r=!1;return OS(e,t,(()=>{r||(r=!0,e.dispatch(IS(t.options.result))),e.dispatch(bS(t.options.result))}))}function jS(e,t){let r=!1;return OS(e,t,(()=>{r||(r=!0,e.dispatch(Qd(t.options.result))),e.dispatch(bS(t.options.result))}))}var kS=new Sn({numberOfResults:new jn({min:0})});function xS(e,t={}){RS(e);let r=Ev(e),{dispatch:n}=e,a=Hn(e,kS,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==a&&n(Kd(a)),{...r,get state(){return{numberOfResults:e.state.pagination.numberOfResults}},set(e){n(Zd(e))},isSetTo(e){return e===this.state.numberOfResults}}}function RS(e){return e.addReducers({pagination:Db,configuration:Hh}),!0}function CS(e,t={}){FS(e);let r=xS(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(wh(Kb()))}}}function FS(e){return e.addReducers({pagination:Db,configuration:Hh}),!0}var ES={id:Ln},MS=qt("querySuggest/register",(e=>zn(e,{...ES,count:new jn({min:0})}))),DS=qt("querySuggest/unregister",(e=>zn(e,ES))),TS=qt("querySuggest/selectSuggestion",(e=>zn(e,{...ES,expression:Nn}))),PS=qt("querySuggest/clear",(e=>zn(e,ES))),US=hr("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,ES);let i=e.id,o=await VS(i,t()),s=await n.querySuggest(o);return uu(s)?r(s.error):{id:i,q:o.q,...s.success}})),VS=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Ic.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await bc(t.configuration.analytics),...t.configuration.analytics.enabled&&await uf(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),$S=()=>Gl("analytics/searchbox/submit",(e=>e.makeSearchboxSubmit())),LS={id:Ln,query:Nn},_S=qt("querySet/register",(e=>zn(e,LS))),NS=qt("querySet/update",(e=>zn(e,LS))),QS=Yt(Ru(),(e=>{e.addCase(_S,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(NS,((e,t)=>{let{id:r,query:n}=t.payload;zS(e,r,n)})).addCase(TS,((e,t)=>{let{id:r,expression:n}=t.payload;zS(e,r,n)})).addCase(mh.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;BS(e,r)})).addCase(Ad,((e,t)=>{An(t.payload.q)||BS(e,t.payload.q)})).addCase(Dd.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))zS(e,r,n)}))}));function BS(e,t){Object.keys(e).forEach((r=>e[r]=t))}var zS=(e,t,r)=>{t in e&&(e[t]=r)},HS=e=>Gl("analytics/querySuggest",((t,r)=>{let n=YS(r,e);return t.makeOmniboxAnalytics(n)}));function YS(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let i=a.completions.map((e=>e.expression)),o=a.partialQueries.length-1,s=a.partialQueries[o]||"",u=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:s,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:u}}var JS=Yt(Cu(),(e=>e.addCase(MS,((e,t)=>{let r=t.payload.id;r in e||(e[r]=WS(t.payload))})).addCase(DS,((e,t)=>{delete e[t.payload.id]})).addCase(US.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)})).addCase(US.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(US.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)})).addCase(PS,((e,t)=>{let r=e[t.payload.id];!r||(r.responseId="",r.completions=[],r.partialQueries=[])}))));function WS(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var GS=Yt(Fu(),(e=>e.addCase(nf,((e,t)=>({...e,...t.payload}))).addCase(df,((e,t)=>{e.q=t.payload})).addCase(TS,((e,t)=>{e.q=t.payload.expression})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e})).addCase(Ad,((e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax})))),KS={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},ZS={open:new Mn,close:new Mn},XS={id:Ln,numberOfSuggestions:new jn({min:0}),enableQuerySyntax:new Rn,highlightOptions:new Tn({values:{notMatchDelimiters:new Tn({values:ZS}),exactMatchDelimiters:new Tn({values:ZS}),correctionDelimiters:new Tn({values:ZS})}}),clearFilters:new Rn},eI=new Sn(XS);function tI(e,t){var r,n;nI(e);let a=Ev(e),{dispatch:i}=e,o=()=>e.state,s=(null==(r=t.options)?void 0:r.id)||ni("search_box"),u={id:s,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...KS,...t.options};Yn(e,eI,u,"buildSearchBox"),i(_S({id:s,query:e.state.query.q})),u.numberOfSuggestions&&i(MS({id:s,count:u.numberOfSuggestions}));let l=()=>e.state.querySet[u.id],c=async e=>{let{enableQuerySyntax:r,clearFilters:n}=u;i(yh({q:l(),enableQuerySyntax:r,clearFilters:n})),await i(t.executeSearchActionCreator(e))};return{...a,updateText(e){i(NS({id:s,query:e})),this.showSuggestions()},clear(){i(NS({id:s,query:""})),i(PS({id:s}))},showSuggestions(){u.numberOfSuggestions&&i(t.fetchQuerySuggestionsActionCreator({id:s}))},selectSuggestion(e){i(TS({id:s,expression:e})),c(HS({id:s,suggestion:e})).then((()=>{i(PS({id:s}))}))},submit(e=$S()){c(e),i(PS({id:s}))},get state(){let e=o(),t=e.querySuggest[u.id],r=rI(t,u.highlightOptions),n=!!t&&t.isLoading;return{value:l(),suggestions:r,isLoading:e.search.isLoading,isLoadingSuggestions:n}}}}function rI(e,t){return e?e.completions.map((e=>({highlightedValue:qa(e.highlighted,t),rawValue:e.expression}))):[]}function nI(e){return e.addReducers({query:GS,querySuggest:JS,configuration:Hh,querySet:QS,search:$h}),!0}function iI(e,t={}){let r=tI(e,{...t,executeSearchActionCreator:mh,fetchQuerySuggestionsActionCreator:US});return{...r,submit(){r.submit($S())},get state(){return r.state}}}var uI=Yt(va(),(e=>{e.addCase(Yd,((e,t)=>{let{id:r}=t.payload;e[r]||(e[r]={q:"",cache:{}})})),e.addCase(Jd,((e,t)=>{let{q:r,id:n}=t.payload;!r||(e[n].q=r)})),e.addCase(Wd,((e,t)=>{let{id:r}=t.payload;Object.entries(e[r].cache).forEach((([t,n])=>{pa(n)&&delete e[r].cache[t]}))})),e.addCase(Ih.pending,((e,t)=>{for(let t in e)for(let r in e[t].cache)e[t].cache[r].isActive=!1;if(!oI(e,t.meta))return void aI(e,t.meta);let r=oI(e,t.meta);r.isLoading=!0,r.isActive=!0,r.error=null})),e.addCase(Ih.fulfilled,((e,t)=>{let{results:r,searchUid:n,totalCountFiltered:a,duration:i}=t.payload,{cacheTimeout:o}=t.meta.arg,s=oI(e,t.meta);s.isActive=!0,s.searchUid=n,s.isLoading=!1,s.error=null,s.results=r,s.expiresAt=o?o+Date.now():0,s.totalCountFiltered=a,s.duration=i})),e.addCase(Ih.rejected,((e,t)=>{let r=oI(e,t.meta);r.error=t.error||null,r.isLoading=!1,r.isActive=!1}))})),aI=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},oI=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},sI={searchBoxId:_n,maxResultsPerQuery:new jn({required:!0,min:1}),cacheTimeout:new jn},cI=new Sn(sI);function lI(e,t){dI(e);let r=Ev(e),{dispatch:n}=e,a={searchBoxId:t.options.searchBoxId||ni("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};Yn(e,cI,a,"buildInstantResults");let i=a.searchBoxId;n(Yd({id:i}));let o=()=>e.state.instantResults[i],s=e=>o().cache[e],u=()=>o().q,l=()=>{let e=s(u());return e?e.isLoading?[]:e.results:[]};return{...r,updateQuery(e){if(!e)return;let t=s(e);(!t||!t.isLoading&&(t.error||pa(t)))&&n(Ih({id:i,q:e,maxResultsPerQuery:a.maxResultsPerQuery,cacheTimeout:a.cacheTimeout})),n(Jd({id:i,q:e}))},clearExpired(){n(Wd({id:i}))},get state(){let e=u(),t=s(e);return{q:e,isLoading:(null==t?void 0:t.isLoading)||!1,error:(null==t?void 0:t.error)||null,results:l()}}}}function dI(e){return e.addReducers({instantResults:uI}),!0}var fI=()=>Gl("analytics/sort/results",((e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Nu()}))),hI={by:new $n({enum:Du,required:!0})},vI=qt("sortCriteria/register",(e=>gI(e))),pI=qt("sortCriteria/update",(e=>gI(e))),gI=e=>Vn(e)?(e.forEach((e=>zn(e,hI))),{payload:e}):zn(e,hI),yI=Yt(Nu(),(e=>{e.addCase(vI,((e,t)=>Tu(t.payload))).addCase(pI,((e,t)=>Tu(t.payload))).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e})).addCase(Ad,((e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e}))}));function mI(e,t){if(!t)return;let r=new Sn({criterion:new Un({each:_u})}),n=wI(t),a={...t,criterion:n};Hn(e,r,a,"buildSort")}function wI(e){return e.criterion?Vn(e.criterion)?e.criterion:[e.criterion]:[]}function bI(e,t){var r;SI(e);let n=Ev(e),{dispatch:a}=e;mI(e,t.initialState);let i=null==(r=t.initialState)?void 0:r.criterion;return i&&a(vI(i)),{...n,sortBy(e){a(pI(e)),a(ef(1))},isSortedBy(e){return this.state.sortCriteria===Tu(e)},get state(){return{sortCriteria:e.state.sortCriteria}}}}function SI(e){return e.addReducers({configuration:Hh,sortCriteria:yI}),!0}function II(e,t={}){let{dispatch:r}=e,n=bI(e,t);return{...n,get state(){return n.state},sortBy(e){n.sortBy(e),r(mh(fI()))}}}var OI=Ln,qI=new Tn({options:{required:!0},values:{caption:Nn,expression:Nn,state:new Mn({constrainTo:["idle","selected","excluded"]})}}),AI=new Un({required:!0,each:qI}),jI=qt("staticFilter/register",(e=>zn(e,{id:OI,values:AI}))),kI=qt("staticFilter/toggleSelect",(e=>zn(e,{id:OI,value:qI}))),xI=qt("staticFilter/toggleExclude",(e=>zn(e,{id:OI,value:qI}))),RI=qt("staticFilter/deselectAllFilterValues",(e=>zn(e,OI))),CI=e=>Gl("analytics/staticFilter/deselect",(t=>t.makeStaticFilterDeselect(e)));Yt(Qu(),(e=>e.addCase(jI,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase(kI,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected"})).addCase(xI,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded"})).addCase(RI,((e,t)=>{let r=e[t.payload];!r||r.values.forEach((e=>e.state="idle"))})).addCase($d,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(Ad,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))}))));var FI=Yt(Bu(),(e=>{e.addCase(Nh,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(Qh,((e,t)=>{EI(e,t.payload)})).addCase(Ad,((e,t)=>{EI(e,t.payload.tab||"")})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.tabSet)?n:e}))}));function EI(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var MI=new Sn({expression:Nn,id:Ln}),DI=new Sn({isActive:new Rn});function TI(e,t){UI(t.options.id),PI(e);let r=Ev(e),{dispatch:n}=e;Yn(e,MI,t.options,"buildTab");let a=Hn(e,DI,t.initialState,"buildTab"),{id:i,expression:o}=t.options;return n(Nh({id:i,expression:o})),a.isActive&&n(Qh(i)),{...r,select(){n(Qh(i))},get state(){var t;return{isActive:null==(t=e.state.tabSet[i])?void 0:t.isActive}}}}function PI(e){return e.addReducers({configuration:Hh,tabSet:FI}),!0}function UI(e){let t=xi().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function VI(e,t){let{dispatch:r}=e,n=TI(e,t);return{...n,get state(){return n.state},select(){n.select(),r(mh(fd()))}}}function $I(e){return LI(e),{...Ev(e),sort(e){return rh(e,this.state.facetIds)},get state(){return{facetIds:e.state.search.response.facets.map((e=>e.facetId))}}}}function LI(e){return e.addReducers({search:$h,facetOptions:cy}),!0}function _I(e){return $I(e)}var NI={categoryFacetId:tp,categoryFacetPath:new Un({required:!0,each:Ln})},QI=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t],a=null==n?void 0:n.request.field;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:a,categoryFacetTitle:`${a}_${t}`}},BI=e=>Gl("analytics/categoryFacet/breadcrumb",((t,r)=>(zn(e,NI),t.makeBreadcrumbFacet(QI(r,e))))),zI=()=>Gl("analytics/facet/deselectAllBreadcrumbs",(e=>e.makeBreadcrumbResetAll())),HI=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field;return{facetId:t,facetField:n,facetTitle:`${n}_${t}`,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},YI=e=>Gl("analytics/dateFacet/breadcrumb",((t,r)=>{zn(e,Qg(e.selection));let n=HI(r,e);return t.makeBreadcrumbFacet(n)})),JI=e=>Gl("analytics/numericFacet/breadcrumb",((t,r)=>{zn(e,Qg(e.selection));let n=HI(r,e);return t.makeBreadcrumbFacet(n)})),WI=e=>Object.keys(e.facetSet).map((t=>{let r=e.facetValuesSelector(e.engine.state,t).map((r=>({value:r,deselect:()=>{"selected"===r.state?e.executeToggleSelect({facetId:t,selection:r}):"excluded"===r.state&&e.executeToggleExclude({facetId:t,selection:r})}})));return{facetId:t,field:e.facetSet[t].request.field,values:r}})).filter((e=>e.values.length));function GI(e){let t=Ev(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r($d())},deselectBreadcrumb(e){e.deselect()}}}function KI(e){ZI(e);let t=GI(e),{dispatch:r}=e,n=()=>e.state,a=()=>{let t={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:e,selection:t})=>{let n=lg({facetId:e,facetValue:t.value});r(Fg({facetId:e,selection:t})),r(Ug({facetId:e,freezeCurrentValues:!1})),r(mh(n))},executeToggleExclude:({facetId:e,selection:t})=>{let n=lg({facetId:e,facetValue:t.value});r(Eg({facetId:e,selection:t})),r(Ug({facetId:e,freezeCurrentValues:!1})),r(mh(n))},facetValuesSelector:Ec};return WI(t)},i=()=>{let t={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:e=>{r(iy(e)),r(mh(JI(e)))},executeToggleExclude:e=>{r(uy(e)),r(mh(JI(e)))},facetValuesSelector:ew};return WI(t)},o=()=>{let t={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:e=>{r(Wg(e)),r(mh(YI(e)))},executeToggleExclude:e=>{r(Gg(e)),r(mh(YI(e)))},facetValuesSelector:cw};return WI(t)},s=()=>Object.keys(n().categoryFacetSet).map(u).filter((e=>e.path.length)),u=e=>{let t=_c(n(),e);return{facetId:e,field:n().categoryFacetSet[e].request.field,path:t,deselect:()=>{r(Sp(e)),r(mh(BI({categoryFacetPath:t.map((e=>e.value)),categoryFacetId:e})))}}},l=()=>{var e;let t=null!=(e=n().staticFilterSet)?e:{};return Object.values(t).map(c)},c=e=>{let{id:t,values:r}=e,n=r.filter((e=>"idle"!==e.state)).map((e=>d(t,e)));return{id:t,values:n}},d=(e,t)=>({value:t,deselect:()=>{let{caption:n,expression:a}=t,i=CI({staticFilterId:e,staticFilterValue:{caption:n,expression:a}});"selected"===t.state?r(kI({id:e,value:t})):"excluded"===t.state&&r(xI({id:e,value:t})),r(mh(i))}}),f=()=>{var e,t;let r=null!=(t=null==(e=n().automaticFacetSet)?void 0:e.set)?t:{};return Object.values(r).map((e=>p(e.response)))},p=e=>{let{field:t,label:r}=e,n=e.values.filter((e=>"selected"===e.state)).map((e=>h(t,e)));return{facetId:t,field:t,label:r,values:n}},h=(e,t)=>({value:t,deselect:()=>{let n=lg({facetId:e,facetValue:t.value});r(Mb({field:e,selection:t})),r(mh(n))}});return{...t,get state(){return{facetBreadcrumbs:a(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:i(),dateFacetBreadcrumbs:o(),staticFilterBreadcrumbs:l(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:!![...a(),...i(),...o(),...s(),...l(),...f()].length}},deselectAll:()=>{t.deselectAll(),r(mh(zI()))}}}function ZI(e){return e.addReducers({configuration:Hh,search:$h,facetSet:Ty,numericFacetSet:$m,dateFacetSet:Am,categoryFacetSet:Ap}),!0}function XI(e){return"redirect"===e.type}var eO=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(XI);return e.length?e[0].content:null}},tO=qt("standaloneSearchBox/register",(e=>zn(e,{id:Ln,redirectionUrl:Ln}))),rO=qt("standaloneSearchBox/reset",(e=>zn(e,{id:Ln}))),nO=qt("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>zn(e,{id:Ln}))),iO=qt("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),uO=hr("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new Mn({emptyAllowed:!1})});let o=await oO(r()),s=await a.plan(o);if(uu(s))return n(s.error);let{redirectionUrl:u}=new eO(s.success);return u&&t(aO(u)),u||""})),aO=e=>Gl("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),oO=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await bc(e.configuration.analytics)},...e.configuration.analytics.enabled&&await uf(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),sO=Yt(ba(),(e=>e.addCase(tO,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=cO(n))})).addCase(rO,((e,t)=>{let{id:r}=t.payload,n=e[r];n&&(e[r]=cO(n.defaultRedirectionUrl))})).addCase(uO.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!0)})).addCase(uO.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];!n||(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(uO.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!1)})).addCase(nO,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="searchFromLink")})).addCase(iO,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));function cO(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var lO=new Sn({...XS,redirectionUrl:new Mn({required:!0,emptyAllowed:!1})});function dO(e,t){fO(e);let{dispatch:r}=e,n=()=>e.state,a=t.options.id||ni("standalone_search_box"),i={id:a,highlightOptions:{...t.options.highlightOptions},...KS,...t.options};Yn(e,lO,i,"buildStandaloneSearchBox");let o=iI(e,{options:i});return r(tO({id:a,redirectionUrl:i.redirectionUrl})),{...o,updateText(e){o.updateText(e),r(nO({id:a}))},selectSuggestion(e){let t=YS(n(),{id:a,suggestion:e});r(TS({id:a,expression:e})),r(iO({id:a,metadata:t})),this.submit()},afterRedirection(){r(rO({id:a}))},submit(){r(nf({q:this.state.value,enableQuerySyntax:i.enableQuerySyntax})),r(uO({id:a}))},get state(){let e=n().standaloneSearchBoxSet[a];return{...o.state,isLoading:e.isLoading,redirectTo:e.redirectTo,analytics:e.analytics}}}}function fO(e){return e.addReducers({standaloneSearchBoxSet:sO,configuration:Hh,query:GS,querySuggest:JS}),!0}function hO(e,t){return e.q!==t.q?$S():e.sortCriteria!==t.sortCriteria?fI():e.firstResult!==t.firstResult?Zb():e.numberOfResults!==t.numberOfResults?Kb():vO(e.f,t.f)?gO(e.f,t.f):vO(e.fExcluded,t.fExcluded)?gO(e.fExcluded,t.fExcluded,!0):vO(e.cf,t.cf)?gO(e.cf,t.cf):vO(e.af,t.af)?gO(e.af,t.af):vO(e.nf,t.nf)?yO(e.nf,t.nf):vO(e.df,t.df)?yO(e.df,t.df):fd()}function vO(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function pO(e){let t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function gO(e={},t={},r=!1){let n=Object.keys(e),a=Object.keys(t),i=n.filter((e=>!a.includes(e)));if(i.length){let t=i[0];return e[t].length>1?ag(t):cg({facetId:t,facetValue:e[t][0]})}let o=a.filter((e=>!n.includes(e)));if(o.length){let e=o[0];return r?sg({facetId:e,facetValue:t[e][0]}):og({facetId:e,facetValue:t[e][0]})}let s=a.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!s)return fd();let u=e[s],l=t[s],c=l.filter((e=>!u.includes(e)));if(c.length)return r?sg({facetId:s,facetValue:c[0]}):og({facetId:s,facetValue:c[0]});let d=u.filter((e=>!l.includes(e)));return d.length?cg({facetId:s,facetValue:d[0]}):fd()}function yO(e={},t={}){return gO(pO(e),pO(t))}function mO(e){var t,r,n,a,i,o;return{q:Fu().q,enableQuerySyntax:Fu().enableQuerySyntax,aq:null!=(r=null==(t=e.advancedSearchQueries)?void 0:t.defaultFilters.aq)?r:Gu().defaultFilters.aq,cq:null!=(a=null==(n=e.advancedSearchQueries)?void 0:n.defaultFilters.cq)?a:Gu().defaultFilters.cq,firstResult:xu().firstResult,numberOfResults:null!=(o=null==(i=e.pagination)?void 0:i.defaultNumberOfResults)?o:xu().defaultNumberOfResults,sortCriteria:Nu(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Ri(),sf:{},tab:"",af:{}}}var wO=new Sn({parameters:new Tn({options:{required:!0},values:qd})});function bO(e,t){let{dispatch:r}=e,n=Ev(e);return Hn(e,wO,t.initialState,"buildSearchParameterManager"),r(Ad(t.initialState.parameters)),{...n,synchronize(t){let n=SO(e,t);r(Ad(n))},get state(){return{parameters:OO(e)}}}}function SO(e,t){return{...mO(e.state),...t}}function IO(e,t){return jO(e,t)}function OO(e){let t=e.state;return{...qO(t),...AO(t),...kO(t),...xO(t,RO,"f"),...xO(t,CO,"fExcluded"),...FO(t),...EO(t),...MO(t),...TO(t)}}function qO(e){if(void 0===e.query)return{};let t=e.query.q;return t!==Fu().q?{q:t}:{}}function AO(e){var t;let r=Object.values(null!=(t=e.tabSet)?t:{}).find((e=>e.isActive));return r?{tab:r.id}:{}}function jO(e,t){let r=e.state.tabSet,n=t.tab;if(!r||!Object.entries(r).length||!n)return!0;let a=n in r;return a||e.logger.warn(`The tab search parameter "${n}" is invalid. Ignoring change.`),a}function kO(e){if(void 0===e.sortCriteria)return{};let t=e.sortCriteria;return t!==Nu()?{sortCriteria:t}:{}}function xO(e,t,r){if(void 0===e.facetSet)return{};let n=Object.entries(e.facetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:r}])=>{let n=t(r.currentValues);return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{[r]:n}:{}}function RO(e){return e.filter((e=>"selected"===e.state)).map((e=>e.value))}function CO(e){return e.filter((e=>"excluded"===e.state)).map((e=>e.value))}function FO(e){if(void 0===e.categoryFacetSet)return{};let t=Object.entries(e.categoryFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,t])=>{let r=Tc(t.request.currentValues).map((e=>e.value));return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{cf:t}:{}}function EO(e){if(void 0===e.numericFacetSet)return{};let t=Object.entries(e.numericFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:t}])=>{let r=DO(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{nf:t}:{}}function MO(e){if(void 0===e.dateFacetSet)return{};let t=Object.entries(e.dateFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:t}])=>{let r=DO(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{df:t}:{}}function DO(e){return e.filter((e=>"selected"===e.state))}function TO(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;if(void 0===r)return{};let n=Object.entries(r).map((([e,{response:t}])=>{let r=RO(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{af:n}:{}}function PO(e,t){let{dispatch:r}=e,n=bO(e,t);return{...n,synchronize(t){let a=UO(e),i=SO(e,a),o=SO(e,t);ib(i,o)||!IO(e,o)||(n.synchronize(t),r(mh(hO(i,o))))},get state(){return{parameters:UO(e)}}}}function UO(e){let t=e.state;return{...OO(e),...VO(t),...$O(t),...LO(t),..._O(t),...NO(t),...zO(t),...QO(t)}}function VO(e){if(void 0===e.query)return{};let t=e.query.enableQuerySyntax;return void 0!==t&&t!==Fu().enableQuerySyntax?{enableQuerySyntax:t}:{}}function $O(e){if(void 0===e.advancedSearchQueries)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function LO(e){if(void 0===e.advancedSearchQueries)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function _O(e){if(void 0===e.pagination)return{};let t=e.pagination.firstResult;return t!==xu().firstResult?{firstResult:t}:{}}function NO(e){if(void 0===e.pagination)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function QO(e){if(void 0===e.staticFilterSet)return{};let t=Object.entries(e.staticFilterSet).map((([e,t])=>{let r=BO(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{sf:t}:{}}function BO(e){return e.filter((e=>"selected"===e.state)).map((e=>e.caption))}function zO(e){if(void 0===e.debug)return{};let t=e.debug;return t!==Ri()?{debug:t}:{}}var HO="&",YO="=",JO="..",WO="...";function GO(){return{serialize:KO,deserialize:uq}}function KO(e){return Object.entries(e).map(ZO).filter((e=>e)).join(HO)}function ZO(e){let[t,r]=e;return hq(t)?yq(t)?XO(r)?nq(t,r):"":"nf"===t||"df"===t?eq(r)?iq(t,r):"":`${t}${YO}${encodeURIComponent(r)}`:""}function XO(e){return!!tq(e)&&rq(e,(e=>"string"==typeof e))}function eq(e){return!!tq(e)&&rq(e,(e=>tq(e)&&"start"in e&&"end"in e))}function tq(e){return!(!e||"object"!=typeof e)}function rq(e,t){return 0===Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length}function nq(e,t){return Object.entries(t).map((([t,r])=>`${e}-${t}${YO}${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(HO)}function iq(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t,endInclusive:r})=>`${e}${r?WO:JO}${t}`)).join(",");return`${e}-${t}${YO}${n}`})).join(HO)}function uq(e){return e.split(HO).map((e=>aq(e))).map(oq).filter(fq).map(vq).reduce(((e,t)=>{let[r,n]=t;if(gq(r)){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function aq(e){let[t,...r]=e.split(YO);return[t,r.join(YO)]}function oq(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let a=n[1],i={[n[2]]:sq(a,r.split(","))};return[a,JSON.stringify(i)]}function sq(e,t){return"nf"===e?cq(t):"df"===e?dq(t):t}function cq(e){return e.map((e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=mq(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}})).filter((({start:e,end:t})=>Number.isFinite(e)&&Number.isFinite(t))).map((({start:e,end:t,endInclusive:r})=>Ym({start:e,end:t,state:"selected",endInclusive:r})))}function lq(e){try{return Cf(e)?(Ff(e,jf),!0):!!_f(e)&&(Pf(e),!0)}catch(e){return!1}}function dq(e){return e.map((e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=mq(e);return{start:r,end:n,endInclusive:t}})).filter((({start:e,end:t})=>lq(e)&&lq(t))).map((({start:e,end:t,endInclusive:r})=>Vg({start:e,end:t,state:"selected",endInclusive:r})))}function fq(e){let t=hq(e[0]),r=2===e.length;return t&&r}function hq(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function vq(e){let[t,r]=e;return"enableQuerySyntax"===t||"debug"===t?[t,"true"===r]:"firstResult"===t||"numberOfResults"===t?[t,parseInt(r)]:gq(t)?[t,pq(r)]:[t,decodeURIComponent(r)]}function pq(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>Dn(e)?decodeURIComponent(e):e))})),r}function gq(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function yq(e){return["f","af","cf","sf","fExcluded"].includes(e)}function mq(e){let t=-1!==e.indexOf(WO),[r,n]=e.split(t?WO:JO);return{isEndInclusive:t,startAsString:r,endAsString:n}}var wq=new Sn({fragment:new Mn});function bq(e,t){let r;function n(){r=e.state.search.requestId}function a(){return r!==e.state.search.requestId}Oq(e),Hn(e,wq,t.initialState,"buildUrlManager");let i=Ev(e),o=t.initialState.fragment;n();let s=PO(e,{initialState:{parameters:Iq(o)}});return{...i,subscribe(t){let r=()=>{let e=this.state.fragment;!Sq(o,e)&&a()&&(o=e,t()),n()};return r(),e.subscribe(r)},get state(){return{fragment:GO().serialize(s.state.parameters)}},synchronize(e){o=e;let t=Iq(e);s.synchronize(t)}}}function Sq(e,t){if(e===t)return!0;let r=Iq(e),n=Iq(t);return ib(r,n)}function Iq(e){return GO().deserialize(e)}function Oq(e){return e.addReducers({configuration:Hh}),!0}function qq(e){return cS(e)}async function Aq(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await bc(e.configuration.analytics)},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var jq=hr("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await Aq(a,e),o=await t.apiClient.html(i);return uu(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}})),kq=qt("resultPreview/next"),xq=qt("resultPreview/previous"),Rq=qt("resultPreview/prepare",(e=>zn(e,{results:new Un({required:!0})}))),Cq=2048,Fq=hr("resultPreview/updateContentURL",(async(e,{getState:t,extra:r})=>{let n=t(),a=Ki(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(null==a?void 0:a.length)>Cq&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${Cq} characters.`),{contentURL:a}})),Eq=e=>Gl("analytics/resultPreview/open",((t,r)=>{od(e);let n=Zl(e,r),a=ed(e);return t.makeDocumentQuickview(n,a)})),Mq=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:a}=Ci();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=a},Dq=e=>e.filter((e=>e.hasHtmlVersion)).map((e=>e.uniqueId)),Tq=Yt(Ci(),(e=>{e.addCase(jq.pending,(e=>{e.isLoading=!0})).addCase(jq.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1})).addCase(mh.fulfilled,((e,t)=>{Mq(e),e.resultsWithPreview=Dq(t.payload.response.results)})).addCase(bh.fulfilled,((e,t)=>{Mq(e),e.resultsWithPreview=e.resultsWithPreview.concat(Dq(t.payload.response.results))})).addCase(wh.fulfilled,Mq).addCase(Rq,((e,t)=>{e.resultsWithPreview=Dq(t.payload.results)})).addCase(kq,(e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t})).addCase(xq,(e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t})).addCase(Fq.fulfilled,((e,t)=>{e.contentURL=t.payload.contentURL}))}));function Pq(e,t,r,n,a){Uq(e);let{dispatch:i}=e,o=()=>e.state,s=Ev(e),{result:u,maximumPreviewSize:l}=t.options,c=()=>{let{resultsWithPreview:e,position:t}=o().resultPreview;return e[t]},d=e=>{i(Fq({uniqueId:e,requestedOutputSize:l,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||i(jq({uniqueId:e,requestedOutputSize:l})),a&&a()};return{...s,fetchResultContent(){d(u.uniqueId)},next(){i(kq()),d(c())},previous(){i(xq()),d(c())},get state(){let e=o(),t=u.hasHtmlVersion,r=e.resultPreview;return{content:u.uniqueId===r.uniqueId?r.content:"",resultHasPreview:t,isLoading:r.isLoading,contentURL:r.contentURL,currentResultUniqueId:c()}}}}function Uq(e){return e.addReducers({configuration:Hh,resultPreview:Tq}),!0}function Vq(e,t){$q(e);let{dispatch:r}=e,n=()=>e.state.search.results,a=Pq(e,t,Aq,"/html",(()=>{e.dispatch(Eq(t.options.result))}));return r(Rq({results:n()})),{...a,get state(){return{...a.state,currentResult:n().findIndex((e=>e.uniqueId===a.state.currentResultUniqueId))+1,totalResults:n().length}}}}function $q(e){return e.addReducers({search:$h}),!0}var Lq=e=>Gl("analytics/folding/showMore",((t,r)=>(od(e),t.makeShowMoreFoldedResults(Zl(e,r),ed(e))))),_q=()=>Gl("analytics/folding/showLess",(e=>e.makeShowLessFoldedResults())),Nq={logShowMoreFoldedResults:Lq,logShowLessFoldedResults:_q};function Qq(e,t){return e.raw[t.collection]}function Bq(e,t){return e.raw[t.parent]}function zq(e,t){let r=e.raw[t.child];return ii(r)?r[0]:r}function Hq(e,t){return void 0!==(e||t)&&e===t}function Yq(e,t,r,n=[]){let a=zq(e,r);return a?-1!==n.indexOf(a)?[]:t.filter((t=>{let n=zq(t,r)===zq(e,r);return Bq(t,r)===a&&!n})).map((e=>({result:e,children:Yq(e,t,r,[...n,a])}))):[]}function Jq(e,t){return e.find((e=>{let r=void 0===Bq(e,t),n=Hq(Bq(e,t),zq(e,t));return r||n}))}function Wq(e){return e.parentResult?Wq(e.parentResult):e}function Gq(e,t,r){var n;let a=_l(e),i=null!=(n=null!=r?r:Jq(a,t))?n:Wq(e);return{result:i,children:Yq(i,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Kq(e,t,r){let n={};return e.forEach((e=>{let a=Qq(e,t);!a||!zq(e,t)&&!e.parentResult||(n[a]=Gq(e,t,r))})),n}function Zq(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Xq=Yt(ku(),(e=>e.addCase(mh.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Kq(t.response.results,e.fields):{}})).addCase(wh.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Kq(t.response.results,e.fields):{}})).addCase(bh.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...Kq(t.response.results,e.fields)}:{}})).addCase($v,((e,{payload:t})=>{var r,n,a,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(a=t.childField)?a:e.fields.child},filterFieldRange:null!=(i=t.numberOfFoldedResults)?i:e.filterFieldRange}})).addCase(Lv.pending,((e,{meta:t})=>{Zq(e,t.arg).isLoadingMoreResults=!0})).addCase(Lv.rejected,((e,{meta:t})=>{Zq(e,t.arg).isLoadingMoreResults=!1})).addCase(Lv.fulfilled,((e,{payload:{collectionId:t,results:r,rootResult:n}})=>{let a=Kq(r,e.fields,n);if(!a||!a[t])throw new Error(`Unable to create collection ${t} from received results: ${JSON.stringify(r)}. Folding most probably in an invalid state... `);e.collections[t]=a[t],e.collections[t].moreResultsAvailable=!1})))),eA=new Sn(Vv);function tA(e,t,r){var n;rA(e);let a=pS(e,t),{dispatch:i}=e,o=()=>e.state,s=(null==(n=t.options)?void 0:n.folding)?Yn(e,eA,t.options.folding,"buildFoldedResultList"):{};return i($v({...s})),{...a,loadCollection:n=>{i(t.loadCollectionActionCreator(n.result.raw[e.state.folding.fields.collection])),i(r.logShowMoreFoldedResults(n.result))},logShowMoreFoldedResults:e=>{i(r.logShowMoreFoldedResults(e))},logShowLessFoldedResults:()=>{i(r.logShowLessFoldedResults())},findResultById(e){return nA(this.state.results,(t=>t.result.uniqueId===e.result.uniqueId))},findResultByCollection(e){return nA(this.state.results,(t=>t.result.raw.foldingcollection===e.result.raw.foldingcollection))},get state(){let e=o();return{...a.state,results:a.state.results.map((t=>{let r=t.raw[e.folding.fields.collection];return r&&e.folding.collections[r]?e.folding.collections[r]:{result:t,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}}))}}}}function rA(e){return e.addReducers({search:$h,configuration:zh,folding:Xq,query:GS}),!0}function nA(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let e=nA(n.children,t);if(e)return e}}return null}function iA(e,t={}){let r=tA(e,{...t,loadCollectionActionCreator:Lv},Nq);return{...r,get state(){return r.state}}}var uA=Yt(Sa(),(e=>e.addCase(mh.pending,(e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}})).addCase(mh.fulfilled,((e,t)=>{var r;let n=[],a=[],i=[];t.payload.response.triggers.forEach((e=>{switch(e.type){case"redirect":n.push(e.content);break;case"query":break;case"execute":a.push({functionName:e.content.name,params:e.content.params});break;case"notify":i.push(e.content)}})),e.redirectTo=null!=(r=n[0])?r:"",e.query=e.queryModification.newQuery,e.executions=a,e.notifications=i})).addCase(wf,((e,t)=>{e.queryModification={...t.payload,queryToIgnore:""}})).addCase(mf,((e,t)=>{e.queryModification.queryToIgnore=t.payload}))));function aA(e){oA(e);let t=Ev(e),{dispatch:r}=e,n=()=>e.state,a=()=>n().triggers.queryModification.newQuery,i=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:a(),originalQuery:i(),wasQueryModified:""!==a()}},undo(){r(mf(a())),r(nf({q:i()})),r(mh(gf({undoneQuery:a()})))}}}function oA(e){return e.addReducers({triggers:uA,query:GS}),!0}function sA(e){cA(e);let t=Ev(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.notifications;return{...t,subscribe(t){let n=()=>{let e=!rb(a,this.state.notifications);a=this.state.notifications,e&&(t(),r(yf()))};return n(),e.subscribe(n)},get state(){return{notifications:n().triggers.notifications}}}}function cA(e){return e.addReducers({triggers:uA}),!0}var lA=()=>new Tn({values:{questionAnswerId:Ln},options:{required:!0}}),dA=()=>new Tn({values:{linkText:Nn,linkURL:Nn},options:{required:!0}});function fA(e){return zn(e,lA())}function hA(e,t){var r,n;let a=null!=t?t:null==(n=null==(r=e.search)?void 0:r.questionAnswer)?void 0:n.documentId;return a&&e.search&&Dh(e,a.contentIdKey,a.contentIdValue)}function vA(e,t){var r,n,a,i,o;let s=null!=(n=null==(r=e.questionAnswering)?void 0:r.relatedQuestions.findIndex((e=>e.questionAnswerId===t)))?n:-1;if(-1===s)return null;let u=null==(o=null==(i=null==(a=e.search)?void 0:a.questionAnswer)?void 0:i.relatedQuestions)?void 0:o[s];return null!=u?u:null}var pA=()=>Gl("analytics/smartSnippet/expand",(e=>e.makeExpandSmartSnippet())),gA=()=>Gl("analytics/smartSnippet/collapse",(e=>e.makeCollapseSmartSnippet())),yA=()=>Gl("analytics/smartSnippet/like",(e=>e.makeLikeSmartSnippet())),mA=()=>Gl("analytics/smartSnippet/dislike",(e=>e.makeDislikeSmartSnippet()));function wA(){return Gl("analytics/smartSnippet/source/open",((e,t)=>{let r=hA(t);return e.makeOpenSmartSnippetSource(Zl(r,t),ed(r))}))}var bA=e=>Gl("analytics/smartSnippet/source/open",((t,r)=>{zn(e,dA());let n=hA(r);return t.makeOpenSmartSnippetInlineLink(Zl(n,r),{...ed(n),...e})})),SA=()=>Gl("analytics/smartSnippet/feedbackModal/open",(e=>e.makeOpenSmartSnippetFeedbackModal())),IA=()=>Gl("analytics/smartSnippet/feedbackModal/close",(e=>e.makeCloseSmartSnippetFeedbackModal())),OA=e=>Gl("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason(e))),qA=e=>Gl("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason("other",e))),AA=e=>Gl("analytics/smartSnippetSuggestion/expand",((t,r)=>{fA(e);let n=vA(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),jA=e=>Gl("analytics/smartSnippetSuggestion/expand",((t,r)=>{fA(e);let n=vA(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),kA=e=>Gl("analytics/smartSnippet/source/open",((t,r)=>{zn(e,lA());let n=vA(r,e.questionAnswerId);if(!n)return null;let a=hA(r,n.documentId);return a?t.makeOpenSmartSnippetSuggestionSource(Zl(a,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),xA=(e,t)=>Gl("analytics/smartSnippet/source/open",((r,n)=>{zn(e,lA()),zn(t,dA());let a=vA(n,e.questionAnswerId);if(!a)return null;let i=hA(n,a.documentId);return i?r.makeOpenSmartSnippetSuggestionInlineLink(Zl(i,n),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId,linkText:t.linkText,linkURL:t.linkURL}):null})),RA={logExpandSmartSnippet:pA,logCollapseSmartSnippet:gA,logLikeSmartSnippet:yA,logDislikeSmartSnippet:mA,logOpenSmartSnippetSource:wA,logOpenSmartSnippetInlineLink:bA,logOpenSmartSnippetFeedbackModal:SA,logCloseSmartSnippetFeedbackModal:IA,logSmartSnippetFeedback:OA,logSmartSnippetDetailedFeedback:qA,logExpandSmartSnippetSuggestion:AA,logCollapseSmartSnippetSuggestion:jA,logOpenSmartSnippetSuggestionSource:kA},CA=qt("smartSnippet/expand"),FA=qt("smartSnippet/collapse"),EA=qt("smartSnippet/like"),MA=qt("smartSnippet/dislike"),DA=qt("smartSnippet/feedbackModal/open"),TA=qt("smartSnippet/feedbackModal/close"),PA=qt("smartSnippet/related/expand",(e=>fA(e))),UA=qt("smartSnippet/related/collapse",(e=>fA(e))),VA=(e,t)=>e.findIndex((e=>e.questionAnswerId===t.questionAnswerId));function $A({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return ci({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function LA(e,t){let r=$A(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var _A=Yt(Eu(),(e=>e.addCase(CA,(e=>{e.expanded=!0})).addCase(FA,(e=>{e.expanded=!1})).addCase(EA,(e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1})).addCase(MA,(e=>{e.liked=!1,e.disliked=!0})).addCase(DA,(e=>{e.feedbackModalOpen=!0})).addCase(TA,(e=>{e.feedbackModalOpen=!1})).addCase(mh.fulfilled,((e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map(((t,r)=>LA(t,e.relatedQuestions[r]))),n=$A(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{...Eu(),relatedQuestions:r,questionAnswerId:n}})).addCase(PA,((e,t)=>{let r=VA(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(UA,((e,t)=>{let r=VA(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)}))));function NA(e,t,r){var n;QA(e);let a=Ev(e),i=()=>e.state,o=()=>hA(i()),s=null,u=OS(e,{options:{selectionDelay:null==(n=null==r?void 0:r.options)?void 0:n.selectionDelay}},(()=>{let r=o();if(!r)return void(s=null);let{searchResponseId:n}=i().search;s!==n&&(s=n,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(bS(r)))}));return{...a,get state(){let e=i();return{question:e.search.questionAnswer.question,answer:e.search.questionAnswer.answerSnippet,documentId:e.search.questionAnswer.documentId,expanded:e.questionAnswering.expanded,answerFound:""!==e.search.questionAnswer.answerSnippet,liked:e.questionAnswering.liked,disliked:e.questionAnswering.disliked,feedbackModalOpen:e.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(CA())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(FA())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(EA())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(MA())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(DA())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(TA())},sendFeedback(r){e.dispatch(t.logSmartSnippetFeedback(r)),e.dispatch(TA())},sendDetailedFeedback(r){e.dispatch(t.logSmartSnippetDetailedFeedback(r)),e.dispatch(TA())},selectSource(){u.select()},beginDelayedSelectSource(){u.beginDelayedSelect()},cancelPendingSelectSource(){u.cancelPendingSelect()}}}function QA(e){return e.addReducers({search:$h,questionAnswering:_A}),!0}function BA(e,t){zA(e);let r=()=>e.state,n=new Set,a=e=>!!n.has(e)||(n.add(e),!1),i=null,o=e=>{i!==e&&(i=e,u={},n.clear())},s=(r,n,i)=>{var o;return OS(e,{options:{selectionDelay:null==(o=null==t?void 0:t.options)?void 0:o.selectionDelay}},(()=>{a(n)||e.dispatch(i?xA({questionAnswerId:i},r):bA(r))}))},u={},l=(e,t)=>{let{searchResponseId:n}=r().search;o(n);let a=ci({...e,questionAnswerId:t});return a in u||(u[a]=s(e,a,t)),u[a]};return{selectInlineLink(e,t){var r;null==(r=l(e,t))||r.select()},beginDelayedSelectInlineLink(e,t){var r;null==(r=l(e,t))||r.beginDelayedSelect()},cancelPendingSelectInlineLink(e,t){var r;null==(r=l(e,t))||r.cancelPendingSelect()}}}function zA(e){return e.addReducers({search:$h,questionAnswering:_A}),!0}function HA(e,t){var r;let n=NA(e,RA,t),a=BA(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}});return{...n,get state(){return n.state},selectInlineLink(e){a.selectInlineLink(e)},beginDelayedSelectInlineLink(e){a.beginDelayedSelectInlineLink(e)},cancelPendingSelectInlineLink(e){a.cancelPendingSelectInlineLink(e)}}}function YA(e,t){JA(e);let r=Ev(e),n=()=>e.state,a=t=>{let{contentIdKey:r,contentIdValue:n}=t;return e.state.search.results.find((e=>kh(e,r)===n))};return{...r,get state(){let e=n();return{questions:e.search.questionAnswer.relatedQuestions.map(((t,r)=>({question:t.question,answer:t.answerSnippet,documentId:t.documentId,questionAnswerId:e.questionAnswering.relatedQuestions[r].questionAnswerId,expanded:e.questionAnswering.relatedQuestions[r].expanded,source:a(t.documentId)})))}},expand(r){let n={questionAnswerId:r};e.dispatch(t.logExpandSmartSnippetSuggestion(n)),e.dispatch(PA(n))},collapse(r){let n={questionAnswerId:r};e.dispatch(t.logCollapseSmartSnippetSuggestion(n)),e.dispatch(UA(n))}}}function JA(e){return e.addReducers({search:$h,questionAnswering:_A}),!0}function WA(e,t){GA(e);let r=()=>e.state,n=new Set,a=e=>!!n.has(e)||(n.add(e),!1),i=null,o=e=>{i!==e&&(i=e,u={},n.clear())},s=(r,n)=>{var i;return OS(e,{options:{selectionDelay:null==(i=null==t?void 0:t.options)?void 0:i.selectionDelay}},(()=>{a(n)||(e.dispatch(kA({questionAnswerId:n})),e.dispatch(bS(r)))}))},u={},l=e=>{let{searchResponseId:t}=r().search;o(t);let n=(e=>{let t=r(),n=vA(t,e);return n?hA(t,n.documentId):null})(e);return n?(e in u||(u[e]=s(n,e)),u[e]):null};return{selectSource(e){var t;null==(t=l(e))||t.select()},beginDelayedSelectSource(e){var t;null==(t=l(e))||t.beginDelayedSelect()},cancelPendingSelectSource(e){var t;null==(t=l(e))||t.cancelPendingSelect()}}}function GA(e){return e.addReducers({search:$h,questionAnswering:_A}),!0}function KA(e,t){var r,n;let a=YA(e,RA),i=BA(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}}),o=WA(e,{options:{selectionDelay:null==(n=null==t?void 0:t.options)?void 0:n.selectionDelay}});return{...a,get state(){return a.state},selectSource(e){o.selectSource(e)},beginDelayedSelectSource(e){o.beginDelayedSelectSource(e)},cancelPendingSelectSource(e){o.cancelPendingSelectSource(e)},selectInlineLink(e,t){i.selectInlineLink(t,e)},beginDelayedSelectInlineLink(e,t){i.beginDelayedSelectInlineLink(t,e)},cancelPendingSelectInlineLink(e,t){i.cancelPendingSelectInlineLink(t,e)}}}var ZA={queries:new Un({required:!0,each:new Mn({emptyAllowed:!1})}),maxLength:new jn({required:!0,min:1,default:10})},XA=qt("recentQueries/registerRecentQueries",(e=>zn(e,ZA))),ej=qt("recentQueries/clearRecentQueries"),tj=()=>Gl("analytics/recentQueries/clear",(e=>e.makeClearRecentQueries())),rj=()=>Gl("analytics/recentQueries/click",(e=>e.makeRecentQueryClick())),nj=Yt(ma(),(e=>{e.addCase(XA,((e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(ej,(e=>{e.queries=[]})).addCase(mh.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;if(!r.length||!n.length)return;e.queries=e.queries.filter((e=>e!==r));let a=e.queries.slice(0,e.maxLength-1);e.queries=[r,...a]}))})),ij={queries:[]},uj={maxLength:10,clearFilters:!0},aj=new Sn({queries:new Un({required:!0})}),oj=new Sn({maxLength:new jn({required:!0,min:1}),clearFilters:new Rn});function sj(e,t){Yn(e,oj,null==t?void 0:t.options,"buildRecentQueriesList"),Hn(e,aj,null==t?void 0:t.initialState,"buildRecentQueriesList")}function cj(e,t){lj(e);let r=Ev(e),{dispatch:n}=e,a=()=>e.state,i={...uj,...null==t?void 0:t.options},o={...ij,...null==t?void 0:t.initialState};sj(e,{options:i,initialState:o});let s={queries:o.queries,maxLength:i.maxLength};return n(XA(s)),{...r,get state(){let e=a();return{...e.recentQueries,analyticsEnabled:e.configuration.analytics.enabled}},clear(){n(tj()),n(ej())},executeRecentQuery(e){let t=new jn({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);n(yh({q:this.state.queries[e],clearFilters:i.clearFilters})),n(mh(rj()))}}}function lj(e){return e.addReducers({search:$h,recentQueries:nj}),!0}function dj(e,t){fj(e);let r=t=>{var r,n;return null!=(n=null==(r=e.state.facetOptions.facets[t])?void 0:r.enabled)&&n},n=t=>{var r,n,a,i,o,s,u,l,c,d,f,p,h,g,v,m;return null!=(m=null!=(v=null!=(f=null!=(u=null==(a=null==(n=null==(r=e.state.facetSet)?void 0:r[t])?void 0:n.request)?void 0:a.currentValues)?u:null==(s=null==(o=null==(i=e.state.categoryFacetSet)?void 0:i[t])?void 0:o.request)?void 0:s.currentValues)?f:null==(d=null==(c=null==(l=e.state.numericFacetSet)?void 0:l[t])?void 0:c.request)?void 0:d.currentValues)?v:null==(g=null==(h=null==(p=e.state.dateFacetSet)?void 0:p[t])?void 0:h.request)?void 0:g.currentValues)?m:null},a=t=>t in e.state.facetOptions.facets,i=()=>ci({isFacetRegistered:a(t.facetId),parentFacets:t.conditions.map((({parentFacetId:e})=>a(e)?{enabled:r(e),values:n(e)}:null))}),o=()=>t.conditions.some((e=>{if(!r(e.parentFacetId))return!1;let t=n(e.parentFacetId);return null!==t&&e.condition(t)})),s=()=>{if(!a(t.facetId))return;let n=r(t.facetId),i=o();n!==i&&(e.dispatch(i?np(t.facetId):ip(t.facetId)),e.state.facetSet&&Object.entries(e.state.facetSet).forEach((([t,r])=>r.request.freezeCurrentValues&&e.dispatch(Ug({facetId:t,freezeCurrentValues:!1})))))};if(!t.conditions.length)return{stopWatching(){}};let u=i(),l=e.subscribe((()=>{(()=>{let e=i();return e!==u&&(u=e,!0)})()&&s()}));return s(),{stopWatching(){l()}}}function fj(e){return e.addReducers({facetOptions:cy}),!0}Yt(wa(),(e=>{e.addCase(wS,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(SS,(e=>{e.results=[]})).addCase(bS,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))}));var hj=Yt(fa(),(e=>{e.addCase(mh.fulfilled,((e,t)=>{var r;e.set={};let n=null==(r=t.payload.response.generateAutomaticFacets)?void 0:r.facets;null==n||n.forEach((t=>{e.set[t.field]={response:t}}))})).addCase(Cb,((e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)})).addCase(Mb,((e,t)=>{var r;let{field:n,selection:a}=t.payload,i=null==(r=e.set[n])?void 0:r.response;if(!i)return;let o=i.values.find((e=>e.value===a.value));if(!o)return;let s="selected"===o.state;o.state=s?"idle":"selected"})).addCase(Fb,((e,t)=>{var r;let n=t.payload,a=null==(r=e.set[n])?void 0:r.response;if(a)for(let e of a.values)e.state="idle"})).addCase(Ad,((e,t)=>{var r,n,a;let i=null!=(r=t.payload.af)?r:{},o=Object.keys(e.set);for(let t in i)if(!e.set[t]){let r=vj(t),n=i[t].map((e=>pj(e)));r.values.push(...n),e.set[t]={response:r}}for(let t of o)if(!(t in i)){let r=null==(n=e.set[t])?void 0:n.response;for(let e of r.values)e.state="idle"}for(let t in i){let r=null==(a=e.set[t])?void 0:a.response;if(r){let e=r.values;for(let r of e)i[t].includes(r.value)?"idle"===r.state&&(r.state="selected"):r.state="idle"}}})).addCase(Dd.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.automaticFacetSet.set).length)return t.payload.automaticFacetSet})).addCase($d,(e=>{Object.values(e.set).forEach((({response:e})=>{e.values.forEach((e=>e.state="idle"))}))}))}));function vj(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function pj(e){return{value:e,state:"selected",numberOfResults:0}}function gj(e,t){let{dispatch:r}=e,n=Ev(e),{field:a}=t;return{...n,toggleSelect(e){r(Mb({field:a,selection:e})),r(mh(Hy(a,e)))},deselectAll(){r(Fb(a)),r(mh(ag(a)))},get state(){var t,r;let n=null==(r=null==(t=e.state.automaticFacetSet)?void 0:t.set[a])?void 0:r.response;return n?{field:n.field,label:n.label,values:n.values}:{field:"",values:[],label:""}}}}function yj(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function mj(e,t){wj(e);let{dispatch:r}=e,n=yj(t.options);return r(Cb(n)),{...Ev(e),get state(){var t,r;return{automaticFacets:null!=(r=null==(t=e.state.search.response.generateAutomaticFacets)?void 0:t.facets.map((t=>gj(e,{field:t.field}))))?r:[]}}}}function wj(e){return e.addReducers({automaticFacetSet:hj,configuration:Hh,search:$h}),!0}function bj(e,t){var r,n;return null==(n=null==(r=e.generatedAnswer)?void 0:r.citations)?void 0:n.find((e=>e.id===t))}function Sj(e){var t,r,n;return null==(n=null==(r=null==(t=e.search)?void 0:t.response)?void 0:r.extendedResults)?void 0:n.generativeQuestionAnsweringId}var Ij=()=>Gl("analytics/generatedAnswer/retry",(e=>e.makeRetryGeneratedAnswer())),Oj=e=>Gl("analytics/generatedAnswer/rephrase",((t,r)=>{let n=Sj(r);return n?t.makeRephraseGeneratedAnswer({generativeQuestionAnsweringId:n,rephraseFormat:e.answerStyle}):null})),qj=e=>Gl("analytics/generatedAnswer/openAnswerSource",((t,r)=>{let n=Sj(r),a=bj(r,e);return n&&a?t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:n,permanentId:a.permanentid,citationId:a.id}):null})),Aj=(e,t)=>Gl("analytics/generatedAnswer/hoverCitation",((r,n)=>{let a=Sj(n),i=bj(n,e);return a&&i?r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:a,permanentId:i.permanentid,citationId:i.id,citationHoverTimeMs:t}):null})),jj=()=>Gl("analytics/generatedAnswer/like",((e,t)=>{let r=Sj(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null})),kj=()=>Gl("analytics/generatedAnswer/dislike",((e,t)=>{let r=Sj(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null})),xj=e=>Gl("analytics/generatedAnswer/sendFeedback",((t,r)=>{let n=Sj(r);return n?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:e}):null})),Rj=e=>Gl("analytics/generatedAnswer/sendFeedback",((t,r)=>{let n=Sj(r);return n?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:"other",details:e}):null})),Cj=e=>Gl("analytics/generatedAnswer/streamEnd",((t,r)=>{let n=Sj(r);return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e}):null})),Fj=()=>Gl("analytics/generatedAnswer/show",((e,t)=>{let r=Sj(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null})),Ej=()=>Gl("analytics/generatedAnswer/hide",((e,t)=>{let r=Sj(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null})),Mj=()=>Gl("analytics/generatedAnswer/copy",((e,t)=>{let r=Sj(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null})),Dj=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:null==(t=e.search.extendedResults)?void 0:t.generativeQuestionAnsweringId}},Tj=["default","bullet","step","concise"],Pj=new Mn({required:!0}),Uj=new Mn,Vj=new Rn({required:!0}),$j={id:Pj,title:Pj,uri:Pj,permanentid:Pj,clickUri:Uj},Lj=qt("generatedAnswer/setIsVisible",(e=>zn(e,Vj))),_j=qt("generatedAnswer/updateMessage",(e=>zn(e,{textDelta:Pj}))),Nj=qt("generatedAnswer/updateCitations",(e=>zn(e,{citations:new Un({required:!0,each:new Tn({values:$j})})}))),Qj=qt("generatedAnswer/updateError",(e=>zn(e,{message:Uj,code:new jn({min:0})}))),Bj=qt("generatedAnswer/resetAnswer"),zj=qt("generatedAnswer/like"),Hj=qt("generatedAnswer/dislike"),Yj=qt("generatedAnswer/feedbackModal/open"),Jj=qt("generatedAnswer/feedbackModal/close"),Wj=qt("generatedAnswer/setIsLoading",(e=>zn(e,Vj))),Gj=qt("generatedAnswer/setIsStreaming",(e=>zn(e,Vj))),Kj=qt("generatedAnswer/updateResponseFormat",(e=>zn(e,{answerStyle:new Mn({required:!0,constrainTo:Tj})}))),Zj=hr("generatedAnswer/streamAnswer",(async(e,t)=>{var r;let n=t.getState(),{dispatch:a,extra:i}=t,{setAbortControllerRef:o}=e,s=await Dj(n);a(Wj(!0));let u=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,l=null==(r=i.streamingClient)?void 0:r.streamGeneratedAnswer(s,{write:e=>{u(s)&&(a(Wj(!1)),e.payload&&e.payloadType&&((e,t)=>{switch(e){case"genqa.messageType":a(_j(JSON.parse(t)));break;case"genqa.citationsType":a(Nj(JSON.parse(t)));break;case"genqa.endOfStreamType":a(Gj(!1)),a(Cj(JSON.parse(t).answerGenerated));break;default:n.debug&&i.logger.warn(`Unknown payloadType: "${e}"`)}})(e.payloadType,e.payload))},abort:e=>{u(s)&&a(Qj(e))},close:()=>{u(s)&&a(Gj(!1))},resetAnswer:()=>{u(s)&&a(Bj())}});l?o(l):a(Wj(!1))})),Xj=Yt(ha(),(e=>e.addCase(Lj,((e,{payload:t})=>{e.isVisible=t})).addCase(_j,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=t.textDelta,delete e.error})).addCase(Nj,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(t.citations),delete e.error})).addCase(Qj,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...t,isRetryable:t.code===Na},e.citations=[],delete e.answer})).addCase(zj,(e=>{e.liked=!0,e.disliked=!1})).addCase(Hj,(e=>{e.liked=!1,e.disliked=!0})).addCase(Yj,(e=>{e.feedbackModalOpen=!0})).addCase(Jj,(e=>{e.feedbackModalOpen=!1})).addCase(Bj,(e=>({...ha(),responseFormat:e.responseFormat,isVisible:e.isVisible}))).addCase(Wj,((e,{payload:t})=>{e.isLoading=t})).addCase(Gj,((e,{payload:t})=>{e.isStreaming=t})).addCase(Kj,((e,{payload:t})=>{e.responseFormat=t}))));function ek(e,t={}){var r,n;tk(e);let a,i,o,{dispatch:s}=e,u=Ev(e),l=()=>e.state,c=e=>{a=e},d=null==(r=t.initialState)?void 0:r.isVisible;void 0!==d&&s(Lj(d));let f=null==(n=t.initialState)?void 0:n.responseFormat;return f&&s(Kj(f)),e.subscribe((()=>{let e=l(),t=e.search.requestId,r=e.search.extendedResults.generativeQuestionAnsweringId;i!==t&&(i=t,null==a||a.abort(),s(Bj())),!(a&&!(null==a?void 0:a.signal.aborted)||(a=void 0,0))&&r&&r!==o&&(o=r,s(Zj({setAbortControllerRef:c})))})),{...u,get state(){return l().generatedAnswer},retry(){s(mh(Ij()))},like(){s(zj()),s(jj())},dislike(){s(Hj()),s(kj())},openFeedbackModal(){s(Yj())},closeFeedbackModal(){s(Jj())},sendFeedback(e){s(xj(e)),s(Jj())},sendDetailedFeedback(e){s(Rj(e)),s(Jj())},logCitationClick(e){s(qj(e))},logCitationHover(e,t){s(Aj(e,t))},rephrase(e){s(Kj(e)),s(mh(Oj(e)))},show(){this.state.isVisible||(s(Lj(!0)),s(Fj()))},hide(){this.state.isVisible&&(s(Lj(!1)),s(Ej()))},logCopyToClipboard(){s(Mj())}}}function tk(e){return e.addReducers({generatedAnswer:Xj}),!0}function rk(e,t){let r=!1;return OS(e,t,(()=>{r||(r=!0,e.dispatch(qj(t.options.citation.id)))}))}var nk=()=>new Mn({required:!1,emptyAllowed:!0}),ik=qt("advancedSearchQueries/update",(e=>zn(e,{aq:nk(),cq:nk(),lq:nk(),dq:nk()}))),uk=qt("advancedSearchQueries/register",(e=>zn(e,{aq:nk(),cq:nk(),lq:nk(),dq:nk()})));function ak(e){return e.addReducers({configuration:Hh,pipeline:Pd,searchHub:Vd}),{updateSearchConfiguration:md}}function ok(e){return e.addReducers({dateFacetSet:Am}),{deselectAllDateFacetValues:Xg,registerDateFacet:Jg,toggleSelectDateFacetValue:Wg,toggleExcludeDateFacetValue:Gg,updateDateFacetSortCriterion:Zg,updateDateFacetValues:Kg}}function sk(e){return e.addReducers({fields:Nv}),{registerFieldsToInclude:Dv,enableFetchAllFields:Tv,disableFetchAllFields:Pv,fetchFieldsDescription:Uv}}function ck(e){return e.addReducers({numericFacetSet:$m}),{deselectAllNumericFacetValues:sy,registerNumericFacet:ny,toggleSelectNumericFacetValue:iy,toggleExcludeNumericFacetValue:uy,updateNumericFacetSortCriterion:oy,updateNumericFacetValues:ay}}function lk(e){return e.addReducers({query:GS}),{updateQuery:nf}}function dk(e){return e.addReducers({querySet:QS}),{registerQuerySetQuery:_S,updateQuerySetQuery:NS}}function fk(e){return e.addReducers({querySuggest:JS,querySet:QS}),{clearQuerySuggest:PS,fetchQuerySuggestions:US,registerQuerySuggest:MS,selectQuerySuggestion:TS}}Yt(Gu(),(e=>{e.addCase(ik,((e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;On(r)||(e.aq=r,e.aqWasSet=!0),On(n)||(e.cq=n,e.cqWasSet=!0),On(a)||(e.lq=a,e.lqWasSet=!0),On(i)||(e.dq=i,e.dqWasSet=!0)})).addCase(uk,((e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;On(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),On(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),On(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a)),On(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))})).addCase(Dd.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(Ad,((e,t)=>{let{aq:r,cq:n}=t.payload;On(r)||(e.aq=r,e.aqWasSet=!0),On(n)||(e.cq=n,e.cqWasSet=!0)}))}));var hk=qt("excerptLength/set",(e=>zn(e,new jn({min:0,required:!0}))));Yt(aa(),(e=>{e.addCase(hk,((e,t)=>{e.length=t.payload}))}));var yk,vk=new Sn({content:new In({required:!0}),conditions:new In({required:!0}),priority:new jn({required:!1,default:0,min:0}),fields:new Un({required:!1,each:Ln})});function pk(e){gk(e);let t=[];return{registerTemplates(...r){let n=[];(e=>{e.forEach((e=>{if(vk.validate(e),!e.conditions.every((e=>e instanceof Function)))throw new bn("Each result template conditions should be a function that takes a result as an argument and returns a boolean")}))})(r),r.forEach((e=>{let r={...e,priority:e.priority||0,fields:e.fields||[]};t.push(r),n.push(...r.fields)})),t.sort(((e,t)=>t.priority-e.priority)),n.length&&e.dispatch(Dv(n))},selectTemplate(e){let r=t.find((t=>t.conditions.every((t=>t(e)))));return r?r.content:null}}}function gk(e){return e.addReducers({fields:Nv}),!0}function mk(e){let{by:t,order:r}=e;switch(t){case Du.Relevancy:return Pu();case Du.QRE:return $u();case Du.NoSort:return Lu();case Du.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Uu(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Vu(t,r)}}function wk(e){return void 0===e||e===Mu.Ascending||e===Mu.Descending}function bk(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{let n=t.trim().split(" "),a=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||""===a)throw r;if(!wk(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${Mu.Ascending}" or "${Mu.Descending}"`);return mk({by:a,order:i})}))}(e=>{e.getResultProperty=kh,e.fieldsMustBeDefined=xh,e.fieldsMustNotBeDefined=Rh,e.fieldMustMatch=Ch,e.fieldMustNotMatch=Fh})(yk||(yk={})),Q();export{bq as $,II as A,bk as B,KA as C,Bf as D,jS as E,yS as F,qq as G,Vm as H,ck as I,pk as J,fw as K,Si as L,ok as M,dj as N,CS as O,fk as P,lI as Q,iI as R,HA as S,cj as T,Ia as U,qy as V,xv as W,VI as X,rk as Y,Vg as Z,mj as _,KI as a,ek as b,aA as c,ep as d,_I as e,Ac as f,Ab as g,Gm as h,jf as i,uS as j,sS as k,Vq as l,yk as m,dO as n,iA as o,sA as p,ak as q,lk as r,iw as s,dk as t,sk as u,Au as v,AS as w,hS as x,Ym as y,im as z};