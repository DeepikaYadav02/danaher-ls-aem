import{i as t,h as e}from"./p-74c158c7.js";import{h as i,F as n}from"./p-591772f1.js";import{B as s}from"./p-59a8a3f5.js";class r{constructor(e){this.props=e}get popupId(){return`${this.props.id}-popup`}get hasSuggestions(){return!!this.props.getAllSuggestionElements().length}get hasActiveDescendant(){return""!==this.props.getActiveDescendant()}get firstValue(){var e;return null===(e=this.props.getPanelInFocus())||void 0===e?void 0:e.firstElementChild}get lastValue(){var e;return null===(e=this.props.getPanelInFocus())||void 0===e?void 0:e.lastElementChild}get nextOrFirstValue(){var e;return this.hasActiveDescendant&&(null===(e=this.props.getActiveDescendantElement())||void 0===e?void 0:e.nextElementSibling)||this.firstValue}get previousOrLastValue(){var e;return this.hasActiveDescendant&&(null===(e=this.props.getActiveDescendantElement())||void 0===e?void 0:e.previousElementSibling)||this.lastValue}get showSuggestions(){return this.hasSuggestions&&this.props.getIsExpanded()&&!this.props.getIsSearchDisabled()}scrollActiveDescendantIntoView(){var e;null===(e=this.props.getActiveDescendantElement())||void 0===e||e.scrollIntoView({block:"nearest"})}focusNextValue(){this.hasSuggestions&&this.nextOrFirstValue&&this.props.focusValue(this.nextOrFirstValue)}focusPreviousValue(){this.hasSuggestions&&this.previousOrLastValue&&this.props.focusValue(this.previousOrLastValue)}updateQuery(e){this.props.bindings.engine.dispatch(this.props.querySetActions.updateQuerySetQuery({id:this.props.id,query:e}))}onSuggestionClick(e,t){e.onSelect&&e.onSelect(t),e.query&&this.props.clearSuggestions()}getSearchInputLabel(i=0){return this.props.getIsSearchDisabled()?this.props.bindings.i18n.t("search-disabled",{length:i}):t()?this.props.bindings.i18n.t("search-box-with-suggestions-macos"):e()?this.props.bindings.i18n.t("search-box-with-suggestions"):this.props.bindings.i18n.t("search-box-with-suggestions-keyboardless")}}const o=(e,t)=>i("div",{part:"wrapper",class:["flex bg-background w-full border border-neutral rounded-md focus-within:ring",e.disabled?"focus-within:border-disabled focus-within:ring-neutral":"focus-within:border-primary focus-within:ring-ring-primary",e.textArea?"absolute top-0 left-0":"relative h-full"].join(" ")},t),a='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m18 2-1.8-2-7.1 7.1-7.1-7.1-2 2 7.1 7.1-7.1 7.1 2 1.8 7.1-6.9 7.1 6.9 1.8-1.8-6.9-7.1z"/></svg>',u=({inputRef:e,bindings:t,onClick:n,...r})=>i(s,{style:"text-transparent",part:"clear-button",class:"w-8 h-8 mr-1.5 text-neutral-dark shrink-0",onClick:()=>{null==n||n(),null==e||e.focus()},ariaLabel:t.i18n.t("clear"),...r},i("atomic-icon",{part:"clear-icon",icon:a,class:"w-3 h-3"}));function l(e){return{role:"combobox",autocomplete:"off",autocapitalize:"off",autocorrect:"off","aria-activedescendant":e.activeDescendant,"aria-expanded":`${e.hasSuggestions&&e.expanded}`,"aria-autocomplete":"both","aria-haspopup":"true","aria-controls":e.id}}const c=({inputRef:e,loading:t,bindings:s,onKeyDown:n,value:r,ariaLabel:o,onClear:a,popup:p,...g})=>i("div",{class:"grow flex items-center"},i("input",{part:"input","aria-label":o,placeholder:s.i18n.t("search"),type:"text",class:"h-full outline-none bg-transparent w-0 grow px-4 py-3.5 text-neutral-dark placeholder-neutral-dark text-lg",onKeyDown:e=>{null==n||n(e)},...p&&l(p),...g,value:r}),t&&i("span",{part:"loading",class:"loading w-5 h-5 rounded-full bg-gradient-to-r animate-spin mr-3 grid place-items-center"}),!t&&r&&i(u,{inputRef:e,bindings:s,onClick:()=>a()})),d="data-query";function g(e,t){let i="suggestion";return t&&(i+=" active-suggestion"),e.query&&(i+=" suggestion-with-query"),e.part&&(i+=` ${e.part}`),i}function h(e){return"flex px-4 min-h-[40px] items-center text-left text-neutral-dark hover:bg-neutral-light cursor-pointer "+(e?"bg-neutral-light":"")}function p(e){return e instanceof HTMLElement}function f({renderedSuggestion:e,suggestion:t}){p(t.content)&&e.replaceChildren(t.content)}function v({bindings:e,renderedSuggestion:i,suggestion:s,side:n,index:r,lastIndex:o,isDoubleList:a,isButton:l}){var u,p,g;const c=null!==(g=null!==(p=null!==(u=s.ariaLabel)&&void 0!==u?u:s.query)&&void 0!==p?p:i.innerText)&&void 0!==g?g:e.i18n.t("no-title"),d=t()&&l?e.i18n.t("search-suggestion-button",{label:c,interpolation:{escapeValue:!1}}):c,h=r+1,b=o+1;return a?e.i18n.t("search-suggestion-double-list",{label:d,position:h,count:b,side:e.i18n.t("left"===n?"left":"right"),interpolation:{escapeValue:!1}}):e.i18n.t("search-suggestion-single-list",{label:d,position:h,count:b,interpolation:{escapeValue:!1}})}function b(e){return p(e.content)?i(n,null):e.content}function x({bindings:e,id:t,suggestion:i,isSelected:s,side:n,index:r,lastIndex:o,isDoubleList:a},l){return{id:t,key:i.key,part:g(i,s),class:h(s),ref:t=>{t&&(f({renderedSuggestion:t,suggestion:i}),t.setAttribute("aria-label",v({bindings:e,renderedSuggestion:t,suggestion:i,side:n,index:r,lastIndex:o,isDoubleList:a,isButton:l})))}}}const w=e=>i("span",{...x(e,!1)},b(e.suggestion)),m=e=>i("button",{...x(e,!0),onMouseDown:e=>e.preventDefault(),onClick:t=>{var i;return null===(i=e.onClick)||void 0===i?void 0:i.call(e,t)},onMouseOver:t=>{var i;return null===(i=e.onMouseOver)||void 0===i?void 0:i.call(e,t)},[d]:e.suggestion.query},b(e.suggestion));export{m as B,r as S,c as a,o as b,w as c,d as q};