/*! For license information please see p-127d2a71.js.LICENSE.txt */
var e=Object.create,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,a=e=>t(e,"__esModule",{value:!0}),u=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)((function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')})),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,i,a)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of n(i))!o.call(e,s)&&"default"!==s&&t(e,s,{get:()=>i[s],enumerable:!(a=r(i,s))||a.enumerable});return e},l=r=>c(a(t(null!=r?e(i(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r),d=s(((e,t)=>{function r(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");if((e=(e=`${e}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",n=0,i=0;for(let a=0;a<e.length;a++)n<<=6,n|=r(e[a]),i+=6,24===i&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=i=0);return 12===i?(n>>=4,t+=String.fromCharCode(n)):18===i&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n)),t}})),f=s(((e,t)=>{function r(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let n="";for(t=0;t<e.length;t+=3){let i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(t)>>2,i[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(i[1]|=e.charCodeAt(t+1)>>4,i[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(i[2]|=e.charCodeAt(t+2)>>6,i[3]=63&e.charCodeAt(t+2));for(let e=0;e<i.length;e++)void 0===i[e]?n+="=":n+=r(i[e])}return n}})),h=s(((e,t)=>{var r=d(),n=f();t.exports={atob:r,btoa:n}})),v=s(((e,t)=>{t.exports=fetch})),p=s((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),y=s((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),m=s((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),g=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=y(),r=m();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),w=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=g(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),b=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?r(e.value):i(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(w().Delay);e.SkipFirstDelay=i})),S=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(w().Delay);e.AlwaysDelay=r})),O=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=S();function n(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}e.DelayFactory=function(e,t){var r=n(e);return r.setAttemptNumber(t),r}})),I=s((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?r(e.value):i(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=p(),i=O();e.backOff=function(e,i){return void 0===i&&(i={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),[4,new a(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var a=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,i.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),k=s(((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController})),q=s(((e,t)=>{t.exports=()=>document.cookie.includes("Coveo-Pendagron")})),j=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs=n()}(e,(function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",o="day",s="week",u="month",l="quarter",c="year",d="date",f="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},m=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},v={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,u),a=r-i<0,o=t.clone().add(n+(a?-1:1),u);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:c,w:s,d:o,D:d,h:a,m:i,s:n,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",w={};w[y]=g;var b="$isDayjsObject",S=function(e){return e instanceof C||!(!e||!e[b])},k=function e(t,r,n){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();w[a]&&(i=a),r&&(w[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;w[s]=t,i=s}return!n&&i&&(y=i),i||!n&&y},I=function(e,t){if(S(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new C(r)},O=v;O.l=k,O.i=S,O.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function g(e){this.$L=k(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var m=g.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(h);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return this.$d.toString()!==f},m.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return I(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<I(e)},m.$g=function(e,t,r){return O.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,l=!!O.u(t)||t,f=O.p(e),h=function(e,t){var n=O.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return l?n:n.endOf(o)},p=function(e,t){return O.w(r.toDate()[e].apply(r.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case c:return l?h(1,0):h(31,11);case u:return l?h(1,m):h(0,m+1);case s:var w=this.$locale().weekStart||0,b=(g<w?g+7:g)-w;return h(l?v-b:v+(6-b),m);case o:case d:return p(y+"Hours",0);case a:return p(y+"Minutes",1);case i:return p(y+"Seconds",2);case n:return p(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var s,l=O.p(e),f="set"+(this.$u?"UTC":""),h=(s={},s[o]=f+"Date",s[d]=f+"Date",s[u]=f+"Month",s[c]=f+"FullYear",s[a]=f+"Hours",s[i]=f+"Minutes",s[n]=f+"Seconds",s[r]=f+"Milliseconds",s)[l],p=l===o?this.$D+(t-this.$W):t;if(l===u||l===c){var g=this.clone().set(d,1);g.$d[h](p),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[O.p(e)]()},m.add=function(r,l){var d,f=this;r=Number(r);var h=O.p(l),p=function(e){var t=I(f);return O.w(t.date(t.date()+Math.round(e*r)),f)};if(h===u)return this.set(u,this.$M+r);if(h===c)return this.set(c,this.$y+r);if(h===o)return p(1);if(h===s)return p(7);var g=(d={},d[i]=e,d[a]=t,d[n]=1e3,d)[h]||1,m=this.$d.getTime()+r*g;return O.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),a=this.$H,o=this.$m,s=this.$M,u=r.weekdays,l=r.months,c=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},h=function(e){return O.s(a%12||12,e,"0")},g=c||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(p,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return O.s(t.$y,4,"0");case"M":return s+1;case"MM":return O.s(s+1,2,"0");case"MMM":return d(r.monthsShort,s,l,3);case"MMMM":return d(l,s);case"D":return t.$D;case"DD":return O.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(a);case"HH":return O.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(a,o,!0);case"A":return g(a,o,!1);case"m":return String(o);case"mm":return O.s(o,2,"0");case"s":return String(t.$s);case"ss":return O.s(t.$s,2,"0");case"SSS":return O.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,f){var h,p=this,g=O.p(d),m=I(r),v=(m.utcOffset()-this.utcOffset())*e,y=this-m,w=function(){return O.m(p,m)};switch(g){case c:h=w()/12;break;case u:h=w();break;case l:h=w()/3;break;case s:h=(y-v)/6048e5;break;case o:h=(y-v)/864e5;break;case a:h=y/t;break;case i:h=y/e;break;case n:h=y/1e3;break;default:h=y}return f?h:O.a(h)},m.daysInMonth=function(){return this.endOf(u).$D},m.$locale=function(){return w[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=k(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),A=C.prototype;return I.prototype=A,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",o],["$M",u],["$y",c],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,C,I),e.$i=!0),I},I.locale=k,I.isDayjs=S,I.unix=function(e){return I(1e3*e)},I.en=w[y],I.Ls=w,I.p={},I}))})),A=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_timezone=n()}(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,o=function(e,r,n){void 0===n&&(n={});var i=new Date(e),a=function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n);return a.formatToParts(i)},s=function(t,r){for(var n=o(t,r),a=[],s=0;s<n.length;s+=1){var u=n[s],l=u.type,c=u.value,d=e[l];d>=0&&(a[d]=parseInt(c,10))}var f=a[3],h=24===f?0:f,p=a[0]+"-"+a[1]+"-"+a[2]+" "+h+":"+a[4]+":"+a[5]+":000",g=+t;return(i.utc(p).valueOf()-(g-=g%1e3))/6e4},u=n.prototype;u.tz=function(e,t){void 0===e&&(e=a);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),u=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var l=u.utcOffset();u=u.add(r-l,"minute")}return u.$x.$timezone=e,u},u.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var l=u.startOf;u.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return l.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return l.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,o=r||t||a,u=s(+i(),o);if("string"!=typeof e)return i(e).tz(o);var l=function(e,t,r){var n=e-60*t*1e3,i=s(n,r);if(t===i)return[n,t];var a=s(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),u,o),c=l[0],d=l[1],f=i(c).utcOffset(d);return f.$x.$timezone=o,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}}))})),D=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_utc=n()}(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var l=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?l.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===a?o:-o}(n),null===n))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=o,s.$u=0===n,s;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+u,e)).$offset=o,s.$x.$localOffset=u}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}))})),R=s(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var i=n&&n.stringify||r;if("object"==typeof e&&null!==e){var a=t.length+1;if(1===a)return e;var o=new Array(a);o[0]=i(e);for(var s=1;s<a;s++)o[s]=i(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var u=t.length;if(0===u)return e;for(var l="",c=0,d=-1,f=e&&e.length||0,h=0;h<f;){if(37===e.charCodeAt(h)&&h+1<f){switch(d=d>-1?d:0,e.charCodeAt(h+1)){case 100:case 102:if(c>=u||null==t[c])break;d<h&&(l+=e.slice(d,h)),l+=Number(t[c]),d=h+2,h++;break;case 105:if(c>=u||null==t[c])break;d<h&&(l+=e.slice(d,h)),l+=Math.floor(Number(t[c])),d=h+2,h++;break;case 79:case 111:case 106:if(c>=u||void 0===t[c])break;d<h&&(l+=e.slice(d,h));var p=typeof t[c];if("string"===p){l+="'"+t[c]+"'",d=h+2,h++;break}if("function"===p){l+=t[c].name||"<anonymous>",d=h+2,h++;break}l+=i(t[c]),d=h+2,h++;break;case 115:if(c>=u)break;d<h&&(l+=e.slice(d,h)),l+=String(t[c]),d=h+2,h++;break;case 37:d<h&&(l+=e.slice(d,h)),l+="%",d=h+2,h++,c--}++c}++h}return-1===d?e:(d<f&&(l+=e.slice(d)),l)}})),C=s(((e,t)=>{var r=R();t.exports=d;var n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},i={mapHttpRequest:b,mapHttpResponse:b,wrapRequestSerializer:S,wrapResponseSerializer:S,wrapErrorSerializer:S,req:b,res:b,err:y,errWithCause:y};function a(e,t){return"silent"===e?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),u={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(e,t){let r={logger:t,parent:e[s]};t[s]=r}function c(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[u[e]||"log"]||k})),e[o]=i}function d(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},o=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,i),s=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);let u=Object.keys(e.customLevels||{}),d=["error","fatal","warn","info","debug","trace"].concat(u);"function"==typeof r&&d.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let p=e.level||"info",g=Object.create(r);g.log||(g.log=k),c(g,d,r),l({},g),Object.defineProperty(g,"levelVal",{get:function(){return a(this.level,this)}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,h(this,y,g,"error"),h(this,y,g,"fatal"),h(this,y,g,"warn"),h(this,y,g,"info"),h(this,y,g,"debug"),h(this,y,g,"trace"),u.forEach((e=>{h(this,y,g,e)}))}});let y={transmit:t,serialize:o,asObject:e.browser.asObject,levels:d,timestamp:w(e)};return g.levels=f(e),g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=k,g.serializers=i,g._serialize=o,g._stdErrSerialize=s,g.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(o&&a){var s=Object.assign({},i,a),u=!0===e.browser.serialize?Object.keys(s):o;delete r.serializers,m([r],u,s,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.bindings=r,s&&(this.serializers=s,this._serialize=u),t&&(this._logEvent=v([].concat(e._logEvent.bindings,r)))}c.prototype=this;let d=new c(this);return l(this,d),d.level=this.level,d},t&&(g._logEvent=v()),g}function f(e){let t=e.customLevels||{},r=Object.assign({},d.levels.values,t),n=Object.assign({},d.levels.labels,function(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}(t));return{values:r,labels:n}}function h(e,t,r,n){if(e[n]=a(e.level,r)>a(n,r)?k:r[o][n],!t.transmit&&e[n]===k)return;e[n]=p(e,t,r,n);let i=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[s];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==i.length&&(e[n]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(i,e[n]))}function p(e,t,r,i){return function(o){return function(){let s=t.timestamp(),u=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var c=0;c<u.length;c++)u[c]=arguments[c];if(t.serialize&&!t.asObject&&m(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?o.call(l,g(this,i,u,s)):o.apply(l,u),t.transmit){let n=t.transmit.level||e._level,o=r.levels.values[n],l=r.levels.values[i];if(l<o)return;!function(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,s=t.val,u=e._logEvent.bindings;m(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,s),e._logEvent=v(u)}(this,{ts:s,methodLevel:i,methodValue:l,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,r)},u)}}}(e[o][i])}function g(e,t,n,i){e._serialize&&m(n,e._serialize,e.serializers,e._stdErrSerialize);let a=n.slice(),o=a[0],s={};i&&(s.time=i),s.level=e.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==o&&"object"==typeof o){for(;u--&&"object"==typeof a[0];)Object.assign(s,a.shift());o=a.length?r(a.shift(),a):void 0}else"string"==typeof o&&(o=r(a.shift(),a));return void 0!==o&&(s.msg=o),s}function m(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=d.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function v(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function y(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function w(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?I:O}function b(){return{}}function S(e){return e}function k(){}function I(){return!1}function O(){return Date.now()}d.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},d.stdSerializers=i,d.stdTimeFunctions=Object.assign({},{nullTime:I,epochTime:O,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=d,t.exports.pino=d})),E=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_customParseFormat=n()}(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],l=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=c(e,!1)}],a:[i,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,s("month")],MM:[r,s("month")],MMM:[i,function(e){var t=l("months"),r=(l("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=l("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function f(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,u=0;u<s;u+=1){var l=o[u],c=d[l],f=c&&c[0],h=c&&c[1];o[u]=h?{regex:f,parser:h}:l.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var i=o[r];if("string"==typeof i)n+=i.length;else{var a=i.regex,u=i.parser,l=e.slice(n),c=a.exec(l)[0];u.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,o=e.args;this.$u=n;var s=o[1];if("string"==typeof s){var u=!0===o[2],l=!0===o[3],c=u||l,d=o[2];l&&(d=o[2]),a=this.$locale(),!u&&d&&(a=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var n=f(t)(e),i=n.year,a=n.month,o=n.day,s=n.hours,u=n.minutes,l=n.seconds,c=n.milliseconds,d=n.zone,h=new Date,p=o||(i||a?1:h.getDate()),g=i||h.getFullYear(),m=0;i&&!a||(m=a>0?a-1:h.getMonth());var v=s||0,y=u||0,w=l||0,b=c||0;return d?new Date(Date.UTC(g,m,p,v,y,w,b+60*d.offset*1e3)):r?new Date(Date.UTC(g,m,p,v,y,w,b)):new Date(g,m,p,v,y,w,b)}catch{return new Date("")}}(t,s,n),this.init(),d&&!0!==d&&(this.$L=this.locale(d).$L),c&&t!=this.format(s)&&(this.$d=new Date("")),a={}}else if(s instanceof Array)for(var h=s.length,p=1;p<=h;p+=1){o[1]=s[p-1];var g=r.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}p===h&&(this.$d=new Date(""))}else i.call(this,e)}}}))})),M=s(((e,t)=>{!function(r,n){"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_quarterOfYear=n()}(e,(function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var s=this.quarter()-1;return a?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}}))})),U=()=>global.crypto,T=()=>{"undefined"==typeof window&&(U()||(global.crypto=u("crypto")),!U().getRandomValues&&U().webcrypto&&(global.crypto.getRandomValues=U().webcrypto.getRandomValues.bind(U().webcrypto)))};function x(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new P(r)}var P=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},F=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw x(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},$=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&L(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function _(e){return void 0===e}function V(e){return null===e}function L(e){return _(e)||V(e)}var N=class{constructor(e={}){this.config=e,this.value=new $(e)}validate(e){return this.value.validate(e)||(Q(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function Q(e){return _(e)||Y(e)}function Y(e){return"number"==typeof e&&!isNaN(e)}var H=class{constructor(e={}){this.value=new $(e)}validate(e){return this.value.validate(e)||(z(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function z(e){return _(e)||B(e)}function B(e){return"boolean"==typeof e}var G=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,W=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new $(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config;return this.value.validate(e)||(_(e)?null:J(e)?t||e.length?r&&!G.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function J(e){return"[object String]"===Object.prototype.toString.call(e)}var K=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(_(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Z(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&L(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);null!==a&&(t+=" "+a)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function Z(e){return void 0!==e&&"object"==typeof e}var X=class{constructor(e={}){this.config=e,this.value=new $(this.config)}validate(e){if(!L(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(L(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&L(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return B(e)||J(e)||Y(e)||Z(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function ee(e){return Array.isArray(e)}function te(e){return Array.isArray(e)}l(h());var re=new Set(["1",1,"yes",!0]);function ne(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>re.has(e)))}function ie(e){let t={};for(let[r,n]of e)t[r]=n;return t}function oe(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}var ae=(e,t)=>{let r=e;return L(r[t])?L(e.raw[t])?null:e.raw[t]:r[t]},ue=e=>t=>e.every((e=>!L(ae(t,e)))),se=e=>t=>e.every((e=>L(ae(t,e)))),ce=(e,t)=>r=>{let n=de(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},le=(e,t)=>r=>{let n=de(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},de=(e,t)=>{let r=ae(t,e);return te(r)?r:[r]},fe=e=>e;function he(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function ve(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:he(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:he(),extendedResults:{}}}function pe(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...a}=e;return a}var ye=e=>{let{response:t}=e;return t.body?me(e):ge(t)},me=e=>be(e)?Se(e):we(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ge=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function we(e){return void 0!==e.body.statusCode}function be(e){return void 0!==e.body.exception}var Se=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Oe=l(v()),Ie=l(I()),ke=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},qe=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}};function je(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function Ae(e){return!("object"!=typeof e||!e)&&Object.values(e).every(De)}function De(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function Re(e){return 429===e}var Ce=class{static async call(e){let t=xe(e),{logger:r}=e,n=await Ce.preprocessRequest(t,e);r.info(n,"Platform request");let{url:i,...a}=n,o=async()=>{let e=await(0,Oe.default)(i,a);if(Re(e.status))throw e;return e};try{let e=await(0,Ie.backOff)(o,{retry:e=>{let t=e&&Re(e.status);return t&&r.info("Platform retrying request"),t}});if(419===e.status)throw r.info("Platform renewing token"),new ke;if(404===e.status)throw new qe(i,e.status);return r.info({response:e,requestInfo:n},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new qe(i):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:o,...s}=e,u=oe(s);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return u}};function Ee(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function Me(e,t="prod"){let r="prod"===t?"":t,n=`https://${e}.org${r}.coveo.com`;return{platform:n,analytics:`https://${e}.analytics.org${r}.coveo.com`,search:`${n}/rest/search/v2`,admin:`https://${e}.admin.org${r}.coveo.com`}}function Ue(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Ee("platform",e)}function Te(e){return Ee("analytics",e)}function xe(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,s="POST"===e.method||"PUT"===e.method,u=Pe(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:u},signal:o}}function Pe(e,t){return"application/x-www-form-urlencoded"===t?Ae(e)?je(e):"":JSON.stringify(e)}function Fe(){if("undefined"==typeof window){let{AbortController:e}=k();return new e}return"undefined"==typeof AbortController?null:new AbortController}var $e=class{constructor(){this.currentAbortController=null}async enqueue(e,t){var r;let n=this.currentAbortController,i=this.currentAbortController=Fe();n&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),n.abort());try{return await e(null!=(r=null==i?void 0:i.signal)?r:null)}finally{this.currentAbortController===i&&(this.currentAbortController=null)}}},_e=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},Ve=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Le=(e,t)=>{let r=Ne(e);return r&&r.organizationId===t?r:null},Ne=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(null==t?void 0:t.groups)?t.groups:null},Qe=(e,t,r,n)=>{let i=new _e(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}},Ye=async(e,t)=>{let r=await Ce.call({...Qe(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:pe(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=await r.text();return He(n)?{success:n}:{error:ye({response:r,body:n})}};function He(e){return"string"==typeof e}function ze(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Be(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Ge(e,t){if(t&&"AbortError"===e.name)return{error:Be(e)};if(e instanceof qe)return{error:ze(e)};throw e}var We=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new $e,mainSearch:new $e,facetValues:new $e,foldingCollection:new $e,instantResults:new $e}}async plan(e){let t=await Ce.call({...Qe(e,"POST","application/json","/plan"),requestParams:pe(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return Ge(t);let r=await t.json();return tt(r)?{success:r}:{error:ye({response:t,body:r})}}async querySuggest(e){let t=await Ce.call({...Qe(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:pe(e),...this.options});if(t instanceof Error)return Ge(t);let r=await t.json(),n={response:t,body:r};return et(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:ye(n)}}async search(e,t){var r;let n=null!=(r=null==t?void 0:t.origin)?r:"unknown",i=await this.apiCallsQueues[n].enqueue((r=>Ce.call({...Qe(e,"POST","application/json",""),requestParams:pe(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0})),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(i instanceof Error)return Ge(i,null==t?void 0:t.disableAbortWarning);let a=await i.json(),o={response:i,body:a};return Ze(a)?(o.body=Xe(a),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:ye(o)}}async facetSearch(e){let t=await Ce.call({...Qe(e,"POST","application/json","/facet"),requestParams:pe(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await Ce.call({...Qe(e,"POST","application/json",""),requestParams:pe(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ze(r)?{success:r}:{error:ye({response:t,body:r})}}async html(e){return Ye(e,{...this.options})}async productRecommendations(e){let t=await Ce.call({...Qe(e,"POST","application/json",""),requestParams:pe(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ze(r)?{success:r}:{error:ye({response:t,body:r})}}async fieldDescriptions(e){let t=await Ce.call({...Qe(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return rt(r)?{success:r}:{error:ye({response:t,body:r})}}},Je=e=>void 0!==e.success,Ke=e=>void 0!==e.error;function Ze(e){return void 0!==e.results}function Xe(e){let t=he();return L(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function et(e){return void 0!==e.completions}function tt(e){return void 0!==e.preprocessingOutput}function rt(e){return void 0!==e.fields}var nt=e=>e,it=e=>e,ot=e=>e;function at(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ut(e){return!!e&&!!e[Jt]}function st(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Kt}(e)||Array.isArray(e)||!!e[Wt]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Wt])||pt(e)||yt(e))}function ct(e,t,r){void 0===r&&(r=!1),0===lt(e)?(r?Object.keys:Zt)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function lt(e){var t=e[Jt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:pt(e)?2:yt(e)?3:0}function dt(e,t){return 2===lt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ft(e,t){return 2===lt(e)?e.get(t):e[t]}function ht(e,t,r){var n=lt(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function vt(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function pt(e){return Ht&&e instanceof Map}function yt(e){return zt&&e instanceof Set}function mt(e){return e.o||e.t}function gt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Xt(e);delete t[Jt];for(var r=Zt(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function wt(e,t){return void 0===t&&(t=!1),St(e)||ut(e)||!st(e)||(lt(e)>1&&(e.set=e.add=e.clear=e.delete=bt),Object.freeze(e),t&&ct(e,(function(e,t){return wt(t,!0)}),!0)),e}function bt(){at(2)}function St(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ot(e){var t=er[e];return t||at(18,e),t}function It(e,t){er[e]||(er[e]=t)}function kt(){return Qt}function qt(e,t){t&&(Ot("Patches"),e.u=[],e.s=[],e.v=t)}function jt(e){At(e),e.p.forEach(Rt),e.p=null}function At(e){e===Qt&&(Qt=e.l)}function Dt(e){return Qt={p:[],l:Qt,h:e,m:!0,_:0}}function Rt(e){var t=e[Jt];0===t.i||1===t.i?t.j():t.g=!0}function Ct(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||Ot("ES5").S(t,e,n),n?(r[Jt].P&&(jt(t),at(4)),st(e)&&(e=Et(t,e),t.l||Ut(t,e)),t.u&&Ot("Patches").M(r[Jt].t,e,t.u,t.s)):e=Et(t,r,[]),jt(t),t.u&&t.v(t.u,t.s),e!==Gt?e:void 0}function Et(e,t,r){if(St(t))return t;var n=t[Jt];if(!n)return ct(t,(function(i,a){return Mt(e,n,t,i,a,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return Ut(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=gt(n.k):n.o,a=i,o=!1;3===n.i&&(a=new Set(i),i.clear(),o=!0),ct(a,(function(t,a){return Mt(e,n,i,t,a,r,o)})),Ut(e,i,!1),r&&e.u&&Ot("Patches").N(n,r,e.u,e.s)}return n.o}function Mt(e,t,r,n,i,a,o){if(ut(i)){var s=Et(e,i,a&&t&&3!==t.i&&!dt(t.R,n)?a.concat(n):void 0);if(ht(r,n,s),!ut(s))return;e.m=!1}else o&&r.add(i);if(st(i)&&!St(i)){if(!e.h.D&&e._<1)return;Et(e,i),t&&t.A.l||Ut(e,i)}}function Ut(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&wt(t,r)}function Tt(e,t){var r=e[Jt];return(r?mt(r):e)[t]}function xt(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Pt(e){e.P||(e.P=!0,e.l&&Pt(e.l))}function Ft(e){e.o||(e.o=gt(e.t))}function $t(e,t,r){var n=pt(t)?Ot("MapSet").F(t,r):yt(t)?Ot("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:kt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,a=tr;r&&(i=[n],a=rr);var o=Proxy.revocable(i,a),s=o.revoke,u=o.proxy;return n.k=u,n.j=s,u}(t,r):Ot("ES5").J(t,r);return(r?r.A:kt()).p.push(n),n}function _t(e){return ut(e)||at(22,e),function e(t){if(!st(t))return t;var r,n=t[Jt],i=lt(t);if(n){if(!n.P&&(n.i<4||!Ot("ES5").K(n)))return n.t;n.I=!0,r=Vt(t,i),n.I=!1}else r=Vt(t,i);return ct(r,(function(t,i){n&&ft(n.t,t)===i||ht(r,t,e(i))})),3===i?new Set(r):r}(e)}function Vt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return gt(e)}function Lt(){function e(e,t){var r=i[e];return r?r.enumerable=t:i[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[Jt];return tr.get(t,e)},set:function(t){var r=this[Jt];tr.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Jt];if(!i.P)switch(i.i){case 5:n(i)&&Pt(i);break;case 4:r(i)&&Pt(i)}}}function r(e){for(var t=e.t,r=e.k,n=Zt(r),i=n.length-1;i>=0;i--){var a=n[i];if(a!==Jt){var o=t[a];if(void 0===o&&!dt(t,a))return!0;var s=r[a],u=s&&s[Jt];if(u?u.t!==o:!vt(s,o))return!0}}var l=!!t[Jt];return n.length!==Zt(t).length+(l?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var i={};It("ES5",{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var a=Xt(r);delete a[Jt];for(var o=Zt(a),s=0;s<o.length;s++){var u=o[s];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(r),a)}(n,t),a={i:n?5:4,A:r?r.A:kt(),P:!1,I:!1,R:{},l:r,t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Jt,{value:a,writable:!0}),i},S:function(e,r,i){i?ut(r)&&r[Jt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[Jt];if(r){var i=r.t,a=r.k,o=r.R,s=r.i;if(4===s)ct(a,(function(t){t!==Jt&&(void 0!==i[t]||dt(i,t)?o[t]||e(a[t]):(o[t]=!0,Pt(r)))})),ct(i,(function(e){void 0!==a[e]||dt(a,e)||(o[e]=!1,Pt(r))}));else if(5===s){if(n(r)&&(Pt(r),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var l=i.length;l<a.length;l++)o[l]=!0;for(var c=Math.min(a.length,i.length),d=0;d<c;d++)a.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(a[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}var Nt,Qt,Yt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ht="undefined"!=typeof Map,zt="undefined"!=typeof Set,Bt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Gt=Yt?Symbol.for("immer-nothing"):((Nt={})["immer-nothing"]=!0,Nt),Wt=Yt?Symbol.for("immer-draftable"):"__$immer_draftable",Jt=Yt?Symbol.for("immer-state"):"__$immer_state",Kt=""+Object.prototype.constructor,Zt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Xt=Object.getOwnPropertyDescriptors||function(e){var t={};return Zt(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},er={},tr={get:function(e,t){if(t===Jt)return e;var r=mt(e);if(!dt(r,t))return function(e,t,r){var n,i=xt(t,r);return i?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!st(n)?n:n===Tt(e.t,t)?(Ft(e),e.o[t]=$t(e.A.h,n,e)):n},has:function(e,t){return t in mt(e)},ownKeys:function(e){return Reflect.ownKeys(mt(e))},set:function(e,t,r){var n=xt(mt(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=Tt(mt(e),t),a=null==i?void 0:i[Jt];if(a&&a.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(vt(r,i)&&(void 0!==r||dt(e.t,t)))return!0;Ft(e),Pt(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Tt(e.t,t)||t in e.t?(e.R[t]=!1,Ft(e),Pt(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=mt(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){at(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){at(12)}},rr={};ct(tr,(function(e,t){rr[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),rr.deleteProperty=function(e,t){return rr.set.call(this,e,t,void 0)},rr.set=function(e,t,r){return tr.set.call(this,e[0],t,r,e[0])};var nr=function(){function e(e){var t=this;this.O=Bt,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&at(6),void 0!==n&&"function"!=typeof n&&at(7),st(e)){var s=Dt(t),u=$t(t,e,void 0),l=!0;try{o=r(u),l=!1}finally{l?jt(s):At(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return qt(s,n),Ct(e,s)}),(function(e){throw jt(s),e})):(qt(s,n),Ct(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===Gt&&(o=void 0),t.D&&wt(o,!0),n){var c=[],d=[];Ot("Patches").M(e,o,c,d),n(c,d)}return o}at(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(i))}))};var n,i,a=t.produce(e,r,(function(e,t){n=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,n,i]})):[a,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){st(e)||at(8),ut(e)&&(e=_t(e));var t=Dt(this),r=$t(this,e,void 0);return r[Jt].C=!0,At(t),r},t.finishDraft=function(e,t){var r=(e&&e[Jt]).A;return qt(r,t),Ct(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Bt&&at(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=Ot("Patches").$;return ut(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),ir=new nr,or=ir.produce;ir.produceWithPatches.bind(ir),ir.setAutoFreeze.bind(ir),ir.setUseProxies.bind(ir),ir.applyPatches.bind(ir),ir.createDraft.bind(ir),ir.finishDraft.bind(ir);var ar=or;function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function sr(e,t){if("object"!==ur(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function cr(e){var t=sr(e,"string");return"symbol"===ur(t)?t:String(t)}function lr(e,t,r){return(t=cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){lr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var vr="function"==typeof Symbol&&Symbol.observable||"@@observable",pr=function(){return Math.random().toString(36).substring(7).split("").join(".")},yr={INIT:"@@redux/INIT"+pr(),REPLACE:"@@redux/REPLACE"+pr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pr()}};function mr(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function gr(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(hr(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(hr(1));return r(gr)(e,t)}if("function"!=typeof e)throw new Error(hr(2));var i=e,a=t,o=[],s=o,u=!1;function l(){s===o&&(s=o.slice())}function c(){if(u)throw new Error(hr(3));return a}function d(e){if("function"!=typeof e)throw new Error(hr(4));if(u)throw new Error(hr(5));var t=!0;return l(),s.push(e),function(){if(t){if(u)throw new Error(hr(6));t=!1,l();var r=s.indexOf(e);s.splice(r,1),o=null}}}function f(e){if(!mr(e))throw new Error(hr(7));if(void 0===e.type)throw new Error(hr(8));if(u)throw new Error(hr(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,r=0;r<t.length;r++)(0,t[r])();return e}return f({type:yr.INIT}),n={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(hr(10));i=e,f({type:yr.REPLACE})}},n[vr]=function(){var e,t=d;return e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(hr(11));function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}},e[vr]=function(){return this},e},n}function wr(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:yr.INIT}))throw new Error(hr(12));if(void 0===r(void 0,{type:yr.PROBE_UNKNOWN_ACTION()}))throw new Error(hr(13))}))}function br(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}var a,o=Object.keys(r);try{wr(r)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var n=!1,i={},s=0;s<o.length;s++){var u=o[s],l=r[u],c=e[u],d=l(c,t);if(void 0===d)throw new Error(hr(14));i[u]=d,n=n||d!==c}return(n=n||o.length!==Object.keys(e).length)?i:e}}function Sr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Or(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(hr(15))},i={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return n=Sr.apply(void 0,a)(r.dispatch),fr(fr({},r),{},{dispatch:n})}}}function Ir(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var kr=Ir();kr.withExtraArgument=Ir;var qr=kr,jr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ar=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Dr=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},Rr=Object.defineProperty,Cr=Object.defineProperties,Er=Object.getOwnPropertyDescriptors,Mr=Object.getOwnPropertySymbols,Ur=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable,xr=function(e,t,r){return t in e?Rr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Pr=function(e,t){for(var r in t||(t={}))Ur.call(t,r)&&xr(e,r,t[r]);if(Mr)for(var n=0,i=Mr(t);n<i.length;n++)r=i[n],Tr.call(t,r)&&xr(e,r,t[r]);return e},Fr=function(e,t){return Cr(e,Er(t))},$r=function(e,t,r){return new Promise((function(n,i){var a=function(e){try{s(r.next(e))}catch(e){i(e)}},o=function(e){try{s(r.throw(e))}catch(e){i(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((r=r.apply(e,t)).next())}))},_r="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Sr:Sr.apply(null,arguments)};function Vr(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}function Lr(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var i=t.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return Pr(Pr({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}var Nr=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return jr(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Dr([void 0],e[0].concat(this)))):new(t.bind.apply(t,Dr([void 0],e.concat(this))))},t}(Array),Qr=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return jr(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Dr([void 0],e[0].concat(this)))):new(t.bind.apply(t,Dr([void 0],e.concat(this))))},t}(Array);function Yr(e){return st(e)?ar(e,(function(){})):e}function Hr(e){return"boolean"==typeof e}function zr(){return function(e){return Br(e)}}function Br(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=new Nr;return r&&(Hr(r)?n.push(qr):n.push(qr.withExtraArgument(r.extraArgument))),n}var Gr=!0;function Wr(e){var t,r=zr(),n=e||{},i=n.reducer,a=void 0===i?void 0:i,o=n.middleware,s=void 0===o?r():o,u=n.devTools,l=void 0===u||u,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,h=void 0===f?void 0:f;if("function"==typeof a)t=a;else{if(!Vr(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=br(a)}var p=s;if("function"==typeof p&&(p=p(r),!Gr))throw new Error("when using a middleware builder function, an array of middleware must be returned");var g=Or.apply(void 0,p),m=Sr;l&&(m=_r(Pr({trace:!Gr},"object"==typeof l&&l)));var v=new Qr(g),y=v;return Array.isArray(h)?y=Dr([g],h):"function"==typeof h&&(y=h(v)),gr(t,d,m.apply(void 0,y))}function Jr(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw new Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}function Kr(e){return"function"==typeof e}function Zr(e,t,r,n){void 0===r&&(r=[]);var i,a="function"==typeof t?Jr(t):[t,r,n],o=a[0],s=a[1],u=a[2];if(Kr(e))i=function(){return Yr(e())};else{var l=Yr(e);i=function(){return l}}function c(e,t){void 0===e&&(e=i());var r=Dr([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[u]),r.reduce((function(e,r){if(r){var n;if(ut(e))return void 0===(n=r(e,t))?e:n;if(st(e))return ar(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return c.getInitialState=i,c}var Xr="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",en=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+=Xr[64*Math.random()|0];return t},tn=["name","message","stack","code"],rn=function(e,t){this.payload=e,this.meta=t},nn=function(e,t){this.payload=e,this.meta=t},on=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=tn;r<n.length;r++){var i=n[r];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},an=function(){function e(e,t,r){var n=Lr(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:Fr(Pr({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),i=Lr(e+"/pending",(function(e,t,r){return{payload:void 0,meta:Fr(Pr({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Lr(e+"/rejected",(function(e,t,n,i,a){return{payload:i,error:(r&&r.serializeError||on)(e||"Rejected"),meta:Fr(Pr({},a||{}),{arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,l){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):en(),f=new o;function h(e){c=e,f.abort()}var p=function(){return $r(this,null,(function(){var o,p,g,m,v,y;return Ar(this,(function(w){switch(w.label){case 0:return w.trys.push([0,4,,5]),sn(m=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:u,extra:l}))?[4,m]:[3,2];case 1:m=w.sent(),w.label=2;case 2:if(!1===m||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return v=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(i(d,e,null==(p=null==r?void 0:r.getPendingMeta)?void 0:p.call(r,{requestId:d,arg:e},{getState:u,extra:l}))),[4,Promise.race([v,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:d,signal:f.signal,abort:h,rejectWithValue:function(e,t){return new rn(e,t)},fulfillWithValue:function(e,t){return new nn(e,t)}})).then((function(t){if(t instanceof rn)throw t;return t instanceof nn?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return g=w.sent(),[3,5];case 4:return y=w.sent(),g=y instanceof rn?a(null,d,e,y.payload,y.meta):a(y,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&a.match(g)&&g.meta.condition||s(g),[2,g]}}))}))}();return Object.assign(p,{abort:h,requestId:d,arg:e,unwrap:function(){return p.then(un)}})}}),{pending:i,rejected:a,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function un(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function sn(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}var ln,cn="listenerMiddleware";Lr(cn+"/add"),Lr(cn+"/removeAll"),Lr(cn+"/remove"),"function"==typeof queueMicrotask&&queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis),Lt();var dn=new W({required:!0,emptyAllowed:!1}),fn=new W({required:!1,emptyAllowed:!1}),hn=new W({required:!0,emptyAllowed:!0}),vn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),pn=(e,t)=>{if("required"in t)return{payload:new F({value:t}).validate({value:e}).value};let r=new K({options:{required:!0},values:t}).validate(e);if(r)throw new P(r);return{payload:e}},yn=(e,t)=>{try{return pn(e,t)}catch(t){return{payload:e,error:vn(t)}}},mn=(e,t,r,n)=>gn(e,t,r,`Check the options of ${n}`,"Controller initialization error"),gn=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}},wn=()=>fn,bn=()=>dn,Sn=Lr("configuration/updateBasicConfiguration",(e=>yn(e,{accessToken:fn,organizationId:fn,platformUrl:fn}))),On=Lr("configuration/updateSearchConfiguration",(e=>yn(e,{apiBaseUrl:fn,pipeline:new W({required:!1,emptyAllowed:!0}),searchHub:fn,timezone:fn,locale:fn,authenticationProviders:new X({required:!1,each:dn})}))),In=Lr("configuration/updateAnalyticsConfiguration",(e=>(ne()&&(e.enabled=!1),yn(e,{enabled:new H({default:!0}),originContext:wn(),originLevel2:wn(),originLevel3:wn(),apiBaseUrl:fn,nextApiBaseUrl:fn,runtimeEnvironment:new $,anonymous:new H({default:!1}),deviceId:fn,userDisplayName:fn,documentLocation:fn,trackingId:fn,analyticsMode:new W({constrainTo:["legacy","next"],required:!1,default:"legacy"})})))),kn=Lr("configuration/analytics/disable"),qn=Lr("configuration/analytics/enable"),jn=Lr("configuration/analytics/originlevel2",(e=>yn(e,{originLevel2:bn()}))),An=Lr("configuration/analytics/originlevel3",(e=>yn(e,{originLevel3:bn()}))),Dn={q:new W,enableQuerySyntax:new H,aq:new W,cq:new W,firstResult:new N({min:0}),numberOfResults:new N({min:0}),sortCriteria:new W,f:new K,fExcluded:new K,cf:new K,nf:new K,df:new K,debug:new H,sf:new K,tab:new W,af:new K},Rn=Lr("searchParameters/restore",(e=>yn(e,Dn))),Cn=Lr("debug/enable"),En=Lr("debug/disable"),Mn=()=>!1,Un=Zr(Mn(),(e=>{e.addCase(Cn,(()=>!0)).addCase(En,(()=>!1)).addCase(Rn,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),Tn=Lr("pipeline/set",(e=>yn(e,new W({required:!0,emptyAllowed:!0})))),xn=Lr("history/undo"),Pn=Lr("history/redo"),Fn=Lr("history/snapshot");an("history/back",(async(e,{dispatch:t})=>{t(xn()),await t($n())})),an("history/forward",(async(e,{dispatch:t})=>{t(Pn()),await t($n())}));var Qn,$n=an("history/change",(async(e,{getState:t})=>t().history.present)),_n=()=>"",Vn=Zr(_n(),(e=>{e.addCase(Tn,((e,t)=>t.payload)).addCase($n.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase(On,((e,t)=>t.payload.pipeline||e))}));function Ln(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function Nn(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?r(e.value):i(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}function Yn(){return"undefined"!=typeof window}function Hn(){return"undefined"!=typeof navigator}function zn(){return"undefined"!=typeof document}function Bn(){try{return"undefined"!=typeof localStorage}catch{return!1}}function Gn(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}function Wn(){return Hn()&&navigator.cookieEnabled}!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(Qn||(Qn={}));var Jn=[Qn.click,Qn.custom,Qn.search,Qn.view],Kn=(e,t)=>-1!==Jn.indexOf(e)?Object.assign({language:zn()?document.documentElement.lang:"unknown",userAgent:Hn()?navigator.userAgent:"unknown"},t):t,Zn=class{static set(e,t,r){var n,i,a;r&&(n=new Date).setTime(n.getTime()+r),-1===(a=window.location.hostname).indexOf(".")?Xn(e,t,n):Xn(e,t,n,(i=a.split("."))[i.length-2]+"."+i[i.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(0===(i=i.replace(/^\s+/,"")).lastIndexOf(t,0))return i.substring(t.length,i.length)}return null}static erase(e){Zn.set(e,"",-1)}};function Xn(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function ei(){return Bn()?localStorage:Wn()?new ti:Gn()?sessionStorage:new ni}var ti=class{getItem(e){return Zn.get(`${ti.prefix}${e}`)}removeItem(e){Zn.erase(`${ti.prefix}${e}`)}setItem(e,t,r){Zn.set(`${ti.prefix}${e}`,t,r)}};ti.prefix="coveo_";var fi,ri=class{constructor(){this.cookieStorage=new ti}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},ni=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},ii="__coveo.analytics.history",oi=20,ai=6e4,ui=75,si=class{constructor(e){this.store=e||ei()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Nn(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Nn(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(ii);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Nn(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(ii);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(ii,JSON.stringify(e.slice(0,oi)))}catch{}}clear(){try{this.store.removeItem(ii)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,ui)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>ai}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},ci=Object.freeze({__proto__:null,HistoryStore:si,MAX_NUMBER_OF_HISTORY_ELEMENTS:oi,MAX_VALUE_SIZE:ui,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:ai,STORE_KEY:ii,default:si}),li=(e,t)=>Nn(void 0,void 0,void 0,(function*(){return e===Qn.view?(yield di(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),di=e=>Nn(void 0,void 0,void 0,(function*(){let t=new si,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),hi=new Uint8Array(16);function vi(){if(!fi&&!(fi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fi(hi)}var pi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yi(e){return"string"==typeof e&&pi.test(e)}var mi=[];for(let e=0;e<256;++e)mi.push((e+256).toString(16).slice(1));function gi(e,t=0){return(mi[e[t+0]]+mi[e[t+1]]+mi[e[t+2]]+mi[e[t+3]]+"-"+mi[e[t+4]]+mi[e[t+5]]+"-"+mi[e[t+6]]+mi[e[t+7]]+"-"+mi[e[t+8]]+mi[e[t+9]]+"-"+mi[e[t+10]]+mi[e[t+11]]+mi[e[t+12]]+mi[e[t+13]]+mi[e[t+14]]+mi[e[t+15]]).toLowerCase()}function wi(e){if(!yi(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function bi(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var Si="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Oi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ii(e,t,r){function n(e,n,i,a){var o;if("string"==typeof e&&(e=bi(e)),"string"==typeof n&&(n=wi(n)),16!==(null===(o=n)||void 0===o?void 0:o.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),s=r(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=s[e];return i}return gi(s)}try{n.name=e}catch{}return n.DNS=Si,n.URL=Oi,n}var ki="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qi={randomUUID:ki};function ji(e,t,r){if(qi.randomUUID&&!t&&!e)return qi.randomUUID();let n=(e=e||{}).random||(e.rng||vi)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return gi(n)}function Ai(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function Di(e,t){return e<<t|e>>>32-t}function Ri(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=Di(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],s=r[2],u=r[3],l=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=Di(i,5)+Ai(r,o,s,u)+l+t[r]+n[e]>>>0;l=u,u=s,s=Di(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+l>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var Ci=Ii("v5",80,Ri),Ei=Ci,Mi="2.28.20",Ui={pageview:"pageview",event:"event"},Ti=class{constructor(e,t){if(!yi(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Ti.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(e){let t=e.split(".");if(2!==t.length)return null;let[r,n]=t;if(32!==r.length||isNaN(parseInt(n)))return null;let i=r.substring(0,8)+"-"+r.substring(8,12)+"-"+r.substring(12,16)+"-"+r.substring(16,20)+"-"+r.substring(20,32);return yi(i)?new Ti(i,1e3*Number.parseInt(n)):null}};Ti.cvo_cid="cvo_cid",Ti.expirationTime=120;var xi=Object.keys;function Pi(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var Fi={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},$i=xi(Fi).map((e=>Fi[e])),_i=[...$i].join("|"),Vi=new RegExp(`^(${_i}$)`),Li={svcAction:"svc_action",svcActionData:"svc_action_data"},Ni=e=>Vi.test(e),Qi=[Ni],Yi={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Hi={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},zi={action:"pa",list:"pal",listSource:"pls"},Bi={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Gi=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Wi={id:"quoteId",affiliation:"quoteAffiliation"},Ji={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Ki={add:zi,bookmark_add:zi,bookmark_remove:zi,click:zi,checkout:zi,checkout_option:zi,detail:zi,impression:zi,remove:zi,refund:Object.assign(Object.assign({},zi),Bi),purchase:Object.assign(Object.assign({},zi),Bi),quickview:zi,quote:Object.assign(Object.assign({},zi),Wi),review:Object.assign(Object.assign({},zi),Ji)},Zi=xi(Yi).map((e=>Yi[e])),Xi=xi(Hi).map((e=>Hi[e])),eo=xi(zi).map((e=>zi[e])),to=xi(Bi).map((e=>Bi[e])),ro=xi(Ji).map((e=>Ji[e])),no=xi(Wi).map((e=>Wi[e])),io=[...Zi,"custom"].join("|"),oo=[...Xi,"custom"].join("|"),ao="(pr[0-9]+)",uo="(il[0-9]+pi[0-9]+)",so=new RegExp(`^${ao}(${io})$`),co=new RegExp(`^(${uo}(${oo}))|(il[0-9]+nm)$`),lo=new RegExp(`^(${eo.join("|")})$`),fo=new RegExp(`^(${to.join("|")})$`),ho=new RegExp(`^${ao}custom$`),vo=new RegExp(`^${uo}custom$`),po=new RegExp(`^(${[...Gi,...ro,...no].join("|")})$`),yo=e=>so.test(e),mo=e=>co.test(e),go=e=>lo.test(e),wo=e=>fo.test(e),bo=e=>po.test(e),So=[mo,yo,go,wo,bo],Oo=[ho,vo],Io={anonymizeIp:"aip"},ko={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},qo={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},jo=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],Ao=Object.assign(Object.assign(Object.assign(Object.assign({},Io),ko),qo),jo.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),Do=Object.assign(Object.assign({},Ao),Li),Ro=e=>{let t=!!e.action&&Ki[e.action]||{};return xi(e).reduce(((r,n)=>{let i=t[n]||Do[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},Co=xi(Do).map((e=>Do[e])),Eo=e=>-1!==Co.indexOf(e),Mo=e=>"custom"===e,Uo=e=>[...So,...Qi,Eo,Mo].some((t=>t(e))),To=e=>xi(e).reduce(((t,r)=>{let n=xo(r);return n?Object.assign(Object.assign({},t),Po(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),xo=e=>{let t;return[...Oo].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},Po=(e,t)=>xi(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Fo=class{constructor(e){this.opts=e}sendEvent(e,t){return Nn(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),s=this.encodeForEventType(e,o),u=new Blob([s],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,u)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Nn(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:s}=a;n=o||e;try{i=JSON.parse(s)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return Nn(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Qn.click,Qn.custom,Qn.search,Qn.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}},$o=class{sendEvent(e,t){return Nn(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Nn(this,void 0,void 0,(function*(){return Promise.resolve()}))}},_o=window.fetch,Vo=class{constructor(e){this.opts=e}sendEvent(e,t){return Nn(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:u}=s,l=Ln(s,["url"]),c=yield _o(u,l);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}deleteHttpCookieVisitorId(){return Nn(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield _o(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return-1!==[Qn.click,Qn.custom,Qn.search,Qn.view].indexOf(e)}getVisitorIdParam(){return Nn(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Lo=class{constructor(e,t){Bn()&&Wn()?this.storage=new ri:Bn()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new ni),this.client=new Vo(e),this.beaconClient=new Fo(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},No=class{constructor(e,t){this.storage=t||new ni,this.client=new Vo(e)}getClientDependingOnEventType(e){return this.client}},Qo=class{constructor(){this.storage=new ni,this.client=new $o}getClientDependingOnEventType(e){return this.client}},Yo="xx",Ho=e=>(null==e?void 0:e.startsWith(Yo))||!1,zo="\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    ";function Bo(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}var Go=["1",1,"yes",!0];function Wo(){return Hn()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>-1!==Go.indexOf(e)))}var Jo="v15",Ko={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function Zo(e=Ko.default,t=Jo,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var ta,ra,Xo="38824e1f-37f5-42d3-8372-a4b8fa9df946",ea=class{get defaultOptions(){return{endpoint:Ko.default,isCustomEndpoint:!1,token:"",version:Jo,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Mi}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[li,Kn].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Wo()&&(this.clear(),this.runtime.storage=new ni)}initRuntime(e){return Yn()&&zn()?new Lo(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(Bo()&&console.warn(zo),new No(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Nn(this,void 0,void 0,(function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||ji()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),ji()}}))}getCurrentVisitorId(){return Nn(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Nn(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Nn(this,void 0,void 0,(function*(){if(yi(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Ei(e,Ei(t,Xo)))}}))}getParameters(e,...t){return Nn(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Nn(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(ji()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Wo())return null;try{let t=new URL(e).searchParams.get(Ti.cvo_cid);if(null==t)return null;let r=Ti.fromString(t);return r&&zn()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch{}return null}resolveParameters(e,...t){return Nn(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Nn(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Nn(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Nn(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Nn(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Nn(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?Ro(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Nn(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Nn(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>Nn(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Nn(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new si).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Nn(this,void 0,void 0,(function*(){return this.makeEvent(Qn.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ln(e,["searchQueryUid"]);return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Nn(this,void 0,void 0,(function*(){return this.makeEvent(Qn.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ln(e,["searchQueryUid"]);return Nn(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Nn(this,void 0,void 0,(function*(){return this.makeEvent(Qn.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ln(e,["lastSearchQueryUid"]);return Nn(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Nn(this,void 0,void 0,(function*(){return this.makeEvent(Qn.view,e)}))}sendViewEvent(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Nn(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Nn(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(!Array.isArray(e)||!e.every((e=>"string"==typeof e)))throw Error("Parameter should be an array of domain strings");this.acceptedLinkReferrers=e}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if("string"==typeof i)r[e[n]]=i;else if("object"==typeof i)return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Qn.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>null!=e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(Uo(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Ln(e,["custom"]),n={};t&&Pi(t)&&(n=this.lowercaseKeys(t));let i=To(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ln(e,["custom"]);if(t&&Pi(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Ln(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())&&(n.anonymizeIp=1),(t==Qn.view||t==Qn.click||t==Qn.search||t==Qn.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==Qn.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ln(e,["userId"]);return Ho(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ln(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Pi(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Pi(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return Zo(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}};!function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView"}(ta||(ta={})),function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"}(ra||(ra={}));var na={[ra.triggerNotify]:"queryPipelineTriggers",[ra.triggerExecute]:"queryPipelineTriggers",[ra.triggerQuery]:"queryPipelineTriggers",[ra.triggerRedirect]:"queryPipelineTriggers",[ra.queryError]:"errors",[ra.queryErrorBack]:"errors",[ra.queryErrorClear]:"errors",[ra.queryErrorRetry]:"errors",[ra.pagerNext]:"getMoreResults",[ra.pagerPrevious]:"getMoreResults",[ra.pagerNumber]:"getMoreResults",[ra.pagerResize]:"getMoreResults",[ra.pagerScrolling]:"getMoreResults",[ra.facetSearch]:"facet",[ra.facetShowLess]:"facet",[ra.facetShowMore]:"facet",[ra.recommendation]:"recommendation",[ra.likeSmartSnippet]:"smartSnippet",[ra.dislikeSmartSnippet]:"smartSnippet",[ra.expandSmartSnippet]:"smartSnippet",[ra.collapseSmartSnippet]:"smartSnippet",[ra.openSmartSnippetFeedbackModal]:"smartSnippet",[ra.closeSmartSnippetFeedbackModal]:"smartSnippet",[ra.sendSmartSnippetReason]:"smartSnippet",[ra.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[ra.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[ra.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[ra.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[ra.clearRecentQueries]:"recentQueries",[ra.recentResultClick]:"recentlyClickedDocuments",[ra.clearRecentResults]:"recentlyClickedDocuments",[ra.showLessFoldedResults]:"folding",[ta.expandToFullUI]:"interface",[ta.openUserActions]:"User Actions",[ta.showPrecedingSessions]:"User Actions",[ta.showFollowingSessions]:"User Actions",[ta.clickViewedDocument]:"User Actions",[ta.clickPageView]:"User Actions",[ra.caseDetach]:"case",[ra.likeGeneratedAnswer]:"generatedAnswer",[ra.dislikeGeneratedAnswer]:"generatedAnswer",[ra.openGeneratedAnswerSource]:"generatedAnswer",[ra.generatedAnswerStreamEnd]:"generatedAnswer",[ra.generatedAnswerSourceHover]:"generatedAnswer",[ra.generatedAnswerCopyToClipboard]:"generatedAnswer",[ra.generatedAnswerHideAnswers]:"generatedAnswer",[ra.generatedAnswerShowAnswers]:"generatedAnswer",[ra.generatedAnswerFeedbackSubmit]:"generatedAnswer"},ia=class{constructor(){this.runtime=new Qo,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(Qn.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(Qn.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(Qn.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(Qn.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Mi}};function oa(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function aa(e){return e.map((e=>e.replace(/;/g,"")))}function ua(e){let t=e.join(";");return t.length<=256?t:ua(e.slice(1))}var sa=e=>ua(oa(aa(e)));function ca(e){let t="string"==typeof e.partialQueries?e.partialQueries:sa(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:sa(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var fa,ha,va,la=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||Wo();this.coveoAnalyticsClient=r?new ia:new ea(e)}disable(){this.coveoAnalyticsClient instanceof ea&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new ia}enable(){this.coveoAnalyticsClient=new ea(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(ra.interfaceLoad)}logInterfaceLoad(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(ra.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(ra.recommendation)}logRecommendation(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(ra.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(ra.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(ra.staticFilterSelect,e)}logStaticFilterSelect(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(ra.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(ra.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(ra.interfaceChange,e)}logInterfaceChange(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(ra.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(ra.didyoumeanClick)}logDidYouMeanClick(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(ra.resultsSort,e)}logResultsSort(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(ra.searchboxSubmit)}logSearchboxSubmit(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(ra.searchboxClear)}logSearchboxClear(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(ra.searchboxAsYouType)}logSearchboxAsYouType(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(ra.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(ra.breadcrumbResetAll)}logBreadcrumbResetAll(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(ra.documentQuickview,e,t)}logDocumentQuickview(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(ra.documentOpen,e,t)}logDocumentOpen(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(ra.omniboxAnalytics,ca(e))}logOmniboxAnalytics(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(ra.omniboxFromLink,ca(e))}logOmniboxFromLink(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(ra.searchFromLink)}logSearchFromLink(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(ra.triggerNotify,e)}logTriggerNotify(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(ra.triggerExecute,e)}logTriggerExecute(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(ra.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(ra.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(ra.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(ra.pagerResize,e)}logPagerResize(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(ra.pagerNumber,e)}logPagerNumber(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(ra.pagerNext,e)}logPagerNext(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(ra.pagerPrevious,e)}logPagerPrevious(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(ra.pagerScrolling)}logPagerScrolling(){return Nn(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(ra.facetClearAll,e)}logFacetClearAll(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(ra.facetSearch,e)}logFacetSearch(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(ra.facetSelect,e)}logFacetSelect(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(ra.facetDeselect,e)}logFacetDeselect(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(ra.facetExclude,e)}logFacetExclude(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(ra.facetUnexclude,e)}logFacetUnexclude(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(ra.facetSelectAll,e)}logFacetSelectAll(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(ra.facetUpdateSort,e)}logFacetUpdateSort(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(ra.facetShowMore,e)}logFacetShowMore(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(ra.facetShowLess,e)}logFacetShowLess(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(ra.queryError,e)}logQueryError(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Nn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(ra.queryErrorBack);return{description:e.description,log:()=>Nn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(ra.queryErrorBack)}))}}))}logQueryErrorBack(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Nn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(ra.queryErrorRetry);return{description:e.description,log:()=>Nn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(ra.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Nn(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(ra.queryErrorClear);return{description:e.description,log:()=>Nn(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(ra.queryErrorClear)}))}}))}logQueryErrorClear(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(ra.likeSmartSnippet)}logLikeSmartSnippet(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(ra.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(ra.expandSmartSnippet)}logExpandSmartSnippet(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(ra.collapseSmartSnippet)}logCollapseSmartSnippet(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(ra.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(ra.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(ra.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(ra.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(ra.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(ra.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(ra.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(ra.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(ra.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(ra.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(ra.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(ra.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(ra.recentQueryClick)}logRecentQueryClick(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(ra.clearRecentQueries)}logClearRecentQueries(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(ra.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(ra.clearRecentResults)}logClearRecentResults(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(ra.noResultsBack)}logNoResultsBack(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(ra.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(ra.showLessFoldedResults)}logShowLessFoldedResults(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:null===(r=e.payload)||void 0===r?void 0:r.customData}}makeCustomEvent(e,t,r=na[e]){return Nn(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=na[e]){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Nn(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Nn(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Nn(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Nn(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Nn(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Nn(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Nn(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Nn(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof ea?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(ra.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(ra.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(ra.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(ra.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(ra.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(ra.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(ra.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(ra.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(ra.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(ra.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Nn(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(ra.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Nn(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},da=Object.assign({},Ui);Object.keys(da).map((e=>da[e])),function(e){e.click="click",e.flowStart="flowStart"}(fa||(fa={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(ha||(ha={})),function(e){e.quit="Quit",e.solved="Solved"}(va||(va={}));var pa=e=>new ea(e).getCurrentVisitorId(),ya=e=>{let t=new ea(e);t.clear(),t.deleteHttpOnlyVisitorId()},ma=new ci.HistoryStore,ga=(e,t)=>"function"==typeof t?(...r)=>{let n=oe(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,wa=(e,t)=>(...r)=>{let n=oe(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};async function ba({config:e,environment:t,event:r}){let{url:n,token:i}=e,a={"Content-Type":"application/json",Authorization:`Bearer ${i}`},o=await t.fetch(`${n}/validate`,{method:"POST",body:JSON.stringify([r]),headers:a}),s=await o.json();if(!o.ok)throw new Error({...s});if(!s)return{valid:!1,errors:[{type:"",message:"disabled",path:""}]};let{valid:u,errors:l}=s[0];return{valid:u,errors:l??[]}}async function Sa(e){let{listenerManager:t,event:r,config:n}=e;return"disabled"!==n.mode&&t.call(r),"validate"===n.mode?ba(e):Oa(e)}async function Oa({event:e,config:t,environment:r}){let{url:n,token:i}=t;return r.send(n,i,JSON.stringify([e]))}var Ia=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ka(e){return"string"==typeof e&&Ia.test(e)}function qa(e){let t="visitorId";return{getClientId:()=>{let r=e.storage,n=r.getItem(t),i=n&&ka(n)?n:e.generateUUID();return r.setItem(t,i),i},clear:()=>{e.storage.removeItem(t)}}}var ja=Aa();function Aa(){let e="coveo_";return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(0===t.lastIndexOf(r,0))return t.substring(r.length,t.length)}return null},setItem(t,r,n){let i=(e=>{let t=window.location.hostname.split(".").slice(-2);return 2==t.length?t.join("."):""})(),a=`;expires=${new Date((new Date).getTime()+n).toUTCString()}`,o=i?`;domain=${i}`:"";document.cookie=`${e}${t}=${r}${a}${o};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function Da(){return{getItem:e=>ja.getItem(e)||localStorage.getItem(e),removeItem(e){ja.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),ja.setItem(e,t,31556952e3)}}}async function Ra(e,t){return fetch(e,t).catch((e=>{throw new Error(`${e.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:e})}))}function Ca(){let e=document.referrer;return""===e?null:e}function Ea(){return{runtime:"browser",fetch:(e,t)=>Ra(e,t),send:async(e,t,r)=>{if(!navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([r],{type:"application/json"})))throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.");return null},getReferrerUrl:()=>Ca(),getUrl:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:Da()}}function Ma(){return{getItem:()=>null,removeItem(){},setItem(){}}}function Ua(){return{runtime:"node",fetch:(e,t)=>Ra(e,t),send:async(e,t,r)=>(Ra(e,{method:"POST",body:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),null),getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:Ma()}}function Ta(){return xa()?Ea():Ua()}function xa(){try{return"object"==typeof window}catch{return!1}}var Pa="0.6.3";function Fa(e){let{trackingId:t}=e;return{trackingId:t}}function $a(){return`relay@${Pa}`}function _a(e,t,r,n){let{getReferrerUrl:i,getUrl:a,getUserAgent:o}=r,s=Fa(t),u=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:$a(),clientId:u,userAgent:o(),referrerUrl:i(),url:a()})}function Va(e,t,r,n,i){return{...t,meta:_a(e,r,n,i)}}var La="*";function Na(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(t){if(t===La)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function n(r){let n=t(r);n>=0&&e.splice(n,1)}function i(e,t){t?n({type:e,callback:t}):r(e)}return{add:function(r){return t(r)<0&&e.push(r),()=>i(r.type,r.callback)},call:function(t){e.forEach((e=>{if(function(e,t){return"*"===e.type||t===e.type}(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))},remove:i}}function Qa({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode}})}function Ya(e){let t=Qa(e);return{get:()=>t,update:e=>{t=Qa({...t,...e})}}}function Ha(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>null,getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:Ma()}}function za(e){let t=Ya(e),r=Na(),n=()=>"disabled"==t.get().mode?Ha():Ta(),i=qa(n());return{emit:(e,a)=>{let o=t.get(),s=n();return Sa({config:o,environment:s,event:Va(e,a,o,s,i),listenerManager:r})},getMeta:e=>_a(e,t.get(),n(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:Pa,clearStorage:()=>{i.clear()}}}var Ba=1,Ga=10,Wa=5,Ja=1,Ka=8;function Za(){return{desiredCount:Wa,numberOfValues:Ka,set:{}}}function Xa(e){let{activeValue:t,ancestryMap:r}=eu(e);return t?tu(t,r):[]}function eu(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function tu(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}var ru=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},nu=(e,t)=>{var r;let n=ru(e,t);return Xa(null!=(r=null==n?void 0:n.currentValues)?r:[])};function iu(){return{}}function ou(){return{}}function au(){return{}}function uu(){return{}}function su(e){var t,r,n,i,a;return{facetSet:null!=(t=e.facetSet)?t:uu(),categoryFacetSet:null!=(r=e.categoryFacetSet)?r:iu(),dateFacetSet:null!=(n=e.dateFacetSet)?n:ou(),numericFacetSet:null!=(i=e.numericFacetSet)?i:au(),automaticFacetSet:null!=(a=e.automaticFacetSet)?a:Za()}}var cu=e=>{let t=[];return fu(e).forEach(((r,n)=>{let i=Iu(e,r.facetId),a=bu(r,n+1);if(du(r)){if(!nu(e,r.facetId).length)return;t.push({...a,...gu(e,r.facetId),facetType:i,state:"selected"})}else r.currentValues.forEach(((e,n)=>{if("idle"===e.state)return;let o=vu(e,n+1,i),s=lu(r)?yu(e):pu(e);t.push({...a,...o,...s})}))})),hu(e).forEach(((e,r)=>{let n=wu(e,r+1);e.values.forEach(((e,r)=>{if("idle"===e.state)return;let i=vu(e,r+1,"specific"),a=yu(e);t.push({...n,...i,...a})}))})),t},lu=e=>"specific"===e.type,du=e=>"hierarchical"===e.type,fu=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),hu=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),vu=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),pu=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),yu=e=>({displayValue:e.value,value:e.value}),mu=(e,t)=>nu(e,t).map((e=>e.value)).join(";"),gu=(e,t)=>{let r=mu(e,t);return{value:r,valuePosition:1,displayValue:r}},wu=(e,t)=>({title:Su(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),bu=(e,t)=>({title:Su(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Su=(e,t)=>`${e}_${t}`,Ou=(e,t)=>{var r,n,i,a,o;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(i=e.dateFacetSet[t])?void 0:i.request)||(null==(a=e.numericFacetSet[t])?void 0:a.request)||(null==(o=e.automaticFacetSet.set[t])?void 0:o.response)},Iu=(e,t)=>{let r=Ou(e,t);return r?r.type:"specific"},ku=()=>({q:"",enableQuerySyntax:!1}),qu=()=>"default",ju="2.38.3",Au=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},Du=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return Au(this.state)}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[e,n]of Object.entries(t))r[`context_${e}`]=n;return r.coveoHeadlessVersion=ju,r}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||qu()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},Ru=class extends Du{getFacetState(){return cu(su(this.getState()))}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||Ru.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||ve().response.searchUid}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.search)?void 0:e.response.pipeline)||this.state.pipeline||Ru.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),i=super.getBaseMetadata(),a=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return a&&(i.generativeQuestionAnsweringId=a),i}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return void 0!==(null==(e=t.generatedAnswer)?void 0:e.isVisible)&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||ku().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||ve().duration}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||ve().response.totalCountFiltered}},Cu=Ru;Cu.fallbackPipelineName="default";var Eu=e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:n}=za({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return n},Mu=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Cu(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,l=a.configuration.analytics.enabled,c=new la({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:ga(e,n),beforeSendHooks:[wa(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return l||c.disable(),c},Uu=()=>{let e=ma.getHistory().reverse().find((e=>"PageView"===e.name&&e.value));return e?e.value:""},Tu=async(e,t)=>({analytics:{clientId:await pa(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Uu()&&{pageId:Uu()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:"next"===e.analyticsMode}}),xu=()=>({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:"",splitTestRun:"",pipeline:""}),Pu=class extends Du{getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.recommendation)?void 0:e.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:ku().q,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().recommendation)?void 0:e.searchUid)||xu().searchUid}getSplitTestRunName(){var e;return null==(e=this.state.recommendation)?void 0:e.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.recommendation)?void 0:e.pipeline)||this.state.pipeline||"default";return t?r:void 0}get responseTime(){var e;return(null==(e=this.state.recommendation)?void 0:e.duration)||xu().duration}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.recommendation)?void 0:e.recommendations.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get numberOfResults(){var e;return(null==(e=this.state.recommendation)?void 0:e.recommendations.length)||xu().recommendations.length}},Fu=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),$u=class extends Du{constructor(){super(...arguments),this.initialState=Fu()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},_u=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new $u(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,l=a.configuration.analytics.enabled,c=new la({token:o,endpoint:s,runtimeEnvironment:u,preprocessRequest:ga(e,n),beforeSendHooks:[wa(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return l||c.disable(),c};function Vu(e){return Object.assign(e,{instantlyCallable:!0})}function Lu(e,t){let r=t=>Vu(an(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:o,log:s}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:o,action:r((async(e,{getState:t,extra:r})=>await s({state:t(),extra:r})))}}}),n}var Nu=(e,t,r)=>function(...n){let i=1===n.length?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return Hu(i)},Qu=e=>"legacy"===e.configuration.analytics.analyticsMode,Yu=e=>"next"===e.configuration.analytics.analyticsMode,Hu=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(null!=r||(r=e=>new o(e)),Lu(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:s,logger:u})=>{let l=[],c={log:async({state:e})=>{for(let t of l)await t(e)}},d=e(),f=a({getState:e,logger:u,analyticsClientMiddleware:o,preprocessRequest:s,provider:r(e)}),h=await t(f,e());c.description=null==h?void 0:h.description,l.push((async e=>{Qu(e)&&await zu(h,r,e,u,f.coveoAnalyticsClient)}));let p=Eu(d);return l.push((async e=>{if(Yu(e)&&i&&n){let t=n(e);await os(p,i,t)}})),c})));async function zu(e,t,r,n,i){t((()=>r));let a=await(null==e?void 0:e.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var Bu=Nu(Mu,(e=>e),Cu),Gu=Nu(_u,(e=>e),$u),Wu=(e,t)=>{var r;let n=(null==(r=t.recommendation)?void 0:r.recommendations.findIndex((({uniqueId:t})=>e.uniqueId===t)))||0;return Ju(e,n,t)};function Ju(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:rs(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:ns(e),queryPipeline:r.pipeline||_n()}}var Ku=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Zu={urihash:new W,sourcetype:new W,permanentid:new W},Xu={uniqueId:dn,raw:new K({values:Zu}),title:dn,uri:dn,clickUri:dn,rankingModifier:new W({required:!1,emptyAllowed:!0})};function es(e){return Object.assign({},...Object.keys(Zu).map((t=>({[t]:e[t]}))))}function ts(e){return Object.assign({},...Object.keys(Xu).map((t=>({[t]:e[t]}))),{raw:es(e.raw)})}function rs(e){let t=e.raw.author;return L(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function ns(e){let t=e.raw.source;return L(t)?"unknown":t}var is=e=>new F(Xu).validate(ts(e));async function os(e,t,r){await e(t,r)}var as=()=>Bu("analytics/recommendation/update",(e=>e.makeRecommendationInterfaceLoad()),(e=>new Pu(e))),us=e=>Bu("analytics/recommendation/open",((t,r)=>(is(e),t.makeRecommendationOpen(Wu(e,r),Ku(e)))),(e=>new Pu(e))),ss=Lr("recommendation/set",(e=>yn(e,{id:dn}))),cs=an("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=(new Date).getTime(),o=await n.recommendations(await ls(i)),s=(new Date).getTime()-a;return Ke(o)?r(o.error):{recommendations:o.success.results,analyticsAction:as(),duration:s,searchUid:o.success.searchUid,splitTestRun:o.success.splitTestRun,pipeline:o.success.pipeline}})),ls=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?ma.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await pa(e.configuration.analytics)},...e.configuration.analytics.enabled&&await Tu(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")},...e.pagination&&{numberOfResults:e.pagination.numberOfResults}}),ds=Zr(xu(),(e=>{e.addCase(ss,((e,t)=>{e.id=t.payload.id})).addCase(cs.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(cs.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid,e.splitTestRun=t.payload.splitTestRun,e.pipeline=t.payload.pipeline})).addCase(cs.pending,(e=>{e.isLoading=!0}))})),fs=Lr("searchHub/set",(e=>yn(e,new W({required:!0,emptyAllowed:!0})))),hs=Zr(qu(),(e=>{e.addCase(fs,((e,t)=>t.payload)).addCase($n.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase(On,((e,t)=>t.payload.searchHub||e))})),vs=Zr(ju,(e=>e)),ps=e=>t=>r=>{var n,i;let a=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==a&&(null==(i=r.payload)||delete i.analyticsAction);let o=t(r);return"search/executeSearch/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with product recommendation:",r),void 0!==a&&e.dispatch(a),o},ys=l(q());Lr("tab/register",(e=>{let t=new K({values:{id:dn,expression:hn}});return yn(e,t)}));var ms=Lr("tab/updateActiveTab",(e=>yn(e,dn))),gs=l(j()),ws=l(A()),bs=l(D());gs.default.extend(bs.default),gs.default.extend(ws.default);var Ss="/rest/search/v2",Os="/rest/ua",Is=()=>({organizationId:"",accessToken:"",platformUrl:Ue(),search:{apiBaseUrl:`${Ue()}${Ss}`,locale:"en-US",timezone:gs.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Te()}${Os}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function ks(e,t){if(Ve(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Os;let r=Le(e,t);return r?Me(t,r.environment).analytics:e}var qs=Zr(Is(),(e=>e.addCase(Sn,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${Ss}`,e.analytics.apiBaseUrl=ks(t.payload.platformUrl,e.organizationId))})).addCase(On,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(In,((e,t)=>{L(t.payload.enabled)||(!t.payload.enabled&&e.analytics.enabled&&ya(e.analytics),e.analytics.enabled=t.payload.enabled),L(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),L(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),L(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),L(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),L(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),L(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),L(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),(0,ys.default)()&&(e.analytics.analyticsMode="next"),L(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),L(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),L(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),L(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),L(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(kn,(e=>{e.analytics.enabled=!1,ya(e.analytics)})).addCase(qn,(e=>{e.analytics.enabled=!0})).addCase(jn,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(An,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(ms,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(Rn,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),js=qs;function As(e){return e.instantlyCallable}var Ds=()=>e=>t=>e(As(t)?t():t),Rs=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let i=r.error;return(null==(n=r.payload)?void 0:n.ignored)||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},Cs=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function Es(e,t){let r,n={...e};return{get combinedReducer(){return(e=>(t,n)=>{let i=e(t,n);return r?r(i,n):i})(br({...ie(Object.entries(t).filter((([e])=>!(e in n))).map((([e,t])=>[e,()=>t]))),...n}))},containsAll:e=>Object.keys(e).every((e=>e in n)),add(e){Object.keys(e).filter((e=>!(e in n))).forEach((t=>n[t]=e[t]))},addCrossReducer(e){r=e}}}function Ms(e,t,r){var n,i,a;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(i=r.callback)&&i,u=r.maxWait,l=Date.now(),c=[];function d(){if(void 0!==u){var e=Date.now()-l;if(e+t>=u)return u-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var u=o&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,l=Date.now(),!o){var n=e.apply(r,t);s&&s(n),c.forEach((function(e){return(0,e.resolve)(n)})),c=[]}}),d()),u){var f=e.apply(r,t);return s&&s(f),n(f)}c.push({resolve:n,reject:i})}))};return f.cancel=function(e){void 0!==a&&clearTimeout(a),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},f}function Us(e,t){let r=0,n=Ms((()=>r=0),500);return i=>a=>async o=>{if("function"!=typeof o)return a(o);let s=await a(o);if(!Ts(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await xs(t);i.dispatch(Sn({accessToken:u})),i.dispatch(o)}}function Ts(e){var t;return(null==(t=null==e?void 0:e.error)?void 0:t.name)===(new ke).name}async function xs(e){try{return await e()}catch(e){return""}}function Ps({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Wr({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),Cs(n.logger)]})}var Fs={configuration:js,version:vs};function $s(e,t){var r,n;let i=(null==(r=e.configuration.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:a,...o}=null!=(n=e.configuration.analytics)?n:{},s={...o,nextApiBaseUrl:`${i}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:i};return ne()?(t.info("Analytics disabled since doNotTrack is active."),{...s,enabled:!1}):s}function _s(e,t){var r;let n=Vs(e,t),{accessToken:i,organizationId:a}=e.configuration,{organizationEndpoints:o}=e.configuration,s=(null==o?void 0:o.platform)||e.configuration.platformUrl;Ys(e)&&n.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Qs(e)?n.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Hs(e)&&n.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${null==(r=e.configuration.organizationEndpoints)?void 0:r.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),n.dispatch(Sn({accessToken:i,organizationId:a,platformUrl:s}));let u=$s(e,n.logger);return u&&n.dispatch(In(u)),n}function Vs(e,t){var r;let{reducers:n}=e,i=Es({...Fs,...n},null!=(r=e.preloadedState)?r:{});e.crossReducer&&i.addCrossReducer(e.crossReducer);let a=t.logger,o=Ls(e,t,i);return{addReducers(e){i.containsAll(e)||(i.add(e),o.replaceReducer(i.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(qn())},disableAnalytics(){o.dispatch(kn())},get state(){return o.getState()},logger:a,store:o}}function Ls(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=Ns(e,t.logger);return Ps({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}function Ns(e,t){let{renewAccessToken:r}=e.configuration,n=Us(t,r);return[Ds,n,Rs(t),ps].concat(e.middlewares||[])}function Qs(e){return _(e.configuration.organizationEndpoints)}function Ys(e){var t;return!L(e.configuration.platformUrl)||L(null==(t=e.configuration.organizationEndpoints)?void 0:t.platform)}function Hs(e){let{platform:t}=e.configuration.organizationEndpoints;if(_(t))return!1;let r=Ne(t);return r&&r.organizationId!==e.configuration.organizationId}var zs=l(C());function Bs(e){return(0,zs.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter}})}function Gs(e,t){return{analyticsClientMiddleware:Ws(e),validatePayload:pn,preprocessRequest:Js(e),logger:t}}function Ws(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}function Js(e){return e.preprocessRequest||fe}var Ks={organizationId:dn,accessToken:dn,platformUrl:new W({required:!1,emptyAllowed:!1}),name:new W({required:!1,emptyAllowed:!1}),analytics:new K({options:{required:!1},values:{enabled:new H({required:!1}),originContext:new W({required:!1}),originLevel2:new W({required:!1}),originLevel3:new W({required:!1}),analyticsMode:new W({constrainTo:["legacy","next"],required:!1})}})},Zs=new F({...Ks,pipeline:new W({required:!1,emptyAllowed:!0}),searchHub:fn,locale:fn,timezone:fn}),Xs={debug:Un,pipeline:Vn,searchHub:hs,recommendation:ds};function ec(e){let t=Bs(e.loggerOptions);tc(e.configuration,t);let r=rc(e.configuration,t),n={...Gs(e.configuration,t),apiClient:r},i=_s({...e,reducers:Xs},n),{pipeline:a,searchHub:o,timezone:s,locale:u}=e.configuration;return i.dispatch(On({timezone:s,locale:u})),L(a)||i.dispatch(Tn(a)),L(o)||i.dispatch(fs(o)),{...i,get state(){return i.state}}}function tc(e,t){try{Zs.validate(e)}catch(e){throw t.error(e,"Recommendation engine configuration error"),e}}function rc(e,t){return new We({logger:t,preprocessRequest:e.preprocessRequest||fe,postprocessSearchResponseMiddleware:nt,postprocessFacetSearchResponseMiddleware:it,postprocessQuerySuggestResponseMiddleware:ot})}function nc(e){return e.addReducers({configuration:js}),{disableAnalytics:kn,enableAnalytics:qn,setOriginLevel2:jn,setOriginLevel3:An,updateAnalyticsConfiguration:In,updateBasicConfiguration:Sn}}function ic(e){return e.addReducers({configuration:js,pipeline:Vn,searchHub:hs}),{updateSearchConfiguration:On}}var oc=()=>new W({required:!1,emptyAllowed:!0}),ac=Lr("advancedSearchQueries/update",(e=>yn(e,{aq:oc(),cq:oc(),lq:oc(),dq:oc()}))),uc=Lr("advancedSearchQueries/register",(e=>yn(e,{aq:oc(),cq:oc(),lq:oc(),dq:oc()}))),sc=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});Zr(sc(),(e=>{e.addCase(ac,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;_(r)||(e.aq=r,e.aqWasSet=!0),_(n)||(e.cq=n,e.cqWasSet=!0),_(i)||(e.lq=i,e.lqWasSet=!0),_(a)||(e.dq=a,e.dqWasSet=!0)})).addCase(uc,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;_(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),_(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),_(i)||(e.defaultFilters.lq=i,e.lqWasSet||(e.lq=i)),_(a)||(e.defaultFilters.dq=a,e.dqWasSet||(e.dq=a))})).addCase($n.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(Rn,((e,t)=>{let{aq:r,cq:n}=t.payload;_(r)||(e.aq=r,e.aqWasSet=!0),_(n)||(e.cq=n,e.cqWasSet=!0)}))}));var cc=new X({each:dn,required:!0}),lc=(e,t)=>(yn(e,dn),J(t)?yn(t,dn):yn(t,cc),{payload:{contextKey:e,contextValue:t}}),dc=Lr("context/set",(e=>{for(let[t,r]of Object.entries(e))lc(t,r);return{payload:e}})),fc=Lr("context/add",(e=>lc(e.contextKey,e.contextValue))),hc=Lr("context/remove",(e=>yn(e,dn)));function vc(){return{contextValues:{}}}Zr(vc(),(e=>{e.addCase(dc,((e,t)=>{e.contextValues=t.payload})).addCase(fc,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(hc,((e,t)=>{delete e.contextValues[t.payload]})).addCase($n.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))}));var pc=Lr("dictionaryFieldContext/set",(e=>{let t=new K({options:{required:!0}}),r=yn(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new X({each:hn}),a=yn(n,i).error;return a?{payload:e,error:a}:{payload:e}})),yc=Lr("dictionaryFieldContext/add",(e=>{let t=new K({options:{required:!0},values:{field:hn,key:hn}});return yn(e,t)})),mc=Lr("dictionaryFieldContext/remove",(e=>yn(e,hn)));function gc(){return{contextValues:{}}}Zr(gc(),(e=>{e.addCase(pc,((e,t)=>{e.contextValues=t.payload})).addCase(yc,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(mc,((e,t)=>{delete e.contextValues[t.payload]})).addCase($n.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));var wc=async(e,t)=>{var r,n,i,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await pa(e.configuration.analytics),actionsHistory:ma.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(i=e.advancedSearchQueries)?void 0:i.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(a=e.advancedSearchQueries)?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Tu(e.configuration.analytics,t),...e.excerptLength&&!L(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},bc={collectionField:new W({emptyAllowed:!1,required:!1}),parentField:new W({emptyAllowed:!1,required:!1}),childField:new W({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new N({min:0,required:!1})},Sc=Lr("folding/register",(e=>yn(e,bc)));function Oc(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}an("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=await wc(i),o=await n.search({...a,q:Oc(i),enableQuerySyntax:!0,cq:`@${i.folding.fields.collection}="${e}"`,filterField:i.folding.fields.collection,childField:i.folding.fields.parent,parentField:i.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Ke(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:i.folding.collections[e].result}}));var Ic=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),kc=new X({each:dn,required:!0}),qc=Lr("fields/registerFieldsToInclude",(e=>yn(e,kc))),jc=Lr("fields/fetchall/enable"),Ac=Lr("fields/fetchall/disable"),Dc=an("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:a,organizationId:o}=i.configuration,{apiBaseUrl:s}=i.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:o,url:s});return Ke(u)?n(u.error):u.success.fields})),Rc=["author","language","urihash","objecttype","collection","source","permanentid"],Cc=[...Rc,"date","filetype","parents"],Ec=[...Cc,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Mc=()=>({fieldsToInclude:Rc,fetchAllFields:!1,fieldsDescription:[]}),Uc=Zr(Mc(),(e=>e.addCase(qc,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(jc,(e=>{e.fetchAllFields=!0})).addCase(Ac,(e=>{e.fetchAllFields=!1})).addCase(Dc.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(Sc,((e,{payload:t})=>{var r,n,i;let a=Ic().fields;e.fieldsToInclude.push(null!=(r=t.collectionField)?r:a.collection,null!=(n=t.parentField)?n:a.parent,null!=(i=t.childField)?i:a.child)}))));function Tc(e){return e.addReducers({fields:Uc}),{registerFieldsToInclude:qc,enableFetchAllFields:jc,disableFetchAllFields:Ac,fetchFieldsDescription:Dc}}function xc(e){return e.addReducers({recommendation:ds}),{getRecommendations:cs,setRecommendationId:ss}}var Pc=Lr("breadcrumb/deselectAll"),Fc=Lr("breadcrumb/deselectAllNonBreadcrumbs"),$c={value:dn,numberOfResults:new N({min:0}),state:dn},_c=dn,Vc=new N({min:Ja,default:Ka,required:!1}),Lc=new N({min:Ba,max:Ga,default:Wa,required:!1}),Nc={desiredCount:Lc,numberOfValues:Vc};Lr("automaticFacet/setOptions",(e=>yn(e,Nc))),Lr("automaticFacet/deselectAll",(e=>yn(e,_c)));var Qc=dn,Yc=Lr("automaticFacet/toggleSelectValue",(e=>yn(e,{field:Qc,selection:new K({values:$c})}))),Hc={state:new $({required:!0}),numberOfResults:new N({required:!0,min:0}),value:new W({required:!0,emptyAllowed:!0}),path:new X({required:!0,each:dn}),moreValuesAvailable:new H({required:!1})};function zc(e){e.children.forEach((e=>{zc(e)})),pn({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Hc)}var Bc={facetId:_c,field:dn,delimitingCharacter:new W({required:!1,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new $({required:!1}),basePath:new X({required:!1,each:dn}),filterByBasePath:new H({required:!1})};Lr("categoryFacet/register",(e=>yn(e,Bc)));var Gc=Lr("categoryFacet/toggleSelectValue",(e=>{try{return pn(e.facetId,dn),zc(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:vn(t)}}})),Wc=Lr("categoryFacet/deselectAll",(e=>yn(e,Bc.facetId)));Lr("categoryFacet/updateNumberOfValues",(e=>yn(e,{facetId:Bc.facetId,numberOfValues:Bc.numberOfValues}))),Lr("categoryFacet/updateSortCriterion",(e=>yn(e,{facetId:Bc.facetId,criterion:new $}))),Lr("categoryFacet/updateBasePath",(e=>yn(e,{facetId:Bc.facetId,basePath:new X({each:dn})})));var Jc={facetId:_c,captions:new K({options:{required:!1}}),numberOfValues:new N({required:!1,min:1}),query:new W({required:!1,emptyAllowed:!0})},Kc={path:new X({required:!0,each:dn}),displayValue:hn,rawValue:hn,count:new N({required:!0,min:0})},Zc=Lr("categoryFacet/selectSearchResult",(e=>yn(e,{facetId:_c,value:new K({values:Kc})})));Lr("categoryFacetSearch/register",(e=>yn(e,Jc)));var Xc={facetId:_c,value:new K({values:{displayValue:hn,rawValue:hn,count:new N({required:!0,min:0})}})};Lr("facetSearch/register",(e=>yn(e,Jc))),Lr("facetSearch/update",(e=>yn(e,Jc)));var el=Lr("facetSearch/toggleSelectValue",(e=>yn(e,Xc)));Lr("facetSearch/toggleExcludeValue",(e=>yn(e,Xc)));var tl=l(j()),rl=l(E());tl.default.extend(rl.default);var nl="YYYY/MM/DD@HH:mm:ss",il="1401-01-01";function ol(e,t){let r=(0,tl.default)(e,t);return r.isValid()||t?r:(0,tl.default)(e,nl)}function al(e){return e.format(nl)}function ul(e,t){let r=ol(e,t);if(!r.isValid())throw new Error(`Could not parse the provided date "${e}"${t?` with the format "${t}""`:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."}`);sl(r)}function sl(e){if(e.isBefore(il))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var cl=l(j()),ll=l(M());cl.default.extend(ll.default);var dl=["past","now","next"],fl=["minute","hour","day","week","month","quarter","year"],hl=e=>{let t="now"===e;return{amount:new N({required:!t,min:1}),unit:new W({required:!t,constrainTo:fl}),period:new W({required:!0,constrainTo:dl})}};function vl(e){if("string"==typeof e&&!wl(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?Sl(e):e;new F(hl(t.period)).validate(t);let r=yl(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);sl(r)}function pl(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function yl(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,cl.default)().subtract(r,n);case"next":return(0,cl.default)().add(r,n);case"now":return(0,cl.default)()}}function ml(e){return al(yl(Sl(e)))}function gl(e){return e.toLocaleLowerCase().split("-")}function wl(e){let[t,r,n]=gl(e);if("now"===t)return!0;if(!dl.includes(t)||!fl.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function bl(e){return!!e&&"object"==typeof e&&"period"in e}function Sl(e){let[t,r,n]=gl(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Ol(e){var t,r;return{start:Il(e.start,e),end:Il(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function Il(e,t){let{dateFormat:r}=t;return bl(e)?(vl(e),pl(e)):"string"==typeof e&&wl(e)?(vl(e),e):(ul(e,r),al(ol(e,r)))}var kl=new K({options:{required:!1},values:{type:new W({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new X({required:!0,max:25,each:new W({emptyAllowed:!1,required:!0})})}}),ql=new X({min:1,max:25,required:!1,each:new W({emptyAllowed:!1,required:!0})}),jl={facetId:_c,field:new W({required:!0,emptyAllowed:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new $({required:!1}),resultsMustMatch:new $({required:!1}),allowedValues:kl,customSort:ql};Lr("facet/register",(e=>yn(e,jl)));var Al=Lr("facet/toggleSelectValue",(e=>yn(e,{facetId:_c,selection:new K({values:$c})})));Lr("facet/toggleExcludeValue",(e=>yn(e,{facetId:_c,selection:new K({values:$c})})));var Dl=Lr("facet/deselectAll",(e=>yn(e,_c)));Lr("facet/updateSortCriterion",(e=>yn(e,{facetId:_c,criterion:new $({required:!0})}))),Lr("facet/updateNumberOfValues",(e=>yn(e,{facetId:_c,numberOfValues:new N({required:!0,min:1})}))),Lr("facet/updateIsFieldExpanded",(e=>yn(e,{facetId:_c,isFieldExpanded:new H({required:!0})}))),Lr("facet/updateFreezeCurrentValues",(e=>yn(e,{facetId:_c,freezeCurrentValues:new H({required:!0})}))),Lr("rangeFacet/updateSortCriterion",(e=>yn(e,{facetId:_c,criterion:new $({required:!0})})));var Rl={state:dn,start:new N({required:!0}),end:new N({required:!0}),endInclusive:new H({required:!0}),numberOfResults:new N({required:!0,min:0})},Cl={start:dn,end:dn,endInclusive:new H({required:!0}),state:dn,numberOfResults:new N({required:!0,min:0})},El={start:dn,end:dn,endInclusive:new H({required:!0}),state:dn},Ml={facetId:_c,field:dn,currentValues:new X({required:!1,each:new K({values:El})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new $({required:!1}),rangeAlgorithm:new $({required:!1})};function Ul(e){return wl(e)?ml(e):e}function Tl(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=Ol(e);if(ol(Ul(t)).isAfter(ol(Ul(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}Lr("dateFacet/register",(e=>{try{return pn(e,Ml),Tl(e),{payload:e,error:null}}catch(t){return{payload:e,error:vn(t)}}}));var xl=Lr("dateFacet/toggleSelectValue",(e=>yn(e,{facetId:_c,selection:new K({values:Cl})})));Lr("dateFacet/toggleExcludeValue",(e=>yn(e,{facetId:_c,selection:new K({values:Cl})})));var Pl=Lr("dateFacet/updateFacetValues",(e=>{try{return pn(e,{facetId:_c,values:new X({each:new K({values:Cl})})}),Tl({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:vn(t)}}})),Fl={state:dn,start:new N({required:!0}),end:new N({required:!0}),endInclusive:new H({required:!0})},$l={facetId:_c,field:dn,currentValues:new X({required:!1,each:new K({values:Fl})}),generateAutomaticRanges:new H({required:!0}),filterFacetCount:new H({required:!1}),injectionDepth:new N({required:!1,min:0}),numberOfValues:new N({required:!1,min:1}),sortCriteria:new $({required:!1}),rangeAlgorithm:new $({required:!1})};function _l(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}Lr("numericFacet/register",(e=>{try{return yn(e,$l),_l(e),{payload:e,error:null}}catch(t){return{payload:e,error:vn(t)}}}));var Vl=Lr("numericFacet/toggleSelectValue",(e=>yn(e,{facetId:_c,selection:new K({values:Rl})})));Lr("numericFacet/toggleExcludeValue",(e=>yn(e,{facetId:_c,selection:new K({values:Rl})})));var Ll=Lr("numericFacet/updateFacetValues",(e=>{try{return pn(e,{facetId:_c,values:new X({each:new K({values:Rl})})}),_l({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:vn(t)}}}));function Nl(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function Ql(e){return Object.values(e).map((e=>e.request))}var Yl=()=>Bu("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Hl=e=>Bu("search/queryError",((t,r)=>{var n,i,a,o;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||ku().q,aq:(null==(i=r.advancedSearchQueries)?void 0:i.aq)||sc().aq,cq:(null==(a=r.advancedSearchQueries)?void 0:a.cq)||sc().cq,dq:(null==(o=r.advancedSearchQueries)?void 0:o.dq)||sc().dq,errorType:e.type,errorMessage:e.message})})),zl=(e=>(e.Relevance="relevance",e.Fields="fields",e))(zl||{}),Bl=(e=>(e.Ascending="asc",e.Descending="desc",e))(Bl||{}),Gl=()=>Gu("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new $u(e)));Lr("productlisting/setUrl",(e=>yn(e,{url:new W({required:!0,url:!0})}))),Lr("productlisting/setAdditionalFields",(e=>yn(e,{additionalFields:new X({required:!0,each:new W({required:!0,emptyAllowed:!1})})})));var Wl=an("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,s=await o.getProducts(await Jl(a));return Ke(s)?(r(Hl(s.error)),n(s.error)):{response:s.success,analyticsAction:Gl()}})),Jl=async e=>{var t,r,n;let i=Zl(e),a=await pa(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&a?{clientId:a}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Kl(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...i.length&&{facets:{requests:i}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||zl.Relevance)!==zl.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Kl(e){return e.debug}function Zl(e){var t;return Nl(Xl(e),null!=(t=e.facetOrder)?t:[])}function Xl(e){var t,r,n,i;return[...Ql(null!=(t=e.facetSet)?t:{}),...Ql(null!=(r=e.numericFacetSet)?r:{}),...Ql(null!=(n=e.dateFacetSet)?n:{}),...Ql(null!=(i=e.categoryFacetSet)?i:{})]}var ed=Lr("facet/updateFacetAutoSelection",(e=>yn(e,{allow:new H({required:!0})}))),td=class extends Cu{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:ku().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:ve().duration}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:ve().response.totalCountFiltered}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}},rd=()=>Bu("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new td(e))),nd={id:dn},id={...nd,q:hn};Lr("instantResults/register",(e=>yn(e,nd)));var od=Lr("instantResults/updateQuery",(e=>yn(e,id)));Lr("instantResults/clearExpired",(e=>yn(e,nd)));var ad=new N({required:!0,min:0}),ud=Lr("pagination/registerNumberOfResults",(e=>yn(e,ad))),sd=Lr("pagination/updateNumberOfResults",(e=>yn(e,ad))),cd=Lr("pagination/registerPage",(e=>yn(e,ad))),ld=Lr("pagination/updatePage",(e=>yn(e,ad))),dd=Lr("pagination/nextPage"),fd=Lr("pagination/previousPage"),hd=Lr("query/updateQuery",(e=>yn(e,{q:new W,enableQuerySyntax:new H})));Lr("didYouMean/enable"),Lr("didYouMean/disable"),Lr("didYouMean/automaticCorrections/disable"),Lr("didYouMean/automaticCorrections/enable");var vd=Lr("didYouMean/correction",(e=>yn(e,dn))),pd=()=>Bu("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic()));function yd(){return{freezeFacetOrder:!1,facets:{}}}function md(){return[]}function gd(){return{}}function wd(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function bd(){return{}}var Sd=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Sd||{}),Od=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Od||{}),Id=e=>{if(ee(e))return e.map((e=>Id(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},kd=()=>({by:"relevancy"});function qd(){return Id(kd())}function jd(){return{}}function Ad(){return{}}function Dd(e){var t,r,n;return{context:e.context||vc(),dictionaryFieldContext:e.dictionaryFieldContext||gc(),facetSet:e.facetSet||uu(),numericFacetSet:e.numericFacetSet||au(),dateFacetSet:e.dateFacetSet||ou(),categoryFacetSet:e.categoryFacetSet||iu(),automaticFacetSet:null!=(t=e.automaticFacetSet)?t:Za(),pagination:e.pagination||wd(),query:e.query||ku(),tabSet:e.tabSet||Ad(),advancedSearchQueries:e.advancedSearchQueries||sc(),staticFilterSet:e.staticFilterSet||jd(),querySet:e.querySet||bd(),instantResults:e.instantResults||gd(),sortCriteria:e.sortCriteria||qd(),pipeline:e.pipeline||_n(),searchHub:e.searchHub||qu(),facetOptions:e.facetOptions||yd(),facetOrder:null!=(r=e.facetOrder)?r:md(),debug:null!=(n=e.debug)?n:Mn()}}var Rd=()=>Bu("analytics/trigger/query",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null})),Cd=Lr("trigger/query/ignore",(e=>yn(e,new W({emptyAllowed:!0,required:!0})))),Ed=Lr("trigger/query/modification",(e=>yn(e,new K({values:{originalQuery:fn,modification:fn}}))));function Md(e){return"dateRange"===e.type}function Ud(e){return`start${e}`}function Td(e){return`end${e}`}var xd=()=>({dateFacetValueMap:{}});function Pd(e,t,r){let n=e.start,i=e.end;return wl(n)&&(n=ml(n),r.dateFacetValueMap[t][Ud(n)]=e.start),wl(i)&&(i=ml(i),r.dateFacetValueMap[t][Td(i)]=e.end),{...e,start:n,end:i}}function Fd(e,t){if(Md(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>Pd(e,r,t)))}}return e}function $d(e){var t;let r=xd();return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>Fd(e,r)))},mappings:r}}function _d(e,t,r){return{...e,start:r.dateFacetValueMap[t][Ud(e.start)]||e.start,end:r.dateFacetValueMap[t][Td(e.end)]||e.end}}function Vd(e,t){return e.facetId in t.dateFacetValueMap}function Ld(e,t){return Vd(e,t)?{...e,values:e.values.map((r=>_d(r,e.facetId,t)))}:e}function Nd(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>Ld(e,t)))}}:e}var Qd=1,Yd=5e3,Hd=async(e,t)=>{var r,n;let i=Xd(e),a=zd(e),o=Bd(e);return $d({...await wc(e,t),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...i&&{cq:i},...a.length&&{facets:a},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>Yd?Yd-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...(null==(n=e.generatedAnswer)?void 0:n.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function zd(e){var t;return Nl(Wd(e),null!=(t=e.facetOrder)?t:[])}function Bd(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map((e=>e.response)).map(Gd).filter((e=>e.currentValues.length>0)):void 0}function Gd(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>"selected"===e.state));return{field:t,label:r,currentValues:i}}function Wd(e){return Jd(e).filter((({facetId:t})=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i}))}function Jd(e){var t,r,n,i;return[...Kd(null!=(t=e.facetSet)?t:{}),...Zd(null!=(r=e.numericFacetSet)?r:{}),...Zd(null!=(n=e.dateFacetSet)?n:{}),...Ql(null!=(i=e.categoryFacetSet)?i:{})]}function Kd(e){return Ql(e).map((e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Zd(e){return Ql(e).map((e=>{let t=e.currentValues.some((({state:e})=>"idle"!==e));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function Xd(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive));return[r,(null==n?void 0:n.expression.trim())||"",...ef(e)].filter((e=>!!e)).join(" AND ")}function ef(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var tf=class{constructor(e,t=(e=>{this.dispatch(hd({q:e}))})){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let i=(new Date).getTime();return{response:Nd(await this.extra.apiClient.search(t,r),e),duration:(new Date).getTime()-i,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Ke(e.response)?(this.dispatch(Hl(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o}=r;if(0!==a.length||0===o.length||!n||!i)return null;let s=this.getCurrentQuery(),{correctedQuery:u}=r.queryCorrections[0],l=await this.automaticallyRetryQueryWithCorrection(u);return Ke(l.response)?(this.dispatch(Hl(l.response.error)),this.rejectWithValue(l.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra),this.dispatch(Fn(Dd(this.getState()))),{...l,response:{...l.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:s,analyticsAction:pd()})}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let i=(null==(t=n.triggers.find((e=>"query"===e.type)))?void 0:t.content)||"";if(!i)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===i)return this.dispatch(Cd("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(i);return Ke(o.response)?(this.dispatch(Hl(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Fn(Dd(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:Rd()})}processSuccessResponse(e){return this.dispatch(Fn(Dd(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return Je(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await Hd(this.getState()),{origin:"mainSearch"});return this.dispatch(vd(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ed({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Hd(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,t,r,n){var i,a;return{...r,query:{q:e,enableQuerySyntax:null!=(a=null==(i=r.query)?void 0:i.enableQuerySyntax)?a:ku().enableQuerySyntax},search:{...ve(),duration:t,response:n,results:n.results}}}getCurrentQuery(){var e;let t=this.getState();return void 0!==(null==(e=t.query)?void 0:e.q)?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};an("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;yn(e,{q:new W,enableQuerySyntax:new H,clearFilters:new H}),e.clearFilters&&(r(Pc()),r(Fc())),r(ed({allow:!0})),r(hd({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ld(1))}));var rf=an("search/executeSearch",(async(e,t)=>{let r=t.getState();uf(r);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=await Hd(r,o),u=new tf({...t,analyticsAction:e}),l=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(l)}));an("search/fetchPage",(async(e,t)=>{let r=t.getState();uf(r);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new tf({...t,analyticsAction:e}),u=await Hd(r,o),l=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(l)})),an("search/fetchMoreResults",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await Yl().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new tf({...t,analyticsAction:Yl()}),u=await nf(r,o),l=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(l)})),an("search/fetchFacetValues",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new tf({...t,analyticsAction:e}),u=await af(r,o),l=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(l)})),an("search/fetchInstantResults",(async(e,t)=>{yn(e,{id:dn,q:dn,maxResultsPerQuery:new N({required:!0,min:1}),cacheTimeout:new N});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new tf({...t,analyticsAction:rd()},(r=>{t.dispatch(od({q:r,id:e.id}))})),o=await of(i,r,n),s=await a.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),u=await a.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}));var nf=async(e,t)=>{var r,n,i,a;let o=await Hd(e,t);return o.request={...o.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(a=null==(i=e.search)?void 0:i.results.length)?a:0)},o},of=async(e,t,r)=>$d({...await wc(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t}),af=async(e,t)=>{let r=await Hd(e,t);return r.request.numberOfResults=0,r},uf=e=>{var t;e.configuration.analytics.enabled&&ma.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},sf=Zr(wd(),(e=>{e.addCase(ud,((e,t)=>{let r=lf(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=ff(r,n)})).addCase(sd,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(ms,(e=>{e.firstResult=0})).addCase(cd,((e,t)=>{let r=t.payload;e.firstResult=ff(r,e.numberOfResults)})).addCase(ld,((e,t)=>{let r=t.payload;e.firstResult=ff(r,e.numberOfResults)})).addCase(fd,(e=>{let t=lf(e),r=Math.max(t-1,Qd);e.firstResult=ff(r,e.numberOfResults)})).addCase(dd,(e=>{let t=lf(e),r=df(e),n=Math.min(t+1,r);e.firstResult=ff(n,e.numberOfResults)})).addCase($n.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Rn,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults})).addCase(rf.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Wl.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(Dl,(e=>{cf(e)})).addCase(Al,(e=>{cf(e)})).addCase(Wc,(e=>{cf(e)})).addCase(Gc,(e=>{cf(e)})).addCase(Zc,(e=>{cf(e)})).addCase(xl,(e=>{cf(e)})).addCase(Vl,(e=>{cf(e)})).addCase(Pc,(e=>{cf(e)})).addCase(Pl,(e=>{cf(e)})).addCase(Ll,(e=>{cf(e)})).addCase(el,(e=>{cf(e)})).addCase(Yc,(e=>{cf(e)}))}));function cf(e){e.firstResult=wd().firstResult}function lf(e){let{firstResult:t,numberOfResults:r}=e;return hf(t,r)}function df(e){let{totalCountFiltered:t,numberOfResults:r}=e;return vf(t,r)}function ff(e,t){return(e-1)*t}function hf(e,t){return Math.round(e/t)+1}function vf(e,t){let r=Math.min(e,Yd);return Math.ceil(r/t)}function pf(e){return e.addReducers({pagination:sf}),{nextPage:dd,previousPage:fd,registerNumberOfResults:ud,registerPage:cd,updateNumberOfResults:sd,updatePage:ld}}function yf(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(i){i();let a,o=Symbol();return n()&&(t=JSON.stringify(this.state),a=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(o,i),()=>{r.delete(o),n()&&a&&a()}},get state(){return{}}}}var If,mf=new F({id:new W({emptyAllowed:!0,required:!1,default:""}),numberOfRecommendations:new N({min:0})});function gf(e,t={}){wf(e);let r=yf(e),{dispatch:n}=e,i=()=>e.state,a=mn(e,mf,t.options,"buildRecommendationList");return""!==a.id&&n(ss({id:a.id})),a.numberOfRecommendations&&n(pf(e).updateNumberOfResults(a.numberOfRecommendations)),{...r,refresh(){n(cs())},get state(){let e=i();return{recommendations:e.recommendation.recommendations,error:e.recommendation.error,isLoading:e.recommendation.isLoading,searchResponseId:e.recommendation.searchUid}}}}function wf(e){return e.addReducers({recommendation:ds,configuration:js}),!0}function bf(e,t,r){Sf(e);let n,i={selectionDelay:1e3,debounceWait:1e3,...t.options};return{select:Ms(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function Sf(e){return e.addReducers({configuration:js}),!0}function Of(e,t){let r=!1;return bf(e,t,(()=>{r||(r=!0,e.dispatch(us(t.options.result)))}))}T(),(e=>{e.getResultProperty=ae,e.fieldsMustBeDefined=ue,e.fieldsMustNotBeDefined=se,e.fieldMustMatch=ce,e.fieldMustNotMatch=le})(If||(If={}));export{xc as $,Ec as K,nc as W,ec as _,Of as a,Me as d,ic as e,gf as j,Tc as x};