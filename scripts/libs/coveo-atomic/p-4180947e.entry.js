import{r as t,h as e,g as r}from"./p-591772f1.js";import{a as s,m as i}from"./p-d2151deb.js";import{g as l}from"./p-85aa182a.js";import{I as n}from"./p-a096f4ab.js";import{t as a}from"./p-a5540571.js";import{R as u}from"./p-0c1fa2de.js";import"./p-92adf573.js";import"./p-eab67c09.js";const o=":host>ul{display:flex;list-style:none;margin:0;padding:0}:host>ul li{display:inline-block}.separator::before{display:inline;content:',\\00a0'}";var h=function(e,t,r,s){var l,a=arguments.length,i=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(i=(a<3?l(i):a>3?l(t,r,i):l(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i};const f=class{constructor(e){t(this,e),this.maxValuesToDisplay=3,this.delimiter=null,this.sortedValues=null,this.error=void 0,this.field=void 0,this.maxValuesToDisplay=3,this.delimiter=null}initialize(){this.breadcrumbManager=s(this.bindings.engine)}get resultValues(){const e=i.getResultProperty(this.result,this.field);return null===e?null:Array.isArray(e)?e.map((e=>`${e}`.trim())):"string"!=typeof e||""===e.trim()?(this.error=new Error(`Could not parse "${e}" from field "${this.field}" as a string array.`),null):this.delimiter?e.split(this.delimiter).map((e=>e.trim())):[e]}get facetSelectedValues(){return this.breadcrumbManager.state.facetBreadcrumbs.filter((e=>e.field===this.field)).reduce(((e,t)=>[...e,...t.values.map((({value:e})=>e.value))]),[])}updateSortedValues(){const e=this.resultValues;if(null===e)return void(this.sortedValues=null);const t=new Set(e),r=this.facetSelectedValues.filter((e=>t.has(e)));this.sortedValues=Array.from(e.reduce(((e,t)=>e.add(t)),new Set(r)))}getShouldDisplayLabel(e){return this.maxValuesToDisplay>0&&e.length>this.maxValuesToDisplay}getNumberOfValuesToDisplay(e){return e.length<=this.maxValuesToDisplay?e.length:this.maxValuesToDisplay<2?this.maxValuesToDisplay:Math.min(e.length-2,this.maxValuesToDisplay)}renderValue(t){const r=l(this.field,t,this.bindings.i18n),s=a(t);return e("li",{key:t,part:"result-multi-value-text-value"},e("slot",{name:`result-multi-value-text-value-${s}`},r))}renderSeparator(t,r){return e("li",{role:"separator",part:"result-multi-value-text-separator",key:`${t}~${r}`,class:"separator"})}renderMoreLabel(t){return e("li",{key:"more-field-values",part:"result-multi-value-text-value-more"},this.bindings.i18n.t("n-more",{value:t}))}renderListItems(e){const t=this.getNumberOfValuesToDisplay(e),r=[];for(let s=0;s<t;s++)s>0&&r.push(this.renderSeparator(e[s-1],e[s])),r.push(this.renderValue(e[s]));return this.getShouldDisplayLabel(e)&&(r.push(this.renderSeparator(e[t-1],"more-field-values")),r.push(this.renderMoreLabel(e.length-t))),r}componentWillRender(){this.updateSortedValues()}render(){if(null!==this.sortedValues)return e("ul",null,...this.renderListItems(this.sortedValues));this.host.remove()}get host(){return r(this)}};h([n()],f.prototype,"bindings",void 0),h([u()],f.prototype,"result",void 0),f.style=o;export{f as atomic_result_multi_value_text};