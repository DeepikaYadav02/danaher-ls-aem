{"version":3,"names":["foldedResultListContextEventName","FoldedResultListContext","component","foldedList","componentWillRender","element","getElement","this","event","buildCustomEvent","foldedResultList","canceled","dispatchEvent","call","foldedResultListStateContextEventName","FoldedResultListStateContext","foldedListState","subscribe","state"],"sources":["src/components/common/result-list/result-list-decorators.tsx"],"sourcesContent":["import {FoldedResultList} from '@coveo/headless';\nimport {ComponentInterface, getElement} from '@stencil/core';\nimport {buildCustomEvent} from '../../../utils/event-utils';\n\ntype FoldedResultListContextEventHandler = (\n  foldedResultList: FoldedResultList\n) => void;\nexport type FoldedResultListContextEvent =\n  CustomEvent<FoldedResultListContextEventHandler>;\nconst foldedResultListContextEventName = 'atomic/resolveFoldedResultList';\n\n/**\n * A [StencilJS property decorator](https://stenciljs.com/) to be used for elements nested within a folded result list.\n * This allows the Stencil component to modify the folded result list rendered levels.\n */\nexport function FoldedResultListContext() {\n  return (component: ComponentInterface, foldedList: string) => {\n    const {componentWillRender} = component;\n    component.componentWillRender = function () {\n      const element = getElement(this);\n      const event = buildCustomEvent(\n        foldedResultListContextEventName,\n        (foldedResultList: FoldedResultList) => {\n          this[foldedList] = foldedResultList;\n        }\n      );\n\n      const canceled = element.dispatchEvent(event);\n      if (canceled) {\n        return;\n      }\n      return componentWillRender && componentWillRender.call(this);\n    };\n  };\n}\n\ntype FoldedResultListStateContextEventHandler = (\n  foldedResultList: FoldedResultList\n) => void;\nexport type FoldedResultListStateContextEvent =\n  CustomEvent<FoldedResultListStateContextEventHandler>;\nconst foldedResultListStateContextEventName = 'atomic/resolveFoldedResultList';\n\n/**\n * A [StencilJS property decorator](https://stenciljs.com/) to be used for elements nested within a folded result list.\n * This allows the Stencil component to modify the folded result list rendered levels.\n */\nexport function FoldedResultListStateContext() {\n  return (component: ComponentInterface, foldedListState: string) => {\n    const {componentWillRender} = component;\n    component.componentWillRender = function () {\n      const element = getElement(this);\n      const event = buildCustomEvent(\n        foldedResultListStateContextEventName,\n        (foldedResultList: FoldedResultList) => {\n          foldedResultList?.subscribe(() => {\n            this[foldedListState] = foldedResultList.state;\n          });\n        }\n      );\n\n      const canceled = element.dispatchEvent(event);\n      if (canceled) {\n        return;\n      }\n      return componentWillRender && componentWillRender.call(this);\n    };\n  };\n}\n"],"mappings":"wEASA,MAAMA,EAAmC,iC,SAMzBC,IACd,MAAO,CAACC,EAA+BC,KACrC,MAAMC,oBAACA,GAAuBF,EAC9BA,EAAUE,oBAAsB,WAC9B,MAAMC,EAAUC,EAAWC,MAC3B,MAAMC,EAAQC,EACZT,GACCU,IACCH,KAAKJ,GAAcO,CAAgB,IAIvC,MAAMC,EAAWN,EAAQO,cAAcJ,GACvC,GAAIG,EAAU,CACZ,M,CAEF,OAAOP,GAAuBA,EAAoBS,KAAKN,K,CACxD,CAEL,CAOA,MAAMO,EAAwC,iC,SAM9BC,IACd,MAAO,CAACb,EAA+Bc,KACrC,MAAMZ,oBAACA,GAAuBF,EAC9BA,EAAUE,oBAAsB,WAC9B,MAAMC,EAAUC,EAAWC,MAC3B,MAAMC,EAAQC,EACZK,GACCJ,IACCA,IAAgB,MAAhBA,SAAgB,SAAhBA,EAAkBO,WAAU,KAC1BV,KAAKS,GAAmBN,EAAiBQ,KAAK,GAC9C,IAIN,MAAMP,EAAWN,EAAQO,cAAcJ,GACvC,GAAIG,EAAU,CACZ,M,CAEF,OAAOP,GAAuBA,EAAoBS,KAAKN,K,CACxD,CAEL,Q"}