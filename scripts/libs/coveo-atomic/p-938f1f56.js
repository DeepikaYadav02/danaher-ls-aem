import{m as t}from"./p-d2151deb.js";import{h as e}from"./p-591772f1.js";import{b as n,i as o,e as r}from"./p-a5540571.js";import{t as i}from"./p-4328fcc3.js";import{i as s}from"./p-2a438118.js";function a(e){return s(e)?"section":o(e)?r(e)&&e.tagName.toLowerCase()===i?"table-column-definition":"other":"metadata"}function c(e){return n(Array.from(e),(e=>a(e)))}class l{constructor({host:e,setError:t,validParents:o,allowEmpty:n=!1}){this.matchConditions=[],this.host=e,this.validateTemplate(e,t,o,n)}validateTemplate(e,t,o,n=!0){var r;const s=o.map((e=>e.toUpperCase())).includes((null===(r=e.parentElement)||void 0===r?void 0:r.nodeName)||""),i=e.nodeName.toLowerCase();if(!s)return void t(new Error(`The "${i}" component has to be the child of one of the following: ${o.map((e=>`"${e.toLowerCase()}"`)).join(", ")}.`));const a=e.querySelector("template");if(!a)return void t(new Error(`The "${i}" component has to contain a "template" element as a child.`));if(!n&&!a.innerHTML.trim())return void t(new Error(`The "template" tag inside "${i}" cannot be empty.`));a.content.querySelector("script")&&console.warn('Any "script" tags defined inside of "template" elements are not supported and will not be executed when the results are rendered.',e);const{section:l,other:m}=c(a.content.childNodes);(null==l?void 0:l.length)&&(null==m?void 0:m.length)&&console.warn("Result templates should only contain section elements or non-section elements. Future updates could unpredictably affect this result template.",e,{sectionNodes:l,otherNodes:m})}getTemplate(e,t){return t?null:{conditions:e.concat(this.matchConditions),content:u(this.host).content,priority:1}}renderIfError(t){if(t)return e("atomic-component-error",{element:this.host,error:t})}}function u(e){return e.querySelector("template")}function f(e,o){const n=[];for(const o in e)n.push(t.fieldMustMatch(o,e[o]));for(const e in o)n.push(t.fieldMustNotMatch(e,o[e]));return n}function m(e,o){const n=[];if(e){const o=e.split(",");n.push(t.fieldsMustBeDefined(o))}if(o){const e=o.split(",");n.push(t.fieldsMustNotBeDefined(e))}return n}export{l as R,m as a,f as m};