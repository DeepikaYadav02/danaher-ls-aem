/*! For license information please see headless.esm.js.LICENSE.txt */
var nC=Object.create,Mu=Object.defineProperty,oC=Object.getOwnPropertyDescriptor,iC=Object.getOwnPropertyNames,sC=Object.getPrototypeOf,cC=Object.prototype.hasOwnProperty,uC=e=>Mu(e,"__esModule",{value:!0}),lC=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)((function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')})),me=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dC=(e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of iC(t))!cC.call(e,n)&&"default"!==n&&Mu(e,n,{get:()=>t[n],enumerable:!(r=oC(t,n))||r.enumerable});return e},Ue=e=>dC(uC(Mu(null!=e?nC(sC(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),ef=me(((e,t)=>{"use strict";function r(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");if((e=(e=`${e}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",n=0,a=0;for(let i=0;i<e.length;i++)n<<=6,n|=r(e[i]),a+=6,24===a&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=a=0);return 12===a?(n>>=4,t+=String.fromCharCode(n)):18===a&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n)),t}})),rf=me(((e,t)=>{"use strict";function r(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let n="";for(t=0;t<e.length;t+=3){let a=[void 0,void 0,void 0,void 0];a[0]=e.charCodeAt(t)>>2,a[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(a[1]|=e.charCodeAt(t+1)>>4,a[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(a[2]|=e.charCodeAt(t+2)>>6,a[3]=63&e.charCodeAt(t+2));for(let e=0;e<a.length;e++)void 0===a[e]?n+="=":n+=r(a[e])}return n}})),ul=me(((e,t)=>{"use strict";var r=ef(),n=rf();t.exports={atob:r,btoa:n}})),yf=me(((e,t)=>{"use strict";var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController})),wf=me(((e,t)=>{t.exports=fetch})),Ef=me((e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),If=me((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),Of=me((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),kf=me((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=If(),r=Of();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),xl=me((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=kf(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),qf=me((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,o)}l((n=n.apply(e,t||[])).next())}))},a=e&&e.__generator||function(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.apply=function(){return n(this,void 0,void 0,(function(){return a(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(xl().Delay);e.SkipFirstDelay=i})),Tf=me((e=>{"use strict";var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(xl().Delay);e.AlwaysDelay=n})),Df=me((e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=qf(),r=Tf();e.DelayFactory=function(e,n){var a=function(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}(e);return a.setAttemptNumber(n),a}})),Vf=me((e=>{"use strict";var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,o)}l((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=Ef(),a=Df();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(a),[4,new i(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),Ls=me(((e,t)=>{var r,n;r=e,n=function(){"use strict";var e=6e4,t=36e5,r="millisecond",n="second",a="minute",i="hour",s="day",o="week",l="month",u="quarter",c="year",d="date",f="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,l),i=r-a<0,s=t.clone().add(n+(i?-1:1),l);return+(-(n+(r-a)/(i?a-s:s-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:o,d:s,D:d,h:i,m:a,s:n,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=h;var b="$isDayjsObject",w=function(e){return e instanceof O||!(!e||!e[b])},C=function e(t,r,n){var a;if(!t)return y;if("string"==typeof t){var i=t.toLowerCase();S[i]&&(a=i),r&&(S[i]=r,a=i);var s=t.split("-");if(!a&&s.length>1)return e(s[0])}else{var o=t.name;S[o]=t,a=o}return!n&&a&&(y=a),a||!n&&y},I=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new O(r)},k=m;k.l=C,k.i=w,k.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function h(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var v=h.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(g);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return k},v.isValid=function(){return this.$d.toString()!==f},v.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return I(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<I(e)},v.$g=function(e,t,r){return k.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,u=!!k.u(t)||t,f=k.p(e),g=function(e,t){var n=k.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return u?n:n.endOf(s)},p=function(e,t){return k.w(r.toDate()[e].apply(r.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,v=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case c:return u?g(1,0):g(31,11);case l:return u?g(1,v):g(0,v+1);case o:var S=this.$locale().weekStart||0,b=(h<S?h+7:h)-S;return g(u?m-b:m+(6-b),v);case s:case d:return p(y+"Hours",0);case i:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case n:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var o,u=k.p(e),f="set"+(this.$u?"UTC":""),g=(o={},o[s]=f+"Date",o[d]=f+"Date",o[l]=f+"Month",o[c]=f+"FullYear",o[i]=f+"Hours",o[a]=f+"Minutes",o[n]=f+"Seconds",o[r]=f+"Milliseconds",o)[u],p=u===s?this.$D+(t-this.$W):t;if(u===l||u===c){var h=this.clone().set(d,1);h.$d[g](p),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else g&&this.$d[g](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[k.p(e)]()},v.add=function(r,u){var d,f=this;r=Number(r);var g=k.p(u),p=function(e){var t=I(f);return k.w(t.date(t.date()+Math.round(e*r)),f)};if(g===l)return this.set(l,this.$M+r);if(g===c)return this.set(c,this.$y+r);if(g===s)return p(1);if(g===o)return p(7);var h=(d={},d[a]=e,d[i]=t,d[n]=1e3,d)[g]||1,v=this.$d.getTime()+r*h;return k.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=k.z(this),i=this.$H,s=this.$m,o=this.$M,l=r.weekdays,u=r.months,c=r.meridiem,d=function(e,r,a,i){return e&&(e[r]||e(t,n))||a[r].slice(0,i)},g=function(e){return k.s(i%12||12,e,"0")},h=c||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(p,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return o+1;case"MM":return k.s(o+1,2,"0");case"MMM":return d(r.monthsShort,o,u,3);case"MMMM":return d(u,o);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,l,2);case"ddd":return d(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return k.s(i,2,"0");case"h":return g(1);case"hh":return g(2);case"a":return h(i,s,!0);case"A":return h(i,s,!1);case"m":return String(s);case"mm":return k.s(s,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,f){var g,p=this,h=k.p(d),v=I(r),m=(v.utcOffset()-this.utcOffset())*e,y=this-v,S=function(){return k.m(p,v)};switch(h){case c:g=S()/12;break;case l:g=S();break;case u:g=S()/3;break;case o:g=(y-m)/6048e5;break;case s:g=(y-m)/864e5;break;case i:g=y/t;break;case a:g=y/e;break;case n:g=y/1e3;break;default:g=y}return f?g:k.a(g)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return S[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=C(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return k.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},h}(),A=O.prototype;return I.prototype=A,[["$ms",r],["$s",n],["$m",a],["$H",i],["$W",s],["$M",l],["$y",c],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,O,I),e.$i=!0),I},I.locale=C,I.isDayjs=w,I.unix=function(e){return I(1e3*e)},I.en=S[y],I.Ls=S,I.p={},I},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs=n()})),ug=me(((e,t)=>{var r,n;r=e,n=function(){"use strict";var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var s=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var o=this.quarter()-1;return i?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return s.bind(this)(r,n)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})),lg=me(((e,t)=>{var r,n;r=e,n=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},s=function(e){return(e=+e)+(e>68?1900:2e3)},o=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[a,function(e){this.afternoon=c(e,!1)}],a:[a,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[a,function(e){var t=i.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,o("month")],MM:[r,o("month")],MMM:[a,function(e){var t=u("months"),r=(u("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[a,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){this.year=s(e)}],YYYY:[/\d{4}/,o("year")],Z:l,ZZ:l};return function(r,n,a){a.p.customParseFormat=!0,r&&r.parseTwoDigitYear&&(s=r.parseTwoDigitYear);var o=n.prototype,l=o.parse;o.parse=function(r){var n=r.date,s=r.utc,o=r.args;this.$u=s;var u=o[1];if("string"==typeof u){var c=!0===o[2],f=!0===o[3],g=c||f,p=o[2];f&&(p=o[2]),i=this.$locale(),!c&&p&&(i=a.Ls[p]),this.$d=function(r,n,a){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*r);var s=function(r){var n,a;n=r,a=i&&i.formats;for(var s=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),o=s.length,l=0;l<o;l+=1){var u=s[l],c=d[u],f=c&&c[0],g=c&&c[1];s[l]=g?{regex:f,parser:g}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<o;r+=1){var a=s[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,l=a.parser,u=e.slice(n),c=i.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}(n)(r),o=s.year,l=s.month,u=s.day,c=s.hours,f=s.minutes,g=s.seconds,p=s.milliseconds,h=s.zone,v=new Date,m=u||(o||l?1:v.getDate()),y=o||v.getFullYear(),S=0;o&&!l||(S=l>0?l-1:v.getMonth());var b=c||0,w=f||0,C=g||0,I=p||0;return h?new Date(Date.UTC(y,S,m,b,w,C,I+60*h.offset*1e3)):a?new Date(Date.UTC(y,S,m,b,w,C,I)):new Date(y,S,m,b,w,C,I)}catch{return new Date("")}}(n,u,s),this.init(),p&&!0!==p&&(this.$L=this.locale(p).$L),g&&n!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var h=u.length,v=1;v<=h;v+=1){o[1]=u[v-1];var m=a.apply(this,o);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}v===h&&(this.$d=new Date(""))}else l.call(this,r)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_customParseFormat=n()})),Vg=me(((e,t)=>{t.exports=()=>document.cookie.includes("Coveo-Pendagron")})),Ng=me(((e,t)=>{var r,n;r=e,n=function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,s=function(e,r,n){void 0===n&&(n={});var a=new Date(e);return function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",a=e+"|"+n,i=t[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[a]=i),i}(r,n).formatToParts(a)},o=function(t,r){for(var n=s(t,r),i=[],o=0;o<n.length;o+=1){var l=n[o],u=l.type,c=l.value,d=e[u];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],g=24===f?0:f,p=i[0]+"-"+i[1]+"-"+i[2]+" "+g+":"+i[4]+":"+i[5]+":000",h=+t;return(a.utc(p).valueOf()-(h-=h%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=i);var r=this.utcOffset(),n=this.toDate(),s=n.toLocaleString("en-US",{timeZone:e}),o=Math.round((n-new Date(s))/1e3/60),l=a(s,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-o,!0);if(t){var u=l.utcOffset();l=l.add(r-u,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=s(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,s=r||t||i,l=o(+a(),s);if("string"!=typeof e)return a(e).tz(s);var u=function(e,t,r){var n=e-60*t*1e3,a=o(n,r);if(t===a)return[n,t];var i=o(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),l,s),c=u[0],d=u[1],f=a(c).utcOffset(d);return f.$x.$timezone=s,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_timezone=n()})),Mg=me(((e,t)=>{var r,n;r=e,n=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var s=a.prototype;i.utc=function(e){return new a({date:e,utc:!0,args:arguments})},s.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},s.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var o=s.parse;s.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var l=s.init;s.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=s.utcOffset;s.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],s=60*+a[1]+ +a[2];return 0===s?0:"+"===i?s:-s}(n)))return this;var s=Math.abs(n)<=16?60*n:n,o=this;if(a)return o.$offset=s,o.$u=0===n,o;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(s+l,e)).$offset=s,o.$x.$localOffset=l}else o=this.utc();return o};var c=s.format;s.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},s.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var d=s.toDate;s.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=s.diff;s.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_utc=n()})),Yg=me(((e,t)=>{"use strict";function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var s=new Array(i);s[0]=a(e);for(var o=1;o<i;o++)s[o]=a(t[o]);return s.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,d=-1,f=e&&e.length||0,g=0;g<f;){if(37===e.charCodeAt(g)&&g+1<f){switch(d=d>-1?d:0,e.charCodeAt(g+1)){case 100:case 102:if(c>=l||null==t[c])break;d<g&&(u+=e.slice(d,g)),u+=Number(t[c]),d=g+2,g++;break;case 105:if(c>=l||null==t[c])break;d<g&&(u+=e.slice(d,g)),u+=Math.floor(Number(t[c])),d=g+2,g++;break;case 79:case 111:case 106:if(c>=l||void 0===t[c])break;d<g&&(u+=e.slice(d,g));var p=typeof t[c];if("string"===p){u+="'"+t[c]+"'",d=g+2,g++;break}if("function"===p){u+=t[c].name||"<anonymous>",d=g+2,g++;break}u+=a(t[c]),d=g+2,g++;break;case 115:if(c>=l)break;d<g&&(u+=e.slice(d,g)),u+=String(t[c]),d=g+2,g++;break;case 37:d<g&&(u+=e.slice(d,g)),u+="%",d=g+2,g++,c--}++c}++g}return-1===d?e:(d<f&&(u+=e.slice(d)),u)}})),th=me(((e,t)=>{"use strict";var r=Yg();t.exports=c;var n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},a={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:v,res:v,err:p,errWithCause:p};function i(e,t){return"silent"===e?1/0:t.levels.values[e]}var s=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),l={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function u(e,t){let r={logger:t,parent:e[o]};t[o]=r}function c(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},o=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,a),p=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(p=!1);let v=Object.keys(e.customLevels||{}),m=["error","fatal","warn","info","debug","trace"].concat(v);"function"==typeof r&&m.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let S=e.level||"info",b=Object.create(r);b.log||(b.log=y),function(e,t,r){let a={};t.forEach((e=>{a[e]=r[e]?r[e]:n[e]||n[l[e]||"log"]||y})),e[s]=a}(b,m,r),u({},b),Object.defineProperty(b,"levelVal",{get:function(){return i(this.level,this)}}),Object.defineProperty(b,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,d(this,w,b,"error"),d(this,w,b,"fatal"),d(this,w,b,"warn"),d(this,w,b,"info"),d(this,w,b,"debug"),d(this,w,b,"trace"),v.forEach((e=>{d(this,w,b,e)}))}});let w={transmit:t,serialize:o,asObject:e.browser.asObject,levels:m,timestamp:h(e)};return b.levels=function(e){let t=e.customLevels||{},r=Object.assign({},c.levels.values,t),n=Object.assign({},c.levels.labels,function(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}(t));return{values:r,labels:n}}(e),b.level=S,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=y,b.serializers=a,b._serialize=o,b._stdErrSerialize=p,b.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},o&&r.serializers&&(n.serializers=r.serializers);let i=n.serializers;if(o&&i){var s=Object.assign({},a,i),l=!0===e.browser.serialize?Object.keys(s):o;delete r.serializers,f([r],l,s,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.bindings=r,s&&(this.serializers=s,this._serialize=l),t&&(this._logEvent=g([].concat(e._logEvent.bindings,r)))}c.prototype=this;let d=new c(this);return u(this,d),d.level=this.level,d},t&&(b._logEvent=g()),b}function d(e,t,a,l){if(e[l]=i(e.level,a)>i(l,a)?y:a[s][l],!t.transmit&&e[l]===y)return;e[l]=function(e,t,a,o){return function(s){return function(){let l=t.timestamp(),u=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<u.length;d++)u[d]=arguments[d];if(t.serialize&&!t.asObject&&f(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?s.call(c,function(e,t,n,a){e._serialize&&f(n,e._serialize,e.serializers,e._stdErrSerialize);let i=n.slice(),s=i[0],o={};a&&(o.time=a),o.level=e.levels.values[t];let l=1+(0|e._childLevel);if(l<1&&(l=1),null!==s&&"object"==typeof s){for(;l--&&"object"==typeof i[0];)Object.assign(o,i.shift());s=i.length?r(i.shift(),i):void 0}else"string"==typeof s&&(s=r(i.shift(),i));return void 0!==s&&(o.msg=s),o}(this,o,u,l)):s.apply(c,u),t.transmit){let r=t.transmit.level||e._level,n=a.levels.values[r],s=a.levels.values[o];if(s<n)return;!function(e,t,r){let n=t.send,a=t.ts,i=t.methodLevel,s=t.methodValue,o=t.val,l=e._logEvent.bindings;f(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=s,n(i,e._logEvent,o),e._logEvent=g(l)}(this,{ts:l,methodLevel:o,methodValue:s,transmitLevel:r,transmitValue:a.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:i(e._level,a)},u)}}}(e[s][o])}(e,t,a,l);let u=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[o];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==u.length&&(e[l]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(u,e[l]))}function f(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=c.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function g(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function p(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?S:b}function v(){return{}}function m(e){return e}function y(){}function S(){return!1}function b(){return Date.now()}c.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},c.stdSerializers=a,c.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:b,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=c,t.exports.pino=c})),No=()=>global.crypto,Pp=()=>{"undefined"==typeof window&&(No()||(global.crypto=lC("crypto")),!No().getRandomValues&&No().webcrypto&&(global.crypto.getRandomValues=No().webcrypto.getRandomValues.bind(No().webcrypto)))};function Ye(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function nr(e){return!!e&&!!e[le]}function lt(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===vC}(e)||Array.isArray(e)||!!e[Mp]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Mp])||Lu(e)||Qu(e))}function oa(e,t,r){void 0===r&&(r=!1),0===Da(e)?(r?Object.keys:Na)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function Da(e){var t=e[le];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Lu(e)?2:Qu(e)?3:0}function Va(e,t){return 2===Da(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pC(e,t){return 2===Da(e)?e.get(t):e[t]}function wp(e,t,r){var n=Da(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Ep(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Lu(e){return SC&&e instanceof Map}function Qu(e){return yC&&e instanceof Set}function xr(e){return e.o||e.t}function ju(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Lp(e);delete t[le];for(var r=Na(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Bu(e,t){return void 0===t&&(t=!1),Uu(e)||nr(e)||!lt(e)||(Da(e)>1&&(e.set=e.add=e.clear=e.delete=fC),Object.freeze(e),t&&oa(e,(function(e,t){return Bu(t,!0)}),!0)),e}function fC(){Ye(2)}function Uu(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function yt(e){var t=Ju[e];return t||Ye(18,e),t}function mC(e,t){Ju[e]||(Ju[e]=t)}function _u(){return Mo}function $u(e,t){t&&(yt("Patches"),e.u=[],e.s=[],e.v=t)}function qi(e){Hu(e),e.p.forEach(gC),e.p=null}function Hu(e){e===Mo&&(Mo=e.l)}function Ip(e){return Mo={p:[],l:Mo,h:e,m:!0,_:0}}function gC(e){var t=e[le];0===t.i||1===t.i?t.j():t.g=!0}function Wu(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||yt("ES5").S(t,e,n),n?(r[le].P&&(qi(t),Ye(4)),lt(e)&&(e=Ti(t,e),t.l||Di(t,e)),t.u&&yt("Patches").M(r[le].t,e,t.u,t.s)):e=Ti(t,r,[]),qi(t),t.u&&t.v(t.u,t.s),e!==Np?e:void 0}function Ti(e,t,r){if(Uu(t))return t;var n=t[le];if(!n)return oa(t,(function(a,i){return Op(e,n,t,a,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return Di(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=ju(n.k):n.o,i=a,s=!1;3===n.i&&(i=new Set(a),a.clear(),s=!0),oa(i,(function(t,i){return Op(e,n,a,t,i,r,s)})),Di(e,a,!1),r&&e.u&&yt("Patches").N(n,r,e.u,e.s)}return n.o}function Op(e,t,r,n,a,i,s){if(nr(a)){var o=Ti(e,a,i&&t&&3!==t.i&&!Va(t.R,n)?i.concat(n):void 0);if(wp(r,n,o),!nr(o))return;e.m=!1}else s&&r.add(a);if(lt(a)&&!Uu(a)){if(!e.h.D&&e._<1)return;Ti(e,a),t&&t.A.l||Di(e,a)}}function Di(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&Bu(t,r)}function zu(e,t){var r=e[le];return(r?xr(r):e)[t]}function kp(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Fr(e){e.P||(e.P=!0,e.l&&Fr(e.l))}function Gu(e){e.o||(e.o=ju(e.t))}function Yu(e,t,r){var n=Lu(t)?yt("MapSet").F(t,r):Qu(t)?yt("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:_u(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,i=Lo;r&&(a=[n],i=Qo);var s=Proxy.revocable(a,i),o=s.revoke,l=s.proxy;return n.k=l,n.j=o,l}(t,r):yt("ES5").J(t,r);return(r?r.A:_u()).p.push(n),n}function hC(e){return nr(e)||Ye(22,e),function e(t){if(!lt(t))return t;var r,n=t[le],a=Da(t);if(n){if(!n.P&&(n.i<4||!yt("ES5").K(n)))return n.t;n.I=!0,r=qp(t,a),n.I=!1}else r=qp(t,a);return oa(r,(function(t,a){n&&pC(n.t,t)===a||wp(r,t,e(a))})),3===a?new Set(r):r}(e)}function qp(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ju(e)}function Tp(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[le];return Lo.get(t,e)},set:function(t){var r=this[le];Lo.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][le];if(!a.P)switch(a.i){case 5:n(a)&&Fr(a);break;case 4:r(a)&&Fr(a)}}}function r(e){for(var t=e.t,r=e.k,n=Na(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==le){var s=t[i];if(void 0===s&&!Va(t,i))return!0;var o=r[i],l=o&&o[le];if(l?l.t!==s:!Ep(o,s))return!0}}var u=!!t[le];return n.length!==Na(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var a={};mC("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=Lp(r);delete i[le];for(var s=Na(i),o=0;o<s.length;o++){var l=s[o];i[l]=e(l,t||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:_u(),P:!1,I:!1,R:{},l:r,t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,le,{value:i,writable:!0}),a},S:function(e,r,a){a?nr(r)&&r[le].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[le];if(r){var a=r.t,i=r.k,s=r.R,o=r.i;if(4===o)oa(i,(function(t){t!==le&&(void 0!==a[t]||Va(a,t)?s[t]||e(i[t]):(s[t]=!0,Fr(r)))})),oa(a,(function(e){void 0!==i[e]||Va(i,e)||(s[e]=!1,Fr(r))}));else if(5===o){if(n(r)&&(Fr(r),s.length=!0),i.length<a.length)for(var l=i.length;l<a.length;l++)s[l]=!1;else for(var u=a.length;u<i.length;u++)s[u]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)i.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}var Dp,Mo,Ku="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),SC="undefined"!=typeof Map,yC="undefined"!=typeof Set,Vp="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Np=Ku?Symbol.for("immer-nothing"):((Dp={})["immer-nothing"]=!0,Dp),Mp=Ku?Symbol.for("immer-draftable"):"__$immer_draftable",le=Ku?Symbol.for("immer-state"):"__$immer_state",kO="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",vC=""+Object.prototype.constructor,Na="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Lp=Object.getOwnPropertyDescriptors||function(e){var t={};return Na(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Ju={},Lo={get:function(e,t){if(t===le)return e;var r,n,a,i=xr(e);if(!Va(i,t))return r=e,(a=kp(i,t))?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(r.k):void 0;var s=i[t];return e.I||!lt(s)?s:s===zu(e.t,t)?(Gu(e),e.o[t]=Yu(e.A.h,s,e)):s},has:function(e,t){return t in xr(e)},ownKeys:function(e){return Reflect.ownKeys(xr(e))},set:function(e,t,r){var n=kp(xr(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=zu(xr(e),t),i=null==a?void 0:a[le];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Ep(r,a)&&(void 0!==r||Va(e.t,t)))return!0;Gu(e),Fr(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==zu(e.t,t)||t in e.t?(e.R[t]=!1,Gu(e),Fr(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=xr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Ye(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ye(12)}},Qo={};oa(Lo,(function(e,t){Qo[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Qo.deleteProperty=function(e,t){return Qo.set.call(this,e,t,void 0)},Qo.set=function(e,t,r){return Lo.set.call(this,e[0],t,r,e[0])};var CC=function(){function e(e){var t=this;this.O=Vp,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var a=r;r=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var n=arguments.length,s=Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return i.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(s))}))}}var s;if("function"!=typeof r&&Ye(6),void 0!==n&&"function"!=typeof n&&Ye(7),lt(e)){var o=Ip(t),l=Yu(t,e,void 0),u=!0;try{s=r(l),u=!1}finally{u?qi(o):Hu(o)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return $u(o,n),Wu(e,o)}),(function(e){throw qi(o),e})):($u(o,n),Wu(s,o))}if(!e||"object"!=typeof e){if(void 0===(s=r(e))&&(s=e),s===Np&&(s=void 0),t.D&&Bu(s,!0),n){var c=[],d=[];yt("Patches").M(e,s,c,d),n(c,d)}return s}Ye(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(a))}))};var n,a,i=t.produce(e,r,(function(e,t){n=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,n,a]})):[i,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){lt(e)||Ye(8),nr(e)&&(e=hC(e));var t=Ip(this),r=Yu(this,e,void 0);return r[le].C=!0,Hu(t),r},t.finishDraft=function(e,t){var r=(e&&e[le]).A;return $u(r,t),Wu(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Vp&&Ye(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=yt("Patches").$;return nr(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),_e=new CC,xC=_e.produce,qO=_e.produceWithPatches.bind(_e),TO=_e.setAutoFreeze.bind(_e),DO=_e.setUseProxies.bind(_e),VO=_e.applyPatches.bind(_e),NO=_e.createDraft.bind(_e),MO=_e.finishDraft.bind(_e),Vi=xC;function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e,t){if("object"!==br(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==br(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Zu(e){var t=Xu(e,"string");return"symbol"===br(t)?t:String(t)}function el(e,t,r){return(t=Zu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qp(Object(r),!0).forEach((function(t){el(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var jp="function"==typeof Symbol&&Symbol.observable||"@@observable",tl=function(){return Math.random().toString(36).substring(7).split("").join(".")},Mi={INIT:"@@redux/INIT"+tl(),REPLACE:"@@redux/REPLACE"+tl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+tl()}};function FC(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function rl(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(we(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(we(1));return r(rl)(e,t)}if("function"!=typeof e)throw new Error(we(2));var a=e,i=t,s=[],o=s,l=!1;function u(){o===s&&(o=s.slice())}function c(){if(l)throw new Error(we(3));return i}function d(e){if("function"!=typeof e)throw new Error(we(4));if(l)throw new Error(we(5));var t=!0;return u(),o.push(e),function(){if(t){if(l)throw new Error(we(6));t=!1,u();var r=o.indexOf(e);o.splice(r,1),s=null}}}function f(e){if(!FC(e))throw new Error(we(7));if(void 0===e.type)throw new Error(we(8));if(l)throw new Error(we(9));try{l=!0,i=a(i,e)}finally{l=!1}for(var t=s=o,r=0;r<t.length;r++)(0,t[r])();return e}return f({type:Mi.INIT}),(n={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(we(10));a=e,f({type:Mi.REPLACE})}})[jp]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(we(11));function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}})[jp]=function(){return this},e},n}function bC(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:Mi.INIT}))throw new Error(we(12));if(void 0===r(void 0,{type:Mi.PROBE_UNKNOWN_ACTION()}))throw new Error(we(13))}))}function Li(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var i,s=Object.keys(r);try{bC(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,a={},o=0;o<s.length;o++){var l=s[o],u=r[l],c=e[l],d=u(c,t);if(void 0===d)throw t&&t.type,new Error(we(14));a[l]=d,n=n||d!==c}return(n=n||s.length!==Object.keys(e).length)?a:e}}function Ma(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Bp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(we(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(a)}));return n=Ma.apply(void 0,i)(r.dispatch),Ni(Ni({},r),{},{dispatch:n})}}}function Up(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var _p=Up();_p.withExtraArgument=Up;var al=_p,$p=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),RC=function(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},La=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},AC=Object.defineProperty,PC=Object.defineProperties,wC=Object.getOwnPropertyDescriptors,Hp=Object.getOwnPropertySymbols,EC=Object.prototype.hasOwnProperty,IC=Object.prototype.propertyIsEnumerable,Wp=function(e,t,r){return t in e?AC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Qa=function(e,t){for(var r in t||(t={}))EC.call(t,r)&&Wp(e,r,t[r]);if(Hp)for(var n=0,a=Hp(t);n<a.length;n++)r=a[n],IC.call(t,r)&&Wp(e,r,t[r]);return e},nl=function(e,t){return PC(e,wC(t))},OC=function(e,t,r){return new Promise((function(n,a){var i=function(e){try{o(r.next(e))}catch(e){a(e)}},s=function(e){try{o(r.throw(e))}catch(e){a(e)}},o=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,s)};o((r=r.apply(e,t)).next())}))},kC="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Ma:Ma.apply(null,arguments)},tk="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}};function qC(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}function h(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var a=t.apply(void 0,r);if(!a)throw new Error("prepareAction did not return an object");return Qa(Qa({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}var TC=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return $p(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,La([void 0],e[0].concat(this)))):new(t.bind.apply(t,La([void 0],e.concat(this))))},t}(Array),DC=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return $p(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,La([void 0],e[0].concat(this)))):new(t.bind.apply(t,La([void 0],e.concat(this))))},t}(Array);function zp(e){return lt(e)?Vi(e,(function(){})):e}function VC(e){return"boolean"==typeof e}function NC(){return function(e){return MC(e)}}function MC(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new TC);return r&&(VC(r)?n.push(al):n.push(al.withExtraArgument(r.extraArgument))),n}var ol=!0;function Gp(e){var t,r=NC(),n=e||{},a=n.reducer,i=void 0===a?void 0:a,s=n.middleware,o=void 0===s?r():s,l=n.devTools,u=void 0===l||l,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,g=void 0===f?void 0:f;if("function"==typeof i)t=i;else{if(!qC(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Li(i)}var p=o;if("function"==typeof p&&(p=p(r),!ol&&!Array.isArray(p)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!ol&&p.some((function(e){return"function"!=typeof e})))throw new Error("each middleware provided to configureStore must be a function");var h=Bp.apply(void 0,p),v=Ma;u&&(v=kC(Qa({trace:!ol},"object"==typeof u&&u)));var m=new DC(h),y=m;return Array.isArray(g)?y=La([h],g):"function"==typeof g&&(y=g(m)),rl(t,d,v.apply(void 0,y))}function LC(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw new Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}function QC(e){return"function"==typeof e}function I(e,t,r,n){void 0===r&&(r=[]);var a,i="function"==typeof t?LC(t):[t,r,n],s=i[0],o=i[1],l=i[2];if(QC(e))a=function(){return zp(e())};else{var u=zp(e);a=function(){return u}}function c(e,t){void 0===e&&(e=a());var r=La([s[t.type]],o.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if(nr(e))return void 0===(n=r(e,t))?e:n;if(lt(e))return Vi(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return c.getInitialState=a,c}var jC="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",BC=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+=jC[64*Math.random()|0];return t},UC=["name","message","stack","code"],il=function(e,t){this.payload=e,this.meta=t},Yp=function(e,t){this.payload=e,this.meta=t},_C=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=UC;r<n.length;r++){var a=n[r];"string"==typeof e[a]&&(t[a]=e[a])}return t}return{message:String(e)}},X=function(){function e(e,t,r){var n=h(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:nl(Qa({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),a=h(e+"/pending",(function(e,t,r){return{payload:void 0,meta:nl(Qa({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=h(e+"/rejected",(function(e,t,n,a,i){return{payload:a,error:(r&&r.serializeError||_C)(e||"Rejected"),meta:nl(Qa({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(o,l,u){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):BC(),f=new s;function g(e){c=e,f.abort()}var p=function(){return OC(this,null,(function(){var s,p,h,v,m,y;return RC(this,(function(S){switch(S.label){case 0:return S.trys.push([0,4,,5]),HC(v=null==(s=null==r?void 0:r.condition)?void 0:s.call(r,e,{getState:l,extra:u}))?[4,v]:[3,2];case 1:v=S.sent(),S.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return m=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),o(a(d,e,null==(p=null==r?void 0:r.getPendingMeta)?void 0:p.call(r,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:o,getState:l,extra:u,requestId:d,signal:f.signal,abort:g,rejectWithValue:function(e,t){return new il(e,t)},fulfillWithValue:function(e,t){return new Yp(e,t)}})).then((function(t){if(t instanceof il)throw t;return t instanceof Yp?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return h=S.sent(),[3,5];case 4:return y=S.sent(),h=y instanceof il?i(null,d,e,y.payload,y.meta):i(y,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(h)&&h.meta.condition||o(h),[2,h]}}))}))}();return Object.assign(p,{abort:g,requestId:d,arg:e,unwrap:function(){return p.then($C)}})}}),{pending:a,rejected:i,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function $C(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function HC(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}var Xp,WC="task",Kp="listener",Jp="completed",sl="cancelled",ok="task-"+sl,ik="task-"+Jp,sk=Kp+"-"+sl,ck=Kp+"-"+Jp,uk=function(e){this.code=e,this.name="TaskAbortError",this.message=WC+" "+sl+" (reason: "+e+")"},cl="listenerMiddleware",lk=h(cl+"/add"),dk=h(cl+"/removeAll"),pk=h(cl+"/remove"),fk="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(Xp||(Xp=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},zC=function(e){return function(t){setTimeout(t,e)}},mk="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:zC(10);Tp();var nf=Ue(ul()),ja=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Qi(e){return Array.isArray(e)}function of(e,t){return[...e.reduce(((e,r)=>{let n=t(r);return e.has(n)||e.set(n,r),e}),new Map).values()]}function rx(e){return("undefined"!=typeof btoa?btoa:nf.btoa)(encodeURI(e))}function ji(e,t){let{[e]:r,...n}=t;return n}function Bi(e){return rx(JSON.stringify(e))}var ax=new Set(["1",1,"yes",!0]);function Ui(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>ax.has(e)))}function sf(e){let t={};for(let[r,n]of e)t[r]=n;return t}function cf(e,t,r){return clearTimeout(t),setTimeout(e,r)}function ll(e,t){return Object.fromEntries(Object.entries(e).map((([e,r])=>[e,t(r,e)])))}function Rr(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function nx(){let e=null,t=null;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}}function uf(e){let{promise:t,resolve:r}=nx();return{promise:t,middleware:()=>t=>n=>{t(n),e(n)&&r(n)}}}function ox({definition:e,engine:t,props:r}){return"build"in e?e.build(t):e.buildWithProps(t,r)}function lf({definitionsMap:e,engine:t,propsMap:r}){return ll(e,((e,n)=>ox({definition:e,engine:t,props:null==r?void 0:r[n]})))}function df({searchAction:e,controllers:t}){return{controllers:ll(t,(e=>({state:Rr(e.state)}))),searchAction:Rr(e)}}function dl(e,t){let r=function(...t){return e(...t)};for(let[e,n]of Object.entries(t))r[e]=n;return r}async function pf(e,t){let r,n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}function ff(e){let t,r,n,a=!1;return function(i){void 0===t?(t=i,r=0,n=-1):t=ix(t,i);let s=t.length,o=0;for(;r<s;){a&&(10===t[r]&&(o=++r),a=!1);let i=-1;for(;r<s&&-1===i;++r)switch(t[r]){case 58:-1===n&&(n=r-o);break;case 13:a=!0;case 10:i=r}if(-1===i)break;e(t.subarray(o,i),n),o=r,n=-1}o===s?t=void 0:0!==o&&(t=t.subarray(o),r-=o)}}function mf(e,t,r){let n=gf(),a=new TextDecoder;return function(i,s){if(0===i.length)null==r||r(n),n=gf();else if(s>0){let r=a.decode(i.subarray(0,s)),o=s+(32===i[s+1]?2:1),l=a.decode(i.subarray(o));switch(r){case"data":n.data=n.data?n.data+"\n"+l:l;break;case"event":n.event=l;break;case"id":e(n.id=l);break;case"retry":let r=parseInt(l,10);isNaN(r)||t(n.retry=r)}}}}function ix(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function gf(){return{data:"",event:"",id:"",retry:void 0}}var sx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},_i="text/event-stream",cx=1e3,hf="last-event-id";function pl(e,t){var{signal:r,headers:n,onopen:a,onmessage:i,onclose:s,onerror:o,openWhenHidden:l,fetch:u}=t,c=sx(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f,g=Object.assign({},n);function p(){f?.abort(),document.hidden||b()}g.accept||(g.accept=_i),l||document.addEventListener("visibilitychange",p);let h=cx,v=0;function m(){document.removeEventListener("visibilitychange",p),window.clearTimeout(v),f?.abort()}null==r||r.addEventListener("abort",(()=>{m(),t()}));let y=u??window.fetch,S=a??ux;async function b(){var r;f="undefined"==typeof AbortController?null:new AbortController;try{let r=await y(e,Object.assign(Object.assign({},c),{headers:g,signal:f?.signal}));await S(r),await pf(r.body,ff(mf((e=>{e?g[hf]=e:delete g[hf]}),(e=>{h=e}),i))),null==s||s(),m(),t()}catch(e){if(!f?.signal.aborted)try{let t=null!==(r=null==o?void 0:o(e))&&void 0!==r?r:h;window.clearTimeout(v),v=window.setTimeout(b,t)}catch(e){m(),d(e)}}}b()}))}function ux(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(_i)))throw new Error(`Expected content-type to be ${_i}, Actual: ${t}`)}function $i(){if("undefined"==typeof window){let{AbortController:e}=yf();return new e}return"undefined"==typeof AbortController?null:new AbortController}var ia=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},vf=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Cf=(e,t)=>{let r=ml(e);return r&&r.organizationId===t?r:null},ml=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(null==t?void 0:t.groups)?t.groups:null},lx=(e,t,r)=>new ia(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,xf=3,dx=5e3,px="text/event-stream",gl=1,Ff=class extends Error{},Hi=class extends Error{constructor(e){super(e.message),this.payload=e}},hl=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:a,accessToken:i}=e,{write:s,abort:o,close:l,resetAnswer:u}=t;if(!a)return void this.logger.error("No stream ID found");let c,d=0,f=()=>{null==g||g.abort(),u(),p()},g=$i(),p=()=>pl(lx(r,n,a),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:null==g?void 0:g.signal,async onopen(e){if(!e.ok||e.headers.get("content-type")!==px)throw e.status>=400&&e.status<500&&429!==e.status?new Hi({message:"Error opening stream",code:e.status}):new Ff},onmessage:e=>{let t=JSON.parse(e.data);if("ERROR"===t.finishReason)return clearTimeout(c),null==g||g.abort(),void o({message:t.errorMessage,code:t.statusCode});s(t),d=0,"COMPLETED"===t.finishReason?(clearTimeout(c),l()):c=cf(f,c,dx)},onerror:e=>{if(clearTimeout(c),e instanceof Hi)throw null==g||g.abort(),o(e),e;if(++d>xf){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:gl};throw null==g||g.abort(),o(e),new Hi(e)}this.logger.info(`Retrying...(${d}/${xf})`),u()}});return p(),g}},Wi=e=>e;function fx(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new jo(r)}var jo=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},W=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw fx(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},ie=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&K(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function Ce(e){return void 0===e}function mx(e){return null===e}function K(e){return Ce(e)||mx(e)}var k=class{constructor(e={}){this.config=e,this.value=new ie(e)}validate(e){return this.value.validate(e)||(gx(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function gx(e){return Ce(e)||bf(e)}function bf(e){return"number"==typeof e&&!isNaN(e)}var U=class{constructor(e={}){this.value=new ie(e)}validate(e){return this.value.validate(e)||(hx(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function hx(e){return Ce(e)||Rf(e)}function Rf(e){return"boolean"==typeof e}var Sx=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,R=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new ie(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(Ce(e)?null:Ba(e)?t||e.length?r&&!Sx.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function Ba(e){return"[object String]"===Object.prototype.toString.call(e)}var E=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Ce(e))return this.config.options.required?"value is required and is currently undefined":null;if(!Af(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&K(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function Af(e){return void 0!==e&&"object"==typeof e}var _=class{constructor(e={}){this.config=e,this.value=new ie(this.config)}validate(e){if(!K(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(K(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&K(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return Rf(e)||Ba(e)||bf(e)||Af(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ua(e){return Array.isArray(e)}var Ar=class{constructor(e){this.config=e,this.value=new ie(e)}validate(e){let t=this.value.validate(e);return null!==t?t:Ce(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};function _a(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Ee(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:_a(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:_a(),extendedResults:{}}}function or(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var ir=e=>{let{response:t}=e;return t.body?yx(e):vx(t)},yx=e=>xx(e)?Fx(e):Cx(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},vx=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function Cx(e){return void 0!==e.body.statusCode}function xx(e){return void 0!==e.body.exception}var Fx=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Lf=Ue(wf()),Qf=Ue(Vf()),A=new Error("Failed to load reducers."),_o=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},$a=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}};function Nf(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}function Mf(e){return!("object"!=typeof e||!e)&&Object.values(e).every(Gx)}function Gx(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function jf(e){return 429===e}var $e=class{static async call(e){let t=Yx(e),{logger:r}=e,n=await $e.preprocessRequest(t,e);r.info(n,"Platform request");let{url:a,...i}=n,s=async()=>{let e=await(0,Lf.default)(a,i);if(jf(e.status))throw e;return e};try{let e=await(0,Qf.backOff)(s,{retry:e=>{let t=e&&jf(e.status);return t&&r.info("Platform retrying request"),t}});if(419===e.status)throw r.info("Platform renewing token"),new _o;if(404===e.status)throw new $a(a,e.status);return r.info({response:e,requestInfo:n},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new $a(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:a,requestMetadata:i}=t,{signal:s,...o}=e,l=Rr(o);try{let t=await n(e,r,i);return{...e,...t}}catch(e){a.error(e,"Platform request preprocessing failed. Returning default request options.")}return l}};function Bf(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function $o(e,t="prod"){let r="prod"===t?"":t,n=`https://${e}.org${r}.coveo.com`;return{platform:n,analytics:`https://${e}.analytics.org${r}.coveo.com`,search:`${n}/rest/search/v2`,admin:`https://${e}.admin.org${r}.coveo.com`}}function Gi(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Bf("platform",e)}function Al(e){return Bf("analytics",e)}function Yx(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:s}=e,o="POST"===e.method||"PUT"===e.method,l=Kx(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...o&&{body:l},signal:s}}function Kx(e,t){return"application/x-www-form-urlencoded"===t?Mf(e)?Nf(e):"":JSON.stringify(e)}var ca=class{constructor(){this.currentAbortController=null}async enqueue(e,t){var r;let n=this.currentAbortController,a=this.currentAbortController=$i();n&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),n.abort());try{return await e(null!=(r=null==a?void 0:a.signal)?r:null)}finally{this.currentAbortController===a&&(this.currentAbortController=null)}}},vt=(e,t,r,n)=>{let a=new ia(`${e.url}${n}`);return a.addParam("organizationId",e.organizationId),e.authentication&&a.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:a.href,origin:"searchApiFetch"}},Uf=(e,t)=>{let r=new ia(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),void 0!==e.q&&r.addParam("q",e.q),void 0!==e.enableNavigation&&r.addParam("enableNavigation",`${e.enableNavigation}`),void 0!==e.requestedOutputSize&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),void 0!==e.visitorId&&r.addParam("visitorId",`${e.visitorId}`),r.href},_f=async(e,t)=>{let r=await $e.call({...vt(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:or(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=await r.text();return Jx(n)?{success:n}:{error:ir({response:r,body:n})}};function Jx(e){return"string"==typeof e}function Xx(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function Zx(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Yi(e,t){if(t&&"AbortError"===e.name)return{error:Zx(e)};if(e instanceof $a)return{error:Xx(e)};throw e}var Pl=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new ca,mainSearch:new ca,facetValues:new ca,foldingCollection:new ca,instantResults:new ca}}async plan(e){let t=await $e.call({...vt(e,"POST","application/json","/plan"),requestParams:or(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return Yi(t);let r=await t.json();return rF(r)?{success:r}:{error:ir({response:t,body:r})}}async querySuggest(e){let t=await $e.call({...vt(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:or(e),...this.options});if(t instanceof Error)return Yi(t);let r=await t.json(),n={response:t,body:r};return tF(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:ir(n)}}async search(e,t){var r;let n=null!=(r=null==t?void 0:t.origin)?r:"unknown",a=await this.apiCallsQueues[n].enqueue((r=>$e.call({...vt(e,"POST","application/json",""),requestParams:or(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0})),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(a instanceof Error)return Yi(a,null==t?void 0:t.disableAbortWarning);let i=await a.json(),s={response:a,body:i};return wl(i)?(s.body=eF(i),{success:(await this.options.postprocessSearchResponseMiddleware(s)).body}):{error:ir(s)}}async facetSearch(e){let t=await $e.call({...vt(e,"POST","application/json","/facet"),requestParams:or(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await $e.call({...vt(e,"POST","application/json",""),requestParams:or(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return wl(r)?{success:r}:{error:ir({response:t,body:r})}}async html(e){return _f(e,{...this.options})}async productRecommendations(e){let t=await $e.call({...vt(e,"POST","application/json",""),requestParams:or(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return wl(r)?{success:r}:{error:ir({response:t,body:r})}}async fieldDescriptions(e){let t=await $e.call({...vt(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return aF(r)?{success:r}:{error:ir({response:t,body:r})}}},$f=e=>void 0!==e.success,Ie=e=>void 0!==e.error;function wl(e){return void 0!==e.results}function eF(e){let t=_a();return K(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function tF(e){return void 0!==e.completions}function rF(e){return void 0!==e.preprocessingOutput}function aF(e){return void 0!==e.fields}var oe,Hf=e=>e,Wf=e=>e,zf=e=>e,w=new R({required:!0,emptyAllowed:!1}),ue=new R({required:!1,emptyAllowed:!1}),se=new R({required:!0,emptyAllowed:!0}),cr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Ke=(e,t)=>{if("required"in t)return{payload:new W({value:t}).validate({value:e}).value};let r=new E({options:{required:!0},values:t}).validate(e);if(r)throw new jo(r);return{payload:e}},y=(e,t)=>{try{return Ke(e,t)}catch(t){return{payload:e,error:cr(t)}}},Oe=(e,t,r,n)=>Gf(e,t,r,`Check the initialState of ${n}`,"Controller initialization error"),ce=(e,t,r,n)=>Gf(e,t,r,`Check the options of ${n}`,"Controller initialization error"),Gf=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,a),t}};function Ct(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function C(e,t,r,n){return new(r||(r=Promise))((function(a,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,o)}l((n=n.apply(e,t||[])).next())}))}function nF(){return"undefined"!=typeof window}function El(){return"undefined"!=typeof navigator}function Ha(){return"undefined"!=typeof document}function Il(){try{return"undefined"!=typeof localStorage}catch{return!1}}function oF(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}function Yf(){return El()&&navigator.cookieEnabled}!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(oe||(oe={}));var iF=[oe.click,oe.custom,oe.search,oe.view],sF=(e,t)=>-1!==iF.indexOf(e)?Object.assign({language:Ha()?document.documentElement.lang:"unknown",userAgent:El()?navigator.userAgent:"unknown"},t):t,Wa=class{static set(e,t,r){var n,a,i;r&&(n=new Date).setTime(n.getTime()+r),-1===(i=window.location.hostname).indexOf(".")?Kf(e,t,n):Kf(e,t,n,(a=i.split("."))[a.length-2]+"."+a[a.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0===(a=a.replace(/^\s+/,"")).lastIndexOf(t,0))return a.substring(t.length,a.length)}return null}static erase(e){Wa.set(e,"",-1)}};function Kf(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function cF(){return Il()?localStorage:Yf()?new Pr:oF()?sessionStorage:new za}var Pr=class{getItem(e){return Wa.get(`${Pr.prefix}${e}`)}removeItem(e){Wa.erase(`${Pr.prefix}${e}`)}setItem(e,t,r){Wa.set(`${Pr.prefix}${e}`,t,r)}};Pr.prefix="coveo_";var Ki,Jf=class{constructor(){this.cookieStorage=new Pr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},za=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Ho="__coveo.analytics.history",Xf=20,Zf=6e4,em=75,Wo=class{constructor(e){this.store=e||cF()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return C(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return C(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Ho);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return C(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Ho);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Ho,JSON.stringify(e.slice(0,Xf)))}catch{}}clear(){try{this.store.removeItem(Ho)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,em)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>Zf}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},tm=Object.freeze({__proto__:null,HistoryStore:Wo,MAX_NUMBER_OF_HISTORY_ELEMENTS:Xf,MAX_VALUE_SIZE:em,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Zf,STORE_KEY:Ho,default:Wo}),uF=(e,t)=>C(void 0,void 0,void 0,(function*(){return e===oe.view?(yield lF(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),lF=e=>C(void 0,void 0,void 0,(function*(){let t=new Wo,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),dF=new Uint8Array(16);function pF(){if(!Ki&&!(Ki="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ki(dF)}var fF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ji(e){return"string"==typeof e&&fF.test(e)}var Pe=[];for(let e=0;e<256;++e)Pe.push((e+256).toString(16).slice(1));function rm(e,t=0){return(Pe[e[t+0]]+Pe[e[t+1]]+Pe[e[t+2]]+Pe[e[t+3]]+"-"+Pe[e[t+4]]+Pe[e[t+5]]+"-"+Pe[e[t+6]]+Pe[e[t+7]]+"-"+Pe[e[t+8]]+Pe[e[t+9]]+"-"+Pe[e[t+10]]+Pe[e[t+11]]+Pe[e[t+12]]+Pe[e[t+13]]+Pe[e[t+14]]+Pe[e[t+15]]).toLowerCase()}function mF(e){if(!Ji(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function gF(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var hF="6ba7b810-9dad-11d1-80b4-00c04fd430c8",SF="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function yF(e,t,r){function n(e,n,a,i){var s;if("string"==typeof e&&(e=gF(e)),"string"==typeof n&&(n=mF(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),o=r(o),o[6]=15&o[6]|t,o[8]=63&o[8]|128,a){i=i||0;for(let e=0;e<16;++e)a[i+e]=o[e];return a}return rm(o)}try{n.name=e}catch{}return n.DNS=hF,n.URL=SF,n}var vF="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),am={randomUUID:vF};function ua(e,t,r){if(am.randomUUID&&!t&&!e)return am.randomUUID();let n=(e=e||{}).random||(e.rng||pF)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return rm(n)}function CF(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function Ol(e,t){return e<<t|e>>>32-t}function xF(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,a=Math.ceil(n/16),i=new Array(a);for(let t=0;t<a;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];i[t]=r}i[a-1][14]=8*(e.length-1)/Math.pow(2,32),i[a-1][14]=Math.floor(i[a-1][14]),i[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=i[e][t];for(let e=16;e<80;++e)n[e]=Ol(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let a=r[0],s=r[1],o=r[2],l=r[3],u=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),i=Ol(a,5)+CF(r,s,o,l)+u+t[r]+n[e]>>>0;u=l,l=o,o=Ol(s,30)>>>0,s=a,a=i}r[0]=r[0]+a>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+o>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+u>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var FF=yF("v5",80,xF),nm=FF,om="2.28.20",im=e=>`${e.protocol}//${e.hostname}${0===e.pathname.indexOf("/")?e.pathname:`/${e.pathname}`}${e.search}`,zo={pageview:"pageview",event:"event"},kl=class{constructor({client:e,uuidGenerator:t=ua}){this.client=e,this.uuidGenerator=t}},sm=class extends kl{constructor({client:e,uuidGenerator:t=ua}){super({client:e,uuidGenerator:t}),this.actionData={},this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=im(window.location),this.lastReferrer=Ha()?document.referrer:"",this.addHooks()}getApi(e){return"setAction"===e?this.setAction:null}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:Ha()?document.title:"",encoding:Ha()?document.characterSet:"UTF-8"},r={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:a}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=a,e===zo.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===zo.pageview?this.nextPageViewId:this.pageViewId,referrer:e===zo.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===zo.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let t=e=>e.replace(/^\/?(.*)$/,"/$1");return`${(e=>this.currentLocation.split("/").slice(0,3).join("/"))()}${t(e.page)}`}return im(window.location)}},xt=class{constructor(e,t){if(!Ji(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>xt.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(e){let t=e.split(".");if(2!==t.length)return null;let[r,n]=t;if(32!==r.length||isNaN(parseInt(n)))return null;let a=r.substring(0,8)+"-"+r.substring(8,12)+"-"+r.substring(12,16)+"-"+r.substring(16,20)+"-"+r.substring(20,32);return Ji(a)?new xt(a,1e3*Number.parseInt(n)):null}};xt.cvo_cid="cvo_cid",xt.expirationTime=120;var cm=class extends kl{constructor({client:e,uuidGenerator:t=ua}){super({client:e,uuidGenerator:t})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return C(this,void 0,void 0,(function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let t=new URL(e),r=yield this.client.getCurrentVisitorId();return t.searchParams.set(xt.cvo_cid,new xt(r,Date.now()).toString()),t.toString()}catch{throw new Error("Invalid URL provided")}}))}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}};cm.Id="link";var Je=Object.keys;function Xi(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var ql={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},bF=Je(ql).map((e=>ql[e])),RF=[...bF].join("|"),AF=new RegExp(`^(${RF}$)`),PF={svcAction:"svc_action",svcActionData:"svc_action_data"},wF=e=>Je(e).filter((t=>void 0!==e[t])).reduce(((t,r)=>{let n=ql[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})}),{}),EF=e=>AF.test(e),IF=[EF],um={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},lm={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},ke={action:"pa",list:"pal",listSource:"pls"},Zi={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},OF=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Tl={id:"quoteId",affiliation:"quoteAffiliation"},Dl={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},kF={add:ke,bookmark_add:ke,bookmark_remove:ke,click:ke,checkout:ke,checkout_option:ke,detail:ke,impression:ke,remove:ke,refund:Object.assign(Object.assign({},ke),Zi),purchase:Object.assign(Object.assign({},ke),Zi),quickview:ke,quote:Object.assign(Object.assign({},ke),Tl),review:Object.assign(Object.assign({},ke),Dl)},qF=Je(um).map((e=>um[e])),TF=Je(lm).map((e=>lm[e])),DF=Je(ke).map((e=>ke[e])),VF=Je(Zi).map((e=>Zi[e])),NF=Je(Dl).map((e=>Dl[e])),MF=Je(Tl).map((e=>Tl[e])),LF=[...qF,"custom"].join("|"),QF=[...TF,"custom"].join("|"),dm="(pr[0-9]+)",pm="(il[0-9]+pi[0-9]+)",jF=new RegExp(`^${dm}(${LF})$`),BF=new RegExp(`^(${pm}(${QF}))|(il[0-9]+nm)$`),UF=new RegExp(`^(${DF.join("|")})$`),_F=new RegExp(`^(${VF.join("|")})$`),$F=new RegExp(`^${dm}custom$`),HF=new RegExp(`^${pm}custom$`),WF=new RegExp(`^(${[...OF,...NF,...MF].join("|")})$`),zF=e=>jF.test(e),GF=e=>BF.test(e),YF=e=>UF.test(e),KF=e=>_F.test(e),JF=e=>WF.test(e),XF=[GF,zF,YF,KF,JF],ZF=[$F,HF],eb={anonymizeIp:"aip"},tb={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},rb={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},ab=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],nb=Object.assign(Object.assign(Object.assign(Object.assign({},eb),tb),rb),ab.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),Vl=Object.assign(Object.assign({},nb),PF),ob=e=>{let t=!!e.action&&kF[e.action]||{};return Je(e).reduce(((r,n)=>{let a=t[n]||Vl[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})}),{})},ib=Je(Vl).map((e=>Vl[e])),sb=e=>-1!==ib.indexOf(e),cb=e=>"custom"===e,ub=e=>[...XF,...IF,sb,cb].some((t=>t(e))),lb=e=>Je(e).reduce(((t,r)=>{let n=db(r);return n?Object.assign(Object.assign({},t),pb(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),db=e=>{let t;return[...ZF].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},pb=(e,t)=>Je(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),fm=class{constructor(e){this.opts=e}sendEvent(e,t){return C(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(e),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${a}`,t,n),o=this.encodeForEventType(e,s),l=new Blob([o],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,l)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return C(this,void 0,void 0,(function*(){let n=e,a=t;if(r){let i=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:s,body:o}=i;n=s||e;try{a=JSON.parse(o)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:a,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return C(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[oe.click,oe.custom,oe.search,oe.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}},mm=class{sendEvent(e,t){return C(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return C(this,void 0,void 0,(function*(){return Promise.resolve()}))}},gm=window.fetch,Nl=class{constructor(e){this.opts=e}sendEvent(e,t){return C(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",s={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},o=Object.assign(Object.assign({},s),a?yield a(s,"analyticsFetch"):{}),{url:l}=o,u=Ct(o,["url"]),c=yield gm(l,u);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}deleteHttpCookieVisitorId(){return C(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield gm(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return-1!==[oe.click,oe.custom,oe.search,oe.view].indexOf(e)}getVisitorIdParam(){return C(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},hm=class{constructor(e,t){Il()&&Yf()?this.storage=new Jf:Il()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new za),this.client=new Nl(e),this.beaconClient=new fm(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Sm=class{constructor(e,t){this.storage=t||new za,this.client=new Nl(e)}getClientDependingOnEventType(e){return this.client}},ym=class{constructor(){this.storage=new za,this.client=new mm}getClientDependingOnEventType(e){return this.client}},fb="xx",mb=e=>(null==e?void 0:e.startsWith(fb))||!1,gb="\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    ";function hb(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}var Sb=["1",1,"yes",!0];function Go(){return El()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>-1!==Sb.indexOf(e)))}var vm="v15",Cm={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function yb(e=Cm.default,t=vm,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var Ne,g,vb="38824e1f-37f5-42d3-8372-a4b8fa9df946",Ve=class{get defaultOptions(){return{endpoint:Cm.default,isCustomEndpoint:!1,token:"",version:vm,beforeSendHooks:[],afterSendHooks:[]}}get version(){return om}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[uF,sF].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Go()&&(this.clear(),this.runtime.storage=new za)}initRuntime(e){return nF()&&Ha()?new hm(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(hb()&&console.warn(gb),new Sm(e))}get storage(){return this.runtime.storage}determineVisitorId(){return C(this,void 0,void 0,(function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||ua()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),ua()}}))}getCurrentVisitorId(){return C(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return C(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return C(this,void 0,void 0,(function*(){if(Ji(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(nm(e,nm(t,vb)))}}))}getParameters(e,...t){return C(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return C(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(ua()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Go())return null;try{let t=new URL(e).searchParams.get(xt.cvo_cid);if(null==t)return null;let r=xt.fromString(t);return r&&Ha()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch{}return null}resolveParameters(e,...t){return C(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>C(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>C(this,void 0,void 0,(function*(){return i?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>C(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>C(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return C(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?ob(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>C(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return C(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:a,log:t=>C(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},a),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return C(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return C(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Wo).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return C(this,void 0,void 0,(function*(){return this.makeEvent(oe.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Ct(e,["searchQueryUid"]);return C(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return C(this,void 0,void 0,(function*(){return this.makeEvent(oe.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Ct(e,["searchQueryUid"]);return C(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return C(this,void 0,void 0,(function*(){return this.makeEvent(oe.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Ct(e,["lastSearchQueryUid"]);return C(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return C(this,void 0,void 0,(function*(){return this.makeEvent(oe.view,e)}))}sendViewEvent(e){return C(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return C(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return C(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(!Array.isArray(e)||!e.every((e=>"string"==typeof e)))throw Error("Parameter should be an array of domain strings");this.acceptedLinkReferrers=e}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return-1!==({[oe.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>null!=e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(ub(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Ct(e,["custom"]),n={};t&&Xi(t)&&(n=this.lowercaseKeys(t));let a=lb(r);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Ct(e,["custom"]);if(t&&Xi(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Ct(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())&&(n.anonymizeIp=1),(t==oe.view||t==oe.click||t==oe.search||t==oe.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==oe.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Ct(e,["userId"]);return mb(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Ct(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Xi(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Xi(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return yb(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}};!function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView"}(Ne||(Ne={})),function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"}(g||(g={}));var Ml={[g.triggerNotify]:"queryPipelineTriggers",[g.triggerExecute]:"queryPipelineTriggers",[g.triggerQuery]:"queryPipelineTriggers",[g.triggerRedirect]:"queryPipelineTriggers",[g.queryError]:"errors",[g.queryErrorBack]:"errors",[g.queryErrorClear]:"errors",[g.queryErrorRetry]:"errors",[g.pagerNext]:"getMoreResults",[g.pagerPrevious]:"getMoreResults",[g.pagerNumber]:"getMoreResults",[g.pagerResize]:"getMoreResults",[g.pagerScrolling]:"getMoreResults",[g.facetSearch]:"facet",[g.facetShowLess]:"facet",[g.facetShowMore]:"facet",[g.recommendation]:"recommendation",[g.likeSmartSnippet]:"smartSnippet",[g.dislikeSmartSnippet]:"smartSnippet",[g.expandSmartSnippet]:"smartSnippet",[g.collapseSmartSnippet]:"smartSnippet",[g.openSmartSnippetFeedbackModal]:"smartSnippet",[g.closeSmartSnippetFeedbackModal]:"smartSnippet",[g.sendSmartSnippetReason]:"smartSnippet",[g.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[g.clearRecentQueries]:"recentQueries",[g.recentResultClick]:"recentlyClickedDocuments",[g.clearRecentResults]:"recentlyClickedDocuments",[g.showLessFoldedResults]:"folding",[Ne.expandToFullUI]:"interface",[Ne.openUserActions]:"User Actions",[Ne.showPrecedingSessions]:"User Actions",[Ne.showFollowingSessions]:"User Actions",[Ne.clickViewedDocument]:"User Actions",[Ne.clickPageView]:"User Actions",[g.caseDetach]:"case",[g.likeGeneratedAnswer]:"generatedAnswer",[g.dislikeGeneratedAnswer]:"generatedAnswer",[g.openGeneratedAnswerSource]:"generatedAnswer",[g.generatedAnswerStreamEnd]:"generatedAnswer",[g.generatedAnswerSourceHover]:"generatedAnswer",[g.generatedAnswerCopyToClipboard]:"generatedAnswer",[g.generatedAnswerHideAnswers]:"generatedAnswer",[g.generatedAnswerShowAnswers]:"generatedAnswer",[g.generatedAnswerFeedbackSubmit]:"generatedAnswer"},la=class{constructor(){this.runtime=new ym,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(oe.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(oe.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(oe.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(oe.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return om}};function Cb(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function xb(e){return e.map((e=>e.replace(/;/g,"")))}function xm(e){let t=e.join(";");return t.length<=256?t:xm(e.slice(1))}var Fm=e=>xm(Cb(xb(e)));function bm(e){let t="string"==typeof e.partialQueries?e.partialQueries:Fm(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:Fm(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ts,dt,rs,da=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||Go();this.coveoAnalyticsClient=r?new la:new Ve(e)}disable(){this.coveoAnalyticsClient instanceof Ve&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new la}enable(){this.coveoAnalyticsClient=new Ve(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(g.interfaceLoad)}logInterfaceLoad(){return C(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(g.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return C(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(g.recommendation)}logRecommendation(){return C(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(g.recommendationOpen,e,t)}logRecommendationOpen(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(g.staticFilterClearAll,e)}logStaticFilterClearAll(e){return C(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(g.staticFilterSelect,e)}logStaticFilterSelect(e){return C(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(g.staticFilterDeselect,e)}logStaticFilterDeselect(e){return C(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(g.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return C(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(g.interfaceChange,e)}logInterfaceChange(e){return C(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(g.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return C(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(g.didyoumeanClick)}logDidYouMeanClick(){return C(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(g.resultsSort,e)}logResultsSort(e){return C(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(g.searchboxSubmit)}logSearchboxSubmit(){return C(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(g.searchboxClear)}logSearchboxClear(){return C(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(g.searchboxAsYouType)}logSearchboxAsYouType(){return C(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(g.breadcrumbFacet,e)}logBreadcrumbFacet(e){return C(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(g.breadcrumbResetAll)}logBreadcrumbResetAll(){return C(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(g.documentQuickview,e,t)}logDocumentQuickview(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(g.documentOpen,e,t)}logDocumentOpen(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(g.omniboxAnalytics,bm(e))}logOmniboxAnalytics(e){return C(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(g.omniboxFromLink,bm(e))}logOmniboxFromLink(e){return C(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(g.searchFromLink)}logSearchFromLink(){return C(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(g.triggerNotify,e)}logTriggerNotify(e){return C(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(g.triggerExecute,e)}logTriggerExecute(e){return C(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(g.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return C(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(g.undoTriggerQuery,e)}logUndoTriggerQuery(e){return C(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(g.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return C(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(g.pagerResize,e)}logPagerResize(e){return C(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(g.pagerNumber,e)}logPagerNumber(e){return C(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(g.pagerNext,e)}logPagerNext(e){return C(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(g.pagerPrevious,e)}logPagerPrevious(e){return C(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(g.pagerScrolling)}logPagerScrolling(){return C(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(g.facetClearAll,e)}logFacetClearAll(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(g.facetSearch,e)}logFacetSearch(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(g.facetSelect,e)}logFacetSelect(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(g.facetDeselect,e)}logFacetDeselect(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(g.facetExclude,e)}logFacetExclude(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(g.facetUnexclude,e)}logFacetUnexclude(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(g.facetSelectAll,e)}logFacetSelectAll(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(g.facetUpdateSort,e)}logFacetUpdateSort(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(g.facetShowMore,e)}logFacetShowMore(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(g.facetShowLess,e)}logFacetShowLess(e){return C(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(g.queryError,e)}logQueryError(e){return C(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return C(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(g.queryErrorBack);return{description:e.description,log:()=>C(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorBack)}))}}))}logQueryErrorBack(){return C(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return C(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(g.queryErrorRetry);return{description:e.description,log:()=>C(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorRetry)}))}}))}logQueryErrorRetry(){return C(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return C(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(g.queryErrorClear);return{description:e.description,log:()=>C(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(g.queryErrorClear)}))}}))}logQueryErrorClear(){return C(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(g.likeSmartSnippet)}logLikeSmartSnippet(){return C(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(g.dislikeSmartSnippet)}logDislikeSmartSnippet(){return C(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(g.expandSmartSnippet)}logExpandSmartSnippet(){return C(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(g.collapseSmartSnippet)}logCollapseSmartSnippet(){return C(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(g.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(g.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return C(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(g.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(g.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return C(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(g.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return C(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(g.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return C(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(g.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return C(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(g.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(g.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(g.copyToClipboard,e,t)}logCopyToClipboard(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(g.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(g.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(g.recentQueryClick)}logRecentQueryClick(){return C(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(g.clearRecentQueries)}logClearRecentQueries(){return C(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(g.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(g.clearRecentResults)}logClearRecentResults(){return C(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(g.noResultsBack)}logNoResultsBack(){return C(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(g.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(g.showLessFoldedResults)}logShowLessFoldedResults(){return C(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:null===(r=e.payload)||void 0===r?void 0:r.customData}}makeCustomEvent(e,t,r=Ml[e]){return C(this,void 0,void 0,(function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Ml[e]){return C(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return C(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return C(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return C(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return C(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return C(this,void 0,void 0,(function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return C(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return C(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return C(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ve?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(g.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return C(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(g.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return C(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(g.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return C(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(g.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(g.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(g.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(g.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(g.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(g.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return C(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(g.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return C(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(g.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return C(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},es=Object.assign({},zo),Rm=Object.keys(es).map((e=>es[e])),Yo=class extends sm{constructor({client:e,uuidGenerator:t=ua}){super({client:e,uuidGenerator:t}),this.ticket={}}getApi(e){let t=super.getApi(e);return null!==t?t:"setTicket"===e?this.setTicket:null}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook(((e,...[t])=>-1!==Rm.indexOf(e)?this.addSVCDataToPayload(e,t):t)),this.client.registerAfterSendEventHook(((e,...[t])=>(-1!==Rm.indexOf(e)&&this.updateLocationInformation(e,t),t)))}addHooksForPageView(){this.client.addEventTypeMapping(es.pageview,{newEventType:oe.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(es.event,{newEventType:oe.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys(null!==(r=this.actionData)&&void 0!==r?r:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),t)}getTicketPayload(){return wF(this.ticket)}};Yo.Id="svc",function(e){e.click="click",e.flowStart="flowStart"}(ts||(ts={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(dt||(dt={})),function(e){e.quit="Quit",e.solved="Solved"}(rs||(rs={}));var Ll=class{constructor(e,t){var r;this.options=e,this.provider=t;let n=(null===(r=e.enableAnalytics)||void 0===r||r)&&!Go();this.coveoAnalyticsClient=n?new Ve(e):new la,this.svc=new Yo({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Ve&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new la,this.svc=new Yo({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Ve(this.options),this.svc=new Yo({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(dt.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(dt.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(dt.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(dt.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(dt.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(dt.nextCaseStep,{stage:null==e?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(dt.caseCancelled,{reason:rs.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(dt.caseSolved,{reason:rs.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(dt.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ts.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ts.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},Fb=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach((r=>{var n;let a=null===(n=e.caseContext)||void 0===n?void 0:n[r];a&&(t[`context_${r}`]=a)})),t},Q=(e,t=!0)=>{let{caseContext:r,caseId:n,caseNumber:a}=e,i=Ct(e,["caseContext","caseId","caseNumber"]),s=Fb(e);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:a},i),!!s.context_Case_Subject&&{CaseSubject:s.context_Case_Subject}),t&&s)},Ql=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||Go();this.coveoAnalyticsClient=r?new la:new Ve(e)}disable(){this.coveoAnalyticsClient instanceof Ve&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new la}enable(){this.coveoAnalyticsClient=new Ve(this.opts)}logInterfaceLoad(e){if(e){let t=Q(e);return this.logSearchEvent(g.interfaceLoad,t)}return this.logSearchEvent(g.interfaceLoad)}logInterfaceChange(e){let t=Q(e);return this.logSearchEvent(g.interfaceChange,t)}logStaticFilterDeselect(e){let t=Q(e);return this.logSearchEvent(g.staticFilterDeselect,t)}logFetchMoreResults(e){if(e){let t=Q(e);return this.logCustomEvent(g.pagerScrolling,Object.assign(Object.assign({},t),{type:"getMoreResults"}))}return this.logCustomEvent(g.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let t=Q(e);return this.logSearchEvent(g.breadcrumbFacet,t)}logBreadcrumbResetAll(e){if(e){let t=Q(e);return this.logSearchEvent(g.breadcrumbResetAll,t)}return this.logSearchEvent(g.breadcrumbResetAll)}logFacetSelect(e){let t=Q(e);return this.logSearchEvent(g.facetSelect,t)}logFacetExclude(e){let t=Q(e);return this.logSearchEvent(g.facetExclude,t)}logFacetDeselect(e){let t=Q(e);return this.logSearchEvent(g.facetDeselect,t)}logFacetUpdateSort(e){let t=Q(e);return this.logSearchEvent(g.facetUpdateSort,t)}logFacetClearAll(e){let t=Q(e);return this.logSearchEvent(g.facetClearAll,t)}logFacetShowMore(e){let t=Q(e,!1);return this.logCustomEvent(g.facetShowMore,t)}logFacetShowLess(e){let t=Q(e,!1);return this.logCustomEvent(g.facetShowLess,t)}logQueryError(e){let t=Q(e,!1);return this.logCustomEvent(g.queryError,t)}logPagerNumber(e){let t=Q(e,!1);return this.logCustomEvent(g.pagerNumber,t)}logPagerNext(e){let t=Q(e,!1);return this.logCustomEvent(g.pagerNext,t)}logPagerPrevious(e){let t=Q(e,!1);return this.logCustomEvent(g.pagerPrevious,t)}logDidYouMeanAutomatic(e){if(e){let t=Q(e);return this.logSearchEvent(g.didyoumeanAutomatic,t)}return this.logSearchEvent(g.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let t=Q(e);return this.logSearchEvent(g.didyoumeanClick,t)}return this.logSearchEvent(g.didyoumeanClick)}logResultsSort(e){let t=Q(e);return this.logSearchEvent(g.resultsSort,t)}logSearchboxSubmit(e){if(e){let t=Q(e);return this.logSearchEvent(g.searchboxSubmit,t)}return this.logSearchEvent(g.searchboxSubmit)}logContextChanged(e){let t=Q(e);return this.logSearchEvent(Ne.contextChanged,t)}logExpandToFullUI(e){let t=Q(e);return this.logCustomEvent(Ne.expandToFullUI,t)}logOpenUserActions(e){let t=Q(e,!1);return this.logCustomEvent(Ne.openUserActions,t)}logShowPrecedingSessions(e){let t=Q(e,!1);return this.logCustomEvent(Ne.showPrecedingSessions,t)}logShowFollowingSessions(e){let t=Q(e,!1);return this.logCustomEvent(Ne.showFollowingSessions,t)}logViewedDocumentClick(e,t){return this.logCustomEvent(Ne.clickViewedDocument,Object.assign(Object.assign({},Q(t,!1)),{document:e}))}logPageViewClick(e,t){return this.logCustomEvent(Ne.clickPageView,Object.assign(Object.assign({},Q(t,!1)),{pageView:e}))}logDocumentOpen(e,t,r){return this.logClickEvent(g.documentOpen,e,t,r?Q(r,!1):void 0)}logCopyToClipboard(e,t,r){return this.logClickEvent(g.copyToClipboard,e,t,r?Q(r,!1):void 0)}logCaseSendEmail(e,t,r){return this.logClickEvent(g.caseSendEmail,e,t,r?Q(r,!1):void 0)}logFeedItemTextPost(e,t,r){return this.logClickEvent(g.feedItemTextPost,e,t,r?Q(r,!1):void 0)}logDocumentQuickview(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(g.documentQuickview,e,t,r?Object.assign(Object.assign({},Q(r,!1)),n):n)}logCaseAttach(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(g.caseAttach,e,t,r?Object.assign(Object.assign({},Q(r,!1)),n):n)}logCaseDetach(e,t){return this.logCustomEvent(g.caseDetach,t?Object.assign(Object.assign({},Q(t,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(g.likeSmartSnippet,e?Q(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(g.dislikeSmartSnippet,e?Q(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(g.expandSmartSnippet,e?Q(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(g.collapseSmartSnippet,e?Q(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(g.openSmartSnippetFeedbackModal,e?Q(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(g.closeSmartSnippetFeedbackModal,e?Q(e,!1):void 0)}logSmartSnippetFeedbackReason(e,t,r){return this.logCustomEvent(g.sendSmartSnippetReason,r?Object.assign(Object.assign({},Q(r,!1)),{reason:e,details:t}):{reason:e,details:t})}logExpandSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(g.expandSmartSnippetSuggestion,t?Object.assign(Object.assign({},Q(t,!1)),r):r)}logCollapseSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(g.collapseSmartSnippetSuggestion,t?Object.assign(Object.assign({},Q(t,!1)),r):r)}logOpenSmartSnippetSource(e,t,r){return this.logClickEvent(g.openSmartSnippetSource,e,t,r?Q(r,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,t,r){return this.logClickEvent(g.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},Q(r,!1)),t):t)}logOpenSmartSnippetInlineLink(e,t,r){return this.logClickEvent(g.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},r?Object.assign(Object.assign({},Q(r,!1)),t):t)}logOpenSmartSnippetSuggestionInlineLink(e,t,r){return this.logClickEvent(g.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},Q(r,!1)),t):t)}logLikeGeneratedAnswer(e,t){return this.logCustomEvent(g.likeGeneratedAnswer,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logDislikeGeneratedAnswer(e,t){return this.logCustomEvent(g.dislikeGeneratedAnswer,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logOpenGeneratedAnswerSource(e,t){return this.logCustomEvent(g.openGeneratedAnswerSource,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logGeneratedAnswerSourceHover(e,t){return this.logCustomEvent(g.generatedAnswerSourceHover,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,t){return this.logCustomEvent(g.generatedAnswerCopyToClipboard,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logGeneratedAnswerHideAnswers(e,t){return this.logCustomEvent(g.generatedAnswerHideAnswers,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logGeneratedAnswerShowAnswers(e,t){return this.logCustomEvent(g.generatedAnswerShowAnswers,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,t){return this.logCustomEvent(g.generatedAnswerFeedbackSubmit,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logRephraseGeneratedAnswer(e,t){return this.logSearchEvent(g.rephraseGeneratedAnswer,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(g.retryGeneratedAnswer,e?Object.assign({},Q(e,!1)):{})}logGeneratedAnswerStreamEnd(e,t){return this.logCustomEvent(g.generatedAnswerStreamEnd,t?Object.assign(Object.assign({},Q(t,!1)),e):e)}logCustomEvent(e,t){return C(this,void 0,void 0,(function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:Ml[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}))}logSearchEvent(e,t){return C(this,void 0,void 0,(function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))}))}logClickEvent(e,t,r,n){return C(this,void 0,void 0,(function*(){let a=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)}))}logShowMoreFoldedResults(e,t,r){return C(this,void 0,void 0,(function*(){return this.logClickEvent(g.showMoreFoldedResults,e,t,r?Q(r,!1):void 0)}))}logShowLessFoldedResults(e){return C(this,void 0,void 0,(function*(){return this.logCustomEvent(g.showLessFoldedResults,e?Q(e,!1):void 0)}))}getBaseCustomEventRequest(e){return C(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return C(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return C(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Ve?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},Ft=()=>"default",Xe=e=>new Ve(e).getCurrentVisitorId(),jl=e=>{let t=new Ve(e);t.clear(),t.deleteHttpOnlyVisitorId()},wr=new tm.HistoryStore,bt=(e,t)=>"function"==typeof t?(...r)=>{let n=Rr(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,Rt=(e,t)=>(...r)=>{let n=Rr(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}},as=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||Ft()}},Am=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new as(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new Ll({enableAnalytics:u,token:s,endpoint:o,runtimeEnvironment:l,preprocessRequest:bt(e,n),beforeSendHooks:[Rt(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:s},"Analytics request"),r)]},a);return u||c.disable(),c},ns=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),Ko="2.38.3",bb=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},ur=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return bb(this.state)}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[e,n]of Object.entries(t))r[`context_${e}`]=n;return r.coveoHeadlessVersion=Ko,r}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||Ft()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},os=class extends ur{constructor(){super(...arguments),this.initialState=ns()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},Pm=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new os(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new da({token:s,endpoint:o,runtimeEnvironment:l,preprocessRequest:bt(e,n),beforeSendHooks:[Rt(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:s},"Analytics request"),r)]},a);return u||c.disable(),c},wm=1,Em=10,is=5,Im=1,ss=8;function Ga(){return{desiredCount:is,numberOfValues:ss,set:{}}}var At=(e,t)=>"productListing"in e&&e.productListing?e.productListing.facets.results.find((e=>e.facetId===t)):"search"in e&&e.search?e.search.response.facets.find((e=>e.facetId===t)):void 0,Bl=(e,t)=>{var r;return null==(r=e.facetSet[t])?void 0:r.request};function Rb(e,t){return!!t&&t.facetId in e.facetSet}var Jo=(e,t)=>{let r=At(e,t);if(Rb(e,r))return r},Ab=(e,t)=>{let r=Jo(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]},Om=(e,t)=>{let r=Jo(e,t);return r?r.values.filter((e=>"idle"!==e.state)):[]},Pt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function km(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function He(e){let{activeValue:t,ancestryMap:r}=Pb(e);return t?wb(t,r):[]}function Pb(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function wb(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}function Eb(e,t){return!!t&&t.facetId in e.categoryFacetSet}var Ul=(e,t)=>{let r=At(e,t);if(Eb(e,r))return r},_l=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},qm=(e,t)=>{var r;let n=Ul(e,t);return He(null!=(r=null==n?void 0:n.values)?r:[])},$l=(e,t)=>{var r;let n=_l(e,t);return He(null!=(r=null==n?void 0:n.currentValues)?r:[])};function Ya(){return{}}function Tm(e){return{request:e}}function Ka(){return{}}function Dm(e){return{request:e}}function Ja(){return{}}function Vm(e){return{request:e,hasBreadcrumbs:!0}}function Xa(){return{}}var Za=(e,t)=>{let r=Qm(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:Hl(n,e)}};function Xo(e,t){let{facetId:r,facetValue:n}=e;return{...Za(r,t),facetValue:"hierarchical"===jm(t,r)?Lm(t,r):n}}function We(e){var t,r,n,a,i;return{facetSet:null!=(t=e.facetSet)?t:Xa(),categoryFacetSet:null!=(r=e.categoryFacetSet)?r:Ya(),dateFacetSet:null!=(n=e.dateFacetSet)?n:Ka(),numericFacetSet:null!=(a=e.numericFacetSet)?a:Ja(),automaticFacetSet:null!=(i=e.automaticFacetSet)?i:Ga()}}var cs=e=>{let t=[];return kb(e).forEach(((r,n)=>{let a=jm(e,r.facetId),i=Nb(r,n+1);if(Ob(r)){if(!$l(e,r.facetId).length)return;t.push({...i,...Db(e,r.facetId),facetType:a,state:"selected"})}else r.currentValues.forEach(((e,n)=>{if("idle"===e.state)return;let s=Nm(e,n+1,a),o=Ib(r)?Mm(e):Tb(e);t.push({...i,...s,...o})}))})),qb(e).forEach(((e,r)=>{let n=Vb(e,r+1);e.values.forEach(((e,r)=>{if("idle"===e.state)return;let a=Nm(e,r+1,"specific"),i=Mm(e);t.push({...n,...a,...i})}))})),t},Ib=e=>"specific"===e.type,Ob=e=>"hierarchical"===e.type,kb=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),qb=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),Nm=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Tb=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Mm=e=>({displayValue:e.value,value:e.value}),Lm=(e,t)=>$l(e,t).map((e=>e.value)).join(";"),Db=(e,t)=>{let r=Lm(e,t);return{value:r,valuePosition:1,displayValue:r}},Vb=(e,t)=>({title:Hl(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Nb=(e,t)=>({title:Hl(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Hl=(e,t)=>`${e}_${t}`,Qm=(e,t)=>{var r,n,a,i,s;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(a=e.dateFacetSet[t])?void 0:a.request)||(null==(i=e.numericFacetSet[t])?void 0:i.request)||(null==(s=e.automaticFacetSet.set[t])?void 0:s.response)},jm=(e,t)=>{let r=Qm(e,t);return r?r.type:"specific"},Se=()=>({q:"",enableQuerySyntax:!1}),us=class extends ur{getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||Ee().response.searchUid}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return cs(We(this.state))}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||Se().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||Ee().duration}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.search)?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.results.length)||Ee().response.results.length}},Bm=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new us(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new Ql({enableAnalytics:u,token:s,endpoint:o,runtimeEnvironment:l,preprocessRequest:bt(e,n),beforeSendHooks:[Rt(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:s},"Analytics request"),r)]},a);return u||c.disable(),c},en=class extends ur{constructor(){super(...arguments),this.initialState=ns()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},Um=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new en(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new da({token:s,endpoint:o,runtimeEnvironment:l,preprocessRequest:bt(e,n),beforeSendHooks:[Rt(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:s},"Analytics request"),r)]},a);return u||c.disable(),c};async function Mb({config:e,environment:t,event:r}){let{url:n,token:a}=e,i={"Content-Type":"application/json",Authorization:`Bearer ${a}`},s=await t.fetch(`${n}/validate`,{method:"POST",body:JSON.stringify([r]),headers:i}),o=await s.json();if(!s.ok)throw new Error({...o});if(!o)return{valid:!1,errors:[{type:"",message:"disabled",path:""}]};let{valid:l,errors:u}=o[0];return{valid:l,errors:u??[]}}async function Lb(e){let{listenerManager:t,event:r,config:n}=e;return"disabled"!==n.mode&&t.call(r),"validate"===n.mode?Mb(e):Qb(e)}async function Qb({event:e,config:t,environment:r}){let{url:n,token:a}=t;return r.send(n,a,JSON.stringify([e]))}var jb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Bb(e){return"string"==typeof e&&jb.test(e)}function Ub(e){let t="visitorId";return{getClientId:()=>{let r=e.storage,n=r.getItem(t),a=n&&Bb(n)?n:e.generateUUID();return r.setItem(t,a),a},clear:()=>{e.storage.removeItem(t)}}}var Wl=_b();function _b(){let e="coveo_";return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(0===t.lastIndexOf(r,0))return t.substring(r.length,t.length)}return null},setItem(t,r,n){let a=(e=>{let t=window.location.hostname.split(".").slice(-2);return 2==t.length?t.join("."):""})(),i=`;expires=${new Date((new Date).getTime()+n).toUTCString()}`,s=a?`;domain=${a}`:"";document.cookie=`${e}${t}=${r}${i}${s};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function $b(){return{getItem:e=>Wl.getItem(e)||localStorage.getItem(e),removeItem(e){Wl.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Wl.setItem(e,t,31556952e3)}}}async function zl(e,t){return fetch(e,t).catch((e=>{throw new Error(`${e.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:e})}))}function Hb(){let e=document.referrer;return""===e?null:e}function Wb(){return{runtime:"browser",fetch:(e,t)=>zl(e,t),send:async(e,t,r)=>{if(!navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([r],{type:"application/json"})))throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.");return null},getReferrerUrl:()=>Hb(),getUrl:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:$b()}}function _m(){return{getItem:()=>null,removeItem(){},setItem(){}}}function zb(){return{runtime:"node",fetch:(e,t)=>zl(e,t),send:async(e,t,r)=>(zl(e,{method:"POST",body:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),null),getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:_m()}}function Gb(){return Yb()?Wb():zb()}function Yb(){try{return"object"==typeof window}catch{return!1}}var $m="0.6.3";function Kb(e){let{trackingId:t}=e;return{trackingId:t}}function Jb(){return`relay@${$m}`}function Hm(e,t,r,n){let{getReferrerUrl:a,getUrl:i,getUserAgent:s}=r,o=Kb(t),l=n.getClientId();return Object.freeze({type:e,config:o,ts:Date.now(),source:Jb(),clientId:l,userAgent:s(),referrerUrl:a(),url:i()})}function Xb(e,t,r,n,a){return{...t,meta:Hm(e,r,n,a)}}var Zb="*";function eR(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(r,n){n?function(r){let n=t(r);n>=0&&e.splice(n,1)}({type:r,callback:n}):function(t){if(t===Zb)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}(r)}return{add:function(n){return t(n)<0&&e.push(n),()=>r(n.type,n.callback)},call:function(t){e.forEach((e=>{if(function(e,t){return"*"===e.type||t===e.type}(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))},remove:r}}function Wm({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode}})}function tR(e){let t=Wm(e);return{get:()=>t,update:e=>{t=Wm({...t,...e})}}}function rR(){return{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>null,getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:_m()}}function zm(e){let t=tR(e),r=eR(),n=()=>"disabled"==t.get().mode?rR():Gb(),a=Ub(n());return{emit:(e,i)=>{let s=t.get(),o=n();return Lb({config:s,environment:o,event:Xb(e,i,s,o,a),listenerManager:r})},getMeta:e=>Hm(e,t.get(),n(),a),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:$m,clearStorage:()=>{a.clear()}}}var ls=class extends ur{getFacetState(){return cs(We(this.getState()))}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||ls.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||Ee().response.searchUid}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.search)?void 0:e.response.pipeline)||this.state.pipeline||ls.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),a=super.getBaseMetadata(),i=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return i&&(a.generativeQuestionAnsweringId=i),a}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return void 0!==(null==(e=t.generatedAnswer)?void 0:e.isVisible)&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||Se().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||Ee().duration}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||Ee().response.totalCountFiltered}},pa=ls;pa.fallbackPipelineName="default";var Gm=e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:n}=zm({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return n},Ym=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new pa(t)})=>{let i=t(),s=i.configuration.accessToken,o=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new da({token:s,endpoint:o,runtimeEnvironment:l,preprocessRequest:bt(e,n),beforeSendHooks:[Rt(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:s},"Analytics request"),r)]},a);return u||c.disable(),c},Gl=()=>{let e=wr.getHistory().reverse().find((e=>"PageView"===e.name&&e.value));return e?e.value:""};function ds(e){let t=Km(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return of([e,...t,...r],(e=>e.uniqueId))}function Km(e){return e.childResults?e.childResults.flatMap((e=>[e,...Km(e)])):[]}var Er=()=>"";function aR(e){return Object.assign(e,{instantlyCallable:!0})}function nR(e,t){let r=t=>aR(X(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:a,preprocessRequest:i,logger:s}=n;return await(await t({getState:r,analyticsClientMiddleware:a,preprocessRequest:i,logger:s})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:a,logger:i})=>{let{description:s,log:o}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:a,logger:i});return{description:s,action:r((async(e,{getState:t,extra:r})=>await o({state:t(),extra:r})))}}}),n}var Zo=(e,t,r)=>function(...n){let a=1===n.length?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return sR(a)},oR=e=>"legacy"===e.configuration.analytics.analyticsMode,iR=e=>"next"===e.configuration.analytics.analyticsMode,sR=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:a,analyticsConfigurator:i,providerClass:s})=>(null!=r||(r=e=>new s(e)),nR(e,(async({getState:e,analyticsClientMiddleware:s,preprocessRequest:o,logger:l})=>{let u=[],c={log:async({state:e})=>{for(let t of u)await t(e)}},d=e(),f=i({getState:e,logger:l,analyticsClientMiddleware:s,preprocessRequest:o,provider:r(e)}),g=await t(f,e());c.description=null==g?void 0:g.description,u.push((async e=>{oR(e)&&await cR(g,r,e,l,f.coveoAnalyticsClient)}));let p=Gm(d);return u.push((async e=>{if(iR(e)&&a&&n){let t=n(e);await gR(p,a,t)}})),c})));async function cR(e,t,r,n,a){t((()=>r));let i=await(null==e?void 0:e.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:a,response:i},"Analytics response")}var Jm=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{e(t,r)}}),P=Zo(Ym,(e=>e),pa),gD=Zo(Am,Jm,as),hD=Zo(Bm,Jm,us),SD=Zo(Pm,(e=>e),os),Xm=Zo(Um,(e=>e),en),Me=(e,t)=>{var r;let n=-1,a=null==(r=t.search)?void 0:r.results;return n=eg(e,a),n<0&&(n=mR(e,a)),n<0&&(n=0),uR(e,n+(null!=(s=null==(i=t.pagination)?void 0:i.firstResult)?s:0),t);var i,s};function uR(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:pR(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:fR(e),queryPipeline:r.pipeline||Er()}}var ze=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Zm={urihash:new R,sourcetype:new R,permanentid:new R},ei={uniqueId:w,raw:new E({values:Zm}),title:w,uri:w,clickUri:w,rankingModifier:new R({required:!1,emptyAllowed:!0})};function lR(e){return Object.assign({},...Object.keys(Zm).map((t=>({[t]:e[t]}))))}function dR(e){return Object.assign({},...Object.keys(ei).map((t=>({[t]:e[t]}))),{raw:lR(e.raw)})}function pR(e){let t=e.raw.author;return K(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function fR(e){let t=e.raw.source;return K(t)?"unknown":t}var Ze=e=>new W(ei).validate(dR(e));function mR(e,t){for(let[r,n]of t.entries())if(-1!==eg(e,ds(n)))return r;return-1}function eg(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}async function gR(e,t,r){await e(t,r)}var Yl=e=>y(e,{evt:w,type:ue}),tg=e=>P("analytics/generic/search",(t=>{Yl(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)})),rg=e=>P("analytics/generic/click",((t,r)=>(Ze(e.result),Yl(e),t.makeClickEvent(e.evt,Me(e.result,r),ze(e.result),e.meta)))),ag=e=>P("analytics/generic/custom",(t=>(Yl(e),t.makeCustomEventWithType(e.evt,e.type,e.meta)))),ps=()=>P("analytics/interface/load",(e=>e.makeInterfaceLoad())),Ir=()=>P("analytics/interface/change",((e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2}))),fs=()=>P("analytics/interface/searchFromLink",(e=>e.makeSearchFromLink())),ms=e=>P("analytics/interface/omniboxFromLink",(t=>t.makeOmniboxFromLink(e))),Kl=()=>ue,ng=()=>w,wt=h("configuration/updateBasicConfiguration",(e=>y(e,{accessToken:ue,organizationId:ue,platformUrl:ue}))),et=h("configuration/updateSearchConfiguration",(e=>y(e,{apiBaseUrl:ue,pipeline:new R({required:!1,emptyAllowed:!0}),searchHub:ue,timezone:ue,locale:ue,authenticationProviders:new _({required:!1,each:w})}))),Or=h("configuration/updateAnalyticsConfiguration",(e=>(Ui()&&(e.enabled=!1),y(e,{enabled:new U({default:!0}),originContext:Kl(),originLevel2:Kl(),originLevel3:Kl(),apiBaseUrl:ue,nextApiBaseUrl:ue,runtimeEnvironment:new ie,anonymous:new U({default:!1}),deviceId:ue,userDisplayName:ue,documentLocation:ue,trackingId:ue,analyticsMode:new R({constrainTo:["legacy","next"],required:!1,default:"legacy"})})))),tn=h("configuration/analytics/disable"),rn=h("configuration/analytics/enable"),gs=h("configuration/analytics/originlevel2",(e=>y(e,{originLevel2:ng()}))),hs=h("configuration/analytics/originlevel3",(e=>y(e,{originLevel3:ng()}))),Ss={q:new R,enableQuerySyntax:new U,aq:new R,cq:new R,firstResult:new k({min:0}),numberOfResults:new k({min:0}),sortCriteria:new R,f:new E,fExcluded:new E,cf:new E,nf:new E,df:new E,debug:new U,sf:new E,tab:new R,af:new E},ae=h("searchParameters/restore",(e=>y(e,Ss))),kr=h("debug/enable"),an=h("debug/disable"),qr=()=>!1,nn=I(qr(),(e=>{e.addCase(kr,(()=>!0)).addCase(an,(()=>!1)).addCase(ae,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),Jl=h("history/undo"),Xl=h("history/redo"),fa=h("history/snapshot"),ti=X("history/back",(async(e,{dispatch:t})=>{t(Jl()),await t(re())})),ys=X("history/forward",(async(e,{dispatch:t})=>{t(Xl()),await t(re())})),re=X("history/change",(async(e,{getState:t})=>t().history.present)),on=h("pipeline/set",(e=>y(e,new R({required:!0,emptyAllowed:!0})))),sn=I(Er(),(e=>{e.addCase(on,((e,t)=>t.payload)).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase(et,((e,t)=>t.payload.pipeline||e))})),cn=h("searchHub/set",(e=>y(e,new R({required:!0,emptyAllowed:!0})))),un=I(Ft(),(e=>{e.addCase(cn,((e,t)=>t.payload)).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase(et,((e,t)=>t.payload.searchHub||e))})),xe=h("breadcrumb/deselectAll"),ln=h("breadcrumb/deselectAllNonBreadcrumbs"),Et=h("facet/updateFacetAutoSelection",(e=>y(e,{allow:new U({required:!0})}))),Zl=class extends pa{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:Se().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:Ee().duration}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:Ee().response.totalCountFiltered}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}},og=()=>P("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new Zl(e))),ed={id:w},hR={...ed,q:se},dn=h("instantResults/register",(e=>y(e,ed))),Tr=h("instantResults/updateQuery",(e=>y(e,hR))),pn=h("instantResults/clearExpired",(e=>y(e,ed))),vs=new k({required:!0,min:0}),fn=h("pagination/registerNumberOfResults",(e=>y(e,vs))),mn=h("pagination/updateNumberOfResults",(e=>y(e,vs))),gn=h("pagination/registerPage",(e=>y(e,vs))),It=h("pagination/updatePage",(e=>y(e,vs))),hn=h("pagination/nextPage"),Sn=h("pagination/previousPage"),tt=h("query/updateQuery",(e=>y(e,{q:new R,enableQuerySyntax:new U}))),yn=async(e,t)=>({analytics:{clientId:await Xe(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Gl()&&{pageId:Gl()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:"next"===e.analyticsMode}}),vn=async(e,t)=>{var r,n,a,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Xe(e.configuration.analytics),actionsHistory:wr.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(a=e.advancedSearchQueries)?void 0:a.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(i=e.advancedSearchQueries)?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await yn(e.configuration.analytics,t),...e.excerptLength&&!K(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},Cn=h("didYouMean/enable"),Cs=h("didYouMean/disable"),xn=h("didYouMean/automaticCorrections/disable"),xs=h("didYouMean/automaticCorrections/enable"),Ot=h("didYouMean/correction",(e=>y(e,w))),Fs=()=>P("analytics/didyoumean/click",(e=>e.makeDidYouMeanClick())),ig=()=>P("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic())),pt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});function bs(){return{contextValues:{}}}function Rs(){return{contextValues:{}}}function Fn(){return{enabled:!0}}function As(){return{freezeFacetOrder:!1,facets:{}}}function Ps(){return[]}function ws(){return{}}function Es(e){return!!e&&e.expiresAt&&Date.now()>=e.expiresAt}function rt(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function Is(){return{}}var Dr=(e=>(e.Ascending="ascending",e.Descending="descending",e))(Dr||{}),kt=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(kt||{}),lr=e=>{if(Ua(e))return e.map((e=>lr(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},ri=()=>({by:"relevancy"}),td=e=>({by:"date",order:e}),rd=(e,t)=>({by:"field",order:t,field:e}),ad=()=>({by:"qre"}),nd=()=>({by:"nosort"}),sg=new E({values:{by:new Ar({enum:kt,required:!0}),order:new Ar({enum:Dr}),field:new R}});function qt(){return lr(ri())}function Os(){return{}}function ks(){return{}}function cg(){return ai({})}function ai(e){var t,r,n;return{context:e.context||bs(),dictionaryFieldContext:e.dictionaryFieldContext||Rs(),facetSet:e.facetSet||Xa(),numericFacetSet:e.numericFacetSet||Ja(),dateFacetSet:e.dateFacetSet||Ka(),categoryFacetSet:e.categoryFacetSet||Ya(),automaticFacetSet:null!=(t=e.automaticFacetSet)?t:Ga(),pagination:e.pagination||rt(),query:e.query||Se(),tabSet:e.tabSet||ks(),advancedSearchQueries:e.advancedSearchQueries||pt(),staticFilterSet:e.staticFilterSet||Os(),querySet:e.querySet||Is(),instantResults:e.instantResults||ws(),sortCriteria:e.sortCriteria||qt(),pipeline:e.pipeline||Er(),searchHub:e.searchHub||Ft(),facetOptions:e.facetOptions||As(),facetOrder:null!=(r=e.facetOrder)?r:Ps(),debug:null!=(n=e.debug)?n:qr()}}var SR=new E({values:{undoneQuery:se},options:{required:!0}}),qs=()=>P("analytics/trigger/query",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null})),Ts=e=>P("analytics/trigger/query/undo",(t=>(y(e,SR),t.makeUndoTriggerQuery(e)))),Ds=()=>P("analytics/trigger/notify",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null})),Vs=()=>P("analytics/trigger/redirect",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null})),Ns=()=>P("analytics/trigger/execute",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null})),bn=h("trigger/query/ignore",(e=>y(e,new R({emptyAllowed:!0,required:!0})))),Ms=h("trigger/query/modification",(e=>y(e,new E({values:{originalQuery:ue,modification:ue}})))),od=()=>P("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Rn=e=>P("search/queryError",((t,r)=>{var n,a,i,s;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||Se().q,aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||pt().aq,cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||pt().cq,dq:(null==(s=r.advancedSearchQueries)?void 0:s.dq)||pt().dq,errorType:e.type,errorMessage:e.message})})),ii=Ue(Ls()),fg=Ue(ug()),Qs=Ue(Ls()),dg=Ue(lg());Qs.default.extend(dg.default);var ni="YYYY/MM/DD@HH:mm:ss",yR="1401-01-01";function ma(e,t){let r=(0,Qs.default)(e,t);return r.isValid()||t?r:(0,Qs.default)(e,ni)}function oi(e){return e.format(ni)}function pg(e){return oi(ma(e))===e}function js(e,t){let r=ma(e,t);if(!r.isValid())throw new Error(`Could not parse the provided date "${e}"${t?` with the format "${t}""`:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."}`);pd(r)}function pd(e){if(e.isBefore(yR))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}ii.default.extend(fg.default);var mg=["past","now","next"],gg=["minute","hour","day","week","month","quarter","year"],vR=e=>{let t="now"===e;return{amount:new k({required:!t,min:1}),unit:new R({required:!t,constrainTo:gg}),period:new R({required:!0,constrainTo:mg})}};function ga(e){if("string"==typeof e&&!Tt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?fd(e):e;new W(vR(t.period)).validate(t);let r=Sg(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);pd(r)}function hg(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Sg(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,ii.default)().subtract(r,n);case"next":return(0,ii.default)().add(r,n);case"now":return(0,ii.default)()}}function si(e){return oi(Sg(fd(e)))}function yg(e){return e.toLocaleLowerCase().split("-")}function Tt(e){let[t,r,n]=yg(e);if("now"===t)return!0;if(!mg.includes(t)||!gg.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function vg(e){return!!e&&"object"==typeof e&&"period"in e}function fd(e){let[t,r,n]=yg(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function CR(e){return ga(e),fd(e)}function Cg(e){return"dateRange"===e.type}function xg(e){return`start${e}`}function Fg(e){return`end${e}`}var xR=()=>({dateFacetValueMap:{}});function FR(e,t,r){let n=e.start,a=e.end;return Tt(n)&&(n=si(n),r.dateFacetValueMap[t][xg(n)]=e.start),Tt(a)&&(a=si(a),r.dateFacetValueMap[t][Fg(a)]=e.end),{...e,start:n,end:a}}function bR(e,t){if(Cg(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>FR(e,r,t)))}}return e}function Bs(e){var t;let r=xR();return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>bR(e,r)))},mappings:r}}function RR(e,t,r){return{...e,start:r.dateFacetValueMap[t][xg(e.start)]||e.start,end:r.dateFacetValueMap[t][Fg(e.end)]||e.end}}function AR(e,t){return e.facetId in t.dateFacetValueMap}function PR(e,t){return AR(e,t)?{...e,values:e.values.map((r=>RR(r,e.facetId,t)))}:e}function bg(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>PR(e,t)))}}:e}function An(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let a=Object.values(r);return[...n,...a]}function dr(e){return Object.values(e).map((e=>e.request))}var ha=1,ci=5e3,at=async(e,t)=>{var r,n;let a=TR(e),i=wR(e),s=ER(e);return Bs({...await vn(e,t),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...a&&{cq:a},...i.length&&{facets:i},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>ci?ci-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:s}},...(null==(n=e.generatedAnswer)?void 0:n.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function wR(e){var t;return An(OR(e),null!=(t=e.facetOrder)?t:[])}function ER(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map((e=>e.response)).map(IR).filter((e=>e.currentValues.length>0)):void 0}function IR(e){let{field:t,label:r,values:n}=e;return{field:t,label:r,currentValues:n.filter((e=>"selected"===e.state))}}function OR(e){return kR(e).filter((({facetId:t})=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a}))}function kR(e){var t,r,n,a;return[...qR(null!=(t=e.facetSet)?t:{}),...Rg(null!=(r=e.numericFacetSet)?r:{}),...Rg(null!=(n=e.dateFacetSet)?n:{}),...dr(null!=(a=e.categoryFacetSet)?a:{})]}function qR(e){return dr(e).map((e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Rg(e){return dr(e).map((e=>{let t=e.currentValues.some((({state:e})=>"idle"!==e));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function TR(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive));return[r,(null==n?void 0:n.expression.trim())||"",...DR(e)].filter((e=>!!e)).join(" AND ")}function DR(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var Sa=class{constructor(e,t=(e=>{this.dispatch(tt({q:e}))})){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let a=(new Date).getTime();return{response:bg(await this.extra.apiClient.search(t,r),e),duration:(new Date).getTime()-a,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Ie(e.response)?(this.dispatch(Rn(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:s}=r;if(0!==i.length||0===s.length||!n||!a)return null;let o=this.getCurrentQuery(),{correctedQuery:l}=r.queryCorrections[0],u=await this.automaticallyRetryQueryWithCorrection(l);return Ie(u.response)?(this.dispatch(Rn(u.response.error)),this.rejectWithValue(u.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra),this.dispatch(fa(ai(this.getState()))),{...u,response:{...u.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:o,analyticsAction:ig()})}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find((e=>"query"===e.type)))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(bn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),s=await this.automaticallyRetryQueryWithTriggerModification(a);return Ie(s.response)?(this.dispatch(Rn(s.response.error)),this.rejectWithValue(s.response.error)):(this.dispatch(fa(ai(this.getState()))),{...s,response:{...s.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:qs()})}processSuccessResponse(e){return this.dispatch(fa(ai(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return $f(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await at(this.getState()),{origin:"mainSearch"});return this.dispatch(Ot(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Ms({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await at(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,t,r,n){var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)?i:Se().enableQuerySyntax},search:{...Ee(),duration:t,response:n,results:n.results}}}getCurrentQuery(){var e;let t=this.getState();return void 0!==(null==(e=t.query)?void 0:e.q)?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}},Us=X("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;y(e,{q:new R,enableQuerySyntax:new U,clearFilters:new U}),e.clearFilters&&(r(xe()),r(ln())),r(Et({allow:!0})),r(tt({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(It(1))})),F=X("search/executeSearch",(async(e,t)=>{let r=t.getState();Ag(r);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:s}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),o=await at(r,s),l=new Sa({...t,analyticsAction:e}),u=await l.fetchFromAPI(o,{origin:"mainSearch"});return await l.process(u)})),qe=X("search/fetchPage",(async(e,t)=>{let r=t.getState();Ag(r);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:s}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),o=new Sa({...t,analyticsAction:e}),l=await at(r,s),u=await o.fetchFromAPI(l,{origin:"mainSearch"});return await o.process(u)})),nt=X("search/fetchMoreResults",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:s}=await od().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),o=new Sa({...t,analyticsAction:od()}),l=await VR(r,s),u=await o.fetchFromAPI(l,{origin:"mainSearch"});return await o.process(u)})),Qe=X("search/fetchFacetValues",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:s}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),o=new Sa({...t,analyticsAction:e}),l=await MR(r,s),u=await o.fetchFromAPI(l,{origin:"facetValues"});return await o.process(u)})),Vr=X("search/fetchInstantResults",(async(e,t)=>{y(e,{id:w,q:w,maxResultsPerQuery:new k({required:!0,min:1}),cacheTimeout:new k});let{q:r,maxResultsPerQuery:n}=e,a=t.getState(),i=new Sa({...t,analyticsAction:og()},(r=>{t.dispatch(Tr({q:r,id:e.id}))})),s=await NR(a,r,n),o=await i.fetchFromAPI(s,{origin:"instantResults",disableAbortWarning:!0}),l=await i.process(o);return"response"in l?{results:l.response.results,searchUid:l.response.searchUid,analyticsAction:l.analyticsAction,totalCountFiltered:l.response.totalCountFiltered,duration:l.duration}:l})),VR=async(e,t)=>{var r,n,a,i;let s=await at(e,t);return s.request={...s.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(i=null==(a=e.search)?void 0:a.results.length)?i:0)},s},NR=async(e,t,r)=>Bs({...await vn(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t}),MR=async(e,t)=>{let r=await at(e,t);return r.request.numberOfResults=0,r},Ag=e=>{var t;e.configuration.analytics.enabled&&wr.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},pr=(e,t)=>{let r=e;return K(r[t])?K(e.raw[t])?null:e.raw[t]:r[t]},Pg=e=>t=>e.every((e=>!K(pr(t,e)))),wg=e=>t=>e.every((e=>K(pr(t,e)))),Eg=(e,t)=>r=>{let n=Og(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},Ig=(e,t)=>r=>{let n=Og(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},Og=(e,t)=>{let r=pr(t,e);return Qi(r)?r:[r]};function _s(e){return""!==e.search.response.searchUid}function kg(e,t,r){return e.search.results.find((e=>pr(e,t)===r))}function md(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response=Ee().response,e.results=[],e.questionAnswer=_a()),e.error=n,e.isLoading=!1}function gd(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function LR(e,t){gd(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function hd(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var B=I(Ee(),(e=>{e.addCase(F.rejected,((e,t)=>md(e,t))),e.addCase(nt.rejected,((e,t)=>md(e,t))),e.addCase(qe.rejected,((e,t)=>md(e,t))),e.addCase(F.fulfilled,((e,t)=>{LR(e,t)})),e.addCase(nt.fulfilled,((e,t)=>{gd(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(qe.fulfilled,((e,t)=>{gd(e,t),e.results=t.payload.response.results})),e.addCase(Qe.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(F.pending,hd),e.addCase(nt.pending,hd),e.addCase(qe.pending,hd)})),qg=I(Ko,(e=>e)),Tg=e=>t=>r=>{var n,a;let i=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==i&&(null==(a=r.payload)||delete a.analyticsAction);let s=t(r);return"search/executeSearch/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with product recommendation:",r),void 0!==i&&e.dispatch(i),s},jg=Ue(Vg()),Pn=h("tab/register",(e=>{let t=new E({values:{id:w,expression:se}});return y(e,t)})),ft=h("tab/updateActiveTab",(e=>y(e,w))),$s=Ue(Ls()),Lg=Ue(Ng()),Qg=Ue(Mg());$s.default.extend(Qg.default),$s.default.extend(Lg.default);var xd="/rest/search/v2",Fd="/rest/ua",wn=()=>({organizationId:"",accessToken:"",platformUrl:Gi(),search:{apiBaseUrl:`${Gi()}${xd}`,locale:"en-US",timezone:$s.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Al()}${Fd}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}});function QR(e,t){if(vf(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Fd;let r=Cf(e,t);return r?$o(t,r.environment).analytics:e}var Hs=I(wn(),(e=>e.addCase(wt,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${xd}`,e.analytics.apiBaseUrl=QR(t.payload.platformUrl,e.organizationId))})).addCase(et,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Or,((e,t)=>{K(t.payload.enabled)||(!t.payload.enabled&&e.analytics.enabled&&jl(e.analytics),e.analytics.enabled=t.payload.enabled),K(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),K(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),K(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),K(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),K(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),K(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),K(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),(0,jg.default)()&&(e.analytics.analyticsMode="next"),K(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),K(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),K(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),K(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),K(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(tn,(e=>{e.analytics.enabled=!1,jl(e.analytics)})).addCase(rn,(e=>{e.analytics.enabled=!0})).addCase(gs,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(hs,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(ft,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(ae,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),L=Hs;function jR(e){return e.instantlyCallable}var Bg=()=>e=>t=>e(jR(t)?t():t),Ug=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;return(null==(n=r.payload)?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},_g=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function $g(e,t){let r,n={...e};return{get combinedReducer(){return e=Li({...sf(Object.entries(t).filter((([e])=>!(e in n))).map((([e,t])=>[e,()=>t]))),...n}),(t,n)=>{let a=e(t,n);return r?r(a,n):a};var e},containsAll:e=>Object.keys(e).every((e=>e in n)),add(e){Object.keys(e).filter((e=>!(e in n))).forEach((t=>n[t]=e[t]))},addCrossReducer(e){r=e}}}function Ws(e,t,r){var n,a,i;void 0===t&&(t=50),void 0===r&&(r={});var s=null!=(n=r.isImmediate)&&n,o=null!=(a=r.callback)&&a,l=r.maxWait,u=Date.now(),c=[],d=function(){var r=[].slice.call(arguments),n=this;return new Promise((function(a,d){var f=s&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,u=Date.now(),!s){var t=e.apply(n,r);o&&o(t),c.forEach((function(e){return(0,e.resolve)(t)})),c=[]}}),function(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}()),f){var g=e.apply(n,r);return o&&o(g),a(g)}c.push({resolve:a,reject:d})}))};return d.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},d}function Hg(e,t){let r=0,n=Ws((()=>r=0),500);return a=>i=>async s=>{if("function"!=typeof s)return i(s);let o=await i(s);if(!BR(o))return o;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),o;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),o;r++,n();let l=await UR(t);a.dispatch(wt({accessToken:l})),a.dispatch(s)}}function BR(e){var t;return(null==(t=null==e?void 0:e.error)?void 0:t.name)===(new _o).name}async function UR(e){try{return await e()}catch(e){return""}}function Wg({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return Gp({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:a,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),_g(n.logger)]})}var _R={configuration:L,version:qg};function $R(e,t){var r,n;let a=(null==(r=e.configuration.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:i,...s}=null!=(n=e.configuration.analytics)?n:{},o={...s,nextApiBaseUrl:`${a}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:a};return Ui()?(t.info("Analytics disabled since doNotTrack is active."),{...o,enabled:!1}):o}function zg(e,t){var r;let n=HR(e,t),{accessToken:a,organizationId:i}=e.configuration,{organizationEndpoints:s}=e.configuration,o=(null==s?void 0:s.platform)||e.configuration.platformUrl;YR(e)&&n.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),GR(e)?n.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):KR(e)&&n.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${null==(r=e.configuration.organizationEndpoints)?void 0:r.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),n.dispatch(wt({accessToken:a,organizationId:i,platformUrl:o}));let l=$R(e,n.logger);return l&&n.dispatch(Or(l)),n}function HR(e,t){var r;let{reducers:n}=e,a=$g({..._R,...n},null!=(r=e.preloadedState)?r:{});e.crossReducer&&a.addCrossReducer(e.crossReducer);let i=t.logger,s=WR(e,t,a);return{addReducers(e){a.containsAll(e)||(a.add(e),s.replaceReducer(a.combinedReducer))},dispatch:s.dispatch,subscribe:s.subscribe,enableAnalytics(){s.dispatch(rn())},disableAnalytics(){s.dispatch(tn())},get state(){return s.getState()},logger:i,store:s}}function WR(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",s=zR(e,t.logger);return Wg({preloadedState:n,reducer:r.combinedReducer,middlewares:s,thunkExtraArguments:t,name:i})}function zR(e,t){let{renewAccessToken:r}=e.configuration,n=Hg(t,r);return[Bg,n,Ug(t),Tg].concat(e.middlewares||[])}function GR(e){return Ce(e.configuration.organizationEndpoints)}function YR(e){var t;return!K(e.configuration.platformUrl)||K(null==(t=e.configuration.organizationEndpoints)?void 0:t.platform)}function KR(e){let{platform:t}=e.configuration.organizationEndpoints;if(Ce(t))return!1;let r=ml(t);return r&&r.organizationId!==e.configuration.organizationId}var rh=Ue(th());function ah(e){return(0,rh.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter}})}function nh(e,t){return{analyticsClientMiddleware:mA(e),validatePayload:Ke,preprocessRequest:gA(e),logger:t}}function mA(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}function gA(e){return e.preprocessRequest||Wi}var oh=Ue(ul()),wd=(e,t,r,n,a,i)=>{let s=e[t];K(s)||K(a)||a!==s&&a!==n&&(i.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),i.warn(`To remove this warning, make sure that access token value [${s}] matches engine configuration value [${r}]`))},Ed=(e,t)=>!(K(e)||t===e),di=e=>{try{let t=("undefined"!=typeof atob?atob:oh.atob)(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"));if(!t)return!1;let r=decodeURIComponent(t.split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(r)}catch(e){return!1}},ih=(e,t)=>(Ed(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),sh=(e,t,r,n)=>(wd(e,"searchHub",t.searchHub,Ft(),r,n),ih(e,t)),ch=(e,t)=>(Ed(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),uh=(e,t,r,n)=>(wd(e,"pipeline",t.pipeline,Er(),r,n),ch(e,t)),lh=(e,t)=>(Ed(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),hA=(e,t,r,n)=>(wd(e,"userDisplayName",t.configuration.analytics.userDisplayName,wn().analytics.userDisplayName,r,n),lh(e,t)),dh=e=>I({},(t=>{t.addCase(cn,((t,r)=>{let n=di(t.configuration.accessToken);return n?sh(n,t,r.payload,e):t})).addCase(on,((t,r)=>{let n=di(t.configuration.accessToken);return n?uh(n,t,r.payload,e):t})).addCase(wt,((e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=di(r);return n?[ch,ih,lh].reduce(((e,t)=>t(n,e)),e):e})).addCase(et,((t,r)=>{var n;let a=di(t.configuration.accessToken);if(!a)return t;let i=sh(a,t,r.payload.searchHub,e);return uh(a,i,null==(n=r.payload)?void 0:n.pipeline,e)})).addCase(Or,((t,r)=>{let n=di(t.configuration.accessToken);return n?hA(n,t,r.payload.userDisplayName,e):t}))})),ph={organizationId:w,accessToken:w,platformUrl:new R({required:!1,emptyAllowed:!1}),name:new R({required:!1,emptyAllowed:!1}),analytics:new E({options:{required:!1},values:{enabled:new U({required:!1}),originContext:new R({required:!1}),originLevel2:new R({required:!1}),originLevel3:new R({required:!1}),analyticsMode:new R({constrainTo:["legacy","next"],required:!1})}})};function fh(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:$o("searchuisamples")}}var mh=new W({...ph,search:new E({options:{required:!1},values:{pipeline:new R({required:!1,emptyAllowed:!0}),searchHub:ue,locale:ue,timezone:ue,authenticationProviders:new _({required:!1,each:w})}})});function gh(){return{...fh(),search:{searchHub:"default"}}}var SA={debug:nn,pipeline:sn,searchHub:un,search:B};function yA(e){var t;return{...e.configuration.search,apiBaseUrl:(null==(t=e.configuration.organizationEndpoints)?void 0:t.search)||void 0}}function hh(e){let t=ah(e.loggerOptions);vA(e.configuration,t);let r=CA(e.configuration,t),n=xA(t),a={...nh(e.configuration,t),apiClient:r,streamingClient:n},i=zg({...e,reducers:SA,crossReducer:dh(t)},a),s=yA(e);return s&&i.dispatch(et(s)),{...i,get state(){return i.state},executeFirstSearch(e=ps()){if(_s(i.state))return;let t=F(e);i.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e,n=r&&"omniboxFromLink"===t?ms(r):fs();this.executeFirstSearch(n)}}}function vA(e,t){try{mh.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}function CA(e,t){let{search:r}=e;return new Pl({logger:t,preprocessRequest:e.preprocessRequest||Wi,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||Hf,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||Wf,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||zf})}function xA(e){return new hl({logger:e})}function FA(e){return/^search\/executeSearch\/(fulfilled|rejected)$/.test(e.type)}function bA(e){var t;let{middleware:r,promise:n}=uf(FA),a=hh({...e,middlewares:[...null!=(t=e.middlewares)?t:[],r]});return{...a,get state(){return a.state},waitForSearchCompletedAction:()=>n}}function RA({controllers:e,...t}){let r=async(...[r])=>{let n=bA((null==r?void 0:r.extend)?await r.extend(t):t);return{engine:n,controllers:lf({definitionsMap:null!=e?e:{},engine:n,propsMap:r&&"controllers"in r?r.controllers:{}})}},n=dl((async(...e)=>{let t=await r(...e);return await n.fromBuildResult({buildResult:t})}),{fromBuildResult:async(...e)=>{let[{buildResult:{engine:t,controllers:r}}]=e;return t.executeFirstSearch(),df({searchAction:await t.waitForSearchCompletedAction(),controllers:r})}}),a=dl((async(...e)=>{let t=await r(...e);return await a.fromBuildResult({buildResult:t,searchAction:e[0].searchAction})}),{fromBuildResult:async(...e)=>{let[{buildResult:{engine:t,controllers:r},searchAction:n}]=e;return t.dispatch(n),await t.waitForSearchCompletedAction(),{engine:t,controllers:r}}});return{build:r,fetchStaticState:n,hydrateStaticState:a}}var Sh=e=>{if(!e)return null;let t=/Document weights:\n((?:.)*?)\n+/g.exec(e),r=/Terms weights:\n((?:.|\n)*)\n+/g.exec(e),n=/Total weight: ([0-9]+)/g.exec(e),a=PA(e);return{documentWeights:yh(t?t[1]:null),termsWeight:AA(r),totalWeight:n?Number(n[1]):null,qreWeights:a}},yh=e=>{let t=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let r=e.match(/(\w+(?:\s\w+)*): ([-0-9]+)/g);if(!r)return null;let n={};for(let e of r){let r=e.match(t);if(r){let e=r[1],t=r[2];n[e]=Number(t)}}return n},vh=(e,t)=>{let r,n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},AA=e=>{let t=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let r=vh(e[1],/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g);if(!r)return null;let n={};for(let e of r){let r=vh(e[1],t),a={};for(let e of r)a[e[1]]={Correlation:Number(e[2]),"TF-IDF":Number(e[3])};let i=yh(e[2]);n[Object.keys(a).join(", ")]={terms:a,Weights:i}}return n},PA=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Ch(e){return e.search.response.results.map((e=>({result:e,ranking:Sh(e.rankingInfo)})))}var wA=new _({each:w,required:!0}),Nr=h("fields/registerFieldsToInclude",(e=>y(e,wA))),En=h("fields/fetchall/enable"),va=h("fields/fetchall/disable"),In=X("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:s}=a.configuration,{apiBaseUrl:o}=a.configuration.search,l=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:s,url:o});return Ie(l)?n(l.error):l.success.fields})),Id={collectionField:new R({emptyAllowed:!1,required:!1}),parentField:new R({emptyAllowed:!1,required:!1}),childField:new R({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new k({min:0,required:!1})},Mr=h("folding/register",(e=>y(e,Id))),Lr=X("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await vn(a),s=await n.search({...i,q:EA(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Ie(s)?r(s.error):{collectionId:e,results:s.success.results,rootResult:a.folding.collections[e].result}}));function EA(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Js=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),Od=["author","language","urihash","objecttype","collection","source","permanentid"],xh=[...Od,"date","filetype","parents"],IA=[...xh,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Fh=()=>({fieldsToInclude:Od,fetchAllFields:!1,fieldsDescription:[]}),Qr=I(Fh(),(e=>e.addCase(Nr,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(En,(e=>{e.fetchAllFields=!0})).addCase(va,(e=>{e.fetchAllFields=!1})).addCase(In.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(Mr,((e,{payload:t})=>{var r,n,a;let i=Js().fields;e.fieldsToInclude.push(null!=(r=t.collectionField)?r:i.collection,null!=(n=t.parentField)?n:i.parent,null!=(a=t.childField)?a:i.child)}))));function V(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(a){a();let i,s=Symbol();return n()&&(t=JSON.stringify(this.state),i=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(s,a),()=>{r.delete(s),n()&&i&&i()}},get state(){return{}}}}var OA=new W({enabled:new U({default:!1})});function bh(e,t={}){if(!kA(e))throw A;let r=V(e),{dispatch:n}=e;Oe(e,OA,t.initialState,"buildRelevanceInspector").enabled&&n(kr());let a=t=>{e.logger.warn(`Flag [ ${t} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let t=e.state,r=t.debug;if(!t.debug)return{isEnabled:r};let{executionReport:n,basicExpression:a,advancedExpression:i,constantExpression:s,userIdentities:o,rankingExpressions:l}=t.search.response,{fieldsDescription:u,fetchAllFields:c}=t.fields;return{isEnabled:r,rankingInformation:Ch(t),executionReport:n,expressions:{basicExpression:a,advancedExpression:i,constantExpression:s},userIdentities:o,rankingExpressions:l,fieldsDescription:u,fetchAllFields:c}},enable(){n(kr()),a("debug")},disable(){n(an()),n(va())},enableFetchAllFields(){n(En()),a("fetchAllFields")},disableFetchAllFields(){n(va())},fetchFieldsDescription(){!this.state.isEnabled&&n(kr()),n(In()),a("fieldsDescription"),e.logger.warn("For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.\n        \n        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions\n        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude")}}}function kA(e){return e.addReducers({debug:nn,search:B,configuration:L,fields:Qr}),!0}var qA=e=>({build:t=>bh(t,e)}),TA=new _({each:w,required:!0}),Rh=(e,t)=>(y(e,w),Ba(t)?y(t,w):y(t,TA),{payload:{contextKey:e,contextValue:t}}),On=h("context/set",(e=>{for(let[t,r]of Object.entries(e))Rh(t,r);return{payload:e}})),kn=h("context/add",(e=>Rh(e.contextKey,e.contextValue))),qn=h("context/remove",(e=>y(e,w))),Xs=I(bs(),(e=>{e.addCase(On,((e,t)=>{e.contextValues=t.payload})).addCase(kn,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(qn,((e,t)=>{delete e.contextValues[t.payload]})).addCase(re.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))}));function Ah(e){if(!DA(e))throw A;let t=V(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(On(e))},add(e,t){r(kn({contextKey:e,contextValue:t}))},remove(e){r(qn(e))}}}function DA(e){return e.addReducers({context:Xs}),!0}function Ph(e){return Ah(e)}var VA=()=>({build:e=>Ph(e)}),Tn=h("dictionaryFieldContext/set",(e=>{let t=new E({options:{required:!0}}),r=y(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new _({each:se}),i=y(n,a).error;return i?{payload:e,error:i}:{payload:e}})),Dn=h("dictionaryFieldContext/add",(e=>{let t=new E({options:{required:!0},values:{field:se,key:se}});return y(e,t)})),Vn=h("dictionaryFieldContext/remove",(e=>y(e,se))),Zs=I(Rs(),(e=>{e.addCase(Tn,((e,t)=>{e.contextValues=t.payload})).addCase(Dn,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(Vn,((e,t)=>{delete e.contextValues[t.payload]})).addCase(re.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));function wh(e){if(!NA(e))throw A;let t=V(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.dictionaryFieldContext.contextValues}},set(e){r(Tn(e))},add(e,t){r(Dn({field:e,key:t}))},remove(e){r(Vn(e))}}}function NA(e){return e.addReducers({dictionaryFieldContext:Zs}),!0}var MA=()=>({build:e=>wh(e)}),ec=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function Eh(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:ec(),originalQuery:"",automaticallyCorrectQuery:!0}}var tc=I(Eh(),(e=>{e.addCase(Cn,(e=>{e.enableDidYouMean=!0})).addCase(Cs,(e=>{e.enableDidYouMean=!1})).addCase(xs,(e=>{e.automaticallyCorrectQuery=!0})).addCase(xn,(e=>{e.automaticallyCorrectQuery=!1})).addCase(F.pending,(e=>{e.queryCorrection=ec(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(F.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||ec(),e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(Ot,((e,t)=>{e.wasCorrectedTo=t.payload}))}));function Ih(e,t={}){if(!LA(e))throw A;let r=V(e),{dispatch:n}=e;return n(Cn()),!1===t.automaticallyCorrectQuery&&n(xn()),{...r,get state(){let t=e.state;return{originalQuery:t.didYouMean.originalQuery,wasCorrectedTo:t.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:t.didYouMean.wasAutomaticallyCorrected,queryCorrection:t.didYouMean.queryCorrection,hasQueryCorrection:""!==t.didYouMean.queryCorrection.correctedQuery||""!==t.didYouMean.wasCorrectedTo}},applyCorrection(){n(Ot(this.state.queryCorrection.correctedQuery))}}}function LA(e){return e.addReducers({configuration:L,didYouMean:tc}),!0}function Oh(e){let t=Ih(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(F(Fs()))}}}var QA=()=>({build:e=>Oh(e)}),$=w,Z=h("facetOptions/update",((e={freezeFacetOrder:!0})=>y(e,{freezeFacetOrder:new U({required:!1})}))),je=h("facetOptions/facet/enable",(e=>y(e,$))),ge=h("facetOptions/facet/disable",(e=>y(e,$))),pi={facetId:$,captions:new E({options:{required:!1}}),numberOfValues:new k({required:!1,min:1}),query:new R({required:!1,emptyAllowed:!0})},jA={path:new _({required:!0,each:w}),displayValue:se,rawValue:se,count:new k({required:!0,min:0})},Nn=h("categoryFacet/selectSearchResult",(e=>y(e,{facetId:$,value:new E({values:jA})}))),Mn=h("categoryFacetSearch/register",(e=>y(e,pi)));function Ln(e,t){var r;let{facetId:n,criterion:a}=t,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)}function fi(e){!e||(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function rc(e,t){!e||(e.numberOfValues=t)}function ac(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function kd(e,t,r){e.currentValues=BA(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function BA(e,t){if(!e.length)return[];let r=kh(e[0],t),n=r;for(let r of e.splice(1)){let e=kh(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}function kh(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var UA={state:new ie({required:!0}),numberOfResults:new k({required:!0,min:0}),value:new R({required:!0,emptyAllowed:!0}),path:new _({required:!0,each:w}),moreValuesAvailable:new U({required:!1})};function qd(e){e.children.forEach((e=>{qd(e)})),Ke({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},UA)}var Qn={facetId:$,field:w,delimitingCharacter:new R({required:!1,emptyAllowed:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new ie({required:!1}),basePath:new _({required:!1,each:w}),filterByBasePath:new U({required:!1})},Dt=h("categoryFacet/register",(e=>y(e,Qn))),jr=h("categoryFacet/toggleSelectValue",(e=>{try{return Ke(e.facetId,w),qd(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:cr(t)}}})),Vt=h("categoryFacet/deselectAll",(e=>y(e,Qn.facetId))),Ca=h("categoryFacet/updateNumberOfValues",(e=>y(e,{facetId:Qn.facetId,numberOfValues:Qn.numberOfValues}))),jn=h("categoryFacet/updateSortCriterion",(e=>y(e,{facetId:Qn.facetId,criterion:new ie}))),nc=h("categoryFacet/updateBasePath",(e=>y(e,{facetId:Qn.facetId,basePath:new _({each:w})}))),Nt=I(Ya(),(e=>{e.addCase(Dt,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let a=$A(r),i=a.numberOfValues;e[n]={request:a,initialNumberOfValues:i}})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e})).addCase(ae,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&kd(n,a,e[t].initialNumberOfValues)}))})).addCase(jn,((e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)})).addCase(nc,((e,t)=>{var r;let{facetId:n,basePath:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.basePath=[...a])})).addCase(jr,((e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,s=null==(r=e[n])?void 0:r.request;if(!s)return;let{path:o}=a,l=_A(s,o.slice(0,o.length-1),i);if(l.length){let e=l[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}let u=qh(a.value,i);u.state="selected",l.push(u),s.numberOfValues=1})).addCase(Vt,((e,t)=>{ac(e,t.payload)})).addCase(xe,(e=>{Object.keys(e).forEach((t=>ac(e,t)))})).addCase(Et,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(Ca,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return rc(i,a);HA(e,t.payload)}})).addCase(Nn,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];kd(a.request,i,a.initialNumberOfValues)})).addCase(Qe.fulfilled,((e,t)=>{Th(e,t.payload.response.facets)})).addCase(F.fulfilled,((e,t)=>{Th(e,t.payload.response.facets)})).addCase(ge,((e,t)=>{ac(e,t.payload)}))})),mi={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function _A(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=qh(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}function $A(e){return{...mi,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function qh(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function Th(e,t){t.forEach((t=>{var r;if(!WA(e,t))return;let n=t.facetId,a=null==(r=e[n])?void 0:r.request;if(!a)return;let i=zA(a,t);a.currentValues=i?[]:a.currentValues,a.preventAutoSelect=!1}))}function HA(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&"selected"!==(null==i?void 0:i.state);)i=i.children[0];i.retrieveCount=a}}function WA(e,t){return t.facetId in e}function zA(e,t){let r=He(e.currentValues),n=He(t.values);return r.length!==n.length}function oc(e,t,r){let{facetId:n}=t;if(e[n])return;let a={...Mt,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function ic(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function sc(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function cc(e,t){let r=e[t];!r||(r.isLoading=!1)}function uc(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function gi(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=Mt.query)}function lc(e,t){Object.keys(e).forEach((r=>gi(e,{facetId:r},t)))}var Mt={captions:{},numberOfValues:10,query:""},Dh=async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:i,query:s,numberOfValues:o}=n,{field:l,delimitingCharacter:u,basePath:c,filterFacetCount:d}=a,f=GA(a),g=f.length?[f]:[],p=`*${s}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:c,captions:i,numberOfValues:o,query:p,field:l,delimitingCharacter:u,ignorePaths:g,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await at(t)).request}}},GA=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},Vh=async(e,t,r)=>{let{captions:n,query:a,numberOfValues:i}=t.facetSearchSet[e].options,{field:s,currentValues:o,filterFacetCount:l}=t.facetSet[e].request,u=o.filter((e=>"idle"!==e.state)).map((e=>e.value)),c=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:i,query:c,field:s,ignoreValues:u,filterFacetCount:l,type:"specific",...r?{}:{searchContext:(await at(t)).request}}},Nh=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i,s=r();return a(t,w),i=YA(s,t)?await Vh(t,s,e):await Dh(t,s,e),{facetId:t,response:await n.facetSearch(i)}},mt=X("facetSearch/executeSearch",Nh(!1)),Td=X("facetSearch/executeSearch",Nh(!0)),Bn=h("facetSearch/clearResults",(e=>y(e,{facetId:$}))),YA=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],Mh={facetId:$,value:new E({values:{displayValue:se,rawValue:se,count:new k({required:!0,min:0})}})},dc=h("facetSearch/register",(e=>y(e,pi))),Br=h("facetSearch/update",(e=>y(e,pi))),xa=h("facetSearch/toggleSelectValue",(e=>y(e,Mh))),hi=h("facetSearch/toggleExcludeValue",(e=>y(e,Mh)));function Lh(){return{}}var Un=I(Lh(),(e=>{e.addCase(Mn,((e,t)=>{oc(e,t.payload,Dd)})).addCase(Br,((e,t)=>{ic(e,t.payload)})).addCase(mt.pending,((e,t)=>{sc(e,t.meta.arg,t.meta.requestId)})).addCase(mt.rejected,((e,t)=>{cc(e,t.meta.arg)})).addCase(mt.fulfilled,((e,t)=>{uc(e,t.payload,t.meta.requestId)})).addCase(Bn,((e,{payload:{facetId:t}})=>{gi(e,{facetId:t},Dd)})).addCase(F.fulfilled,(e=>{lc(e,Dd)}))}));function Dd(){return{moreValuesAvailable:!1,values:[]}}var _n=e=>P("analytics/facet/showMore",((t,r)=>{y(e,$);let n=Za(e,We(r));return t.makeFacetShowMore(n)})),$n=e=>P("analytics/facet/showLess",((t,r)=>{y(e,$);let n=Za(e,We(r));return t.makeFacetShowLess(n)})),Lt=e=>P("analytics/facet/sortChange",((t,r)=>{y(e,{facetId:$,criterion:new ie({required:!0})});let{facetId:n,criterion:a}=e,i=We(r),s={...Za(n,i),criteria:a};return t.makeFacetUpdateSort(s)})),Re=e=>P("analytics/facet/reset",((t,r)=>{y(e,$);let n=We(r),a=Za(e,n);return t.makeFacetClearAll(a)})),ye=e=>P("analytics/facet/select",((t,r)=>{y(e,{facetId:$,facetValue:w});let n=We(r),a=Xo(e,n);return t.makeFacetSelect(a)})),gt=e=>P("analytics/facet/exclude",((t,r)=>{y(e,{facetId:$,facetValue:w});let n=We(r),a=Xo(e,n);return t.makeFacetExclude(a)})),Ge=e=>P("analytics/facet/deselect",((t,r)=>{y(e,{facetId:$,facetValue:w});let n=We(r),a=Xo(e,n);return t.makeFacetDeselect(a)})),Hn=e=>P("analytics/facet/breadcrumb",((t,r)=>{y(e,{facetId:$,facetValue:w});let n=Xo(e,We(r));return t.makeBreadcrumbFacet(n)})),Qt=(e,t)=>{var r,n;return null==(n=null==(r=e.facetOptions.facets[t])?void 0:r.enabled)||n},jt=new R({regex:/^[a-zA-Z0-9-_]+$/}),Bt=new R({required:!0}),Qh=new _({each:new R}),jh=new R,Bh=new U,Ut=new U,_t=new k({min:0}),ht=new k({min:1}),pc=new U({required:!0}),KA=new E,JA=new R,XA={captions:KA,numberOfValues:ht,query:JA},Wn=new E({values:XA}),fc=new E({options:{required:!1},values:{type:new R({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new _({required:!0,max:25,each:new R({emptyAllowed:!1,required:!0})})}}),Uh=new U,mc=new _({min:1,max:25,required:!1,each:new R({emptyAllowed:!1,required:!0})}),Fa={value:w,numberOfResults:new k({min:0}),state:w},ZA={facetId:$,field:new R({required:!0,emptyAllowed:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new ie({required:!1}),resultsMustMatch:new ie({required:!1}),allowedValues:fc,customSort:mc},$t=h("facet/register",(e=>y(e,ZA))),Ht=h("facet/toggleSelectValue",(e=>y(e,{facetId:$,selection:new E({values:Fa})}))),Ur=h("facet/toggleExcludeValue",(e=>y(e,{facetId:$,selection:new E({values:Fa})}))),de=h("facet/deselectAll",(e=>y(e,$))),zn=h("facet/updateSortCriterion",(e=>y(e,{facetId:$,criterion:new ie({required:!0})}))),ba=h("facet/updateNumberOfValues",(e=>y(e,{facetId:$,numberOfValues:new k({required:!0,min:1})}))),Ra=h("facet/updateIsFieldExpanded",(e=>y(e,{facetId:$,isFieldExpanded:new U({required:!0})}))),Aa=h("facet/updateFreezeCurrentValues",(e=>y(e,{facetId:$,freezeCurrentValues:new U({required:!0})})));function _r(e){var t,r;return{start:_h(e.start,e),end:_h(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function _h(e,t){let{dateFormat:r}=t;return vg(e)?(ga(e),hg(e)):"string"==typeof e&&Tt(e)?(ga(e),e):(js(e,r),oi(ma(e,r)))}var Gn=h("rangeFacet/updateSortCriterion",(e=>y(e,{facetId:$,criterion:new ie({required:!0})}))),Pa={state:w,start:new k({required:!0}),end:new k({required:!0}),endInclusive:new U({required:!0}),numberOfResults:new k({required:!0,min:0})},wa={start:w,end:w,endInclusive:new U({required:!0}),state:w,numberOfResults:new k({required:!0,min:0})},Ea=e=>({facetId:$,selection:"string"==typeof e.start?new E({values:wa}):new E({values:Pa})}),eP={start:w,end:w,endInclusive:new U({required:!0}),state:w},tP={facetId:$,field:w,currentValues:new _({required:!1,each:new E({values:eP})}),generateAutomaticRanges:new U({required:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new ie({required:!1}),rangeAlgorithm:new ie({required:!1})};function $h(e){return Tt(e)?si(e):e}function gc(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=_r(e);if(ma($h(t)).isAfter(ma($h(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Wt=h("dateFacet/register",(e=>{try{return Ke(e,tP),gc(e),{payload:e,error:null}}catch(t){return{payload:e,error:cr(t)}}})),zt=h("dateFacet/toggleSelectValue",(e=>y(e,{facetId:$,selection:new E({values:wa})}))),$r=h("dateFacet/toggleExcludeValue",(e=>y(e,{facetId:$,selection:new E({values:wa})}))),mr=h("dateFacet/updateFacetValues",(e=>{try{return Ke(e,{facetId:$,values:new _({each:new E({values:wa})})}),gc({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:cr(t)}}})),hc=Gn,Sc=de,rP={state:w,start:new k({required:!0}),end:new k({required:!0}),endInclusive:new U({required:!0})},aP={facetId:$,field:w,currentValues:new _({required:!1,each:new E({values:rP})}),generateAutomaticRanges:new U({required:!0}),filterFacetCount:new U({required:!1}),injectionDepth:new k({required:!1,min:0}),numberOfValues:new k({required:!1,min:1}),sortCriteria:new ie({required:!1}),rangeAlgorithm:new ie({required:!1})};function yc(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var Gt=h("numericFacet/register",(e=>{try{return y(e,aP),yc(e),{payload:e,error:null}}catch(t){return{payload:e,error:cr(t)}}})),Yt=h("numericFacet/toggleSelectValue",(e=>y(e,{facetId:$,selection:new E({values:Pa})}))),Hr=h("numericFacet/toggleExcludeValue",(e=>y(e,{facetId:$,selection:new E({values:Pa})}))),gr=h("numericFacet/updateFacetValues",(e=>{try{return Ke(e,{facetId:$,values:new _({each:new E({values:Pa})})}),yc({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:cr(t)}}})),vc=Gn,Cc=de,Te=I(As(),(e=>{e.addCase(Z,((e,t)=>({...e,...t.payload}))).addCase(F.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(F.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e})).addCase(Dt,((e,t)=>{e.facets[t.payload.facetId]=Fn()})).addCase($t,((e,t)=>{e.facets[t.payload.facetId]=Fn()})).addCase(Wt,((e,t)=>{e.facets[t.payload.facetId]=Fn()})).addCase(Gt,((e,t)=>{e.facets[t.payload.facetId]=Fn()})).addCase(je,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(ge,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(ae,((e,t)=>{var r,n,a,i,s;[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.fExcluded)?n:{}),...Object.keys(null!=(a=t.payload.cf)?a:{}),...Object.keys(null!=(i=t.payload.nf)?i:{}),...Object.keys(null!=(s=t.payload.df)?s:{})].forEach((t=>{t in e||(e.facets[t]=Fn()),e.facets[t].enabled=!0}))}))}));function Hh(e,t){let{field:r,state:n}=e;if(!nP(e))return r;let a=`${r}_`,i=oP(a,n);return sP(r,t),`${a}${i}`}function nP(e){let{field:t,state:r}=e;return Wh(r).some((e=>e&&t in e))}function oP(e,t){return iP(Wh(t).map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]),e)+1}function Wh(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}function iP(e,t){let r=e.map((e=>{let r=e.split(t)[1],n=parseInt(r,10);return Number.isNaN(n)?0:n})).sort().pop();return null!=r?r:0}function sP(e,t){let r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function De(e,t){let{state:r,logger:n}=e,{field:a,facetId:i}=t;return i||Hh({field:a,state:r},n)}var zh=["alphanumeric","occurrences"],Gh=new W({field:Bt,basePath:Qh,delimitingCharacter:jh,facetId:jt,facetSearch:Wn,filterByBasePath:Bh,filterFacetCount:Ut,injectionDepth:_t,numberOfValues:ht,sortCriteria:new R({constrainTo:zh})});function Yh(e,t){if(!cP(e))throw A;let r=V(e),{dispatch:n}=e,a=De(e,t.options),i={...mi,...ji("facetSearch",t.options),field:t.options.field,facetId:a},s={facetSearch:{...Mt,...t.options.facetSearch},...i};ce(e,Gh,s,"buildCategoryFacet");let o=()=>_l(e.state,a);return n(Dt(i)),{...r,toggleSelect(e){let t=s.numberOfValues;n(jr({facetId:a,selection:e,retrieveCount:t})),n(Z())},deselectAll(){n(Vt(a)),n(Z())},sortBy(e){n(jn({facetId:a,criterion:e})),n(Z())},isSortedBy:e=>o().sortCriteria===e,showMoreValues(){var e;let{numberOfValues:t}=s,{activeValue:r,valuesAsTrees:i}=this.state,o=(null!=(e=null==r?void 0:r.children.length)?e:i.length)+t;n(Ca({facetId:a,numberOfValues:o})),n(Z())},showLessValues(){let{numberOfValues:e}=s;n(Ca({facetId:a,numberOfValues:e})),n(Z())},enable(){n(je(a))},disable(){n(ge(a))},get state(){var t,r,n,i;let l=o(),u=Ul(e.state,a),c=Pt(e.state),d=Qt(e.state,a),f=null!=(t=null==u?void 0:u.values)?t:[],g=null!=(r=f.some((e=>e.children.length>0)))&&r,{parents:p,values:h}=km(null==u?void 0:u.values),v=He(f),m=v.length?v[v.length-1]:void 0,y=!!m,S=null!=(i=null!=(n=null==m?void 0:m.moreValuesAvailable)?n:null==u?void 0:u.moreValuesAvailable)&&i,b=m?m.children.length>s.numberOfValues:f.length>s.numberOfValues;return{facetId:a,parents:p,selectedValueAncestry:v,values:h,isHierarchical:g,valuesAsTrees:f,activeValue:m,isLoading:c,hasActiveValues:y,canShowMoreValues:S,canShowLessValues:b,sortCriteria:l.sortCriteria,enabled:d}}}}function cP(e){return e.addReducers({categoryFacetSet:Nt,categoryFacetSearchSet:Un,facetOptions:Te,configuration:L,search:B}),!0}function Yn(e,t){let r=e.dispatch,{options:n,getFacetSearch:a}=t,{facetId:i}=n;return{updateText(e){r(Br({facetId:i,query:e,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=a();r(Br({facetId:i,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?Td(i):mt(i))},search(){r(t.isForFieldSuggestions?Td(i):mt(i))},clear(){r(Bn({facetId:i}))},updateCaptions(e){r(Br({facetId:i,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=a(),{query:n}=r,i=e.values;return{...e,values:i,isLoading:t,query:n}}}}function Kh(e,t){let{dispatch:r}=e,n={...Mt,...t.options},{facetId:a}=n;r(Mn(n));let i=Yn(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a],isForFieldSuggestions:t.isForFieldSuggestions});return{...i,select(e){r(Nn({facetId:a,value:e}))},get state(){return i.state}}}function xc(e,t){let{dispatch:r}=e,n={...Mt,...t.options},{facetId:a}=n,i=Kh(e,{options:{...n},isForFieldSuggestions:t.isForFieldSuggestions});r(Mn(n));let s=Yn(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a],isForFieldSuggestions:t.isForFieldSuggestions});return{...s,...i,select:e=>{i.select(e),r(Z()),r(F(ye({facetId:a,facetValue:e.rawValue})))},get state(){return{...s.state,...i.state}}}}function Jh(e,t){if(!uP(e))throw A;let r=Yh(e,t),{dispatch:n}=e,a=()=>r.state.facetId,i=xc(e,{options:{facetId:a(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:s,...o}=i;return{...r,facetSearch:o,toggleSelect(e){r.toggleSelect(e);let t=lP(a(),e);n(F(t))},deselectAll(){r.deselectAll(),n(F(Re(a())))},sortBy(e){r.sortBy(e),n(F(Lt({facetId:a(),criterion:e})))},showMoreValues(){r.showMoreValues(),n(Qe(_n(a())))},showLessValues(){r.showLessValues(),n(Qe($n(a())))},get state(){return{...r.state,facetSearch:i.state}}}}function uP(e){return e.addReducers({categoryFacetSet:Nt,categoryFacetSearchSet:Un,configuration:L,search:B}),!0}function lP(e,t){let r={facetId:e,facetValue:t.value};return"selected"===t.state?Ge(r):ye(r)}var dP=e=>({build:t=>Jh(t,e)});function Xh(){return{}}var Kn=I(Xh(),(e=>{e.addCase(dc,((e,t)=>{oc(e,t.payload,Vd)})).addCase(Br,((e,t)=>{ic(e,t.payload)})).addCase(mt.pending,((e,t)=>{sc(e,t.meta.arg,t.meta.requestId)})).addCase(mt.rejected,((e,t)=>{cc(e,t.meta.arg)})).addCase(mt.fulfilled,((e,t)=>{uc(e,t.payload,t.meta.requestId)})).addCase(Bn,((e,{payload:t})=>{gi(e,t,Vd)})).addCase(F.fulfilled,(e=>{lc(e,Vd)}))}));function Vd(){return{moreValuesAvailable:!1,values:[]}}var Si=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Si||{}),Zh=(e=>(e.Ascending="asc",e.Descending="desc",e))(Zh||{}),b$=new E({options:{required:!1},values:{by:new Ar({enum:Si,required:!0}),fields:new _({each:new E({values:{name:new R,direction:new Ar({enum:Zh})}})})}}),eS=()=>Xm("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new en(e))),j$=h("productlisting/setUrl",(e=>y(e,{url:new R({required:!0,url:!0})}))),B$=h("productlisting/setAdditionalFields",(e=>y(e,{additionalFields:new _({required:!0,each:new R({required:!0,emptyAllowed:!1})})}))),Wr=X("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:s}=a,o=await s.getProducts(await pP(i));return Ie(o)?(r(Rn(o.error)),n(o.error)):{response:o.success,analyticsAction:eS()}})),pP=async e=>{var t,r,n;let a=mP(e),i=await Xe(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&fP(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||Si.Relevance)!==Si.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function fP(e){return e.debug}function mP(e){var t;return An(gP(e),null!=(t=e.facetOrder)?t:[])}function gP(e){var t,r,n,a;return[...dr(null!=(t=e.facetSet)?t:{}),...dr(null!=(r=e.numericFacetSet)?r:{}),...dr(null!=(n=e.dateFacetSet)?n:{}),...dr(null!=(a=e.categoryFacetSet)?a:{})]}var Kt=I(Xa(),(e=>{e.addCase($t,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=Vm(hP(t.payload)))})).addCase(re.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(ae,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:a}=e[t],i=r[t]||[],s=n[t]||[],o=a.currentValues.filter((e=>!i.includes(e.value)&&!s.includes(e.value)));a.currentValues=[...i.map(tS),...s.map(rS),...o.map(yP)],a.preventAutoSelect=i.length>0,a.numberOfValues=Math.max(i.length+s.length,a.numberOfValues)}))})).addCase(Ht,((e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let s=i.currentValues.find((e=>e.value===a.value));if(!s)return void Fc(i,a);let o="selected"===s.state;s.state=o?"idle":"selected",i.freezeCurrentValues=!0})).addCase(Ur,((e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let s=i.currentValues.find((e=>e.value===a.value));if(!s)return void Fc(i,a);let o="excluded"===s.state;s.state=o?"idle":"excluded",i.freezeCurrentValues=!0})).addCase(Aa,((e,t)=>{var r;let{facetId:n,freezeCurrentValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.freezeCurrentValues=a)})).addCase(de,((e,t)=>{var r;fi(null==(r=e[t.payload])?void 0:r.request)})).addCase(xe,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>fi(e)))})).addCase(ln,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>fi(e)))})).addCase(Et,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(zn,((e,t)=>{Ln(e,t.payload)})).addCase(ba,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload;rc(null==(r=e[n])?void 0:r.request,a)})).addCase(Ra,((e,t)=>{var r;let{facetId:n,isFieldExpanded:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.isFieldExpanded=a)})).addCase(F.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return Nd(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Wr.fulfilled,((e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach((t=>{var r;return Nd(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Qe.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return Nd(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(xa,((e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:s}=a,{currentValues:o}=i,l=o.find((e=>e.value===s));l?l.state="selected":(Fc(i,tS(s)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0)})).addCase(hi,((e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:s}=a,{currentValues:o}=i,l=o.find((e=>e.value===s));l?l.state="excluded":(Fc(i,rS(s)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0)})).addCase(ge,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];fi(r)}))}));function Fc(e,t){let{currentValues:r}=e,n=r.findIndex((e=>"idle"===e.state)),a=-1===n?r.length:n,i=r.slice(0,a),s=r.slice(a+1);e.currentValues=[...i,t,...s],e.numberOfValues=e.currentValues.length}function Nd(e,t){!e||(e.currentValues=t.values.map(SP),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var yi={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function hP(e){return{...yi,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function SP(e){let{value:t,state:r}=e;return{value:t,state:r}}function tS(e){return{value:e,state:"selected"}}function rS(e){return{value:e,state:"excluded"}}function yP(e){return{...e,state:"idle"}}var Md=e=>"selected"===e.state,Ld=e=>"excluded"===e.state,bc=(e,t)=>{let r={facetId:e,facetValue:t.value};return Md(t)?Ge(r):ye(r)},aS=(e,t)=>{let r={facetId:e,facetValue:t.value};return Ld(t)?Ge(r):gt(r)};function Rc(e,t){let{dispatch:r}=e,{options:n,select:a,exclude:i,isForFieldSuggestions:s}=t,{facetId:o}=n;r(dc(n));let l=Yn(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[o],isForFieldSuggestions:s});return{...l,select(e){r(xa({facetId:o,value:e})),a(e)},exclude(e){r(hi({facetId:o,value:e})),i(e)},singleSelect(e){r(de(o)),r(xa({facetId:o,value:e})),a(e)},singleExclude(e){r(de(o)),r(hi({facetId:o,value:e})),i(e)},get state(){let{values:e}=l.state;return{...l.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}var nS={facetId:$,selection:new E({values:Fa})},oS=X("facet/executeToggleSelect",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},nS),n(Ht({facetId:e,selection:t})),n(Z())})),iS=X("facet/executeToggleExclude",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},nS),n(Ur({facetId:e,selection:t})),n(Z())})),Jn=["allValues","atLeastOneValue"],Ac=["score","alphanumeric","alphanumericDescending","occurrences","automatic"],sS=new W({facetId:jt,field:Bt,filterFacetCount:Ut,injectionDepth:_t,numberOfValues:ht,sortCriteria:new R({constrainTo:Ac}),resultsMustMatch:new R({constrainTo:Jn}),facetSearch:Wn});function cS(e,t,r=sS){if(!vP(e))throw A;let{dispatch:n}=e,a=V(e),i=De(e,t.options),s={...yi,...ji("facetSearch",t.options),field:t.options.field,facetId:i},o={facetSearch:{...Mt,...t.options.facetSearch},...s};ce(e,r,o,"buildFacet");let l=()=>Bl(e.state,i),u=()=>{let{currentValues:e}=l(),t=o.numberOfValues,r=!!e.find((e=>"idle"===e.state));return t<e.length&&r};return n($t(s)),{...a,toggleSelect:e=>n(oS({facetId:o.facetId,selection:e})),toggleExclude:e=>n(iS({facetId:o.facetId,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&n(de(i)),this.toggleSelect(e)},toggleSingleExclude:function(e){"idle"===e.state&&n(de(i)),this.toggleExclude(e)},isValueSelected:Md,isValueExcluded:Ld,deselectAll(){n(de(i)),n(Z())},sortBy(e){n(zn({facetId:i,criterion:e})),n(Z())},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=l().numberOfValues,t=o.numberOfValues;n(ba({facetId:i,numberOfValues:e+(t-e%t)})),n(Ra({facetId:i,isFieldExpanded:!0})),n(Z())},showLessValues(){let e=o.numberOfValues,t=Math.max(e,(()=>{let{currentValues:e}=l();return e.filter((e=>"idle"!==e.state)).length})());n(ba({facetId:i,numberOfValues:t})),n(Ra({facetId:i,isFieldExpanded:!1})),n(Z())},enable(){n(je(i))},disable(){n(ge(i))},get state(){let t,r=l(),n=Jo(e.state,i),a=Pt(e.state),s=Qt(e.state,i);t="object"==typeof r.sortCriteria?"descending"===r.sortCriteria.order?"alphanumericDescending":"alphanumeric":r.sortCriteria;let o=n?n.values:[],c=o.some((e=>"idle"!==e.state)),d=!!n&&n.moreValuesAvailable,f=r.resultsMustMatch;return{facetId:i,values:o,sortCriterion:t,resultsMustMatch:f,isLoading:a,hasActiveValues:c,canShowMoreValues:d,canShowLessValues:u(),enabled:s}}}}function vP(e){return e.addReducers({facetSet:Kt,facetOptions:Te,configuration:L,facetSearchSet:Kn}),!0}var uS=new W({facetId:jt,field:Bt,filterFacetCount:Ut,injectionDepth:_t,numberOfValues:ht,sortCriteria:new R({constrainTo:Ac}),resultsMustMatch:new R({constrainTo:Jn}),facetSearch:Wn,allowedValues:fc,hasBreadcrumbs:Uh,customSort:mc});function lS(e,t){if(!CP(e))throw A;let{dispatch:r}=e,n=cS(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},uS),a=()=>n.state.facetId,i=(()=>{let{facetSearch:n}=t.options;return Rc(e,{options:{facetId:a(),...n},select:e=>{r(Z()),r(F(ye({facetId:a(),facetValue:e.rawValue})))},exclude:e=>{r(Z()),r(F(gt({facetId:a(),facetValue:e.rawValue})))},isForFieldSuggestions:!1})})(),{state:s,...o}=i;return{...n,facetSearch:o,toggleSelect(e){n.toggleSelect(e),r(F(bc(a(),e)))},toggleExclude(e){n.toggleExclude(e),r(F(aS(a(),e)))},deselectAll(){n.deselectAll(),r(F(Re(a())))},sortBy(e){n.sortBy(e),r(F(Lt({facetId:a(),criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(Qe(_n(a())))},showLessValues(){n.showLessValues(),r(Qe($n(a())))},get state(){return{...n.state,facetSearch:i.state}}}}function CP(e){return e.addReducers({facetSet:Kt,configuration:L,facetSearchSet:Kn,search:B}),!0}var xP=e=>({build:t=>lS(t,e)}),Qd=e=>"selected"===e.state,jd=e=>"excluded"===e.state,Pc=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return Qd(t)?Ge(r):ye(r)},dS=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return jd(t)?Ge(r):gt(r)},wc=h("rangeFacet/executeToggleSelect",(e=>y(e,Ea(e.selection)))),Ec=h("rangeFacet/executeToggleExclude",(e=>y(e,Ea(e.selection)))),pS={facetId:$,selection:new E({values:wa})},fS=X("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,pS),t(zt(e)),t(wc(e)),t(Z())})),mS=X("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,pS),t($r(e)),t(Ec(e)),t(Z())})),Ic={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Oc(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let a=gS(r);r.numberOfValues=a,e[n]=t}function kc(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;!a||(a.currentValues=r,a.numberOfValues=gS(a))}function qc(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=Vc(a.currentValues,r);if(!i)return;let s="selected"===i.state;i.state=s?"idle":"selected",a.preventAutoSelect=!0}function Tc(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=Vc(a.currentValues,r);if(!i)return;let s="excluded"===i.state;i.state=s?"idle":"excluded",a.preventAutoSelect=!0}function zr(e,t){var r;let n=null==(r=e[t])?void 0:r.request;!n||n.currentValues.forEach((e=>e.state="idle"))}function Dc(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!Vc(n,e);return e.state=t?"selected":"idle",e}));let a=n.filter((e=>!Vc(r.currentValues,e))),i=r.currentValues;i.push(...a),r.numberOfValues=Math.max(r.numberOfValues,i.length)}))}function Xn(e,t,r){t.forEach((t=>{var n;let a=t.facetId,i=null==(n=e[a])?void 0:n.request;if(!i)return;let s=r(t.values);i.currentValues=s,i.preventAutoSelect=!1}))}function Vc(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function gS(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Jt=I(Ka(),(e=>{e.addCase(Wt,((e,t)=>{let{payload:r}=t;Oc(e,Tm(FP(r)))})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e})).addCase(ae,((e,t)=>{Dc(e,t.payload.df||{})})).addCase(zt,((e,t)=>{let{facetId:r,selection:n}=t.payload;qc(e,r,n)})).addCase($r,((e,t)=>{let{facetId:r,selection:n}=t.payload;Tc(e,r,n)})).addCase(mr,((e,t)=>{let{facetId:r,values:n}=t.payload;kc(e,r,n)})).addCase(Sc,((e,t)=>{zr(e,t.payload)})).addCase(xe,(e=>{Object.keys(e).forEach((t=>{zr(e,t)}))})).addCase(hc,((e,t)=>{Ln(e,t.payload)})).addCase(F.fulfilled,((e,t)=>{Xn(e,t.payload.response.facets,hS)})).addCase(Wr.fulfilled,((e,t)=>{var r,n;Xn(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],hS)})).addCase(ge,((e,t)=>{zr(e,t.payload)}))}));function FP(e){return{...Ic,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function hS(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}function Nc(e,t){let{facetId:r,getRequest:n}=t,a=V(e),i=e.dispatch;return{...a,isValueSelected:Qd,isValueExcluded:jd,deselectAll(){i(de(r)),i(Z())},sortBy(e){i(Gn({facetId:r,criterion:e})),i(Z())},isSortedBy(e){return this.state.sortCriterion===e},enable(){i(je(r))},disable(){i(ge(r))},get state(){let t=n(),a=At(e.state,r),i=t.sortCriteria,s=t.resultsMustMatch,o=a?a.values:[],l=Pt(e.state),u=Qt(e.state,r),c=o.some((e=>"idle"!==e.state));return{facetId:r,values:o,sortCriterion:i,resultsMustMatch:s,hasActiveValues:c,isLoading:l,enabled:u}}}}function Mc(e,t){if(!e.generateAutomaticRanges&&void 0===e.currentValues)throw new Error(`currentValues should be specified for ${t} when generateAutomaticRanges is false.`)}var Lc=["idle","selected","excluded"],Qc=["ascending","descending"],jc=["even","equiprobable"],bP={start:new R,end:new R,endInclusive:new U,state:new R({constrainTo:Lc})},RP=new W({facetId:jt,field:Bt,generateAutomaticRanges:pc,filterFacetCount:Ut,injectionDepth:_t,numberOfValues:ht,currentValues:new _({each:new E({values:bP})}),sortCriteria:new R({constrainTo:Qc}),rangeAlgorithm:new R({constrainTo:jc})});function Bc(e,t){ce(e,RP,t,"buildDateFacet"),gc(t)}function SS(e,t){if(!AP(e))throw A;Mc(t.options,"buildDateFacet");let r=e.dispatch,n=De(e,t.options),a={currentValues:[],...t.options,facetId:n};Bc(e,a),r(Wt(a));let i=Nc(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...i,toggleSelect:e=>r(fS({facetId:n,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&r(de(n)),this.toggleSelect(e)},toggleExclude:e=>r(mS({facetId:n,selection:e})),toggleSingleExclude:function(e){"idle"===e.state&&r(de(n)),this.toggleExclude(e)},get state(){return i.state}}}function AP(e){return e.addReducers({configuration:L,search:B,dateFacetSet:Jt,facetOptions:Te}),!0}function yS(e,t){let r=SS(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(F(Re(a())))},sortBy(e){r.sortBy(e),n(F(Lt({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(F(Pc(a(),e)))},toggleExclude:e=>{r.toggleExclude(e),n(F(dS(a(),e)))},get state(){return r.state}}}var PP=e=>({build:t=>yS(t,e)}),ot=I(Ja(),(e=>{e.addCase(Gt,((e,t)=>{let{payload:r}=t;Oc(e,Dm(wP(r)))})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e})).addCase(ae,((e,t)=>{Dc(e,t.payload.nf||{})})).addCase(Yt,((e,t)=>{let{facetId:r,selection:n}=t.payload;qc(e,r,n)})).addCase(Hr,((e,t)=>{let{facetId:r,selection:n}=t.payload;Tc(e,r,n)})).addCase(gr,((e,t)=>{let{facetId:r,values:n}=t.payload;kc(e,r,n)})).addCase(Cc,((e,t)=>{zr(e,t.payload)})).addCase(xe,(e=>{Object.keys(e).forEach((t=>{zr(e,t)}))})).addCase(vc,((e,t)=>{Ln(e,t.payload)})).addCase(F.fulfilled,((e,t)=>{Xn(e,t.payload.response.facets,vS)})).addCase(Wr.fulfilled,((e,t)=>{var r,n;Xn(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],vS)})).addCase(ge,((e,t)=>{zr(e,t.payload)}))}));function wP(e){return{...Ic,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function vS(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var CS={facetId:$,selection:new E({values:Pa})},xS=X("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,CS),t(Yt(e)),t(wc(e)),t(Z())})),F2=X("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,CS),t(Hr(e)),t(Ec(e)),t(Z())})),EP={start:new k,end:new k,endInclusive:new U,state:new R({constrainTo:Lc})},IP=new W({facetId:jt,field:Bt,generateAutomaticRanges:pc,filterFacetCount:Ut,injectionDepth:_t,numberOfValues:ht,currentValues:new _({each:new E({values:EP})}),sortCriteria:new R({constrainTo:Qc}),resultsMustMatch:new R({constrainTo:Jn}),rangeAlgorithm:new R({constrainTo:jc})});function Uc(e,t){ce(e,IP,t,"buildNumericFacet"),yc(t)}function Zn(e){return{endInclusive:!1,state:"idle",...e}}function FS(e,t){if(!OP(e))throw A;Mc(t.options,"buildNumericFacet");let r=e.dispatch,n=De(e,t.options),a={currentValues:[],...t.options,facetId:n};Uc(e,a),r(Gt(a));let i=Nc(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...i,toggleSelect:e=>r(xS({facetId:n,selection:e})),toggleSingleSelect(e){"idle"===e.state&&r(de(n)),this.toggleSelect(e)},get state(){return i.state}}}function OP(e){return e.addReducers({numericFacetSet:ot,facetOptions:Te,configuration:L,search:B}),!0}function bS(e,t){if(!kP(e))throw A;let r=FS(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(F(Re(a())))},sortBy(e){r.sortBy(e),n(F(Lt({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(F(Pc(a(),e)))},get state(){return{...r.state}}}}function kP(e){return e.addReducers({numericFacetSet:ot,configuration:L,search:B}),!0}var qP=e=>({build:t=>bS(t,e)});function TP(e,t){return!!t&&t.facetId in e.numericFacetSet}var RS=(e,t)=>{let r=At(e,t);if(TP(e,r))return r},AS=(e,t)=>(RS(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state)),PS=(e,t)=>(RS(e,t)||{values:[]}).values.filter((e=>"selected"===e.state));function wS(e,t){var r;if(!DP(e))throw A;let n=V(e),{dispatch:a}=e,i=()=>e.state,s=De(e,t.options),o={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:s};return Uc(e,o),a(Gt(o)),{...n,clear:()=>{a(gr({facetId:s,values:[]})),a(Z())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=gr({facetId:s,values:[t]});return!r.error&&(a(r),a(Z()),!0)},enable(){a(je(s))},disable(){a(ge(s))},get state(){let t=Pt(i()),r=Qt(e.state,s),n=PS(i(),s),a=n.length?n[0]:void 0;return{facetId:s,isLoading:t,range:a,enabled:r}}}}function DP(e){return e.addReducers({numericFacetSet:ot,facetOptions:Te,configuration:L,search:B}),!0}function ES(e,t){if(!VP(e))throw A;let r=wS(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(F(Re(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(F(ye({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}function VP(e){return e.addReducers({numericFacetSet:ot,configuration:L,search:B}),!0}var NP=e=>({build:t=>ES(t,e)});function MP(e,t){return!!t&&t.facetId in e.dateFacetSet}var IS=(e,t)=>{let r=At(e,t);if(MP(e,r))return r},OS=(e,t)=>(IS(e,t)||{values:[]}).values.filter((e=>"selected"===e.state)),kS=(e,t)=>(IS(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state));function qS(e,t){var r;if(!LP(e))throw A;let n=V(e),{dispatch:a}=e,i=()=>e.state,s=De(e,t.options),o={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:s};return Bc(e,o),a(Wt(o)),{...n,clear:()=>{a(mr({facetId:s,values:[]})),a(Z())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=mr({facetId:s,values:[t]});return!r.error&&(a(r),a(Z()),!0)},enable(){a(je(s))},disable(){a(ge(s))},get state(){let t=Pt(i()),r=Qt(e.state,s),n=OS(i(),s),a=n.length?n[0]:void 0;return{facetId:s,isLoading:t,range:a,enabled:r}}}}function LP(e){return e.addReducers({dateFacetSet:Jt,facetOptions:Te,configuration:L,search:B}),!0}function TS(e,t){if(!QP(e))throw A;let r=qS(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(F(Re(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(F(ye({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}function QP(e){return e.addReducers({dateFacetSet:Jt,configuration:L,search:B}),!0}var jP=e=>({build:t=>TS(t,e)}),_c=I(Ps(),(e=>{e.addCase(F.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e}))})),$c=()=>P("history/analytics/forward",(e=>e.makeSearchEvent("historyForward"))),Hc=()=>P("history/analytics/backward",(e=>e.makeSearchEvent("historyBackward"))),Wc=()=>P("history/analytics/noresultsback",(e=>e.makeNoResultsBack())),DS=e=>({past:[],present:e,future:[]}),BP=e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},UP=e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e},_P=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,s=n(i,t);return i?i===s?r:{past:[...a,i],present:s,future:[]}:DS(s)},VS=e=>{let{actionTypes:t,reducer:r}=e,n=DS();return(e=n,a)=>{switch(a.type){case t.undo:return BP(e);case t.redo:return UP(e);case t.snapshot:return _P({state:e,reducer:r,action:a});default:return e}}},$P=Object.getOwnPropertyNames,HP=Object.getOwnPropertySymbols,WP=Object.prototype.hasOwnProperty;function NS(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function zc(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,i=a.get(t),s=a.get(r);if(i&&s)return i===r&&s===t;a.set(t,r),a.set(r,t);var o=e(t,r,n);return a.delete(t),a.delete(r),o}}function MS(e){return $P(e).concat(HP(e))}var LS=Object.hasOwn||function(e,t){return WP.call(e,t)};function eo(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var QS="_owner",jS=Object.getOwnPropertyDescriptor,BS=Object.keys;function zP(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function GP(e,t){return eo(e.getTime(),t.getTime())}function US(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},s=e.entries(),o=0;(n=s.next())&&!n.done;){for(var l=t.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=n.value,f=d[0],g=d[1],p=a.value,h=p[0],v=p[1];!u&&!i[c]&&(u=r.equals(f,h,o,c,e,t,r)&&r.equals(g,v,f,h,e,t,r))&&(i[c]=!0),c++}if(!u)return!1;o++}return!0}function YP(e,t,r){var n,a=BS(e),i=a.length;if(BS(t).length!==i)return!1;for(;i-- >0;)if((n=a[i])===QS&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!LS(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function vi(e,t,r){var n,a,i,s=MS(e),o=s.length;if(MS(t).length!==o)return!1;for(;o-- >0;)if((n=s[o])===QS&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!LS(t,n)||!r.equals(e[n],t[n],n,n,e,t,r)||(a=jS(e,n),i=jS(t,n),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable)))return!1;return!0}function KP(e,t){return eo(e.valueOf(),t.valueOf())}function JP(e,t){return e.source===t.source&&e.flags===t.flags}function _S(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},s=e.values();(n=s.next())&&!n.done;){for(var o=t.values(),l=!1,u=0;(a=o.next())&&!a.done;)!l&&!i[u]&&(l=r.equals(n.value,a.value,n.value,a.value,e,t,r))&&(i[u]=!0),u++;if(!l)return!1}return!0}function XP(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var ZP="[object Arguments]",ew="[object Boolean]",tw="[object Date]",rw="[object Map]",aw="[object Number]",nw="[object Object]",ow="[object RegExp]",iw="[object Set]",sw="[object String]",cw=Array.isArray,$S="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,HS=Object.assign,uw=Object.prototype.toString.call.bind(Object.prototype.toString);function lw(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,a=e.areObjectsEqual,i=e.arePrimitiveWrappersEqual,s=e.areRegExpsEqual,o=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,u,c){if(e===u)return!0;if(null==e||null==u||"object"!=typeof e||"object"!=typeof u)return e!=e&&u!=u;var d=e.constructor;if(d!==u.constructor)return!1;if(d===Object)return a(e,u,c);if(cw(e))return t(e,u,c);if(null!=$S&&$S(e))return l(e,u,c);if(d===Date)return r(e,u,c);if(d===RegExp)return s(e,u,c);if(d===Map)return n(e,u,c);if(d===Set)return o(e,u,c);var f=uw(e);return f===tw?r(e,u,c):f===ow?s(e,u,c):f===rw?n(e,u,c):f===iw?o(e,u,c):f===nw?"function"!=typeof e.then&&"function"!=typeof u.then&&a(e,u,c):f===ZP?a(e,u,c):(f===ew||f===aw||f===sw)&&i(e,u,c)}}function dw(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?vi:zP,areDatesEqual:GP,areMapsEqual:n?NS(US,vi):US,areObjectsEqual:n?vi:YP,arePrimitiveWrappersEqual:KP,areRegExpsEqual:JP,areSetsEqual:n?NS(_S,vi):_S,areTypedArraysEqual:n?vi:XP};if(r&&(a=HS({},a,r(a))),t){var i=zc(a.areArraysEqual),s=zc(a.areMapsEqual),o=zc(a.areObjectsEqual),l=zc(a.areSetsEqual);a=HS({},a,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return a}function pw(e){return function(t,r,n,a,i,s,o){return e(t,r,o)}}function fw(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(e,s){var o=n(),l=o.cache,u=void 0===l?t?new WeakMap:void 0:l,c=o.meta;return r(e,s,{cache:u,equals:a,meta:c,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var s={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return r(e,t,s)}}var GY=Xt(),YY=Xt({strict:!0}),KY=Xt({circular:!0}),JY=Xt({circular:!0,strict:!0}),XY=Xt({createInternalComparator:function(){return eo}}),ZY=Xt({strict:!0,createInternalComparator:function(){return eo}}),e3=Xt({circular:!0,createInternalComparator:function(){return eo}}),t3=Xt({circular:!0,createInternalComparator:function(){return eo},strict:!0});function Xt(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,a=e.createState,i=e.strict,s=void 0!==i&&i,o=lw(dw(e));return fw({circular:r,comparator:o,createState:a,equals:n?n(o):pw(o),strict:s})}function Ia(e,t,r=((e,t)=>e===t)){return e.length===t.length&&-1===e.findIndex(((e,n)=>!r(t[n],e)))}function mw(e,t){return e.length===t.length&&e.every((e=>-1!==t.findIndex((t=>Bd(e,t)))))}var Bd=Xt({createCustomConfig:e=>({...e,areArraysEqual:mw})}),gw=I(cg(),(e=>{e.addCase(fa,((e,t)=>hw(e,t.payload)?void 0:t.payload))})),hw=(e,t)=>Sw(e.context,t.context)&&yw(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Aw(e.advancedSearchQueries,t.advancedSearchQueries)&&vw(e.tabSet,t.tabSet)&&Cw(e.staticFilterSet,t.staticFilterSet)&&Ud(e.facetSet,t.facetSet)&&Ud(e.dateFacetSet,t.dateFacetSet)&&Ud(e.numericFacetSet,t.numericFacetSet)&&Fw(e.automaticFacetSet,t.automaticFacetSet)&&xw(e.categoryFacetSet,t.categoryFacetSet)&&bw(e.pagination,t.pagination)&&Rw(e.query,t.query)&&Pw(e,t)&&ww(e.pipeline,t.pipeline)&&Ew(e.searchHub,t.searchHub)&&Iw(e.facetOrder,t.facetOrder)&&Ow(e.debug,t.debug),Sw=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),yw=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),vw=(e,t)=>{let r=WS(e),n=WS(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},WS=e=>Object.values(e).find((e=>e.isActive)),Cw=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=zS(e[r]),a=zS(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},zS=e=>e.values.filter((e=>"idle"!==e.state)),Ud=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter((e=>"idle"!==e.state)),a=n.request.currentValues.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},xw=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let t=He(null==(r=e[n])?void 0:r.request.currentValues).map((({value:e})=>e)),i=He(null==a?void 0:a.request.currentValues).map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Fw=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter((e=>"idle"!==e.state)),a=n.response.values.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},bw=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Rw=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Aw=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Pw=(e,t)=>e.sortCriteria===t.sortCriteria,ww=(e,t)=>e===t,Ew=(e,t)=>e===t,Iw=(e,t)=>Ia(e,t),Ow=(e,t)=>e===t,Gc=VS({actionTypes:{redo:Xl.type,undo:Jl.type,snapshot:fa.type},reducer:gw});function GS(e){if(!kw(e))throw A;let t=V(e),{dispatch:r}=e,n=e=>e.past.length>0&&!K(e.present);return{...t,get state(){return e.state.history},async back(){!n(this.state)||(await r(ti()),r(F(Hc())))},async forward(){!this.state.future.length||!this.state.present||(await r(ys()),r(F($c())))},async backOnNoResults(){!n(this.state)||(await r(ti()),r(F(Wc())))}}}function kw(e){return e.addReducers({history:Gc,configuration:L,facetOrder:_c}),!0}var qw=()=>({build:e=>GS(e)}),Tw=new k({min:Im,default:ss,required:!1}),Dw=new k({min:wm,max:Em,default:is,required:!1}),Vw={desiredCount:Dw,numberOfValues:Tw},Yc=h("automaticFacet/setOptions",(e=>y(e,Vw))),Kc=h("automaticFacet/deselectAll",(e=>y(e,$))),Nw=w,Gr=h("automaticFacet/toggleSelectValue",(e=>y(e,{field:Nw,selection:new E({values:Fa})}))),Zt=I(rt(),(e=>{e.addCase(fn,((e,t)=>{let r=_d(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=Ci(r,n)})).addCase(mn,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(ft,(e=>{e.firstResult=0})).addCase(gn,((e,t)=>{let r=t.payload;e.firstResult=Ci(r,e.numberOfResults)})).addCase(It,((e,t)=>{let r=t.payload;e.firstResult=Ci(r,e.numberOfResults)})).addCase(Sn,(e=>{let t=_d(e),r=Math.max(t-1,ha);e.firstResult=Ci(r,e.numberOfResults)})).addCase(hn,(e=>{let t=_d(e),r=Mw(e),n=Math.min(t+1,r);e.firstResult=Ci(n,e.numberOfResults)})).addCase(re.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(ae,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults})).addCase(F.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Wr.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(de,(e=>{it(e)})).addCase(Ht,(e=>{it(e)})).addCase(Vt,(e=>{it(e)})).addCase(jr,(e=>{it(e)})).addCase(Nn,(e=>{it(e)})).addCase(zt,(e=>{it(e)})).addCase(Yt,(e=>{it(e)})).addCase(xe,(e=>{it(e)})).addCase(mr,(e=>{it(e)})).addCase(gr,(e=>{it(e)})).addCase(xa,(e=>{it(e)})).addCase(Gr,(e=>{it(e)}))}));function it(e){e.firstResult=rt().firstResult}function _d(e){let{firstResult:t,numberOfResults:r}=e;return $d(t,r)}function Mw(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Hd(t,r)}function Ci(e,t){return(e-1)*t}function $d(e,t){return Math.round(e/t)+1}function Hd(e,t){let r=Math.min(e,ci);return Math.ceil(r/t)}function Lw(e){return e.pagination.firstResult}function YS(e){return e.pagination.numberOfResults}function Qw(e){return e.pagination.totalCountFiltered}var Yr=e=>$d(Lw(e),YS(e)),Jc=e=>Hd(Qw(e),YS(e)),Wd=(e,t)=>{let r=Yr(e),n=Jc(e),a=jw(r,t);return a=Bw(a),a=Uw(a,n),_w(a)};function jw(e,t){let r=t%2==0,n=Math.floor(t/2);return{start:e-n,end:e+(r?n-1:n)}}function Bw(e){let t=Math.max(ha-e.start,0);return{start:e.start+t,end:e.end+t}}function Uw(e,t){let r=Math.max(e.end-t,0);return{start:Math.max(e.start-r,ha),end:e.end-r}}function _w(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var to=()=>P("analytics/pager/resize",((e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||rt().numberOfResults})})),ro=()=>P("analytics/pager/number",((e,t)=>e.makePagerNumber({pagerNumber:Yr(t)}))),Xc=()=>P("analytics/pager/next",((e,t)=>e.makePagerNext({pagerNumber:Yr(t)}))),Zc=()=>P("analytics/pager/previous",((e,t)=>e.makePagerPrevious({pagerNumber:Yr(t)}))),$w=new W({numberOfPages:new k({default:5,min:0})}),Hw=new W({page:new k({min:1})});function KS(e,t={}){if(!Ww(e))throw A;let r=V(e),{dispatch:n}=e,a=ce(e,$w,t.options,"buildPager"),i=Oe(e,Hw,t.initialState,"buildPager").page;i&&n(gn(i));let s=()=>{let{numberOfPages:t}=a;return Wd(e.state,t)};return{...r,get state(){let t=Yr(e.state),r=Jc(e.state),n=t>ha&&r>0,a=t<r;return{currentPage:t,currentPages:s(),maxPage:r,hasPreviousPage:n,hasNextPage:a}},selectPage(e){n(It(e))},nextPage(){n(hn())},previousPage(){n(Sn())},isCurrentPage(e){return e===this.state.currentPage}}}function Ww(e){return e.addReducers({configuration:L,pagination:Zt}),!0}function JS(e,t={}){let{dispatch:r}=e,n=KS(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(qe(ro()))},nextPage(){n.nextPage(),r(qe(Xc()))},previousPage(){n.previousPage(),r(qe(Zc()))}}}var zw=e=>({build:t=>JS(t,e)});function XS(e){if(!Gw(e))throw A;let t=V(e),r=()=>e.state;return{...t,get state(){return{hasError:null!==r().search.error,error:r().search.error}}}}function Gw(e){return e.addReducers({search:B}),!0}function ZS(e){return XS(e)}var Yw=()=>({build:e=>ZS(e)});function ao(e){if(!Kw(e))throw A;return{...V(e),get state(){let t=e.state;return{hasError:null!==t.search.error,isLoading:t.search.isLoading,hasResults:!!t.search.results.length,firstSearchExecuted:_s(t)}}}}function Kw(e){return e.addReducers({search:B}),!0}function ey(e){if(!Jw(e))throw A;let t=V(e),r=ao(e),n=()=>e.state,a=()=>{let e=n().search.duration/1e3;return Math.round(100*(e+Number.EPSILON))/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:a(),firstResult:n().pagination.firstResult+1,hasDuration:0!==n().search.duration,hasQuery:""!==n().search.queryExecuted,lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function Jw(e){return e.addReducers({search:B,pagination:Zt}),!0}function ty(e){return ey(e)}var Xw=()=>({build:e=>ty(e)}),Zw=new W({fieldsToInclude:new _({required:!1,each:new R({required:!0,emptyAllowed:!1})})});function eu(e,t){if(!eE(e))throw A;let r=V(e),n=ao(e),{dispatch:a}=e,i=ce(e,Zw,null==t?void 0:t.options,"buildCoreResultList");i.fieldsToInclude&&a(Nr(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,o=0,l=0,u=!1;return{...r,get state(){let t=e.state;return{...n.state,results:t.search.results,moreResultsAvailable:s(),searchResponseId:t.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading)if(s()){if(Date.now()-o<200){if(l++,l>=5)return o=Date.now(),!u&&e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),void(u=!0)}else l=0;u=!1,(null==t?void 0:t.fetchMoreResultsActionCreator)&&a(null==t?void 0:t.fetchMoreResultsActionCreator()).then((()=>o=Date.now()))}else e.logger.info("No more results are available for the result list to fetch.")}}}function eE(e){return e.addReducers({search:B,configuration:L,fields:Qr}),!0}function ry(e,t){return eu(e,{...t,fetchMoreResultsActionCreator:nt})}var tE=e=>({build:t=>ry(t,e)}),rE=new W({numberOfResults:new k({min:0})});function ay(e,t={}){if(!aE(e))throw A;let r=V(e),{dispatch:n}=e,a=Oe(e,rE,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==a&&n(fn(a)),{...r,get state(){return{numberOfResults:e.state.pagination.numberOfResults}},set(e){n(mn(e))},isSetTo(e){return e===this.state.numberOfResults}}}function aE(e){return e.addReducers({pagination:Zt,configuration:L}),!0}function ny(e,t={}){if(!nE(e))throw A;let r=ay(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(qe(to()))}}}function nE(e){return e.addReducers({pagination:Zt,configuration:L}),!0}var oE=e=>({build:t=>ny(t,e)}),xi={id:w},no=h("querySuggest/register",(e=>y(e,{...xi,count:new k({min:0})}))),oy=h("querySuggest/unregister",(e=>y(e,xi))),er=h("querySuggest/selectSuggestion",(e=>y(e,{...xi,expression:se}))),Kr=h("querySuggest/clear",(e=>y(e,xi))),Jr=X("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,xi);let i=e.id,s=await iE(i,t()),o=await n.querySuggest(s);return Ie(o)?r(o.error):{id:i,q:s.q,...o.success}})),iE=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?wr.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Xe(t.configuration.analytics),...t.configuration.analytics.enabled&&await yn(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),Xr=()=>P("analytics/searchbox/submit",(e=>e.makeSearchboxSubmit())),iy={id:w,query:se},oo=h("querySet/register",(e=>y(e,iy))),Oa=h("querySet/update",(e=>y(e,iy))),io=I(Is(),(e=>{e.addCase(oo,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(Oa,((e,t)=>{let{id:r,query:n}=t.payload;zd(e,r,n)})).addCase(er,((e,t)=>{let{id:r,expression:n}=t.payload;zd(e,r,n)})).addCase(F.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;sy(e,r)})).addCase(ae,((e,t)=>{K(t.payload.q)||sy(e,t.payload.q)})).addCase(re.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))zd(e,r,n)}))}));function sy(e,t){Object.keys(e).forEach((r=>e[r]=t))}var zd=(e,t,r)=>{t in e&&(e[t]=r)},tu=e=>P("analytics/querySuggest",((t,r)=>{let n=Gd(r,e);return t.makeOmniboxAnalytics(n)}));function Gd(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let i=a.completions.map((e=>e.expression)),s=a.partialQueries.length-1,o=a.partialQueries[s]||"",l=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:o,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:l}}var cy=()=>({}),so=I(cy(),(e=>e.addCase(no,((e,t)=>{let r=t.payload.id;r in e||(e[r]=sE(t.payload))})).addCase(oy,((e,t)=>{delete e[t.payload.id]})).addCase(Jr.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)})).addCase(Jr.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(Jr.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)})).addCase(Kr,((e,t)=>{let r=e[t.payload.id];!r||(r.responseId="",r.completions=[],r.partialQueries=[])}))));function sE(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}var st=I(Se(),(e=>e.addCase(tt,((e,t)=>({...e,...t.payload}))).addCase(Ot,((e,t)=>{e.q=t.payload})).addCase(er,((e,t)=>{e.q=t.payload.expression})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e})).addCase(ae,((e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax}))));function uy(e,t){return(e=cE(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,a)=>r?Yd(r,t.notMatchDelimiters):n?Yd(n,t.exactMatchDelimiters):a?Yd(a,t.correctionDelimiters):e))}function Yd(e,t){return t?t.open+e+t.close:e}function cE(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return n.test(e)?e.replace(a,(e=>t[e])):e}var ru={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Kd={open:new R,close:new R},Jd={id:w,numberOfSuggestions:new k({min:0}),enableQuerySyntax:new U,highlightOptions:new E({values:{notMatchDelimiters:new E({values:Kd}),exactMatchDelimiters:new E({values:Kd}),correctionDelimiters:new E({values:Kd})}}),clearFilters:new U},ly=new W(Jd);function dy(e,t){var r,n;if(!lE(e))throw A;let a=V(e),{dispatch:i}=e,s=(null==(r=t.options)?void 0:r.id)||ja("search_box"),o={id:s,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...ru,...t.options};ce(e,ly,o,"buildSearchBox"),i(oo({id:s,query:e.state.query.q})),o.numberOfSuggestions&&i(no({id:s,count:o.numberOfSuggestions}));let l=()=>e.state.querySet[o.id],u=async e=>{let{enableQuerySyntax:r,clearFilters:n}=o;i(Us({q:l(),enableQuerySyntax:r,clearFilters:n})),await i(t.executeSearchActionCreator(e))};return{...a,updateText(e){i(Oa({id:s,query:e})),this.showSuggestions()},clear(){i(Oa({id:s,query:""})),i(Kr({id:s}))},showSuggestions(){o.numberOfSuggestions&&i(t.fetchQuerySuggestionsActionCreator({id:s}))},selectSuggestion(e){i(er({id:s,expression:e})),u(tu({id:s,suggestion:e})).then((()=>{i(Kr({id:s}))}))},submit(e=Xr()){u(e),i(Kr({id:s}))},get state(){let t=e.state,r=t.querySuggest[o.id],n=uE(r,o.highlightOptions),a=!!r&&r.isLoading;return{value:l(),suggestions:n,isLoading:t.search.isLoading,isLoadingSuggestions:a}}}}function uE(e,t){return e?e.completions.map((e=>({highlightedValue:uy(e.highlighted,t),rawValue:e.expression}))):[]}function lE(e){return e.addReducers({query:st,querySuggest:so,configuration:L,querySet:io,search:B}),!0}function au(e,t={}){let r=dy(e,{...t,executeSearchActionCreator:F,fetchQuerySuggestionsActionCreator:Jr});return{...r,submit(){r.submit(Xr())},get state(){return r.state}}}var dE=e=>({build:t=>au(t,e)}),nu=I(ws(),(e=>{e.addCase(dn,((e,t)=>{let{id:r}=t.payload;e[r]||(e[r]={q:"",cache:{}})})),e.addCase(Tr,((e,t)=>{let{q:r,id:n}=t.payload;!r||(e[n].q=r)})),e.addCase(pn,((e,t)=>{let{id:r}=t.payload;Object.entries(e[r].cache).forEach((([t,n])=>{Es(n)&&delete e[r].cache[t]}))})),e.addCase(Vr.pending,((e,t)=>{for(let t in e)for(let r in e[t].cache)e[t].cache[r].isActive=!1;if(!ou(e,t.meta))return void pE(e,t.meta);let r=ou(e,t.meta);r.isLoading=!0,r.isActive=!0,r.error=null})),e.addCase(Vr.fulfilled,((e,t)=>{let{results:r,searchUid:n,totalCountFiltered:a,duration:i}=t.payload,{cacheTimeout:s}=t.meta.arg,o=ou(e,t.meta);o.isActive=!0,o.searchUid=n,o.isLoading=!1,o.error=null,o.results=r,o.expiresAt=s?s+Date.now():0,o.totalCountFiltered=a,o.duration=i})),e.addCase(Vr.rejected,((e,t)=>{let r=ou(e,t.meta);r.error=t.error||null,r.isLoading=!1,r.isActive=!1}))})),pE=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},ou=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},fE={searchBoxId:ue,maxResultsPerQuery:new k({required:!0,min:1}),cacheTimeout:new k},py=new W(fE);function fy(e,t){if(!mE(e))throw A;let r=V(e),{dispatch:n}=e,a={searchBoxId:t.options.searchBoxId||ja("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};ce(e,py,a,"buildInstantResults");let i=a.searchBoxId;n(dn({id:i}));let s=()=>e.state.instantResults[i],o=e=>s().cache[e],l=()=>s().q,u=()=>{let e=o(l());return e?e.isLoading?[]:e.results:[]};return{...r,updateQuery(e){if(!e)return;let t=o(e);(!t||!t.isLoading&&(t.error||Es(t)))&&n(Vr({id:i,q:e,maxResultsPerQuery:a.maxResultsPerQuery,cacheTimeout:a.cacheTimeout})),n(Tr({id:i,q:e}))},clearExpired(){n(pn({id:i}))},get state(){let e=l(),t=o(e);return{q:e,isLoading:(null==t?void 0:t.isLoading)||!1,error:(null==t?void 0:t.error)||null,results:u()}}}}function mE(e){return e.addReducers({instantResults:nu}),!0}var gE=e=>({build:t=>fy(t,e)}),co=()=>P("analytics/sort/results",((e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||qt()}))),my={by:new Ar({enum:kt,required:!0})},uo=h("sortCriteria/register",(e=>gy(e))),lo=h("sortCriteria/update",(e=>gy(e))),gy=e=>Ua(e)?(e.forEach((e=>y(e,my))),{payload:e}):y(e,my),iu=I(qt(),(e=>{e.addCase(uo,((e,t)=>lr(t.payload))).addCase(lo,((e,t)=>lr(t.payload))).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e})).addCase(ae,((e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e}))}));function hE(e,t){if(!t)return;let r=new W({criterion:new _({each:sg})}),n=SE(t),a={...t,criterion:n};Oe(e,r,a,"buildSort")}function SE(e){return e.criterion?Ua(e.criterion)?e.criterion:[e.criterion]:[]}function hy(e,t){var r;if(!yE(e))throw A;let n=V(e),{dispatch:a}=e;hE(e,t.initialState);let i=null==(r=t.initialState)?void 0:r.criterion;return i&&a(uo(i)),{...n,sortBy(e){a(lo(e)),a(It(1))},isSortedBy(e){return this.state.sortCriteria===lr(e)},get state(){return{sortCriteria:e.state.sortCriteria}}}}function yE(e){return e.addReducers({configuration:L,sortCriteria:iu}),!0}function Sy(e,t={}){let{dispatch:r}=e,n=hy(e,t);return{...n,get state(){return n.state},sortBy(e){n.sortBy(e),r(F(co()))}}}var vE=e=>({build:t=>Sy(t,e)}),ka=w,su=new E({options:{required:!0},values:{caption:se,expression:se,state:new R({constrainTo:["idle","selected","excluded"]})}}),cu=new _({required:!0,each:su}),po=h("staticFilter/register",(e=>y(e,{id:ka,values:cu}))),hr=h("staticFilter/toggleSelect",(e=>y(e,{id:ka,value:su}))),Sr=h("staticFilter/toggleExclude",(e=>y(e,{id:ka,value:su}))),Zr=h("staticFilter/deselectAllFilterValues",(e=>y(e,ka))),uu=e=>P("analytics/staticFilter/select",(t=>t.makeStaticFilterSelect(e))),fo=e=>P("analytics/staticFilter/deselect",(t=>t.makeStaticFilterDeselect(e))),lu=e=>P("analytics/staticFilter/clearAll",(t=>t.makeStaticFilterClearAll(e))),du=I(Os(),(e=>e.addCase(po,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase(hr,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let s="selected"===i.state;i.state=s?"idle":"selected"})).addCase(Sr,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let s="excluded"===i.state;i.state=s?"idle":"excluded"})).addCase(Zr,((e,t)=>{let r=e[t.payload];!r||r.values.forEach((e=>e.state="idle"))})).addCase(xe,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(ae,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))}))));function Xd(e){return{state:"idle",...e}}var CE=new W({id:ka,values:cu});function yy(e,t){if(!xE(e))throw A;ce(e,CE,t.options,"buildStaticFilter");let r=V(e),{dispatch:n}=e,{id:a}=t.options;return n(po(t.options)),{...r,toggleSelect(e){let t=pu(a,e);n(hr({id:a,value:e})),n(F(t))},toggleSingleSelect(e){let t=pu(a,e);"idle"===e.state&&n(Zr(a)),n(hr({id:a,value:e})),n(F(t))},toggleExclude(e){let t=pu(a,e);n(Sr({id:a,value:e})),n(F(t))},toggleSingleExclude(e){let t=pu(a,e);"idle"===e.state&&n(Zr(a)),n(Sr({id:a,value:e})),n(F(t))},deselectAll(){let e=lu({staticFilterId:a});n(Zr(a)),n(F(e))},isValueSelected:e=>"selected"===e.state,isValueExcluded:e=>"excluded"===e.state,get state(){var t;let r=(null==(t=e.state.staticFilterSet[a])?void 0:t.values)||[],n=r.some((e=>"idle"!==e.state));return{id:a,values:r,hasActiveValues:n}}}}function xE(e){return e.addReducers({staticFilterSet:du}),!0}function pu(e,t){let{caption:r,expression:n,state:a}=t;return("idle"===a?uu:fo)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}var FE=e=>({build:t=>yy(t,e)}),fu=I(ks(),(e=>{e.addCase(Pn,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(ft,((e,t)=>{vy(e,t.payload)})).addCase(ae,((e,t)=>{vy(e,t.payload.tab||"")})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.tabSet)?n:e}))}));function vy(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var bE=new W({expression:se,id:w}),RE=new W({isActive:new U});function Cy(e,t){if(PE(t.options.id),!AE(e))throw A;let r=V(e),{dispatch:n}=e;ce(e,bE,t.options,"buildTab");let a=Oe(e,RE,t.initialState,"buildTab"),{id:i,expression:s}=t.options;return n(Pn({id:i,expression:s})),a.isActive&&n(ft(i)),{...r,select(){n(ft(i))},get state(){var t;return{isActive:null==(t=e.state.tabSet[i])?void 0:t.isActive}}}}function AE(e){return e.addReducers({configuration:L,tabSet:fu}),!0}function PE(e){let t=wn().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function xy(e,t){let{dispatch:r}=e,n=Cy(e,t);return{...n,get state(){return n.state},select(){n.select(),r(F(Ir()))}}}var wE=e=>({build:t=>xy(t,e)});function Fy(e){if(!EE(e))throw A;return{...V(e),sort(e){return An(e,this.state.facetIds)},get state(){return{facetIds:e.state.search.response.facets.map((e=>e.facetId))}}}}function EE(e){return e.addReducers({search:B,facetOptions:Te}),!0}function by(e){return Fy(e)}var IE=()=>({build:e=>by(e)}),OE={categoryFacetId:$,categoryFacetPath:new _({required:!0,each:w})},kE=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t],a=null==n?void 0:n.request.field;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:a,categoryFacetTitle:`${a}_${t}`}},mu=e=>P("analytics/categoryFacet/breadcrumb",((t,r)=>(y(e,OE),t.makeBreadcrumbFacet(kE(r,e))))),gu=()=>P("analytics/facet/deselectAllBreadcrumbs",(e=>e.makeBreadcrumbResetAll())),hu=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field;return{facetId:t,facetField:n,facetTitle:`${n}_${t}`,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},Fi=e=>P("analytics/dateFacet/breadcrumb",((t,r)=>{y(e,Ea(e.selection));let n=hu(r,e);return t.makeBreadcrumbFacet(n)})),bi=e=>P("analytics/numericFacet/breadcrumb",((t,r)=>{y(e,Ea(e.selection));let n=hu(r,e);return t.makeBreadcrumbFacet(n)})),Su=e=>Object.keys(e.facetSet).map((t=>{let r=e.facetValuesSelector(e.engine.state,t).map((r=>({value:r,deselect:()=>{"selected"===r.state?e.executeToggleSelect({facetId:t,selection:r}):"excluded"===r.state&&e.executeToggleExclude({facetId:t,selection:r})}})));return{facetId:t,field:e.facetSet[t].request.field,values:r}})).filter((e=>e.values.length));function Ry(e){let t=V(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(xe())},deselectBreadcrumb(e){e.deselect()}}}function Ay(e){if(!qE(e))throw A;let t=Ry(e),{dispatch:r}=e,n=()=>e.state,a=()=>{let t={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:e,selection:t})=>{let n=Hn({facetId:e,facetValue:t.value});r(Ht({facetId:e,selection:t})),r(Aa({facetId:e,freezeCurrentValues:!1})),r(F(n))},executeToggleExclude:({facetId:e,selection:t})=>{let n=Hn({facetId:e,facetValue:t.value});r(Ur({facetId:e,selection:t})),r(Aa({facetId:e,freezeCurrentValues:!1})),r(F(n))},facetValuesSelector:Om};return Su(t)},i=()=>{let t={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:e=>{r(Yt(e)),r(F(bi(e)))},executeToggleExclude:e=>{r(Hr(e)),r(F(bi(e)))},facetValuesSelector:AS};return Su(t)},s=()=>{let t={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:e=>{r(zt(e)),r(F(Fi(e)))},executeToggleExclude:e=>{r($r(e)),r(F(Fi(e)))},facetValuesSelector:kS};return Su(t)},o=()=>Object.keys(n().categoryFacetSet).map(l).filter((e=>e.path.length)),l=e=>{let t=qm(n(),e);return{facetId:e,field:n().categoryFacetSet[e].request.field,path:t,deselect:()=>{r(Vt(e)),r(F(mu({categoryFacetPath:t.map((e=>e.value)),categoryFacetId:e})))}}},u=()=>{var e;let t=null!=(e=n().staticFilterSet)?e:{};return Object.values(t).map(c)},c=e=>{let{id:t,values:r}=e,n=r.filter((e=>"idle"!==e.state)).map((e=>d(t,e)));return{id:t,values:n}},d=(e,t)=>({value:t,deselect:()=>{let{caption:n,expression:a}=t,i=fo({staticFilterId:e,staticFilterValue:{caption:n,expression:a}});"selected"===t.state?r(hr({id:e,value:t})):"excluded"===t.state&&r(Sr({id:e,value:t})),r(F(i))}}),f=()=>{var e,t;let r=null!=(t=null==(e=n().automaticFacetSet)?void 0:e.set)?t:{};return Object.values(r).map((e=>g(e.response)))},g=e=>{let{field:t,label:r}=e,n=e.values.filter((e=>"selected"===e.state)).map((e=>p(t,e)));return{facetId:t,field:t,label:r,values:n}},p=(e,t)=>({value:t,deselect:()=>{let n=Hn({facetId:e,facetValue:t.value});r(Gr({field:e,selection:t})),r(F(n))}});return{...t,get state(){return{facetBreadcrumbs:a(),categoryFacetBreadcrumbs:o(),numericFacetBreadcrumbs:i(),dateFacetBreadcrumbs:s(),staticFilterBreadcrumbs:u(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:!![...a(),...i(),...s(),...o(),...u(),...f()].length}},deselectAll:()=>{t.deselectAll(),r(F(gu()))}}}function qE(e){return e.addReducers({configuration:L,search:B,facetSet:Kt,numericFacetSet:ot,dateFacetSet:Jt,categoryFacetSet:Nt}),!0}var TE=()=>({build:e=>Ay(e)});function Py(e){return"redirect"===e.type}var Zd=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Py);return e.length?e[0].content:null}},mo=h("standaloneSearchBox/register",(e=>y(e,{id:w,redirectionUrl:w}))),go=h("standaloneSearchBox/reset",(e=>y(e,{id:w}))),ho=h("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>y(e,{id:w}))),So=h("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),ea=X("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new R({emptyAllowed:!1})});let s=await VE(r()),o=await a.plan(s);if(Ie(o))return n(o.error);let{redirectionUrl:l}=new Zd(o.success);return l&&t(DE(l)),l||""})),DE=e=>P("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),VE=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Xe(e.configuration.analytics)},...e.configuration.analytics.enabled&&await yn(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function wy(){return{}}var yu=I(wy(),(e=>e.addCase(mo,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=Ey(n))})).addCase(go,((e,t)=>{let{id:r}=t.payload,n=e[r];n&&(e[r]=Ey(n.defaultRedirectionUrl))})).addCase(ea.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!0)})).addCase(ea.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];!n||(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(ea.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!1)})).addCase(ho,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="searchFromLink")})).addCase(So,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));function Ey(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Iy=new W({...Jd,redirectionUrl:new R({required:!0,emptyAllowed:!1})});function Oy(e,t){if(!NE(e))throw A;let{dispatch:r}=e,n=()=>e.state,a=t.options.id||ja("standalone_search_box"),i={id:a,highlightOptions:{...t.options.highlightOptions},...ru,...t.options};ce(e,Iy,i,"buildStandaloneSearchBox");let s=au(e,{options:i});return r(mo({id:a,redirectionUrl:i.redirectionUrl})),{...s,updateText(e){s.updateText(e),r(ho({id:a}))},selectSuggestion(e){let t=Gd(n(),{id:a,suggestion:e});r(er({id:a,expression:e})),r(So({id:a,metadata:t})),this.submit()},afterRedirection(){r(go({id:a}))},submit(){r(tt({q:this.state.value,enableQuerySyntax:i.enableQuerySyntax})),r(ea({id:a}))},get state(){let e=n().standaloneSearchBoxSet[a];return{...s.state,isLoading:e.isLoading,redirectTo:e.redirectTo,analytics:e.analytics}}}}function NE(e){return e.addReducers({standaloneSearchBoxSet:yu,configuration:L,query:st,querySuggest:so}),!0}var ME=e=>({build:t=>Oy(t,e)});function ky(e,t){return e.q!==t.q?Xr():e.sortCriteria!==t.sortCriteria?co():e.firstResult!==t.firstResult?ro():e.numberOfResults!==t.numberOfResults?to():yo(e.f,t.f)?Ri(e.f,t.f):yo(e.fExcluded,t.fExcluded)?Ri(e.fExcluded,t.fExcluded,!0):yo(e.cf,t.cf)?Ri(e.cf,t.cf):yo(e.af,t.af)?Ri(e.af,t.af):yo(e.nf,t.nf)?Ty(e.nf,t.nf):yo(e.df,t.df)?Ty(e.df,t.df):Ir()}function yo(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function qy(e){let t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function Ri(e={},t={},r=!1){let n=Object.keys(e),a=Object.keys(t),i=n.filter((e=>!a.includes(e)));if(i.length){let t=i[0];return e[t].length>1?Re(t):Ge({facetId:t,facetValue:e[t][0]})}let s=a.filter((e=>!n.includes(e)));if(s.length){let e=s[0];return r?gt({facetId:e,facetValue:t[e][0]}):ye({facetId:e,facetValue:t[e][0]})}let o=a.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!o)return Ir();let l=e[o],u=t[o],c=u.filter((e=>!l.includes(e)));if(c.length)return r?gt({facetId:o,facetValue:c[0]}):ye({facetId:o,facetValue:c[0]});let d=l.filter((e=>!u.includes(e)));return d.length?Ge({facetId:o,facetValue:d[0]}):Ir()}function Ty(e={},t={}){return Ri(qy(e),qy(t))}function Dy(e){var t,r,n,a,i,s;return{q:Se().q,enableQuerySyntax:Se().enableQuerySyntax,aq:null!=(r=null==(t=e.advancedSearchQueries)?void 0:t.defaultFilters.aq)?r:pt().defaultFilters.aq,cq:null!=(a=null==(n=e.advancedSearchQueries)?void 0:n.defaultFilters.cq)?a:pt().defaultFilters.cq,firstResult:rt().firstResult,numberOfResults:null!=(s=null==(i=e.pagination)?void 0:i.defaultNumberOfResults)?s:rt().defaultNumberOfResults,sortCriteria:qt(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:qr(),sf:{},tab:"",af:{}}}var LE=new W({parameters:new E({options:{required:!0},values:Ss})});function Vy(e,t){let{dispatch:r}=e,n=V(e);return Oe(e,LE,t.initialState,"buildSearchParameterManager"),r(ae(t.initialState.parameters)),{...n,synchronize(t){let n=vu(e,t);r(ae(n))},get state(){return{parameters:ep(e)}}}}function vu(e,t){return{...Dy(e.state),...t}}function Ny(e,t){return BE(e,t)}function ep(e){let t=e.state;return{...QE(t),...jE(t),...UE(t),...My(t,Ly,"f"),...My(t,_E,"fExcluded"),...$E(t),...HE(t),...WE(t),...zE(t)}}function QE(e){if(void 0===e.query)return{};let t=e.query.q;return t!==Se().q?{q:t}:{}}function jE(e){var t;let r=Object.values(null!=(t=e.tabSet)?t:{}).find((e=>e.isActive));return r?{tab:r.id}:{}}function BE(e,t){let r=e.state.tabSet,n=t.tab;if(!r||!Object.entries(r).length||!n)return!0;let a=n in r;return a||e.logger.warn(`The tab search parameter "${n}" is invalid. Ignoring change.`),a}function UE(e){if(void 0===e.sortCriteria)return{};let t=e.sortCriteria;return t!==qt()?{sortCriteria:t}:{}}function My(e,t,r){if(void 0===e.facetSet)return{};let n=Object.entries(e.facetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:r}])=>{let n=t(r.currentValues);return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{[r]:n}:{}}function Ly(e){return e.filter((e=>"selected"===e.state)).map((e=>e.value))}function _E(e){return e.filter((e=>"excluded"===e.state)).map((e=>e.value))}function $E(e){if(void 0===e.categoryFacetSet)return{};let t=Object.entries(e.categoryFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,t])=>{let r=He(t.request.currentValues).map((e=>e.value));return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{cf:t}:{}}function HE(e){if(void 0===e.numericFacetSet)return{};let t=Object.entries(e.numericFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:t}])=>{let r=Qy(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{nf:t}:{}}function WE(e){if(void 0===e.dateFacetSet)return{};let t=Object.entries(e.dateFacetSet).filter((([t])=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a})).map((([e,{request:t}])=>{let r=Qy(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{df:t}:{}}function Qy(e){return e.filter((e=>"selected"===e.state))}function zE(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;if(void 0===r)return{};let n=Object.entries(r).map((([e,{response:t}])=>{let r=Ly(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{af:n}:{}}function jy(e,t){let{dispatch:r}=e,n=Vy(e,t);return{...n,synchronize(t){let a=By(e),i=vu(e,a),s=vu(e,t);Bd(i,s)||!Ny(e,s)||(n.synchronize(t),r(F(ky(i,s))))},get state(){return{parameters:By(e)}}}}function By(e){let t=e.state;return{...ep(e),...GE(t),...YE(t),...KE(t),...JE(t),...XE(t),...tI(t),...ZE(t)}}function GE(e){if(void 0===e.query)return{};let t=e.query.enableQuerySyntax;return void 0!==t&&t!==Se().enableQuerySyntax?{enableQuerySyntax:t}:{}}function YE(e){if(void 0===e.advancedSearchQueries)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function KE(e){if(void 0===e.advancedSearchQueries)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function JE(e){if(void 0===e.pagination)return{};let t=e.pagination.firstResult;return t!==rt().firstResult?{firstResult:t}:{}}function XE(e){if(void 0===e.pagination)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function ZE(e){if(void 0===e.staticFilterSet)return{};let t=Object.entries(e.staticFilterSet).map((([e,t])=>{let r=eI(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{sf:t}:{}}function eI(e){return e.filter((e=>"selected"===e.state)).map((e=>e.caption))}function tI(e){if(void 0===e.debug)return{};let t=e.debug;return t!==qr()?{debug:t}:{}}var rI=()=>({buildWithProps:(e,t)=>jy(e,{initialState:t.initialState})});function Uy(e){return ao(e)}var aI=()=>({build:e=>Uy(e)});async function Cu(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:s}=e.configuration,o=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...s.enabled&&{visitorId:await Xe(e.configuration.analytics)},q:o,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var qa=X("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await Cu(a,e),s=await t.apiClient.html(i);return Ie(s)?n(s.error):{content:s.success,uniqueId:e.uniqueId}})),vo=h("resultPreview/next"),Co=h("resultPreview/previous"),xo=h("resultPreview/prepare",(e=>y(e,{results:new _({required:!0})}))),_y=2048,Fo=X("resultPreview/updateContentURL",(async(e,{getState:t,extra:r})=>{let n=t(),a=Uf(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(null==a?void 0:a.length)>_y&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${_y} characters.`),{contentURL:a}})),$y=e=>P("analytics/resultPreview/open",((t,r)=>{Ze(e);let n=Me(e,r),a=ze(e);return t.makeDocumentQuickview(n,a)}));function tp(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var rp=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:a}=tp();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=a},ap=e=>e.filter((e=>e.hasHtmlVersion)).map((e=>e.uniqueId)),xu=I(tp(),(e=>{e.addCase(qa.pending,(e=>{e.isLoading=!0})).addCase(qa.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1})).addCase(F.fulfilled,((e,t)=>{rp(e),e.resultsWithPreview=ap(t.payload.response.results)})).addCase(nt.fulfilled,((e,t)=>{rp(e),e.resultsWithPreview=e.resultsWithPreview.concat(ap(t.payload.response.results))})).addCase(qe.fulfilled,rp).addCase(xo,((e,t)=>{e.resultsWithPreview=ap(t.payload.results)})).addCase(vo,(e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t})).addCase(Co,(e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t})).addCase(Fo.fulfilled,((e,t)=>{e.contentURL=t.payload.contentURL}))}));function Hy(e,t,r,n,a){if(!nI(e))throw A;let{dispatch:i}=e,s=()=>e.state,o=V(e),{result:l,maximumPreviewSize:u}=t.options,c=()=>{let{resultsWithPreview:e,position:t}=s().resultPreview;return e[t]},d=e=>{i(Fo({uniqueId:e,requestedOutputSize:u,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||i(qa({uniqueId:e,requestedOutputSize:u})),a&&a()};return{...o,fetchResultContent(){d(l.uniqueId)},next(){i(vo()),d(c())},previous(){i(Co()),d(c())},get state(){let e=s(),t=l.hasHtmlVersion,r=e.resultPreview;return{content:l.uniqueId===r.uniqueId?r.content:"",resultHasPreview:t,isLoading:r.isLoading,contentURL:r.contentURL,currentResultUniqueId:c()}}}}function nI(e){return e.addReducers({configuration:L,resultPreview:xu}),!0}function Wy(e,t){if(!oI(e))throw A;let{dispatch:r}=e,n=()=>e.state.search.results,a=Hy(e,t,Cu,"/html",(()=>{e.dispatch($y(t.options.result))}));return r(xo({results:n()})),{...a,get state(){return{...a.state,currentResult:n().findIndex((e=>e.uniqueId===a.state.currentResultUniqueId))+1,totalResults:n().length}}}}function oI(e){return e.addReducers({search:B}),!0}var iI=e=>({build:t=>Wy(t,e)}),sI=e=>P("analytics/folding/showMore",((t,r)=>(Ze(e),t.makeShowMoreFoldedResults(Me(e,r),ze(e))))),cI=()=>P("analytics/folding/showLess",(e=>e.makeShowLessFoldedResults())),zy={logShowMoreFoldedResults:sI,logShowLessFoldedResults:cI};function uI(e,t){return e.raw[t.collection]}function np(e,t){return e.raw[t.parent]}function Ai(e,t){let r=e.raw[t.child];return Qi(r)?r[0]:r}function lI(e,t){return void 0!==(e||t)&&e===t}function Gy(e,t,r,n=[]){let a=Ai(e,r);return a?-1!==n.indexOf(a)?[]:t.filter((t=>{let n=Ai(t,r)===Ai(e,r);return np(t,r)===a&&!n})).map((e=>({result:e,children:Gy(e,t,r,[...n,a])}))):[]}function dI(e,t){return e.find((e=>{let r=void 0===np(e,t),n=lI(np(e,t),Ai(e,t));return r||n}))}function Yy(e){return e.parentResult?Yy(e.parentResult):e}function pI(e,t,r){var n;let a=ds(e),i=null!=(n=null!=r?r:dI(a,t))?n:Yy(e);return{result:i,children:Gy(i,a,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Fu(e,t,r){let n={};return e.forEach((e=>{let a=uI(e,t);!a||!Ai(e,t)&&!e.parentResult||(n[a]=pI(e,t,r))})),n}function Ky(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var bu=I(Js(),(e=>e.addCase(F.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Fu(t.response.results,e.fields):{}})).addCase(qe.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Fu(t.response.results,e.fields):{}})).addCase(nt.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...Fu(t.response.results,e.fields)}:{}})).addCase(Mr,((e,{payload:t})=>{var r,n,a,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(a=t.childField)?a:e.fields.child},filterFieldRange:null!=(i=t.numberOfFoldedResults)?i:e.filterFieldRange}})).addCase(Lr.pending,((e,{meta:t})=>{Ky(e,t.arg).isLoadingMoreResults=!0})).addCase(Lr.rejected,((e,{meta:t})=>{Ky(e,t.arg).isLoadingMoreResults=!1})).addCase(Lr.fulfilled,((e,{payload:{collectionId:t,results:r,rootResult:n}})=>{let a=Fu(r,e.fields,n);if(!a||!a[t])throw new Error(`Unable to create collection ${t} from received results: ${JSON.stringify(r)}. Folding most probably in an invalid state... `);e.collections[t]=a[t],e.collections[t].moreResultsAvailable=!1})))),fI=new W(Id);function Jy(e,t,r){var n;if(!mI(e))throw A;let a=eu(e,t),{dispatch:i}=e,s=(null==(n=t.options)?void 0:n.folding)?ce(e,fI,t.options.folding,"buildFoldedResultList"):{};return i(Mr({...s})),{...a,loadCollection:n=>{i(t.loadCollectionActionCreator(n.result.raw[e.state.folding.fields.collection])),i(r.logShowMoreFoldedResults(n.result))},logShowMoreFoldedResults:e=>{i(r.logShowMoreFoldedResults(e))},logShowLessFoldedResults:()=>{i(r.logShowLessFoldedResults())},findResultById(e){return op(this.state.results,(t=>t.result.uniqueId===e.result.uniqueId))},findResultByCollection(e){return op(this.state.results,(t=>t.result.raw.foldingcollection===e.result.raw.foldingcollection))},get state(){let t=e.state;return{...a.state,results:a.state.results.map((e=>{let r=e.raw[t.folding.fields.collection];return r&&t.folding.collections[r]?t.folding.collections[r]:{result:e,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}}))}}}}function mI(e){return e.addReducers({search:B,configuration:Hs,folding:bu,query:st}),!0}function op(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let e=op(n.children,t);if(e)return e}}return null}function Xy(e,t={}){let r=Jy(e,{...t,loadCollectionActionCreator:Lr},zy);return{...r,get state(){return r.state}}}var gI=e=>({build:t=>Xy(t,e)}),Zy=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}}),ta=I(Zy(),(e=>e.addCase(F.pending,(e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}})).addCase(F.fulfilled,((e,t)=>{var r;let n=[],a=[],i=[],s=[];t.payload.response.triggers.forEach((e=>{switch(e.type){case"redirect":n.push(e.content);break;case"query":a.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":s.push(e.content)}})),e.redirectTo=null!=(r=n[0])?r:"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=s})).addCase(Ms,((e,t)=>{e.queryModification={...t.payload,queryToIgnore:""}})).addCase(bn,((e,t)=>{e.queryModification.queryToIgnore=t.payload}))));function ev(e){if(!hI(e))throw A;let t=V(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.redirectTo;return{...t,subscribe(t){let n=()=>{let e=a!==this.state.redirectTo;a=this.state.redirectTo,e&&this.state.redirectTo&&(t(),r(Vs()))};return n(),e.subscribe(n)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function hI(e){return e.addReducers({triggers:ta}),!0}var SI=()=>({build:e=>ev(e)});function tv(e){if(!yI(e))throw A;let t=V(e),{dispatch:r}=e,n=()=>e.state,a=()=>n().triggers.queryModification.newQuery,i=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:a(),originalQuery:i(),wasQueryModified:""!==a()}},undo(){r(bn(a())),r(tt({q:i()})),r(F(Ts({undoneQuery:a()})))}}}function yI(e){return e.addReducers({triggers:ta,query:st}),!0}var vI=()=>({build:e=>tv(e)});function rv(e){if(!CI(e))throw A;let t=V(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.executions;return{...t,subscribe(t){let n=()=>{let e=!Ia(this.state.executions,a,((e,t)=>e.functionName===t.functionName&&Ia(e.params,t.params)));a=this.state.executions,e&&this.state.executions.length&&(t(),r(Ns()))};return n(),e.subscribe(n)},get state(){return{executions:n().triggers.executions}}}}function CI(e){return e.addReducers({triggers:ta}),!0}var xI=()=>({build:e=>rv(e)});function av(e){if(!FI(e))throw A;let t=V(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.notifications;return{...t,subscribe(t){let n=()=>{let e=!Ia(a,this.state.notifications);a=this.state.notifications,e&&(t(),r(Ds()))};return n(),e.subscribe(n)},get state(){return{notifications:n().triggers.notifications}}}}function FI(e){return e.addReducers({triggers:ta}),!0}var bI=()=>({build:e=>av(e)}),Ru=()=>new E({values:{questionAnswerId:w},options:{required:!0}}),ip=()=>new E({values:{linkText:se,linkURL:se},options:{required:!0}});function bo(e){return y(e,Ru())}function yr(e,t){var r,n;let a=null!=t?t:null==(n=null==(r=e.search)?void 0:r.questionAnswer)?void 0:n.documentId;return a&&e.search&&kg(e,a.contentIdKey,a.contentIdValue)}function Ta(e,t){var r,n,a,i,s;let o=null!=(n=null==(r=e.questionAnswering)?void 0:r.relatedQuestions.findIndex((e=>e.questionAnswerId===t)))?n:-1;if(-1===o)return null;let l=null==(s=null==(i=null==(a=e.search)?void 0:a.questionAnswer)?void 0:i.relatedQuestions)?void 0:s[o];return null!=l?l:null}var sp=()=>P("analytics/smartSnippet/expand",(e=>e.makeExpandSmartSnippet())),cp=()=>P("analytics/smartSnippet/collapse",(e=>e.makeCollapseSmartSnippet())),up=()=>P("analytics/smartSnippet/like",(e=>e.makeLikeSmartSnippet())),lp=()=>P("analytics/smartSnippet/dislike",(e=>e.makeDislikeSmartSnippet()));function dp(){return P("analytics/smartSnippet/source/open",((e,t)=>{let r=yr(t);return e.makeOpenSmartSnippetSource(Me(r,t),ze(r))}))}var Pi=e=>P("analytics/smartSnippet/source/open",((t,r)=>{y(e,ip());let n=yr(r);return t.makeOpenSmartSnippetInlineLink(Me(n,r),{...ze(n),...e})})),pp=()=>P("analytics/smartSnippet/feedbackModal/open",(e=>e.makeOpenSmartSnippetFeedbackModal())),fp=()=>P("analytics/smartSnippet/feedbackModal/close",(e=>e.makeCloseSmartSnippetFeedbackModal())),mp=e=>P("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason(e))),gp=e=>P("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason("other",e))),hp=e=>P("analytics/smartSnippetSuggestion/expand",((t,r)=>{bo(e);let n=Ta(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),Sp=e=>P("analytics/smartSnippetSuggestion/expand",((t,r)=>{bo(e);let n=Ta(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),wi=e=>P("analytics/smartSnippet/source/open",((t,r)=>{y(e,Ru());let n=Ta(r,e.questionAnswerId);if(!n)return null;let a=yr(r,n.documentId);return a?t.makeOpenSmartSnippetSuggestionSource(Me(a,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),Au=(e,t)=>P("analytics/smartSnippet/source/open",((r,n)=>{y(e,Ru()),y(t,ip());let a=Ta(n,e.questionAnswerId);if(!a)return null;let i=yr(n,a.documentId);return i?r.makeOpenSmartSnippetSuggestionInlineLink(Me(i,n),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId,linkText:t.linkText,linkURL:t.linkURL}):null})),Pu={logExpandSmartSnippet:sp,logCollapseSmartSnippet:cp,logLikeSmartSnippet:up,logDislikeSmartSnippet:lp,logOpenSmartSnippetSource:dp,logOpenSmartSnippetInlineLink:Pi,logOpenSmartSnippetFeedbackModal:pp,logCloseSmartSnippetFeedbackModal:fp,logSmartSnippetFeedback:mp,logSmartSnippetDetailedFeedback:gp,logExpandSmartSnippetSuggestion:hp,logCollapseSmartSnippetSuggestion:Sp,logOpenSmartSnippetSuggestionSource:wi},Ro=h("smartSnippet/expand"),Ao=h("smartSnippet/collapse"),Po=h("smartSnippet/like"),wo=h("smartSnippet/dislike"),Eo=h("smartSnippet/feedbackModal/open"),ra=h("smartSnippet/feedbackModal/close"),Io=h("smartSnippet/related/expand",(e=>bo(e))),Oo=h("smartSnippet/related/collapse",(e=>bo(e))),yp=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),nv=(e,t)=>e.findIndex((e=>e.questionAnswerId===t.questionAnswerId));function ov({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Bi({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function RI(e,t){let r=ov(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var tr=I(yp(),(e=>e.addCase(Ro,(e=>{e.expanded=!0})).addCase(Ao,(e=>{e.expanded=!1})).addCase(Po,(e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1})).addCase(wo,(e=>{e.liked=!1,e.disliked=!0})).addCase(Eo,(e=>{e.feedbackModalOpen=!0})).addCase(ra,(e=>{e.feedbackModalOpen=!1})).addCase(F.fulfilled,((e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map(((t,r)=>RI(t,e.relatedQuestions[r]))),n=ov(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{...yp(),relatedQuestions:r,questionAnswerId:n}})).addCase(Io,((e,t)=>{let r=nv(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(Oo,((e,t)=>{let r=nv(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)})))),AI={results:new _({required:!0,each:new E({values:ei})}),maxLength:new k({required:!0,min:1,default:10})},ko=h("recentResults/registerRecentResults",(e=>y(e,AI))),aa=h("recentResults/pushRecentResult",(e=>(Ze(e),{payload:e}))),qo=h("recentResults/clearRecentResults");function To(e,t,r){if(!PI(e))throw A;let n,a={selectionDelay:1e3,debounceWait:1e3,...t.options};return{select:Ws(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function PI(e){return e.addReducers({configuration:L}),!0}function iv(e,t,r){var n;if(!wI(e))throw A;let a=V(e),i=()=>e.state,s=()=>yr(i()),o=null,l=To(e,{options:{selectionDelay:null==(n=null==r?void 0:r.options)?void 0:n.selectionDelay}},(()=>{let r=s();if(!r)return void(o=null);let{searchResponseId:n}=i().search;o!==n&&(o=n,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(aa(r)))}));return{...a,get state(){let e=i();return{question:e.search.questionAnswer.question,answer:e.search.questionAnswer.answerSnippet,documentId:e.search.questionAnswer.documentId,expanded:e.questionAnswering.expanded,answerFound:""!==e.search.questionAnswer.answerSnippet,liked:e.questionAnswering.liked,disliked:e.questionAnswering.disliked,feedbackModalOpen:e.questionAnswering.feedbackModalOpen,source:s()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(Ro())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(Ao())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(Po())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(wo())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Eo())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(ra())},sendFeedback(r){e.dispatch(t.logSmartSnippetFeedback(r)),e.dispatch(ra())},sendDetailedFeedback(r){e.dispatch(t.logSmartSnippetDetailedFeedback(r)),e.dispatch(ra())},selectSource(){l.select()},beginDelayedSelectSource(){l.beginDelayedSelect()},cancelPendingSelectSource(){l.cancelPendingSelect()}}}function wI(e){return e.addReducers({search:B,questionAnswering:tr}),!0}function wu(e,t){if(!EI(e))throw A;let r=new Set,n=null,a={},i=(i,s)=>{let{searchResponseId:o}=e.state.search;(e=>{n!==e&&(n=e,a={},r.clear())})(o);let l=Bi({...i,questionAnswerId:s});return l in a||(a[l]=((n,a,i)=>{var s;return To(e,{options:{selectionDelay:null==(s=null==t?void 0:t.options)?void 0:s.selectionDelay}},(()=>{(e=>!!r.has(e)||(r.add(e),!1))(a)||e.dispatch(i?Au({questionAnswerId:i},n):Pi(n))}))})(i,l,s)),a[l]};return{selectInlineLink(e,t){var r;null==(r=i(e,t))||r.select()},beginDelayedSelectInlineLink(e,t){var r;null==(r=i(e,t))||r.beginDelayedSelect()},cancelPendingSelectInlineLink(e,t){var r;null==(r=i(e,t))||r.cancelPendingSelect()}}}function EI(e){return e.addReducers({search:B,questionAnswering:tr}),!0}function sv(e,t){var r;let n=iv(e,Pu,t),a=wu(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}});return{...n,get state(){return n.state},selectInlineLink(e){a.selectInlineLink(e)},beginDelayedSelectInlineLink(e){a.beginDelayedSelectInlineLink(e)},cancelPendingSelectInlineLink(e){a.cancelPendingSelectInlineLink(e)}}}var II=e=>({build:t=>sv(t,e)});function cv(e,t){if(!OI(e))throw A;let r=V(e),n=t=>{let{contentIdKey:r,contentIdValue:n}=t;return e.state.search.results.find((e=>pr(e,r)===n))};return{...r,get state(){let t=e.state;return{questions:t.search.questionAnswer.relatedQuestions.map(((e,r)=>({question:e.question,answer:e.answerSnippet,documentId:e.documentId,questionAnswerId:t.questionAnswering.relatedQuestions[r].questionAnswerId,expanded:t.questionAnswering.relatedQuestions[r].expanded,source:n(e.documentId)})))}},expand(r){let n={questionAnswerId:r};e.dispatch(t.logExpandSmartSnippetSuggestion(n)),e.dispatch(Io(n))},collapse(r){let n={questionAnswerId:r};e.dispatch(t.logCollapseSmartSnippetSuggestion(n)),e.dispatch(Oo(n))}}}function OI(e){return e.addReducers({search:B,questionAnswering:tr}),!0}function uv(e,t){if(!kI(e))throw A;let r=()=>e.state,n=new Set,a=null,i={},s=s=>{let{searchResponseId:o}=r().search;(e=>{a!==e&&(a=e,i={},n.clear())})(o);let l=(e=>{let t=r(),n=Ta(t,e);return n?yr(t,n.documentId):null})(s);return l?(s in i||(i[s]=((r,a)=>{var i;return To(e,{options:{selectionDelay:null==(i=null==t?void 0:t.options)?void 0:i.selectionDelay}},(()=>{(e=>!!n.has(e)||(n.add(e),!1))(a)||(e.dispatch(wi({questionAnswerId:a})),e.dispatch(aa(r)))}))})(l,s)),i[s]):null};return{selectSource(e){var t;null==(t=s(e))||t.select()},beginDelayedSelectSource(e){var t;null==(t=s(e))||t.beginDelayedSelect()},cancelPendingSelectSource(e){var t;null==(t=s(e))||t.cancelPendingSelect()}}}function kI(e){return e.addReducers({search:B,questionAnswering:tr}),!0}function lv(e,t){var r,n;let a=cv(e,Pu),i=wu(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}}),s=uv(e,{options:{selectionDelay:null==(n=null==t?void 0:t.options)?void 0:n.selectionDelay}});return{...a,get state(){return a.state},selectSource(e){s.selectSource(e)},beginDelayedSelectSource(e){s.beginDelayedSelectSource(e)},cancelPendingSelectSource(e){s.cancelPendingSelectSource(e)},selectInlineLink(e,t){i.selectInlineLink(t,e)},beginDelayedSelectInlineLink(e,t){i.beginDelayedSelectInlineLink(t,e)},cancelPendingSelectInlineLink(e,t){i.cancelPendingSelectInlineLink(t,e)}}}var qI=e=>({build:t=>lv(t,e)}),TI={queries:new _({required:!0,each:new R({emptyAllowed:!1})}),maxLength:new k({required:!0,min:1,default:10})},Do=h("recentQueries/registerRecentQueries",(e=>y(e,TI))),Vo=h("recentQueries/clearRecentQueries"),dv=()=>P("analytics/recentQueries/clear",(e=>e.makeClearRecentQueries())),pv=()=>P("analytics/recentQueries/click",(e=>e.makeRecentQueryClick()));function fv(){return{queries:[],maxLength:10}}var Eu=I(fv(),(e=>{e.addCase(Do,((e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(Vo,(e=>{e.queries=[]})).addCase(F.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;if(!r.length||!n.length)return;e.queries=e.queries.filter((e=>e!==r));let a=e.queries.slice(0,e.maxLength-1);e.queries=[r,...a]}))})),DI={queries:[]},VI={maxLength:10,clearFilters:!0},NI=new W({queries:new _({required:!0})}),MI=new W({maxLength:new k({required:!0,min:1}),clearFilters:new U});function LI(e,t){ce(e,MI,null==t?void 0:t.options,"buildRecentQueriesList"),Oe(e,NI,null==t?void 0:t.initialState,"buildRecentQueriesList")}function mv(e,t){if(!QI(e))throw A;let r=V(e),{dispatch:n}=e,a={...VI,...null==t?void 0:t.options},i={...DI,...null==t?void 0:t.initialState};LI(e,{options:a,initialState:i});let s={queries:i.queries,maxLength:a.maxLength};return n(Do(s)),{...r,get state(){let t=e.state;return{...t.recentQueries,analyticsEnabled:t.configuration.analytics.enabled}},clear(){n(dv()),n(Vo())},executeRecentQuery(e){let t=new k({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);n(Us({q:this.state.queries[e],clearFilters:a.clearFilters})),n(F(pv()))}}}function QI(e){return e.addReducers({search:B,recentQueries:Eu}),!0}var jI=e=>({build:t=>mv(t,e)}),gv=()=>P("analytics/recentResults/clear",(e=>e.makeClearRecentResults()));function hv(){return{results:[],maxLength:10}}var Iu=I(hv(),(e=>{e.addCase(ko,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(qo,(e=>{e.results=[]})).addCase(aa,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))})),BI={initialState:{results:[]},options:{maxLength:10}},UI=new W({results:new _({required:!0})}),_I=new W({maxLength:new k({required:!0,min:1})});function $I(e,t){ce(e,_I,null==t?void 0:t.options,"buildRecentResultsList"),Oe(e,UI,null==t?void 0:t.initialState,"buildRecentResultsList")}function Sv(e,t){if(!HI(e))throw A;let r=V(e),{dispatch:n}=e,a={...BI,...t};$I(e,a);let i={results:a.initialState.results,maxLength:a.options.maxLength};return n(ko(i)),{...r,get state(){return e.state.recentResults},clear(){n(gv()),n(qo())}}}function HI(e){return e.addReducers({recentResults:Iu}),!0}var WI=e=>({build:t=>Sv(t,e)});function yv(e,t){if(!zI(e))throw A;let{facetSearch:r,allowedValues:n,...a}=t.options.facet,i=De(e,a);e.dispatch($t({...yi,...a,facetId:i,...n&&{allowedValues:{type:"simple",values:n}}}));let s=Rc(e,{options:{...r,facetId:i},select:t=>{e.dispatch(Z()),e.dispatch(F(ye({facetId:i,facetValue:t.rawValue})))},exclude:t=>{e.dispatch(Z()),e.dispatch(F(gt({facetId:i,facetValue:t.rawValue})))},isForFieldSuggestions:!0});return{...V(e),...s,updateText:function(e){s.updateText(e),s.search()},get state(){return s.state}}}function zI(e){return e.addReducers({facetSet:Kt,configuration:L,facetSearchSet:Kn,search:B}),!0}var GI=e=>({build:t=>yv(t,e)});function vv(e,t){if(!YI(e))throw A;let{facetSearch:r,...n}=t.options.facet,a=De(e,n);e.dispatch(Dt({...mi,...n,facetId:a}));let i=xc(e,{options:{...r,facetId:a},isForFieldSuggestions:!0});return{...V(e),...i,updateText:function(e){i.updateText(e),i.search()},get state(){return i.state}}}function YI(e){return e.addReducers({categoryFacetSet:Nt,configuration:L,categoryFacetSearchSet:Un,search:B}),!0}var KI=e=>({build:t=>vv(t,e)}),Cv=I(Ga(),(e=>{e.addCase(F.fulfilled,((e,t)=>{var r;e.set={};let n=null==(r=t.payload.response.generateAutomaticFacets)?void 0:r.facets;null==n||n.forEach((t=>{e.set[t.field]={response:t}}))})).addCase(Yc,((e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)})).addCase(Gr,((e,t)=>{var r;let{field:n,selection:a}=t.payload,i=null==(r=e.set[n])?void 0:r.response;if(!i)return;let s=i.values.find((e=>e.value===a.value));if(!s)return;let o="selected"===s.state;s.state=o?"idle":"selected"})).addCase(Kc,((e,t)=>{var r;let n=t.payload,a=null==(r=e.set[n])?void 0:r.response;if(a)for(let e of a.values)e.state="idle"})).addCase(ae,((e,t)=>{var r,n,a;let i=null!=(r=t.payload.af)?r:{},s=Object.keys(e.set);for(let t in i)if(!e.set[t]){let r=JI(t),n=i[t].map((e=>XI(e)));r.values.push(...n),e.set[t]={response:r}}for(let t of s)if(!(t in i)){let r=null==(n=e.set[t])?void 0:n.response;for(let e of r.values)e.state="idle"}for(let t in i){let r=null==(a=e.set[t])?void 0:a.response;if(r){let e=r.values;for(let r of e)i[t].includes(r.value)?"idle"===r.state&&(r.state="selected"):r.state="idle"}}})).addCase(re.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.automaticFacetSet.set).length)return t.payload.automaticFacetSet})).addCase(xe,(e=>{Object.values(e.set).forEach((({response:e})=>{e.values.forEach((e=>e.state="idle"))}))}))}));function JI(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function XI(e){return{value:e,state:"selected",numberOfResults:0}}function xv(e,t){let{dispatch:r}=e,n=V(e),{field:a}=t;return{...n,toggleSelect(e){r(Gr({field:a,selection:e})),r(F(bc(a,e)))},deselectAll(){r(Kc(a)),r(F(Re(a)))},get state(){var t,r;let n=null==(r=null==(t=e.state.automaticFacetSet)?void 0:t.set[a])?void 0:r.response;return n?{field:n.field,label:n.label,values:n.values}:{field:"",values:[],label:""}}}}function Fv(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function bv(e,t){if(!ZI(e))throw A;let{dispatch:r}=e,n=Fv(t.options);return r(Yc(n)),{...V(e),get state(){var t,r;return{automaticFacets:null!=(r=null==(t=e.state.search.response.generateAutomaticFacets)?void 0:t.facets.map((t=>xv(e,{field:t.field}))))?r:[]}}}}function ZI(e){return e.addReducers({automaticFacetSet:Cv,configuration:L,search:B}),!0}var eO=e=>({build:t=>bv(t,e)}),na=()=>new R({required:!1,emptyAllowed:!0}),Ou=h("advancedSearchQueries/update",(e=>y(e,{aq:na(),cq:na(),lq:na(),dq:na()}))),ku=h("advancedSearchQueries/register",(e=>y(e,{aq:na(),cq:na(),lq:na(),dq:na()}))),Rv=I(pt(),(e=>{e.addCase(Ou,((e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;Ce(r)||(e.aq=r,e.aqWasSet=!0),Ce(n)||(e.cq=n,e.cqWasSet=!0),Ce(a)||(e.lq=a,e.lqWasSet=!0),Ce(i)||(e.dq=i,e.dqWasSet=!0)})).addCase(ku,((e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;Ce(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),Ce(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),Ce(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a)),Ce(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))})).addCase(re.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(ae,((e,t)=>{let{aq:r,cq:n}=t.payload;Ce(r)||(e.aq=r,e.aqWasSet=!0),Ce(n)||(e.cq=n,e.cqWasSet=!0)}))}));function sse(e){return e.addReducers({advancedSearchQueries:Rv}),{updateAdvancedSearchQueries:Ou,registerAdvancedSearchQueries:ku}}function yse(e){return e.addReducers({categoryFacetSet:Nt}),{deselectAllCategoryFacetValues:Vt,registerCategoryFacet:Dt,toggleSelectCategoryFacetValue:jr,updateCategoryFacetNumberOfValues:Ca,updateCategoryFacetSortCriterion:jn,updateFacetAutoSelection:Et,updateCategoryFacetBasePath:nc}}function Ose(e){return e.addReducers({facetSet:Kt}),{deselectAllFacetValues:de,registerFacet:$t,toggleSelectFacetValue:Ht,toggleExcludeFacetValue:Ur,updateFacetIsFieldExpanded:Ra,updateFacetNumberOfValues:ba,updateFacetSortCriterion:zn,updateFreezeCurrentValues:Aa,updateFacetAutoSelection:Et}}function Qse(e){return e.addReducers({configuration:L}),{disableAnalytics:tn,enableAnalytics:rn,setOriginLevel2:gs,setOriginLevel3:hs,updateAnalyticsConfiguration:Or,updateBasicConfiguration:wt}}function Wse(e){return e.addReducers({configuration:L,pipeline:sn,searchHub:un}),{updateSearchConfiguration:et}}function Jse(e){return e.addReducers({context:Xs}),{addContext:kn,removeContext:qn,setContext:On}}function rce(e){return e.addReducers({dictionaryFieldContext:Zs}),{addContext:Dn,removeContext:Vn,setContext:Tn}}function ice(e){return e.addReducers({debug:nn}),{disableDebug:an,enableDebug:kr}}function mce(e){return e.addReducers({dateFacetSet:Jt}),{deselectAllDateFacetValues:Sc,registerDateFacet:Wt,toggleSelectDateFacetValue:zt,toggleExcludeDateFacetValue:$r,updateDateFacetSortCriterion:hc,updateDateFacetValues:mr}}function xce(e){return e.addReducers({facetOptions:Te}),{updateFacetOptions:Z,enableFacet:je,disableFacet:ge}}function Pce(e){return e.addReducers({didYouMean:tc,query:st}),{applyDidYouMeanCorrection:Ot,disableDidYouMean:Cs,enableDidYouMean:Cn,enableAutomaticQueryCorrection:xs,disableAutomaticQueryCorrection:xn}}function Oce(e){return e.addReducers({fields:Qr}),{registerFieldsToInclude:Nr,enableFetchAllFields:En,disableFetchAllFields:va,fetchFieldsDescription:In}}function Vce(e){return e.addReducers({history:Gc,facetOrder:_c}),{back:ti,forward:ys}}function _ce(e){return e.addReducers({numericFacetSet:ot}),{deselectAllNumericFacetValues:Cc,registerNumericFacet:Gt,toggleSelectNumericFacetValue:Yt,toggleExcludeNumericFacetValue:Hr,updateNumericFacetSortCriterion:vc,updateNumericFacetValues:gr}}function Kce(e){return e.addReducers({folding:bu}),{registerFolding:Mr,loadCollection:Lr}}function eue(e){return e.addReducers({pagination:Zt}),{nextPage:hn,previousPage:Sn,registerNumberOfResults:fn,registerPage:gn,updateNumberOfResults:mn,updatePage:It}}function nue(e){return e.addReducers({pipeline:sn}),{setPipeline:on}}function uue(e){return e.addReducers({query:st}),{updateQuery:tt}}function gue(e){return e.addReducers({querySet:io}),{registerQuerySetQuery:oo,updateQuerySetQuery:Oa}}function Rue(e){return e.addReducers({instantResults:nu}),{registerInstantResults:dn,updateInstantResultsQuery:Tr,clearExpiredResults:pn}}function Vue(e){return e.addReducers({querySuggest:so,querySet:io}),{clearQuerySuggest:Kr,fetchQuerySuggestions:Jr,registerQuerySuggest:no,selectQuerySuggestion:er}}function Bue(e){return e.addReducers({search:B}),{executeSearch:F,fetchMoreResults:nt,fetchFacetValues:Qe,fetchPage:qe,fetchInstantResults:Vr}}function Hue(e){return e.addReducers({searchHub:un}),{setSearchHub:cn}}function Yue(e){return e.addReducers({sortCriteria:iu}),{registerSortCriterion:uo,updateSortCriterion:lo}}function ole(e){return e.addReducers({standaloneSearchBoxSet:yu}),{registerStandaloneSearchBox:mo,fetchRedirectUrl:ea,updateAnalyticsToSearchFromLink:ho,updateAnalyticsToOmniboxFromLink:So,resetStandaloneSearchBox:go}}function dle(e){return e.addReducers({staticFilterSet:du}),{registerStaticFilter:po,toggleSelectStaticFilterValue:hr,toggleExcludeStaticFilterValue:Sr,deselectAllStaticFilterValues:Zr}}function hle(e){return e.addReducers({tabSet:fu}),{registerTab:Pn,updateActiveTab:ft}}function Cle(e){return e.addReducers({questionAnswering:tr}),{collapseSmartSnippet:Ao,expandSmartSnippet:Ro,dislikeSmartSnippet:wo,likeSmartSnippet:Po,openFeedbackModal:Eo,closeFeedbackModal:ra,expandSmartSnippetRelatedQuestion:Io,collapseSmartSnippetRelatedQuestion:Oo}}function ble(e){return e.addReducers({}),{deselectAllBreadcrumbs:xe,deselectAllNonBreadcrumbs:ln}}function Ele(e){return e.addReducers({recentQueries:Eu}),{registerRecentQueries:Do,clearRecentQueries:Vo}}function Tle(e){return e.addReducers({recentResults:Iu}),{registerRecentResults:ko,clearRecentResults:qo,pushRecentResult:aa}}var qu=h("excerptLength/set",(e=>y(e,new k({min:0,required:!0}))));function Av(){return{length:void 0}}var Pv=I(Av(),(e=>{e.addCase(qu,((e,t)=>{e.length=t.payload}))}));function Wle(e){return e.addReducers({excerptLength:Pv}),{setExcerptLength:qu}}function tde(e){return e.addReducers({resultPreview:xu}),{fetchResultContent:qa,updateContentURL:Fo,nextPreview:vo,previousPreview:Co,preparePreviewPagination:xo}}function wv(e){var t,r,n;return null==(n=null==(r=null==(t=e.search)?void 0:t.response)?void 0:r.extendedResults)?void 0:n.generativeQuestionAnsweringId}var Ev=e=>P("analytics/generatedAnswer/streamEnd",((t,r)=>{let n=wv(r);return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e}):null})),Iv=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:null==(t=e.search.extendedResults)?void 0:t.generativeQuestionAnsweringId}},Ov=["default","bullet","step","concise"],Ei=new R({required:!0}),kv=new R,vp=new U({required:!0}),tO={id:Ei,title:Ei,uri:Ei,permanentid:Ei,clickUri:kv},qv=h("generatedAnswer/setIsVisible",(e=>y(e,vp))),Cp=h("generatedAnswer/updateMessage",(e=>y(e,{textDelta:Ei}))),xp=h("generatedAnswer/updateCitations",(e=>y(e,{citations:new _({required:!0,each:new E({values:tO})})}))),Fp=h("generatedAnswer/updateError",(e=>y(e,{message:kv,code:new k({min:0})}))),Ii=h("generatedAnswer/resetAnswer"),Tv=h("generatedAnswer/like"),Dv=h("generatedAnswer/dislike"),Vv=h("generatedAnswer/feedbackModal/open"),Nv=h("generatedAnswer/feedbackModal/close"),Oi=h("generatedAnswer/setIsLoading",(e=>y(e,vp))),Tu=h("generatedAnswer/setIsStreaming",(e=>y(e,vp))),Mv=h("generatedAnswer/updateResponseFormat",(e=>y(e,{answerStyle:new R({required:!0,constrainTo:Ov})}))),Cde=X("generatedAnswer/streamAnswer",(async(e,t)=>{var r;let n=t.getState(),{dispatch:a,extra:i}=t,{setAbortControllerRef:s}=e,o=await Iv(n);a(Oi(!0));let l=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,u=null==(r=i.streamingClient)?void 0:r.streamGeneratedAnswer(o,{write:e=>{l(o)&&(a(Oi(!1)),e.payload&&e.payloadType&&((e,t)=>{switch(e){case"genqa.messageType":a(Cp(JSON.parse(t)));break;case"genqa.citationsType":a(xp(JSON.parse(t)));break;case"genqa.endOfStreamType":a(Tu(!1)),a(Ev(JSON.parse(t).answerGenerated));break;default:n.debug&&i.logger.warn(`Unknown payloadType: "${e}"`)}})(e.payloadType,e.payload))},abort:e=>{l(o)&&a(Fp(e))},close:()=>{l(o)&&a(Tu(!1))},resetAnswer:()=>{l(o)&&a(Ii())}});u?s(u):a(Oi(!1))}));function bp(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1}}var Lv=I(bp(),(e=>e.addCase(qv,((e,{payload:t})=>{e.isVisible=t})).addCase(Cp,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=t.textDelta,delete e.error})).addCase(xp,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(t.citations),delete e.error})).addCase(Fp,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...t,isRetryable:t.code===gl},e.citations=[],delete e.answer})).addCase(Tv,(e=>{e.liked=!0,e.disliked=!1})).addCase(Dv,(e=>{e.liked=!1,e.disliked=!0})).addCase(Vv,(e=>{e.feedbackModalOpen=!0})).addCase(Nv,(e=>{e.feedbackModalOpen=!1})).addCase(Ii,(e=>({...bp(),responseFormat:e.responseFormat,isVisible:e.isVisible}))).addCase(Oi,((e,{payload:t})=>{e.isLoading=t})).addCase(Tu,((e,{payload:t})=>{e.isStreaming=t})).addCase(Mv,((e,{payload:t})=>{e.responseFormat=t}))));function Ode(e){return e.addReducers({generatedAnswer:Lv}),{resetAnswer:Ii}}var Qv,rO=new W({content:new ie({required:!0}),conditions:new ie({required:!0}),priority:new k({required:!1,default:0,min:0}),fields:new _({required:!1,each:w})});function aO(e){if(!nO(e))throw A;let t=[];return{registerTemplates(...r){let n=[];(e=>{e.forEach((e=>{if(rO.validate(e),!e.conditions.every((e=>e instanceof Function)))throw new jo("Each result template conditions should be a function that takes a result as an argument and returns a boolean")}))})(r),r.forEach((e=>{let r={...e,priority:e.priority||0,fields:e.fields||[]};t.push(r),n.push(...r.fields)})),t.sort(((e,t)=>t.priority-e.priority)),n.length&&e.dispatch(Nr(n))},selectTemplate(e){let r=t.find((t=>t.conditions.every((t=>t(e)))));return r?r.content:null}}}function nO(e){return e.addReducers({fields:Qr}),!0}function Kpe(e){return e.addReducers({}),{logClearBreadcrumbs:gu,logInterfaceLoad:ps,logSearchFromLink:fs,logOmniboxFromLink:ms,logInterfaceChange:Ir,logDidYouMeanClick:Fs,logCategoryFacetBreadcrumb:mu,logFacetBreadcrumb:Hn,logFacetClearAll:Re,logFacetDeselect:Ge,logFacetSelect:ye,logFacetShowLess:$n,logFacetShowMore:_n,logFacetUpdateSort:Lt,logDateFacetBreadcrumb:Fi,logNumericFacetBreadcrumb:bi,logNavigateBackward:Hc,logNavigateForward:$c,logPageNext:Xc,logPageNumber:ro,logPagePrevious:Zc,logPagerResize:to,logSearchboxSubmit:Xr,logQuerySuggestionClick:tu,logResultsSort:co,logDislikeSmartSnippet:lp,logLikeSmartSnippet:up,logOpenSmartSnippetFeedbackModal:pp,logCloseSmartSnippetFeedbackModal:fp,logSmartSnippetFeedback:mp,logSmartSnippetDetailedFeedback:gp,logExpandSmartSnippet:sp,logCollapseSmartSnippet:cp,logExpandSmartSnippetSuggestion:hp,logCollapseSmartSnippetSuggestion:Sp,logNoResultsBack:Wc,logStaticFilterSelect:uu,logStaticFilterDeselect:fo,logStaticFilterClearAll:lu,logTriggerQuery:qs,logUndoTriggerQuery:Ts,logNotifyTrigger:Ds,logTriggerRedirect:Vs,logTriggerExecute:Ns}}(e=>{e.getResultProperty=pr,e.fieldsMustBeDefined=Pg,e.fieldsMustNotBeDefined=wg,e.fieldMustMatch=Eg,e.fieldMustNotMatch=Ig})(Qv||(Qv={}));var jv=e=>P("analytics/result/open",((t,r)=>(Ze(e),t.makeDocumentOpen(Me(e,r),ze(e)))));function afe(e){return e.addReducers({}),{logDocumentOpen:jv,logOpenSmartSnippetSource:dp,logOpenSmartSnippetSuggestionSource:wi,logOpenSmartSnippetInlineLink:Pi,logOpenSmartSnippetSuggestionInlineLink:Au}}function ufe(e){return e.addReducers({}),{logSearchEvent:tg,logClickEvent:rg,logCustomEvent:ag}}function oO(e){let{by:t,order:r}=e;switch(t){case kt.Relevancy:return ri();case kt.QRE:return ad();case kt.NoSort:return nd();case kt.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return td(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return rd(t,r)}}function iO(e){return void 0===e||e===Dr.Ascending||e===Dr.Descending}function sO(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{let n=t.trim().split(" "),a=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||""===a)throw r;if(!iO(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${Dr.Ascending}" or "${Dr.Descending}"`);return oO({by:a,order:i})}))}var Du="&",ki="=",Bv="..",Rp="...";function cO(){return{serialize:uO,deserialize:gO}}function uO(e){return Object.entries(e).map(lO).filter((e=>e)).join(Du)}function lO(e){let[t,r]=e;return $v(t)?RO(t)?dO(r)?fO(t,r):"":"nf"===t||"df"===t?pO(r)?mO(t,r):"":`${t}${ki}${encodeURIComponent(r)}`:""}function dO(e){return!!Ap(e)&&Uv(e,(e=>"string"==typeof e))}function pO(e){return!!Ap(e)&&Uv(e,(e=>Ap(e)&&"start"in e&&"end"in e))}function Ap(e){return!(!e||"object"!=typeof e)}function Uv(e,t){return 0===Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length}function fO(e,t){return Object.entries(t).map((([t,r])=>`${e}-${t}${ki}${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(Du)}function mO(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t,endInclusive:r})=>`${e}${r?Rp:Bv}${t}`)).join(",");return`${e}-${t}${ki}${n}`})).join(Du)}function gO(e){return e.split(Du).map((e=>hO(e))).map(SO).filter(xO).map(FO).reduce(((e,t)=>{let[r,n]=t;if(Hv(r)){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function hO(e){let[t,...r]=e.split(ki);return[t,r.join(ki)]}function SO(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let a=n[1],i={[n[2]]:yO(a,r.split(","))};return[a,JSON.stringify(i)]}function yO(e,t){return"nf"===e?vO(t):"df"===e?CO(t):t}function vO(e){return e.map((e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=Wv(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}})).filter((({start:e,end:t})=>Number.isFinite(e)&&Number.isFinite(t))).map((({start:e,end:t,endInclusive:r})=>Zn({start:e,end:t,state:"selected",endInclusive:r})))}function _v(e){try{return pg(e)?(js(e,ni),!0):!!Tt(e)&&(ga(e),!0)}catch(e){return!1}}function CO(e){return e.map((e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=Wv(e);return{start:r,end:n,endInclusive:t}})).filter((({start:e,end:t})=>_v(e)&&_v(t))).map((({start:e,end:t,endInclusive:r})=>_r({start:e,end:t,state:"selected",endInclusive:r})))}function xO(e){let t=$v(e[0]),r=2===e.length;return t&&r}function $v(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function FO(e){let[t,r]=e;return"enableQuerySyntax"===t||"debug"===t?[t,"true"===r]:"firstResult"===t||"numberOfResults"===t?[t,parseInt(r)]:Hv(t)?[t,bO(r)]:[t,decodeURIComponent(r)]}function bO(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>Ba(e)?decodeURIComponent(e):e))})),r}function Hv(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function RO(e){return["f","af","cf","sf","fExcluded"].includes(e)}function Wv(e){let t=-1!==e.indexOf(Rp),[r,n]=e.split(t?Rp:Bv);return{isEndInclusive:t,startAsString:r,endAsString:n}}function Ae(e){return e.negate?"NOT ":""}function ct(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function zv(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=ct(e.operator);return`${Ae(e)}@${t}${n}${r}`}}}function Gv(e){return{toQuerySyntax(){let t=Ae(e),{field:r,from:n,to:a}=e;return`${t}@${r}${ct("isExactly")}${n}..${a}`}}}function Yv(e){return{toQuerySyntax(){let t=Ae(e),{expression:r}=e;return`${t}"${r}"`}}}function Kv(e){return{toQuerySyntax(){let t=Ae(e),{field:r}=e;return`${t}@${r}`}}}function Jv(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function Xv(e){return{toQuerySyntax(){let t=Ae(e),{startTerm:r,otherTerms:n}=e,a=`${r} ${AO(n)}`;return e.negate?`${t}(${a})`:a}}}function AO(e){return e.map((e=>{let{endTerm:t,maxKeywordsBetween:r}=e;return`near:${r} ${t}`})).join(" ")}function Zv(e){return{toQuerySyntax(){let{field:t,value:r}=e;return`${Ae(e)}@${t}${ct(e.operator)}${r}`}}}function eC(e){return{toQuerySyntax(){let t=Ae(e),{field:r,from:n,to:a}=e;return`${t}@${r}${ct("isExactly")}${n}..${a}`}}}function tC(e){return{toQuerySyntax(){let{name:t,parameters:r}=e;return`$${t}(${PO(r)})`}}}function PO(e){return Object.entries(e).map((e=>{let[t,r]=e;return`${t}: ${"string"==typeof r?r:r.toQuerySyntax()}`})).join(", ")}function rC(e){return{toQuerySyntax(){let t=Ae(e),{field:r,operator:n,value:a}=e;return`${t}@${r}${ct(n)}${"fuzzyMatch"===n?` $quoteVar(value: ${a})`:`("${a}")`}`}}}function aC(e){return{toQuerySyntax(){let{field:t}=e,r=Ae(e),n=ct(e.operator),a=e.values.map((e=>`"${e}"`));return`${r}@${t}${n}${1===a.length?a[0]:`(${a.join(",")})`}`}}}function Dme(){let e=[],t="and";return{addExpression(t){return e.push(t),this},addKeyword(t){return e.push(Jv(t)),this},addNear(t){return e.push(Xv(t)),this},addExactMatch(t){return e.push(Yv(t)),this},addFieldExists(t){return e.push(Kv(t)),this},addStringField(t){return e.push(aC(t)),this},addStringFacetField(t){return e.push(rC(t)),this},addNumericField(t){return e.push(Zv(t)),this},addNumericRangeField(t){return e.push(eC(t)),this},addDateField(t){return e.push(zv(t)),this},addDateRangeField(t){return e.push(Gv(t)),this},addQueryExtension(t){return e.push(tC(t)),this},joinUsing(e){return t=e,this},toQuerySyntax(){let r=wO(t),n=e.map((e=>e.toQuerySyntax())).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}function wO(e){return"and"===e?"AND":"OR"}Pp();export{ni as API_DATE_FORMAT,xh as DefaultFieldsToInclude,IA as EcommerceDefaultFieldsToInclude,Od as MinimumFieldsToInclude,Qv as ResultTemplatesHelpers,kt as SortBy,Dr as SortOrder,Ko as VERSION,Al as analyticsUrl,At as baseFacetResponseSelector,lr as buildCriterionExpression,_r as buildDateRange,td as buildDateSortCriterion,rd as buildFieldSortCriterion,nd as buildNoSortCriterion,Zn as buildNumericRange,Dme as buildQueryExpression,ad as buildQueryRankingExpressionSortCriterion,ri as buildRelevanceSortCriterion,aO as buildResultTemplatesManager,cO as buildSearchParameterSerializer,Xd as buildStaticFilterValue,h as createAction,X as createAsyncThunk,I as createReducer,Yr as currentPageSelector,Wd as currentPagesSelector,eO as defineAutomaticFacetGenerator,TE as defineBreadcrumbManager,dP as defineCategoryFacet,KI as defineCategoryFieldSuggestions,VA as defineContext,PP as defineDateFacet,jP as defineDateFilter,MA as defineDictionaryFieldContext,QA as defineDidYouMean,xI as defineExecuteTrigger,xP as defineFacet,IE as defineFacetManager,GI as defineFieldSuggestions,gI as defineFoldedResultList,qw as defineHistoryManager,gE as defineInstantResults,bI as defineNotifyTrigger,qP as defineNumericFacet,NP as defineNumericFilter,zw as definePager,Yw as defineQueryError,Xw as defineQuerySummary,vI as defineQueryTrigger,iI as defineQuickview,jI as defineRecentQueriesList,WI as defineRecentResultsList,SI as defineRedirectionTrigger,qA as defineRelevanceInspector,tE as defineResultList,oE as defineResultsPerPage,dE as defineSearchBox,RA as defineSearchEngine,rI as defineSearchParameterManager,aI as defineSearchStatus,II as defineSmartSnippet,qI as defineSmartSnippetQuestionsList,vE as defineSort,ME as defineStandaloneSearchBox,FE as defineStaticFilter,wE as defineTab,CR as deserializeRelativeDate,Bl as facetRequestSelector,Ab as facetResponseSelectedValuesSelector,Jo as facetResponseSelector,$o as getOrganizationEndpoints,gh as getSampleSearchEngineConfiguration,sse as loadAdvancedSearchQueryActions,ble as loadBreadcrumbActions,yse as loadCategoryFacetSetActions,afe as loadClickAnalyticsActions,Qse as loadConfigurationActions,Jse as loadContextActions,mce as loadDateFacetSetActions,ice as loadDebugActions,rce as loadDictionaryFieldContextActions,Pce as loadDidYouMeanActions,Wle as loadExcerptLengthActions,xce as loadFacetOptionsActions,Ose as loadFacetSetActions,Oce as loadFieldActions,Kce as loadFoldingActions,Ode as loadGeneratedAnswerActions,ufe as loadGenericAnalyticsActions,Vce as loadHistoryActions,Rue as loadInstantResultsActions,_ce as loadNumericFacetSetActions,eue as loadPaginationActions,nue as loadPipelineActions,uue as loadQueryActions,gue as loadQuerySetActions,Vue as loadQuerySuggestActions,Cle as loadQuestionAnsweringActions,Ele as loadRecentQueriesActions,Tle as loadRecentResultsActions,tde as loadResultPreviewActions,Bue as loadSearchActions,Kpe as loadSearchAnalyticsActions,Wse as loadSearchConfigurationActions,Hue as loadSearchHubActions,Yue as loadSortCriteriaActions,ole as loadStandaloneSearchBoxSetActions,dle as loadStaticFilterSetActions,hle as loadTabSetActions,Jc as maxPageSelector,sO as parseCriterionExpression,Gi as platformUrl,ga as validateRelativeDate};