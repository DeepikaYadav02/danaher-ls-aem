/*! For license information please see headless.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CoveoHeadless={})}(this,(function(e){"use strict";var t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,s=e=>r(e,"__esModule",{value:!0}),l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),u=(e,t)=>{for(var n in s(e),t)r(e,n,{get:t[n],enumerable:!0})},c=(e,t,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of i(t))!o.call(e,s)&&"default"!==s&&r(e,s,{get:()=>t[s],enumerable:!(a=n(t,s))||a.enumerable});return e},d=e=>c(s(r(null!=e?t(a(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),f=l(((e,t)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})),p=l(((e,t)=>{var r=f().default;t.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports})),g=l(((e,t)=>{var r=f().default,n=p();t.exports=function(e){var t=n(e,"string");return"symbol"===r(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports})),h=l(((e,t)=>{var r=g();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports})),v=l(((e,t)=>{var r=h();function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e},t.exports.__esModule=!0,t.exports.default=t.exports})),m=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t,r=(t=v())&&"object"==typeof t&&"default"in t?t:{default:t};function n(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var i="function"==typeof Symbol&&Symbol.observable||"@@observable",a=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function s(e,t,r){var a;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(n(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(n(1));return r(s)(e,t)}if("function"!=typeof e)throw new Error(n(2));var l=e,u=t,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function g(){if(f)throw new Error(n(3));return u}function h(e){if("function"!=typeof e)throw new Error(n(4));if(f)throw new Error(n(5));var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error(n(6));t=!1,p();var r=d.indexOf(e);d.splice(r,1),c=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(n(7));if(void 0===e.type)throw new Error(n(8));if(f)throw new Error(n(9));try{f=!0,u=l(u,e)}finally{f=!1}for(var t=c=d,r=0;r<t.length;r++)(0,t[r])();return e}return v({type:o.INIT}),(a={dispatch:v,subscribe:h,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(n(10));l=e,v({type:o.REPLACE})}})[i]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(n(11));function r(){e.next&&e.next(g())}return r(),{unsubscribe:t(r)}}})[i]=function(){return this},e},a}var l=s;function u(e,t){return function(){return t(e.apply(this,arguments))}}function c(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}e.__DO_NOT_USE__ActionTypes=o,e.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),a=function(){throw new Error(n(15))},o={getState:i.getState,dispatch:function(){return a.apply(void 0,arguments)}},s=t.map((function(e){return e(o)}));return a=c.apply(void 0,s)(i.dispatch),r.default(r.default({},i),{},{dispatch:a})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return u(e,t);if("object"!=typeof e||null===e)throw new Error(n(16));var r={};for(var i in e){var a=e[i];"function"==typeof a&&(r[i]=u(a,t))}return r},e.combineReducers=function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var a=t[i];"function"==typeof e[a]&&(r[a]=e[a])}var s,l=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:o.INIT}))throw new Error(n(12));if(void 0===r(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error(n(13))}))}(r)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var i=!1,a={},o=0;o<l.length;o++){var u=l[o],c=r[u],d=e[u],f=c(d,t);if(void 0===f)throw t&&t.type,new Error(n(14));a[u]=f,i=i||f!==d}return(i=i||l.length!==Object.keys(e).length)?a:e}},e.compose=c,e.createStore=s,e.legacy_createStore=l})),y=l(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var i=n&&n.stringify||r;if("object"==typeof e&&null!==e){var a=t.length+1;if(1===a)return e;var o=new Array(a);o[0]=i(e);for(var s=1;s<a;s++)o[s]=i(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Number(t[c]),d=p+2,p++;break;case 105:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Math.floor(Number(t[c])),d=p+2,p++;break;case 79:case 111:case 106:if(c>=l||void 0===t[c])break;d<p&&(u+=e.slice(d,p));var g=typeof t[c];if("string"===g){u+="'"+t[c]+"'",d=p+2,p++;break}if("function"===g){u+=t[c].name||"<anonymous>",d=p+2,p++;break}u+=i(t[c]),d=p+2,p++;break;case 115:if(c>=l)break;d<p&&(u+=e.slice(d,p)),u+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,c--}++c}++p}return-1===d?e:(d<f&&(u+=e.slice(d)),u)}})),S=l(((e,t)=>{var r=y();t.exports=c;var n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},i={mapHttpRequest:v,mapHttpResponse:v,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:v,res:v,err:g,errWithCause:g};function a(e,t){return"silent"===e?1/0:t.levels.values[e]}var o=Symbol("pino.logFuncs"),s=Symbol("pino.hierarchy"),l={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function u(e,t){let r={logger:t,parent:e[s]};t[s]=r}function c(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,i),g=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(g=!1);let v=Object.keys(e.customLevels||{}),m=["error","fatal","warn","info","debug","trace"].concat(v);"function"==typeof r&&m.forEach((function(e){r[e]=r})),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let y=e.level||"info",b=Object.create(r);b.log||(b.log=S),function(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[l[e]||"log"]||S})),e[o]=i}(b,m,r),u({},b),Object.defineProperty(b,"levelVal",{get:function(){return a(this.level,this)}}),Object.defineProperty(b,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,d(this,w,b,"error"),d(this,w,b,"fatal"),d(this,w,b,"warn"),d(this,w,b,"info"),d(this,w,b,"debug"),d(this,w,b,"trace"),v.forEach((e=>{d(this,w,b,e)}))}});let w={transmit:t,serialize:s,asObject:e.browser.asObject,levels:m,timestamp:h(e)};return b.levels=function(e){let t=e.customLevels||{},r=Object.assign({},c.levels.values,t),n=Object.assign({},c.levels.labels,function(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}(t));return{values:r,labels:n}}(e),b.level=y,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=S,b.serializers=i,b._serialize=s,b._stdErrSerialize=g,b.child=function(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},s&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(s&&a){var o=Object.assign({},i,a),l=!0===e.browser.serialize?Object.keys(o):s;delete r.serializers,f([r],l,o,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.bindings=r,o&&(this.serializers=o,this._serialize=l),t&&(this._logEvent=p([].concat(e._logEvent.bindings,r)))}c.prototype=this;let d=new c(this);return u(this,d),d.level=this.level,d},t&&(b._logEvent=p()),b}function d(e,t,i,l){if(e[l]=a(e.level,i)>a(l,i)?S:i[o][l],!t.transmit&&e[l]===S)return;e[l]=function(e,t,i,s){return function(o){return function(){let l=t.timestamp(),u=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<u.length;d++)u[d]=arguments[d];if(t.serialize&&!t.asObject&&f(u,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?o.call(c,function(e,t,n,i){e._serialize&&f(n,e._serialize,e.serializers,e._stdErrSerialize);let a=n.slice(),o=a[0],s={};i&&(s.time=i),s.level=e.levels.values[t];let l=1+(0|e._childLevel);if(l<1&&(l=1),null!==o&&"object"==typeof o){for(;l--&&"object"==typeof a[0];)Object.assign(s,a.shift());o=a.length?r(a.shift(),a):void 0}else"string"==typeof o&&(o=r(a.shift(),a));return void 0!==o&&(s.msg=o),s}(this,s,u,l)):o.apply(c,u),t.transmit){let r=t.transmit.level||e._level,n=i.levels.values[r],o=i.levels.values[s];if(o<n)return;!function(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,o=t.methodValue,s=t.val,l=e._logEvent.bindings;f(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=a,e._logEvent.level.value=o,n(a,e._logEvent,s),e._logEvent=p(l)}(this,{ts:l,methodLevel:s,methodValue:o,transmitLevel:r,transmitValue:i.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,i)},u)}}}(e[o][s])}(e,t,i,l);let u=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[s];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==u.length&&(e[l]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(u,e[l]))}function f(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=c.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function p(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function g(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?b:w}function v(){return{}}function m(e){return e}function S(){}function b(){return!1}function w(){return Date.now()}c.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},c.stdSerializers=i,c.stdTimeFunctions=Object.assign({},{nullTime:b,epochTime:w,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=c,t.exports.pino=c})),b=l(((e,t)=>{var r,n,i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object),u=a.toString,c=(r=Object.getPrototypeOf,n=Object,function(e){return r(n(e))});t.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=u.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch{}return t}(e))return!1;var t=c(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==l}})),w=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.applyMiddleware.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))((function(){var e=[],r=[];return{getState:function(){return i(t)?t(e):t},getActions:function(){return e},dispatch:function(t){if(!(0,n.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(t));e.push(t);for(var i=0;i<r.length;i++)r[i]();return t},clearActions:function(){e=[]},subscribe:function(e){return i(e)&&r.push(e),function(){var t=r.indexOf(e);t<0||r.splice(t,1)}},replaceReducer:function(e){if(!i(e))throw new Error("Expected the nextReducer to be a function.")}}}));return a()}};var t,r=m(),n=(t=b())&&t.__esModule?t:{default:t},i=function(e){return"function"==typeof e}})),C=l(((e,t)=>{var r,n;r=e,n=function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",a="hour",o="day",s="week",l="month",u="quarter",c="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,l),a=r-i<0,o=t.clone().add(n+(a?-1:1),l);return+(-(n+(r-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:s,d:o,D:d,h:a,m:i,s:n,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",S={};S[y]=h;var b="$isDayjsObject",w=function(e){return e instanceof O||!(!e||!e[b])},C=function e(t,r,n){var i;if(!t)return y;if("string"==typeof t){var a=t.toLowerCase();S[a]&&(i=a),r&&(S[a]=r,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;S[s]=t,i=s}return!n&&i&&(y=i),i||!n&&y},I=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new O(r)},k=m;k.l=C,k.i=w,k.w=function(e,t){return I(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var O=function(){function h(e){this.$L=C(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var v=h.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return k},v.isValid=function(){return this.$d.toString()!==f},v.isSame=function(e,t){var r=I(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return I(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<I(e)},v.$g=function(e,t,r){return k.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,u=!!k.u(t)||t,f=k.p(e),p=function(e,t){var n=k.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return u?n:n.endOf(o)},g=function(e,t){return k.w(r.toDate()[e].apply(r.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,v=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case c:return u?p(1,0):p(31,11);case l:return u?p(1,v):p(0,v+1);case s:var S=this.$locale().weekStart||0,b=(h<S?h+7:h)-S;return p(u?m-b:m+(6-b),v);case o:case d:return g(y+"Hours",0);case a:return g(y+"Minutes",1);case i:return g(y+"Seconds",2);case n:return g(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var s,u=k.p(e),f="set"+(this.$u?"UTC":""),p=(s={},s[o]=f+"Date",s[d]=f+"Date",s[l]=f+"Month",s[c]=f+"FullYear",s[a]=f+"Hours",s[i]=f+"Minutes",s[n]=f+"Seconds",s[r]=f+"Milliseconds",s)[u],g=u===o?this.$D+(t-this.$W):t;if(u===l||u===c){var h=this.clone().set(d,1);h.$d[p](g),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[k.p(e)]()},v.add=function(r,u){var d,f=this;r=Number(r);var p=k.p(u),g=function(e){var t=I(f);return k.w(t.date(t.date()+Math.round(e*r)),f)};if(p===l)return this.set(l,this.$M+r);if(p===c)return this.set(c,this.$y+r);if(p===o)return g(1);if(p===s)return g(7);var h=(d={},d[i]=e,d[a]=t,d[n]=1e3,d)[p]||1,v=this.$d.getTime()+r*h;return k.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),a=this.$H,o=this.$m,s=this.$M,l=r.weekdays,u=r.months,c=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},p=function(e){return k.s(a%12||12,e,"0")},h=c||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return s+1;case"MM":return k.s(s+1,2,"0");case"MMM":return d(r.monthsShort,s,u,3);case"MMMM":return d(u,s);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,l,2);case"ddd":return d(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(a);case"HH":return k.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(a,o,!0);case"A":return h(a,o,!1);case"m":return String(o);case"mm":return k.s(o,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,f){var p,g=this,h=k.p(d),v=I(r),m=(v.utcOffset()-this.utcOffset())*e,y=this-v,S=function(){return k.m(g,v)};switch(h){case c:p=S()/12;break;case l:p=S();break;case u:p=S()/3;break;case s:p=(y-m)/6048e5;break;case o:p=(y-m)/864e5;break;case a:p=y/t;break;case i:p=y/e;break;case n:p=y/1e3;break;default:p=y}return f?p:k.a(p)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return S[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=C(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return k.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},h}(),A=O.prototype;return I.prototype=A,[["$ms",r],["$s",n],["$m",i],["$H",a],["$W",o],["$M",l],["$y",c],["$D",d]].forEach((function(e){A[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),I.extend=function(e,t){return e.$i||(e(t,O,I),e.$i=!0),I},I.locale=C,I.isDayjs=w,I.unix=function(e){return I(1e3*e)},I.en=S[y],I.Ls=S,I.p={},I},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs=n()})),I=l(((e,t)=>{var r,n;r=e,n=function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,o=function(e,r,n){void 0===n&&(n={});var i=new Date(e);return function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n).formatToParts(i)},s=function(t,r){for(var n=o(t,r),a=[],s=0;s<n.length;s+=1){var l=n[s],u=l.type,c=l.value,d=e[u];d>=0&&(a[d]=parseInt(c,10))}var f=a[3],p=24===f?0:f,g=a[0]+"-"+a[1]+"-"+a[2]+" "+p+":"+a[4]+":"+a[5]+":000",h=+t;return(i.utc(g).valueOf()-(h-=h%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=a);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),l=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var u=l.utcOffset();l=l.add(r-u,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,o=r||t||a,l=s(+i(),o);if("string"!=typeof e)return i(e).tz(o);var u=function(e,t,r){var n=e-60*t*1e3,i=s(n,r);if(t===i)return[n,t];var a=s(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),l,o),c=u[0],d=u[1],f=i(c).utcOffset(d);return f.$x.$timezone=o,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_timezone=n()})),k=l(((e,t)=>{var r,n;r=e,n=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var o=i.prototype;a.utc=function(e){return new i({date:e,utc:!0,args:arguments})},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=o.utcOffset;o.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===a?o:-o}(n)))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(i)return s.$offset=o,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,e)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_utc=n()})),O=l(((e,t)=>{t.exports=fetch})),A=l((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),x=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),q=l((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),R=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=x(),r=q();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),E=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=R(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),F=l((e=>{var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))},i=e&&e.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.apply=function(){return n(this,void 0,void 0,(function(){return i(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(E().Delay);e.SkipFirstDelay=a})),D=l((e=>{var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(E().Delay);e.AlwaysDelay=n})),j=l((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=F(),r=D();e.DelayFactory=function(e,n){var i=function(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}(e);return i.setAttemptNumber(n),i}})),T=l((e=>{var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=A(),i=j();e.backOff=function(e,i){return void 0===i&&(i={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),[4,new a(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var a=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,i.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),P=l(((e,t)=>{function r(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");if((e=(e=`${e}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",n=0,i=0;for(let a=0;a<e.length;a++)n<<=6,n|=r(e[a]),i+=6,24===i&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=i=0);return 12===i?(n>>=4,t+=String.fromCharCode(n)):18===i&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n)),t}})),M=l(((e,t)=>{function r(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}t.exports=function(e){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let n="";for(t=0;t<e.length;t+=3){let i=[void 0,void 0,void 0,void 0];i[0]=e.charCodeAt(t)>>2,i[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(i[1]|=e.charCodeAt(t+1)>>4,i[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(i[2]|=e.charCodeAt(t+2)>>6,i[3]=63&e.charCodeAt(t+2));for(let e=0;e<i.length;e++)void 0===i[e]?n+="=":n+=r(i[e])}return n}})),V=l(((e,t)=>{var r=P(),n=M();t.exports={atob:r,btoa:n}})),U=l(((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController})),L=l(((e,t)=>{var r,n;r=e,n=function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var o=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var s=this.quarter()-1;return a?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})),$=l(((e,t)=>{var r,n;r=e,n=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},o=function(e){return(e=+e)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=c(e,!1)}],a:[i,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,s("month")],MM:[r,s("month")],MMM:[i,function(e){var t=u("months"),r=(u("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};return function(r,n,i){i.p.customParseFormat=!0,r&&r.parseTwoDigitYear&&(o=r.parseTwoDigitYear);var s=n.prototype,l=s.parse;s.parse=function(r){var n=r.date,o=r.utc,s=r.args;this.$u=o;var u=s[1];if("string"==typeof u){var c=!0===s[2],f=!0===s[3],p=c||f,g=s[2];f&&(g=s[2]),a=this.$locale(),!c&&g&&(a=i.Ls[g]),this.$d=function(r,n,i){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*r);var o=function(r){var n,i;n=r,i=a&&a.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,l=0;l<s;l+=1){var u=o[l],c=d[u],f=c&&c[0],p=c&&c[1];o[l]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var i=o[r];if("string"==typeof i)n+=i.length;else{var a=i.regex,l=i.parser,u=e.slice(n),c=a.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}(n)(r),s=o.year,l=o.month,u=o.day,c=o.hours,f=o.minutes,p=o.seconds,g=o.milliseconds,h=o.zone,v=new Date,m=u||(s||l?1:v.getDate()),y=s||v.getFullYear(),S=0;s&&!l||(S=l>0?l-1:v.getMonth());var b=c||0,w=f||0,C=p||0,I=g||0;return h?new Date(Date.UTC(y,S,m,b,w,C,I+60*h.offset*1e3)):i?new Date(Date.UTC(y,S,m,b,w,C,I)):new Date(y,S,m,b,w,C,I)}catch{return new Date("")}}(n,u,o),this.init(),g&&!0!==g&&(this.$L=this.locale(g).$L),p&&n!=this.format(u)&&(this.$d=new Date("")),a={}}else if(u instanceof Array)for(var h=u.length,v=1;v<=h;v+=1){s[1]=u[v-1];var m=i.apply(this,s);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}v===h&&(this.$d=new Date(""))}else l.call(this,r)}}},"object"==typeof e&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(r="undefined"!=typeof globalThis?globalThis:r||self).dayjs_plugin_customParseFormat=n()})),Q=l(((e,t)=>{t.exports=()=>document.cookie.includes("Coveo-Pendagron")}));u(e,{API_DATE_FORMAT:()=>zu,DefaultFieldsToInclude:()=>ki,EcommerceDefaultFieldsToInclude:()=>Oi,HighlightUtils:()=>ra,MinimumFieldsToInclude:()=>Ii,ResultTemplatesHelpers:()=>wC,SortBy:()=>Ri,SortOrder:()=>qi,TestUtils:()=>FC,VERSION:()=>ms,analyticsUrl:()=>Gn,baseFacetResponseSelector:()=>bs,buildAutomaticFacetGenerator:()=>ew,buildBreadcrumbManager:()=>cy,buildCategoryFacet:()=>Wp,buildCategoryFieldSuggestions:()=>Jb,buildContext:()=>Md,buildController:()=>dd,buildCriterionExpression:()=>Ei,buildDateFacet:()=>Kg,buildDateFilter:()=>gh,buildDateRange:()=>yp,buildDateSortCriterion:()=>Di,buildDictionaryFieldContext:()=>Qd,buildDidYouMean:()=>Nd,buildExecuteTrigger:()=>HS,buildFacet:()=>wg,buildFacetConditionsManager:()=>Gb,buildFacetManager:()=>ry,buildFieldSortCriterion:()=>ji,buildFieldSuggestions:()=>Wb,buildFoldedResultList:()=>_S,buildGeneratedAnswer:()=>jw,buildHistoryManager:()=>pv,buildInstantResults:()=>xm,buildInteractiveCitation:()=>Tw,buildInteractiveInstantResult:()=>Jv,buildInteractiveRecentResult:()=>Yb,buildInteractiveResult:()=>Wv,buildNoSortCriterion:()=>Pi,buildNotifyTrigger:()=>YS,buildNumericFacet:()=>oh,buildNumericFilter:()=>ch,buildNumericRange:()=>ah,buildPager:()=>Mv,buildQueryError:()=>Vv,buildQueryExpression:()=>EC,buildQueryRankingExpressionSortCriterion:()=>Ti,buildQuerySummary:()=>Lv,buildQueryTrigger:()=>BS,buildQuickview:()=>ES,buildRecentQueriesList:()=>Lb,buildRecentResultsList:()=>Hb,buildRedirectionTrigger:()=>zS,buildRelevanceInspector:()=>Rd,buildRelevanceSortCriterion:()=>Fi,buildResultList:()=>_v,buildResultTemplatesManager:()=>IC,buildResultsPerPage:()=>Zv,buildSearchBox:()=>wm,buildSearchEngine:()=>cd,buildSearchParameterManager:()=>Ny,buildSearchParameterSerializer:()=>rS,buildSearchStatus:()=>SS,buildSmartSnippet:()=>Ab,buildSmartSnippetQuestionsList:()=>qb,buildSort:()=>Pm,buildStandaloneSearchBox:()=>Iy,buildStaticFilter:()=>Wm,buildStaticFilterValue:()=>Ym,buildTab:()=>ty,buildUrlManager:()=>mS,createAction:()=>ht,createAsyncThunk:()=>Wt,createReducer:()=>Pt,currentPageSelector:()=>xv,currentPagesSelector:()=>Rv,deserializeRelativeDate:()=>ac,facetRequestSelector:()=>ws,facetResponseSelectedValuesSelector:()=>Is,facetResponseSelector:()=>Cs,getOrganizationEndpoints:()=>Hn,getSampleSearchEngineConfiguration:()=>ld,loadAdvancedSearchQueryActions:()=>Lw,loadBreadcrumbActions:()=>pC,loadCategoryFacetSetActions:()=>$w,loadClickAnalyticsActions:()=>OC,loadConfigurationActions:()=>_w,loadContextActions:()=>zw,loadDateFacetSetActions:()=>Yw,loadDebugActions:()=>Hw,loadDictionaryFieldContextActions:()=>Bw,loadDidYouMeanActions:()=>Ww,loadExcerptLengthActions:()=>yC,loadFacetOptionsActions:()=>Gw,loadFacetSetActions:()=>Qw,loadFieldActions:()=>Jw,loadFoldingActions:()=>Xw,loadGeneratedAnswerActions:()=>bC,loadGenericAnalyticsActions:()=>AC,loadHistoryActions:()=>Kw,loadInstantResultsActions:()=>iC,loadNumericFacetSetActions:()=>Zw,loadPaginationActions:()=>eC,loadPipelineActions:()=>tC,loadQueryActions:()=>rC,loadQuerySetActions:()=>nC,loadQuerySuggestActions:()=>aC,loadQuestionAnsweringActions:()=>fC,loadRecentQueriesActions:()=>gC,loadRecentResultsActions:()=>hC,loadResultPreviewActions:()=>SC,loadSearchActions:()=>oC,loadSearchAnalyticsActions:()=>kC,loadSearchConfigurationActions:()=>Nw,loadSearchHubActions:()=>sC,loadSortCriteriaActions:()=>lC,loadStandaloneSearchBoxSetActions:()=>uC,loadStaticFilterSetActions:()=>cC,loadTabSetActions:()=>dC,maxPageSelector:()=>qv,parseCriterionExpression:()=>xC,platformUrl:()=>Yn,validateRelativeDate:()=>Xu});var _=()=>global.crypto,N={};function z(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function B(e){return!!e&&!!e[De]}function H(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===je}(e)||Array.isArray(e)||!!e[Fe]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Fe])||X(e)||ee(e))}function Y(e){return B(e)||z(23,e),e[De].t}function G(e,t,r){void 0===r&&(r=!1),0===W(e)?(r?Object.keys:Te)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function W(e){var t=e[De];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:X(e)?2:ee(e)?3:0}function J(e,t){return 2===W(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K(e,t,r){var n=W(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Z(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function X(e){return xe&&e instanceof Map}function ee(e){return qe&&e instanceof Set}function te(e){return e.o||e.t}function re(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Pe(e);delete t[De];for(var r=Te(t),n=0;n<r.length;n++){var i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ne(e,t){return void 0===t&&(t=!1),ae(e)||B(e)||!H(e)||(W(e)>1&&(e.set=e.add=e.clear=e.delete=ie),Object.freeze(e),t&&G(e,(function(e,t){return ne(t,!0)}),!0)),e}function ie(){z(2)}function ae(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function oe(e){var t=Me[e];return t||z(18,e),t}function se(){return Oe}function le(e,t){t&&(oe("Patches"),e.u=[],e.s=[],e.v=t)}function ue(e){ce(e),e.p.forEach(fe),e.p=null}function ce(e){e===Oe&&(Oe=e.l)}function de(e){return Oe={p:[],l:Oe,h:e,m:!0,_:0}}function fe(e){var t=e[De];0===t.i||1===t.i?t.j():t.g=!0}function pe(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||oe("ES5").S(t,e,n),n?(r[De].P&&(ue(t),z(4)),H(e)&&(e=ge(t,e),t.l||ve(t,e)),t.u&&oe("Patches").M(r[De].t,e,t.u,t.s)):e=ge(t,r,[]),ue(t),t.u&&t.v(t.u,t.s),e!==Ee?e:void 0}function ge(e,t,r){if(ae(t))return t;var n=t[De];if(!n)return G(t,(function(i,a){return he(e,n,t,i,a,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return ve(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=4===n.i||5===n.i?n.o=re(n.k):n.o,a=i,o=!1;3===n.i&&(a=new Set(i),i.clear(),o=!0),G(a,(function(t,a){return he(e,n,i,t,a,r,o)})),ve(e,i,!1),r&&e.u&&oe("Patches").N(n,r,e.u,e.s)}return n.o}function he(e,t,r,n,i,a,o){if(B(i)){var s=ge(e,i,a&&t&&3!==t.i&&!J(t.R,n)?a.concat(n):void 0);if(K(r,n,s),!B(s))return;e.m=!1}else o&&r.add(i);if(H(i)&&!ae(i)){if(!e.h.D&&e._<1)return;ge(e,i),t&&t.A.l||ve(e,i)}}function ve(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&ne(t,r)}function me(e,t){var r=e[De];return(r?te(r):e)[t]}function ye(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Se(e){e.P||(e.P=!0,e.l&&Se(e.l))}function be(e){e.o||(e.o=re(e.t))}function we(e,t,r){var n=X(t)?oe("MapSet").F(t,r):ee(t)?oe("MapSet").T(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:se(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=n,a=Ve;r&&(i=[n],a=Ue);var o=Proxy.revocable(i,a),s=o.revoke,l=o.proxy;return n.k=l,n.j=s,l}(t,r):oe("ES5").J(t,r);return(r?r.A:se()).p.push(n),n}function Ce(e){return B(e)||z(22,e),function e(t){if(!H(t))return t;var r,n=t[De],i=W(t);if(n){if(!n.P&&(n.i<4||!oe("ES5").K(n)))return n.t;n.I=!0,r=Ie(t,i),n.I=!1}else r=Ie(t,i);return G(r,(function(t,i){n&&function(e,t){return 2===W(e)?e.get(t):e[t]}(n.t,t)===i||K(r,t,e(i))})),3===i?new Set(r):r}(e)}function Ie(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return re(e)}u(N,{EnhancerArray:()=>It,MiddlewareArray:()=>Ct,SHOULD_AUTOBATCH:()=>$r,TaskAbortError:()=>Sr,addListener:()=>Tr,autoBatchEnhancer:()=>Br,clearAllListeners:()=>Pr,configureStore:()=>jt,createAction:()=>ht,createActionCreatorInvariantMiddleware:()=>wt,createAsyncThunk:()=>Wt,createDraftSafeSelector:()=>dt,createEntityAdapter:()=>Nt,createImmutableStateInvariantMiddleware:()=>At,createListenerMiddleware:()=>Ur,createNextState:()=>_e,createReducer:()=>Pt,createSelector:()=>Be,createSerializableStateInvariantMiddleware:()=>Et,createSlice:()=>Mt,current:()=>Ce,findNonSerializableValue:()=>qt,freeze:()=>ne,getDefaultMiddleware:()=>Ft,getType:()=>bt,isAction:()=>vt,isActionCreator:()=>mt,isAllOf:()=>Xt,isAnyOf:()=>Zt,isAsyncThunkAction:()=>or,isDraft:()=>B,isFluxStandardAction:()=>yt,isFulfilled:()=>ar,isImmutableDefault:()=>Ot,isPending:()=>rr,isPlain:()=>xt,isPlainObject:()=>pt,isRejected:()=>nr,isRejectedWithValue:()=>ir,miniSerializeError:()=>Gt,nanoid:()=>zt,original:()=>Y,prepareAutoBatched:()=>Qr,removeListener:()=>Mr,unwrapResult:()=>Jt});var ke,Oe,Ae="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),xe="undefined"!=typeof Map,qe="undefined"!=typeof Set,Re="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ee=Ae?Symbol.for("immer-nothing"):((ke={})["immer-nothing"]=!0,ke),Fe=Ae?Symbol.for("immer-draftable"):"__$immer_draftable",De=Ae?Symbol.for("immer-state"):"__$immer_state",je=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Te="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Pe=Object.getOwnPropertyDescriptors||function(e){var t={};return Te(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Me={},Ve={get:function(e,t){if(t===De)return e;var r,n,i,a=te(e);if(!J(a,t))return r=e,(i=ye(a,t))?"value"in i?i.value:null===(n=i.get)||void 0===n?void 0:n.call(r.k):void 0;var o=a[t];return e.I||!H(o)?o:o===me(e.t,t)?(be(e),e.o[t]=we(e.A.h,o,e)):o},has:function(e,t){return t in te(e)},ownKeys:function(e){return Reflect.ownKeys(te(e))},set:function(e,t,r){var n=ye(te(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var i=me(te(e),t),a=null==i?void 0:i[De];if(a&&a.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Z(r,i)&&(void 0!==r||J(e.t,t)))return!0;be(e),Se(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==me(e.t,t)||t in e.t?(e.R[t]=!1,be(e),Se(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=te(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){z(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){z(12)}},Ue={};G(Ve,(function(e,t){Ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ue.deleteProperty=function(e,t){return Ue.set.call(this,e,t,void 0)},Ue.set=function(e,t,r){return Ve.set.call(this,e[0],t,r,e[0])};var Le=function(){function e(e){var t=this;this.O=Re,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var i=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(o))}))}}var o;if("function"!=typeof r&&z(6),void 0!==n&&"function"!=typeof n&&z(7),H(e)){var s=de(t),l=we(t,e,void 0),u=!0;try{o=r(l),u=!1}finally{u?ue(s):ce(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return le(s,n),pe(e,s)}),(function(e){throw ue(s),e})):(le(s,n),pe(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=r(e))&&(o=e),o===Ee&&(o=void 0),t.D&&ne(o,!0),n){var c=[],d=[];oe("Patches").M(e,o,c,d),n(c,d)}return o}z(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(i))}))};var n,i,a=t.produce(e,r,(function(e,t){n=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,n,i]})):[a,n,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){H(e)||z(8),B(e)&&(e=Ce(e));var t=de(this),r=we(this,e,void 0);return r[De].C=!0,ce(t),r},t.finishDraft=function(e,t){var r=(e&&e[De]).A;return le(r,t),pe(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!Re&&z(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var i=oe("Patches").$;return B(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),$e=new Le,Qe=$e.produce,_e=($e.produceWithPatches.bind($e),$e.setAutoFreeze.bind($e),$e.setUseProxies.bind($e),$e.applyPatches.bind($e),$e.createDraft.bind($e),$e.finishDraft.bind($e),Qe);c(N,d(m()));var Ne="NOT_FOUND",ze=function(e,t){return e===t},Be=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a,o=0,s={memoizeOptions:void 0},l=n.pop();if("object"==typeof l&&(s=l,l=n.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s.memoizeOptions,c=void 0===u?r:u,d=Array.isArray(c)?c:[c],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+r+"]")}return t}(n),p=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(d)),g=e((function(){for(var e=[],t=f.length,r=0;r<t;r++)e.push(f[r].apply(null,arguments));return a=p.apply(null,e)}));return Object.assign(g,{resultFunc:l,memoizedResultFunc:p,dependencies:f,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),g}}((function(e,t){var r="object"==typeof t?t:{equalityCheck:t},n=r.equalityCheck,i=void 0===n?ze:n,a=r.maxSize,o=void 0===a?1:a,s=r.resultEqualityCheck,l=function(e){return function(t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,i=0;i<n;i++)if(!e(t[i],r[i]))return!1;return!0}}(i),u=1===o?function(e){var t;return{get:function(r){return t&&e(t.key,r)?t.value:Ne},put:function(e,r){t={key:e,value:r}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(l):function(e,t){var r=[];function n(e){var n=r.findIndex((function(r){return t(e,r.key)}));if(n>-1){var i=r[n];return n>0&&(r.splice(n,1),r.unshift(i)),i.value}return Ne}return{get:n,put:function(t,i){n(t)===Ne&&(r.unshift({key:t,value:i}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(o,l);function c(){var t=u.get(arguments);if(t===Ne){if(t=e.apply(null,arguments),s){var r=u.getEntries().find((function(e){return s(e.value,t)}));r&&(t=r.value)}u.put(arguments,t)}return t}return c.clearCache=function(){return u.clear()},c})),He=d(m()),Ye=d(m());function Ge(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(i){return"function"==typeof i?i(r,n,e):t(i)}}}}var We=Ge();We.withExtraArgument=Ge;var Je,Ke=We,Ze=(Je=function(e,t){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Xe=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},et=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},tt=Object.defineProperty,rt=Object.defineProperties,nt=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,st=function(e,t,r){return t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},lt=function(e,t){for(var r in t||(t={}))at.call(t,r)&&st(e,r,t[r]);if(it)for(var n=0,i=it(t);n<i.length;n++)r=i[n],ot.call(t,r)&&st(e,r,t[r]);return e},ut=function(e,t){return rt(e,nt(t))},ct=function(e,t,r){return new Promise((function(n,i){var a=function(e){try{s(r.next(e))}catch(e){i(e)}},o=function(e){try{s(r.throw(e))}catch(e){i(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(a,o)};s((r=r.apply(e,t)).next())}))},dt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Be.apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,et([B(e)?Ce(e):e],t))}},ft="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Ye.compose:Ye.compose.apply(null,arguments)};function pt(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var gt=function(e){return e&&"function"==typeof e.match};function ht(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var i=t.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return lt(lt({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function vt(e){return pt(e)&&"type"in e}function mt(e){return"function"==typeof e&&"type"in e&&gt(e)}function yt(e){return vt(e)&&"string"==typeof e.type&&Object.keys(e).every(St)}function St(e){return["type","payload","error","meta"].indexOf(e)>-1}function bt(e){return""+e}function wt(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}var Ct=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ze(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,et([void 0],e[0].concat(this)))):new(t.bind.apply(t,et([void 0],e.concat(this))))},t}(Array),It=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=e.apply(this,r)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ze(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,et([void 0],e[0].concat(this)))):new(t.bind.apply(t,et([void 0],e.concat(this))))},t}(Array);function kt(e){return H(e)?_e(e,(function(){})):e}function Ot(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function At(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function xt(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||pt(e)}function qt(e,t,r,n,i,a){var o;if(void 0===t&&(t=""),void 0===r&&(r=xt),void 0===i&&(i=[]),!r(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e||(null==a?void 0:a.has(e)))return!1;for(var s=null!=n?n(e):Object.entries(e),l=i.length>0,u=function(e,s){var u=t?t+"."+e:e;return l&&i.some((function(e){return e instanceof RegExp?e.test(u):u===e}))?"continue":r(s)?"object"==typeof s&&(o=qt(s,u,r,n,i,a))?{value:o}:void 0:{value:{keyPath:u,value:s}}},c=0,d=s;c<d.length;c++){var f=d[c],p=u(f[0],f[1]);if("object"==typeof p)return p.value}return a&&Rt(e)&&a.add(e),!1}function Rt(e){if(!Object.isFrozen(e))return!1;for(var t=0,r=Object.values(e);t<r.length;t++){var n=r[t];if("object"==typeof n&&null!==n&&!Rt(n))return!1}return!0}function Et(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function Ft(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new Ct);return r&&(function(e){return"boolean"==typeof e}(r)?n.push(Ke):n.push(Ke.withExtraArgument(r.extraArgument))),n}var Dt=!0;function jt(e){var t,r=function(e){return Ft(e)},n=e||{},i=n.reducer,a=void 0===i?void 0:i,o=n.middleware,s=void 0===o?r():o,l=n.devTools,u=void 0===l||l,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof a)t=a;else{if(!pt(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,He.combineReducers)(a)}var g=s;if("function"==typeof g&&(g=g(r),!Dt&&!Array.isArray(g)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!Dt&&g.some((function(e){return"function"!=typeof e})))throw new Error("each middleware provided to configureStore must be a function");var h=He.applyMiddleware.apply(void 0,g),v=He.compose;u&&(v=ft(lt({trace:!Dt},"object"==typeof u&&u)));var m=new It(h),y=m;Array.isArray(p)?y=et([h],p):"function"==typeof p&&(y=p(m));var S=v.apply(void 0,y);return(0,He.createStore)(t,d,S)}function Tt(e){var t,r={},n=[],i={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw new Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,i},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[r,n,t]}function Pt(e,t,r,n){void 0===r&&(r=[]);var i,a="function"==typeof t?Tt(t):[t,r,n],o=a[0],s=a[1],l=a[2];if(function(e){return"function"==typeof e}(e))i=function(){return kt(e())};else{var u=kt(e);i=function(){return u}}function c(e,t){void 0===e&&(e=i());var r=et([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===r.filter((function(e){return!!e})).length&&(r=[l]),r.reduce((function(e,r){if(r){var n;if(B(e))return void 0===(n=r(e,t))?e:n;if(H(e))return _e(e,(function(e){return r(e,t)}));if(void 0===(n=r(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e}),e)}return c.getInitialState=i,c}function Mt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r,n="function"==typeof e.initialState?e.initialState:kt(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},l={};function u(){var t="function"==typeof e.extraReducers?Tt(e.extraReducers):[e.extraReducers],r=t[0],i=void 0===r?{}:r,a=t[1],o=void 0===a?[]:a,l=t[2],u=void 0===l?void 0:l,c=lt(lt({},i),s);return Pt(n,(function(e){for(var t in c)e.addCase(t,c[t]);for(var r=0,n=o;r<n.length;r++){var i=n[r];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)}))}return a.forEach((function(e){var r,n,a=i[e],u=function(e,t){return e+"/"+t}(t,e);"reducer"in a?(r=a.reducer,n=a.prepare):r=a,o[e]=r,s[u]=r,l[e]=n?ht(u,n):ht(u)})),{name:t,reducer:function(e,t){return r||(r=u()),r(e,t)},actions:l,caseReducers:o,getInitialState:function(){return r||(r=u()),r.getInitialState()}}}function Vt(e){var t=Ut((function(t,r){return e(r)}));return function(e){return t(e,void 0)}}function Ut(e){return function(t,r){var n=function(t){!function(e){return yt(e)}(r)?e(r,t):e(r.payload,t)};return B(t)?(n(t),t):_e(t,n)}}function Lt(e,t){return t(e)}function $t(e){return Array.isArray(e)||(e=Object.values(e)),e}function Qt(e,t,r){for(var n=[],i=[],a=0,o=e=$t(e);a<o.length;a++){var s=o[a],l=Lt(s,t);l in r.entities?i.push({id:l,changes:s}):n.push(s)}return[n,i]}function _t(e){function t(t,r){var n=Lt(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){for(var n=0,i=e=$t(e);n<i.length;n++)t(i[n],r)}function n(t,r){var n=Lt(t,e);n in r.entities||r.ids.push(n),r.entities[n]=t}function i(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function a(t,r){var n={},i={};if(t.forEach((function(e){e.id in r.entities&&(i[e.id]={id:e.id,changes:lt(lt({},i[e.id]?i[e.id].changes:null),e.changes)})})),(t=Object.values(i)).length>0){var a=t.filter((function(t){return function(t,r,n){var i=n.entities[r.id],a=Object.assign({},i,r.changes),o=Lt(a,e),s=o!==r.id;return s&&(t[r.id]=o,delete n.entities[r.id]),n.entities[o]=a,s}(n,t,r)})).length>0;a&&(r.ids=Object.keys(r.entities))}}function o(t,n){var i=Qt(t,e,n),o=i[0];a(i[1],n),r(o,n)}return{removeAll:Vt((function(e){Object.assign(e,{ids:[],entities:{}})})),addOne:Ut(t),addMany:Ut(r),setOne:Ut(n),setMany:Ut((function(e,t){for(var r=0,i=e=$t(e);r<i.length;r++)n(i[r],t)})),setAll:Ut((function(e,t){e=$t(e),t.ids=[],t.entities={},r(e,t)})),updateOne:Ut((function(e,t){return a([e],t)})),updateMany:Ut(a),upsertOne:Ut((function(e,t){return o([e],t)})),upsertMany:Ut(o),removeOne:Ut((function(e,t){return i([e],t)})),removeMany:Ut(i)}}function Nt(e){void 0===e&&(e={});var t=lt({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,i={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},a={getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=dt(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),i=function(e,t){return t},a=function(e,t){return e[t]},o=dt(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:o,selectById:dt(r,i,a)};var s=dt(e,r);return{selectIds:dt(e,t),selectEntities:s,selectAll:dt(e,n),selectTotal:dt(e,o),selectById:dt(s,i,a)}}},o=n?function(e,t){var r=_t(e);function n(t,r){var n=(t=$t(t)).filter((function(t){return!(Lt(t,e)in r.entities)}));0!==n.length&&s(n,r)}function i(e,t){0!==(e=$t(e)).length&&s(e,t)}function a(t,r){for(var n=!1,i=0,a=t;i<a.length;i++){var o=a[i],s=r.entities[o.id];if(s){n=!0,Object.assign(s,o.changes);var u=e(s);o.id!==u&&(delete r.entities[o.id],r.entities[u]=s)}}n&&l(r)}function o(t,r){var i=Qt(t,e,r),o=i[0];a(i[1],r),n(o,r)}function s(t,r){t.forEach((function(t){r.entities[e(t)]=t})),l(r)}function l(r){var n=Object.values(r.entities);n.sort(t);var i=n.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(r.ids,i)||(r.ids=i)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:Ut((function(e,t){return n([e],t)})),updateOne:Ut((function(e,t){return a([e],t)})),upsertOne:Ut((function(e,t){return o([e],t)})),setOne:Ut((function(e,t){return i([e],t)})),setMany:Ut(i),setAll:Ut((function(e,t){e=$t(e),t.entities={},t.ids=[],n(e,t)})),addMany:Ut(n),updateMany:Ut(a),upsertMany:Ut(o)}}(r,n):_t(r);return lt(lt(lt({selectId:r,sortComparer:n},i),a),o)}var zt=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},Bt=["name","message","stack","code"],Ht=function(e,t){this.payload=e,this.meta=t},Yt=function(e,t){this.payload=e,this.meta=t},Gt=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0,n=Bt;r<n.length;r++){var i=n[r];"string"==typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},Wt=function(){function e(e,t,r){var n=ht(e+"/fulfilled",(function(e,t,r,n){return{payload:e,meta:ut(lt({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}})),i=ht(e+"/pending",(function(e,t,r){return{payload:void 0,meta:ut(lt({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=ht(e+"/rejected",(function(e,t,n,i,a){return{payload:i,error:(r&&r.serializeError||Gt)(e||"Rejected"),meta:ut(lt({},a||{}),{arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,l,u){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):zt(),f=new o;function p(e){c=e,f.abort()}var g=function(){return ct(this,null,(function(){var o,g,h,v,m,y;return Xe(this,(function(S){switch(S.label){case 0:return S.trys.push([0,4,,5]),function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then}(v=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:l,extra:u}))?[4,v]:[3,2];case 1:v=S.sent(),S.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return m=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(i(d,e,null==(g=null==r?void 0:r.getPendingMeta)?void 0:g.call(r,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([m,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:d,signal:f.signal,abort:p,rejectWithValue:function(e,t){return new Ht(e,t)},fulfillWithValue:function(e,t){return new Yt(e,t)}})).then((function(t){if(t instanceof Ht)throw t;return t instanceof Yt?n(t.payload,d,e,t.meta):n(t,d,e)}))])];case 3:return h=S.sent(),[3,5];case 4:return y=S.sent(),h=y instanceof Ht?a(null,d,e,y.payload,y.meta):a(y,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&a.match(h)&&h.meta.condition||s(h),[2,h]}}))}))}();return Object.assign(g,{abort:p,requestId:d,arg:e,unwrap:function(){return g.then(Jt)}})}}),{pending:i,rejected:a,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function Jt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Kt=function(e,t){return gt(e)?e.match(t):e(t)};function Zt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return Kt(e,t)}))}}function Xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return Kt(e,t)}))}}function er(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function tr(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function rr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return er(e,["pending"])}:tr(e)?function(t){var r=e.map((function(e){return e.pending}));return Zt.apply(void 0,r)(t)}:rr()(e[0])}function nr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return er(e,["rejected"])}:tr(e)?function(t){var r=e.map((function(e){return e.rejected}));return Zt.apply(void 0,r)(t)}:nr()(e[0])}function ir(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||tr(e)?function(t){return Xt(nr.apply(void 0,e),r)(t)}:ir()(e[0])}function ar(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return er(e,["fulfilled"])}:tr(e)?function(t){var r=e.map((function(e){return e.fulfilled}));return Zt.apply(void 0,r)(t)}:ar()(e[0])}function or(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return er(e,["pending","fulfilled","rejected"])}:tr(e)?function(t){for(var r=[],n=0,i=e;n<i.length;n++){var a=i[n];r.push(a.pending,a.rejected,a.fulfilled)}return Zt.apply(void 0,r)(t)}:or()(e[0])}var sr=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},lr=function(){},ur=function(e,t){return void 0===t&&(t=lr),e.catch(t),e},cr=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},dr=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},fr="listener",pr="completed",gr="cancelled",hr="task-"+gr,vr="task-"+pr,mr=fr+"-"+gr,yr=fr+"-"+pr,Sr=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+gr+" (reason: "+e+")"},br=function(e){if(e.aborted)throw new Sr(e.reason)};function wr(e,t){var r=lr;return new Promise((function(n,i){var a=function(){return i(new Sr(e.reason))};e.aborted?a():(r=cr(e,a),t.finally((function(){return r()})).then(n,i))})).finally((function(){r=lr}))}var Cr=function(e){return function(t){return ur(wr(e,t).then((function(t){return br(e),t})))}},Ir=function(e){var t=Cr(e);return function(e){return t(new Promise((function(t){return setTimeout(t,e)})))}},kr=Object.assign,Or={},Ar="listenerMiddleware",xr=function(e,t){return function(r,n){sr(r,"taskExecutor");var i=new AbortController;!function(t){cr(e,(function(){return dr(t,e.reason)}))}(i);var a=function(e,t){return ct(void 0,null,(function(){var r;return Xe(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return n.sent(),[4,e()];case 2:return[2,{status:"ok",value:n.sent()}];case 3:return[2,{status:(r=n.sent())instanceof Sr?"cancelled":"rejected",error:r}];case 4:return null==t||t(),[7];case 5:return[2]}}))}))}((function(){return ct(void 0,null,(function(){var t;return Xe(this,(function(n){switch(n.label){case 0:return br(e),br(i.signal),[4,r({pause:Cr(i.signal),delay:Ir(i.signal),signal:i.signal})];case 1:return t=n.sent(),br(i.signal),[2,t]}}))}))}),(function(){return dr(i,vr)}));return(null==n?void 0:n.autoJoin)&&t.push(a),{result:Cr(e)(a),cancel:function(){dr(i,hr)}}}},qr=function(e,t){return function(r,n){return ur(function(r,n){return ct(void 0,null,(function(){var i,a,o,s;return Xe(this,(function(l){switch(l.label){case 0:br(t),i=function(){},a=new Promise((function(t,n){var a=e({predicate:r,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});i=function(){a(),n()}})),o=[a],null!=n&&o.push(new Promise((function(e){return setTimeout(e,n,null)}))),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,wr(t,Promise.race(o))];case 2:return s=l.sent(),br(t),[2,s];case 3:return i(),[7];case 4:return[2]}}))}))}(r,n))}},Rr=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,i=e.predicate,a=e.effect;if(t)i=ht(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return sr(a,"options.listener"),{predicate:i,type:t,effect:a}},Er=function(e){var t=Rr(e),r=t.type,n=t.predicate,i=t.effect;return{id:zt(),effect:i,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},Fr=function(e){e.pending.forEach((function(e){dr(e,mr)}))},Dr=function(e){return function(){e.forEach(Fr),e.clear()}},jr=function(e,t,r){try{e(t,r)}catch(e){setTimeout((function(){throw e}),0)}},Tr=ht(Ar+"/add"),Pr=ht(Ar+"/removeAll"),Mr=ht(Ar+"/remove"),Vr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,et([Ar+"/error"],e))};function Ur(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,i=e.onError,a=void 0===i?Vr:i;sr(a,"onError");var o=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var i=n[t];if(e(i))return i}},s=function(e){var t=o((function(t){return t.effect===e.effect}));return t||(t=Er(e)),function(e){return e.unsubscribe=function(){return r.delete(e.id)},r.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&Fr(e)}}(t)},l=function(e){var t=Rr(e),r=t.type,n=t.effect,i=t.predicate,a=o((function(e){return("string"==typeof r?e.type===r:e.predicate===i)&&e.effect===n}));return a&&(a.unsubscribe(),e.cancelActive&&Fr(a)),!!a},u=function(e,i,o,l){return ct(t,null,(function(){var t,u,c,d;return Xe(this,(function(f){switch(f.label){case 0:t=new AbortController,u=qr(s,t.signal),c=[],f.label=1;case 1:return f.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(i,kr({},o,{getOriginalState:l,condition:function(e,t){return u(e,t).then(Boolean)},take:u,delay:Ir(t.signal),pause:Cr(t.signal),extra:n,signal:t.signal,fork:xr(t.signal,c),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach((function(e,r,n){e!==t&&(dr(e,mr),n.delete(e))}))}})))];case 2:return f.sent(),[3,6];case 3:return(d=f.sent())instanceof Sr||jr(a,d,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(c)];case 5:return f.sent(),dr(t,yr),e.pending.delete(t),[7];case 6:return[2]}}))}))},c=Dr(r);return{middleware:function(e){return function(t){return function(n){if(!vt(n))return t(n);if(Tr.match(n))return s(n.payload);if(!Pr.match(n)){if(Mr.match(n))return l(n.payload);var i,o=e.getState(),d=function(){if(o===Or)throw new Error(Ar+": getOriginalState can only be called synchronously");return o};try{if(i=t(n),r.size>0)for(var f=e.getState(),p=Array.from(r.values()),g=0,h=p;g<h.length;g++){var v=h[g],m=!1;try{m=v.predicate(n,f,o)}catch(e){m=!1,jr(a,e,{raisedBy:"predicate"})}!m||u(v,n,e,d)}}finally{o=Or}return i}c()}}},startListening:s,stopListening:l,clearListeners:c}}var Lr,$r="RTK_autoBatch",Qr=function(){return function(e){var t;return{payload:e,meta:(t={},t[$r]=!0,t)}}},_r="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(Lr||(Lr=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},Nr=function(e){return function(t){setTimeout(t,e)}},zr="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Nr(10),Br=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(void 0,r),a=!0,o=!1,s=!1,l=new Set,u="tick"===e.type?_r:"raf"===e.type?zr:"callback"===e.type?e.queueNotification:Nr(e.timeout),c=function(){s=!1,o&&(o=!1,l.forEach((function(e){return e()})))};return Object.assign({},i,{subscribe:function(e){var t=i.subscribe((function(){return a&&e()}));return l.add(e),function(){t(),l.delete(e)}},dispatch:function(e){var t;try{return a=!(null==(t=null==e?void 0:e.meta)?void 0:t[$r]),(o=!a)&&(s||(s=!0,u(c))),i.dispatch(e)}finally{a=!0}}})}}};!function(){function e(e,t){var r=i[e];return r?r.enumerable=t:i[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[De];return Ve.get(t,e)},set:function(t){var r=this[De];Ve.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][De];if(!i.P)switch(i.i){case 5:n(i)&&Se(i);break;case 4:r(i)&&Se(i)}}}function r(e){for(var t=e.t,r=e.k,n=Te(r),i=n.length-1;i>=0;i--){var a=n[i];if(a!==De){var o=t[a];if(void 0===o&&!J(t,a))return!0;var s=r[a],l=s&&s[De];if(l?l.t!==o:!Z(s,o))return!0}}var u=!!t[De];return n.length!==Te(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var i={};!function(e,t){Me.ES5||(Me.ES5=t)}(0,{J:function(t,r){var n=Array.isArray(t),i=function(t,r){if(t){for(var n=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(n,""+i,e(i,!0));return n}var a=Pe(r);delete a[De];for(var o=Te(a),s=0;s<o.length;s++){var l=o[s];a[l]=e(l,t||!!a[l].enumerable)}return Object.create(Object.getPrototypeOf(r),a)}(n,t),a={i:n?5:4,A:r?r.A:se(),P:!1,I:!1,R:{},l:r,t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,De,{value:a,writable:!0}),i},S:function(e,r,i){i?B(r)&&r[De].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[De];if(r){var i=r.t,a=r.k,o=r.R,s=r.i;if(4===s)G(a,(function(t){t!==De&&(void 0!==i[t]||J(i,t)?o[t]||e(a[t]):(o[t]=!0,Se(r)))})),G(i,(function(e){void 0!==a[e]||J(a,e)||(o[e]=!1,Se(r))}));else if(5===s){if(n(r)&&(Se(r),o.length=!0),a.length<i.length)for(var l=a.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<a.length;u++)o[u]=!0;for(var c=Math.min(a.length,i.length),d=0;d<c;d++)a.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(a[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}();var Hr=d(S()),Yr=d(w()),Gr=e=>t=>r=>{var n,i;let a=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==a&&(null==(i=r.payload)||delete i.analyticsAction);let o=t(r);return"search/executeSearch/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===a&&console.error("No analytics action associated with product recommendation:",r),void 0!==a&&e.dispatch(a),o},Wr=()=>e=>t=>e(function(e){return e.instantlyCallable}(t)?t():t),Jr=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let i=r.error;return(null==(n=r.payload)?void 0:n.ignored)||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},Kr=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n)),Zr=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Xr=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw function(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new Zr(r)}(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},en=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&rn(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function tn(e){return void 0===e}function rn(e){return tn(e)||function(e){return null===e}(e)}var nn=class{constructor(e={}){this.config=e,this.value=new en(e)}validate(e){return this.value.validate(e)||(function(e){return tn(e)||an(e)}(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function an(e){return"number"==typeof e&&!isNaN(e)}var on=class{constructor(e={}){this.value=new en(e)}validate(e){return this.value.validate(e)||(function(e){return tn(e)||sn(e)}(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function sn(e){return"boolean"==typeof e}var ln=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,un=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new en(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i}=this.config;return this.value.validate(e)||(tn(e)?null:cn(e)?t||e.length?r&&!ln.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function cn(e){return"[object String]"===Object.prototype.toString.call(e)}var dn=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(tn(e))return this.config.options.required?"value is required and is currently undefined":null;if(!fn(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&rn(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);null!==a&&(t+=" "+a)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function fn(e){return void 0!==e&&"object"==typeof e}var pn=class{constructor(e={}){this.config=e,this.value=new en(this.config)}validate(e){if(!rn(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(rn(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&rn(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return sn(e)||cn(e)||an(e)||fn(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function gn(e){return Array.isArray(e)}var hn=class{constructor(e){this.config=e,this.value=new en(e)}validate(e){let t=this.value.validate(e);return null!==t?t:tn(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},vn=new un({required:!0,emptyAllowed:!1}),mn=new un({required:!1,emptyAllowed:!1}),yn=new un({required:!0,emptyAllowed:!0}),Sn=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),bn=(e,t)=>{if("required"in t)return{payload:new Xr({value:t}).validate({value:e}).value};let r=new dn({options:{required:!0},values:t}).validate(e);if(r)throw new Zr(r);return{payload:e}},wn=(e,t)=>{try{return bn(e,t)}catch(t){return{payload:e,error:Sn(t)}}},Cn=(e,t,r,n)=>kn(e,t,r,`Check the initialState of ${n}`,"Controller initialization error"),In=(e,t,r,n)=>kn(e,t,r,`Check the options of ${n}`,"Controller initialization error"),kn=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}},On=d(C()),An=d(I()),xn=d(k()),qn=d(O()),Rn=d(T()),En=new Error("Failed to load reducers."),Fn=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Dn=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}},jn=d(V()),Tn=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Pn(e){return Array.isArray(e)}function Mn(e){return""===e.trim()}function Vn(e,t){let{[e]:r,...n}=t;return n}function Un(e){return function(e){return("undefined"!=typeof btoa?btoa:jn.btoa)(encodeURI(e))}(JSON.stringify(e))}var Ln=new Set(["1",1,"yes",!0]);function $n(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>Ln.has(e)))}function Qn(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function _n(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function Nn(e){return 429===e}var zn=class{static async call(e){let t=function(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:o}=e,s="POST"===e.method||"PUT"===e.method,l=function(e,t){return"application/x-www-form-urlencoded"===t?function(e){return!("object"!=typeof e||!e)&&Object.values(e).every(_n)}(e)?function(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}(e):"":JSON.stringify(e)}(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:l},signal:o}}(e),{logger:r}=e,n=await zn.preprocessRequest(t,e);r.info(n,"Platform request");let{url:i,...a}=n,o=async()=>{let e=await(0,qn.default)(i,a);if(Nn(e.status))throw e;return e};try{let e=await(0,Rn.backOff)(o,{retry:e=>{let t=e&&Nn(e.status);return t&&r.info("Platform retrying request"),t}});if(419===e.status)throw r.info("Platform renewing token"),new Fn;if(404===e.status)throw new Dn(i,e.status);return r.info({response:e,requestInfo:n},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new Dn(i):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:o,...s}=e,l=Qn(s);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return l}};function Bn(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function Hn(e,t="prod"){let r="prod"===t?"":t,n=`https://${e}.org${r}.coveo.com`;return{platform:n,analytics:`https://${e}.analytics.org${r}.coveo.com`,search:`${n}/rest/search/v2`,admin:`https://${e}.admin.org${r}.coveo.com`}}function Yn(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Bn("platform",e)}function Gn(e){return Bn("analytics",e)}On.default.extend(xn.default),On.default.extend(An.default);var Wn,Jn="/rest/search/v2",Kn="/rest/ua",Zn=()=>({organizationId:"",accessToken:"",platformUrl:Yn(),search:{apiBaseUrl:`${Yn()}${Jn}`,locale:"en-US",timezone:On.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Gn()}${Kn}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}}),Xn=()=>!1,ei=()=>"default",ti=((Wn=ti||{}).Relevance="relevance",Wn.Fields="fields",Wn),ri=(e=>(e.Ascending="asc",e.Descending="desc",e))(ri||{}),ni=(new dn({options:{required:!1},values:{by:new hn({enum:ti,required:!0}),fields:new pn({each:new dn({values:{name:new un,direction:new hn({enum:ri})}})})}}),new dn({options:{required:!1},values:{by:new hn({enum:ti,required:!0}),fields:new pn({each:new dn({values:{field:new un({required:!0}),direction:new hn({enum:ri}),displayName:new un}})})}}),d(S()),e=>e);function ii(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...a}=e;return a}var ai=e=>{let{response:t}=e;return t.body?oi(e):si(t)},oi=e=>function(e){return void 0!==e.body.exception}(e)?li(e):function(e){return void 0!==e.body.statusCode}(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},si=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}},li=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function ui(){if("undefined"==typeof window){let{AbortController:e}=U();return new e}return"undefined"==typeof AbortController?null:new AbortController}var ci=class{constructor(){this.currentAbortController=null}async enqueue(e,t){var r;let n=this.currentAbortController,i=this.currentAbortController=ui();n&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),n.abort());try{return await e(null!=(r=null==i?void 0:i.signal)?r:null)}finally{this.currentAbortController===i&&(this.currentAbortController=null)}}},di=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},fi=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(null==t?void 0:t.groups)?t.groups:null},pi=(e,t,r,n)=>{let i=new di(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};function gi(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function hi(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function vi(e,t){if(t&&"AbortError"===e.name)return{error:hi(e)};if(e instanceof Dn)return{error:gi(e)};throw e}var mi=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new ci,mainSearch:new ci,facetValues:new ci,foldingCollection:new ci,instantResults:new ci}}async plan(e){let t=await zn.call({...pi(e,"POST","application/json","/plan"),requestParams:ii(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return vi(t);let r=await t.json();return function(e){return void 0!==e.preprocessingOutput}(r)?{success:r}:{error:ai({response:t,body:r})}}async querySuggest(e){let t=await zn.call({...pi(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:ii(e),...this.options});if(t instanceof Error)return vi(t);let r=await t.json(),n={response:t,body:r};return function(e){return void 0!==e.completions}(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:ai(n)}}async search(e,t){var r;let n=null!=(r=null==t?void 0:t.origin)?r:"unknown",i=await this.apiCallsQueues[n].enqueue((r=>zn.call({...pi(e,"POST","application/json",""),requestParams:ii(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0})),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(i instanceof Error)return vi(i,null==t?void 0:t.disableAbortWarning);let a=await i.json(),o={response:i,body:a};return Si(a)?(o.body=function(e){let t={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0};return rn(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}(a),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:ai(o)}}async facetSearch(e){let t=await zn.call({...pi(e,"POST","application/json","/facet"),requestParams:ii(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await zn.call({...pi(e,"POST","application/json",""),requestParams:ii(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Si(r)?{success:r}:{error:ai({response:t,body:r})}}async html(e){return(async(e,t)=>{let r=await zn.call({...pi(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ii(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=await r.text();return function(e){return"string"==typeof e}(n)?{success:n}:{error:ai({response:r,body:n})}})(e,{...this.options})}async productRecommendations(e){let t=await zn.call({...pi(e,"POST","application/json",""),requestParams:ii(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Si(r)?{success:r}:{error:ai({response:t,body:r})}}async fieldDescriptions(e){let t=await zn.call({...pi(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return function(e){return void 0!==e.fields}(r)?{success:r}:{error:ai({response:t,body:r})}}},yi=e=>void 0!==e.error;function Si(e){return void 0!==e.results}var bi=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""});function wi(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:bi(),originalQuery:"",automaticallyCorrectQuery:!0}}var Ci,Ii=["author","language","urihash","objecttype","collection","source","permanentid"],ki=[...Ii,"date","filetype","parents"],Oi=[...ki,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Ai=()=>({fieldsToInclude:Ii,fetchAllFields:!1,fieldsDescription:[]}),xi=()=>({q:"",enableQuerySyntax:!1}),qi=(e=>(e.Ascending="ascending",e.Descending="descending",e))(qi||{}),Ri=((Ci=Ri||{}).Relevancy="relevancy",Ci.QRE="qre",Ci.Date="date",Ci.Field="field",Ci.NoSort="nosort",Ci),Ei=e=>{if(gn(e))return e.map((e=>Ei(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Fi=()=>({by:"relevancy"}),Di=e=>({by:"date",order:e}),ji=(e,t)=>({by:"field",order:t,field:e}),Ti=()=>({by:"qre"}),Pi=()=>({by:"nosort"}),Mi=new dn({values:{by:new hn({enum:Ri,required:!0}),order:new hn({enum:qi}),field:new un}});function Vi(){return Ei(Fi())}var Ui=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),Li=()=>"",$i=d(S()),Qi=e=>e,_i=e=>e,Ni=e=>e;function zi(e){return new mi({logger:(0,$i.default)({level:"silent"}),preprocessRequest:ni,postprocessSearchResponseMiddleware:Qi,postprocessFacetSearchResponseMiddleware:_i,postprocessQuerySuggestResponseMiddleware:Ni,...e})}var Bi=e=>({past:[],present:e,future:[]}),Hi=5,Yi=8;function Gi(){return{desiredCount:Hi,numberOfValues:Yi,set:{}}}function Wi(e){return!!e&&e.expiresAt&&Date.now()>=e.expiresAt}function Ji(){return Ki({})}function Ki(e){var t,r,n;return{context:e.context||{contextValues:{}},dictionaryFieldContext:e.dictionaryFieldContext||{contextValues:{}},facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},automaticFacetSet:null!=(t=e.automaticFacetSet)?t:Gi(),pagination:e.pagination||{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0},query:e.query||xi(),tabSet:e.tabSet||{},advancedSearchQueries:e.advancedSearchQueries||Ui(),staticFilterSet:e.staticFilterSet||{},querySet:e.querySet||{},instantResults:e.instantResults||{},sortCriteria:e.sortCriteria||Vi(),pipeline:e.pipeline||Li(),searchHub:e.searchHub||ei(),facetOptions:e.facetOptions||{freezeFacetOrder:!1,facets:{}},facetOrder:null!=(r=e.facetOrder)?r:[],debug:null!=(n=e.debug)?n:Xn()}}function Zi(e={}){return{configuration:Zn(),advancedSearchQueries:Ui(),staticFilterSet:{},facetSet:{},dateFacetSet:{},numericFacetSet:{},categoryFacetSet:{},facetSearchSet:{},categoryFacetSearchSet:{},facetOptions:{freezeFacetOrder:!1,facets:{}},pagination:{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0},query:xi(),querySet:{},instantResults:{},tabSet:{},querySuggest:{},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},extendedResults:{}},sortCriteria:Vi(),context:{contextValues:{}},dictionaryFieldContext:{contextValues:{}},didYouMean:wi(),fields:Ai(),history:Bi(Ji()),pipeline:Li(),facetOrder:[],searchHub:ei(),debug:Xn(),resultPreview:{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]},version:"unit-testing-version",folding:{enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},triggers:{redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}},questionAnswering:{liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]},standaloneSearchBoxSet:{},recentResults:{results:[],maxLength:10},recentQueries:{queries:[],maxLength:10},excerptLength:{length:void 0},automaticFacetSet:Gi(),generatedAnswer:{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1},...e}}function Xi(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var ea=e=>{let t={apiClient:zi({logger:e}),validatePayload:bn,logger:e};return{store:(0,Yr.default)([Wr,Jr(e),Gr,Ke.withExtraArgument(t),...Ft(),Kr(e)]),apiClient:t.apiClient}};function ta(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}var ra={};function na(e){if(Mn(e.openingDelimiter)||Mn(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(rn(e.content)||Mn(e.content))return e.content;if(0===e.highlights.length)return oa(e.content);let t=e.content.length,r="",n=0;for(let i=0;i<e.highlights.length;i++){let a=e.highlights[i],o=a.offset,s=o+a.length;if(s>t)break;r+=oa(e.content.slice(n,o)),r+=e.openingDelimiter,r+=oa(e.content.slice(o,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=oa(e.content.slice(n))),r}function ia(e,t){return(e=oa(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?aa(r,t.notMatchDelimiters):n?aa(n,t.exactMatchDelimiters):i?aa(i,t.correctionDelimiters):e))}function aa(e,t){return t?t.open+e+t.close:e}function oa(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,(e=>t[e])):e}u(ra,{escape:()=>oa,getHighlightedSuggestion:()=>ia,highlightString:()=>na});var sa="text/event-stream",la="last-event-id";function ua(e,t){var{signal:r,headers:n,onopen:i,onmessage:a,onclose:o,onerror:s,openWhenHidden:l,fetch:u}=t,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f,p=Object.assign({},n);function g(){f?.abort(),document.hidden||b()}p.accept||(p.accept=sa),l||document.addEventListener("visibilitychange",g);let h=1e3,v=0;function m(){document.removeEventListener("visibilitychange",g),window.clearTimeout(v),f?.abort()}null==r||r.addEventListener("abort",(()=>{m(),t()}));let y=u??window.fetch,S=i??ca;async function b(){var r;f="undefined"==typeof AbortController?null:new AbortController;try{let r=await y(e,Object.assign(Object.assign({},c),{headers:p,signal:f?.signal}));await S(r),await async function(e,t){let r,n=e.getReader();for(;!(r=await n.read()).done;)t(r.value)}(r.body,function(e){let t,r,n,i=!1;return function(a){void 0===t?(t=a,r=0,n=-1):t=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(t,a);let o=t.length,s=0;for(;r<o;){i&&(10===t[r]&&(s=++r),i=!1);let a=-1;for(;r<o&&-1===a;++r)switch(t[r]){case 58:-1===n&&(n=r-s);break;case 13:i=!0;case 10:a=r}if(-1===a)break;e(t.subarray(s,a),n),s=r,n=-1}s===o?t=void 0:0!==s&&(t=t.subarray(s),r-=s)}}(function(e,t,r){let n={data:"",event:"",id:"",retry:void 0},i=new TextDecoder;return function(e,t){if(0===e.length)null==r||r(n),n={data:"",event:"",id:"",retry:void 0};else if(t>0){let r=i.decode(e.subarray(0,t)),o=t+(32===e[t+1]?2:1),s=i.decode(e.subarray(o));switch(r){case"data":n.data=n.data?n.data+"\n"+s:s;break;case"event":n.event=s;break;case"id":(a=n.id=s)?p[la]=a:delete p[la];break;case"retry":let e=parseInt(s,10);isNaN(e)||(e=>{h=e})(n.retry=e)}}var a}}(0,0,a))),null==o||o(),m(),t()}catch(e){if(!f?.signal.aborted)try{let t=null!==(r=null==s?void 0:s(e))&&void 0!==r?r:h;window.clearTimeout(v),v=window.setTimeout(b,t)}catch(e){m(),d(e)}}}b()}))}function ca(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(sa)))throw new Error(`Expected content-type to be ${sa}, Actual: ${t}`)}var da,fa=class extends Error{},pa=class extends Error{constructor(e){super(e.message),this.payload=e}},ga=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:i,accessToken:a}=e,{write:o,abort:s,close:l,resetAnswer:u}=t;if(!i)return void this.logger.error("No stream ID found");let c,d=0,f=()=>{null==p||p.abort(),u(),g()},p=ui(),g=()=>ua(((e,t,r)=>new di(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href)(r,n,i),{method:"GET",headers:{Authorization:`Bearer ${a}`,accept:"*/*"},signal:null==p?void 0:p.signal,async onopen(e){if(!e.ok||"text/event-stream"!==e.headers.get("content-type"))throw e.status>=400&&e.status<500&&429!==e.status?new pa({message:"Error opening stream",code:e.status}):new fa},onmessage:e=>{let t=JSON.parse(e.data);if("ERROR"===t.finishReason)return clearTimeout(c),null==p||p.abort(),void s({message:t.errorMessage,code:t.statusCode});o(t),d=0,"COMPLETED"===t.finishReason?(clearTimeout(c),l()):c=function(e,t,r){return clearTimeout(t),setTimeout(e,5e3)}(f,c)},onerror:e=>{if(clearTimeout(c),e instanceof pa)throw null==p||p.abort(),s(e),e;if(++d>3){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:1};throw null==p||p.abort(),s(e),new pa(e)}this.logger.info(`Retrying...(${d}/3)`),u()}});return g(),p}};function ha(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function va(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))}function ma(){return"undefined"!=typeof navigator}function ya(){return"undefined"!=typeof document}function Sa(){try{return"undefined"!=typeof localStorage}catch{return!1}}function ba(){return ma()&&navigator.cookieEnabled}!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(da||(da={}));var wa=[da.click,da.custom,da.search,da.view],Ca=(e,t)=>-1!==wa.indexOf(e)?Object.assign({language:ya()?document.documentElement.lang:"unknown",userAgent:ma()?navigator.userAgent:"unknown"},t):t,Ia=class{static set(e,t,r){var n,i,a;r&&(n=new Date).setTime(n.getTime()+r),-1===(a=window.location.hostname).indexOf(".")?ka(e,t,n):ka(e,t,n,(i=a.split("."))[i.length-2]+"."+i[i.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(0===(i=i.replace(/^\s+/,"")).lastIndexOf(t,0))return i.substring(t.length,i.length)}return null}static erase(e){Ia.set(e,"",-1)}};function ka(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}var Oa=class{getItem(e){return Ia.get(`${Oa.prefix}${e}`)}removeItem(e){Ia.erase(`${Oa.prefix}${e}`)}setItem(e,t,r){Ia.set(`${Oa.prefix}${e}`,t,r)}};Oa.prefix="coveo_";var Aa,xa=class{constructor(){this.cookieStorage=new Oa}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},qa=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Ra="__coveo.analytics.history",Ea=class{constructor(e){this.store=e||(Sa()?localStorage:ba()?new Oa:function(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}()?sessionStorage:new qa)}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return va(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return va(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Ra);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return va(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Ra);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Ra,JSON.stringify(e.slice(0,20)))}catch{}}clear(){try{this.store.removeItem(Ra)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,75)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Fa=Object.freeze({__proto__:null,HistoryStore:Ea,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MAX_VALUE_SIZE:75,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,STORE_KEY:Ra,default:Ea}),Da=(e,t)=>va(void 0,void 0,void 0,(function*(){return e===da.view?(yield ja(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),ja=e=>va(void 0,void 0,void 0,(function*(){let t=new Ea,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),Ta=new Uint8Array(16);function Pa(){if(!Aa&&!(Aa="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Aa(Ta)}var Ma=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Va(e){return"string"==typeof e&&Ma.test(e)}var Ua=[];for(let e=0;e<256;++e)Ua.push((e+256).toString(16).slice(1));function La(e,t=0){return(Ua[e[t+0]]+Ua[e[t+1]]+Ua[e[t+2]]+Ua[e[t+3]]+"-"+Ua[e[t+4]]+Ua[e[t+5]]+"-"+Ua[e[t+6]]+Ua[e[t+7]]+"-"+Ua[e[t+8]]+Ua[e[t+9]]+"-"+Ua[e[t+10]]+Ua[e[t+11]]+Ua[e[t+12]]+Ua[e[t+13]]+Ua[e[t+14]]+Ua[e[t+15]]).toLowerCase()}var $a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Qa(e,t,r){if($a.randomUUID&&!t&&!e)return $a.randomUUID();let n=(e=e||{}).random||(e.rng||Pa)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return La(n)}function _a(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function Na(e,t){return e<<t|e>>>32-t}var za=function(e,t,r){function n(e,t,r,n){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!Va(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),16!==(null===(i=t)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+e.length);if(a.set(t),a.set(e,t.length),a=function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=Na(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],s=r[2],l=r[3],u=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=Na(i,5)+_a(r,o,s,l)+u+t[r]+n[e]>>>0;u=l,l=s,s=Na(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+u>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(a),a[6]=15&a[6]|80,a[8]=63&a[8]|128,r){n=n||0;for(let e=0;e<16;++e)r[n+e]=a[e];return r}return La(a)}try{n.name="v5"}catch{}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}(),Ba=za,Ha="2.28.20",Ya=e=>`${e.protocol}//${e.hostname}${0===e.pathname.indexOf("/")?e.pathname:`/${e.pathname}`}${e.search}`,Ga={pageview:"pageview",event:"event"},Wa=class{constructor({client:e,uuidGenerator:t=Qa}){this.client=e,this.uuidGenerator=t}},Ja=class extends Wa{constructor({client:e,uuidGenerator:t=Qa}){super({client:e,uuidGenerator:t}),this.actionData={},this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=Ya(window.location),this.lastReferrer=ya()?document.referrer:"",this.addHooks()}getApi(e){return"setAction"===e?this.setAction:null}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:ya()?document.title:"",encoding:ya()?document.characterSet:"UTF-8"},r={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent},i={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},i),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:i}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=i,e===Ga.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===Ga.pageview?this.nextPageViewId:this.pageViewId,referrer:e===Ga.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===Ga.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){if(e.page){let t=e=>e.replace(/^\/?(.*)$/,"/$1");return`${(e=>this.currentLocation.split("/").slice(0,3).join("/"))()}${t(e.page)}`}return Ya(window.location)}},Ka=class{constructor(e,t){if(!Va(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>Ka.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(e){let t=e.split(".");if(2!==t.length)return null;let[r,n]=t;if(32!==r.length||isNaN(parseInt(n)))return null;let i=r.substring(0,8)+"-"+r.substring(8,12)+"-"+r.substring(12,16)+"-"+r.substring(16,20)+"-"+r.substring(20,32);return Va(i)?new Ka(i,1e3*Number.parseInt(n)):null}};Ka.cvo_cid="cvo_cid",Ka.expirationTime=120,class extends Wa{constructor({client:e,uuidGenerator:t=Qa}){super({client:e,uuidGenerator:t})}getApi(e){switch(e){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(e){return va(this,void 0,void 0,(function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let t=new URL(e),r=yield this.client.getCurrentVisitorId();return t.searchParams.set(Ka.cvo_cid,new Ka(r,Date.now()).toString()),t.toString()}catch{throw new Error("Invalid URL provided")}}))}acceptFrom(e){this.client.setAcceptedLinkReferrers(e)}}.Id="link";var Za=Object.keys;function Xa(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var eo={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},to=Za(eo).map((e=>eo[e])),ro=[...to].join("|"),no=new RegExp(`^(${ro}$)`),io=[e=>no.test(e)],ao={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},oo={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},so={action:"pa",list:"pal",listSource:"pls"},lo={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},uo={id:"quoteId",affiliation:"quoteAffiliation"},co={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},fo={add:so,bookmark_add:so,bookmark_remove:so,click:so,checkout:so,checkout_option:so,detail:so,impression:so,remove:so,refund:Object.assign(Object.assign({},so),lo),purchase:Object.assign(Object.assign({},so),lo),quickview:so,quote:Object.assign(Object.assign({},so),uo),review:Object.assign(Object.assign({},so),co)},po=Za(ao).map((e=>ao[e])),go=Za(oo).map((e=>oo[e])),ho=Za(so).map((e=>so[e])),vo=Za(lo).map((e=>lo[e])),mo=Za(co).map((e=>co[e])),yo=Za(uo).map((e=>uo[e])),So=[...po,"custom"].join("|"),bo=[...go,"custom"].join("|"),wo="(pr[0-9]+)",Co="(il[0-9]+pi[0-9]+)",Io=new RegExp(`^${wo}(${So})$`),ko=new RegExp(`^(${Co}(${bo}))|(il[0-9]+nm)$`),Oo=new RegExp(`^(${ho.join("|")})$`),Ao=new RegExp(`^(${vo.join("|")})$`),xo=new RegExp(`^${wo}custom$`),qo=new RegExp(`^${Co}custom$`),Ro=new RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...mo,...yo].join("|")})$`),Eo=[e=>ko.test(e),e=>Io.test(e),e=>Oo.test(e),e=>Ao.test(e),e=>Ro.test(e)],Fo=[xo,qo],Do=Object.assign(Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),jo=Object.assign(Object.assign({},Do),{svcAction:"svc_action",svcActionData:"svc_action_data"}),To=Za(jo).map((e=>jo[e])),Po=e=>-1!==To.indexOf(e),Mo=e=>"custom"===e,Vo=class{constructor(e){this.opts=e}sendEvent(e,t){return va(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),s=this.encodeForEventType(e,o),l=new Blob([s],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,l)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return va(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:o,body:s}=a;n=o||e;try{i=JSON.parse(s)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return va(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[da.click,da.custom,da.search,da.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}},Uo=class{sendEvent(e,t){return va(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return va(this,void 0,void 0,(function*(){return Promise.resolve()}))}},Lo=window.fetch,$o=class{constructor(e){this.opts=e}sendEvent(e,t){return va(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),i?yield i(o,"analyticsFetch"):{}),{url:l}=s,u=ha(s,["url"]),c=yield Lo(l,u);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}deleteHttpCookieVisitorId(){return va(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield Lo(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return-1!==[da.click,da.custom,da.search,da.view].indexOf(e)}getVisitorIdParam(){return va(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},Qo=class{constructor(e,t){Sa()&&ba()?this.storage=new xa:Sa()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new qa),this.client=new $o(e),this.beaconClient=new Vo(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},_o=class{constructor(e,t){this.storage=t||new qa,this.client=new $o(e)}getClientDependingOnEventType(e){return this.client}},No=class{constructor(){this.storage=new qa,this.client=new Uo}getClientDependingOnEventType(e){return this.client}},zo=["1",1,"yes",!0];function Bo(){return ma()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>-1!==zo.indexOf(e)))}var Ho,Yo,Go="https://analytics.cloud.coveo.com/rest/ua",Wo=class{get defaultOptions(){return{endpoint:Go,isCustomEndpoint:!1,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}get version(){return Ha}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Da,Ca].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Bo()&&(this.clear(),this.runtime.storage=new qa)}initRuntime(e){return"undefined"!=typeof window&&ya()?new Qo(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    "),new _o(e))}get storage(){return this.runtime.storage}determineVisitorId(){return va(this,void 0,void 0,(function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||Qa()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),Qa()}}))}getCurrentVisitorId(){return va(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return va(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return va(this,void 0,void 0,(function*(){if(Va(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Ba(e,Ba(t,"38824e1f-37f5-42d3-8372-a4b8fa9df946")))}}))}getParameters(e,...t){return va(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return va(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(Qa()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Bo())return null;try{let t=new URL(e).searchParams.get(Ka.cvo_cid);if(null==t)return null;let r=Ka.fromString(t);return r&&ya()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch{}return null}resolveParameters(e,...t){return va(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>va(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>va(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>va(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>va(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return va(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?(e=>{let t=!!e.action&&fo[e.action]||{};return Za(e).reduce(((r,n)=>{let i=t[n]||jo[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})})(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>va(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return va(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>va(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return va(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return va(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Ea).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return va(this,void 0,void 0,(function*(){return this.makeEvent(da.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=ha(e,["searchQueryUid"]);return va(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return va(this,void 0,void 0,(function*(){return this.makeEvent(da.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=ha(e,["searchQueryUid"]);return va(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return va(this,void 0,void 0,(function*(){return this.makeEvent(da.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=ha(e,["lastSearchQueryUid"]);return va(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return va(this,void 0,void 0,(function*(){return this.makeEvent(da.view,e)}))}sendViewEvent(e){return va(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return va(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return va(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(!Array.isArray(e)||!e.every((e=>"string"==typeof e)))throw Error("Parameter should be an array of domain strings");this.acceptedLinkReferrers=e}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if("string"==typeof i)r[e[n]]=i;else if("object"==typeof i)return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return-1!==({[da.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>null!=e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if((e=>[...Eo,...io,Po,Mo].some((t=>t(e))))(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=ha(e,["custom"]),n={};t&&Xa(t)&&(n=this.lowercaseKeys(t));let i=(e=>Za(e).reduce(((t,r)=>{let n=(e=>{let t;return[...Fo].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t})(r);return n?Object.assign(Object.assign({},t),((e,t)=>Za(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}))(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}))(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=ha(e,["custom"]);if(t&&Xa(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=ha(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())&&(n.anonymizeIp=1),(t==da.view||t==da.click||t==da.search||t==da.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==da.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=ha(e,["userId"]);return(e=>(null==e?void 0:e.startsWith("xx"))||!1)(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=ha(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&Xa(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&Xa(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return function(e=Go,t="v15",r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}};!function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView"}(Ho||(Ho={})),function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer"}(Yo||(Yo={}));var Jo={[Yo.triggerNotify]:"queryPipelineTriggers",[Yo.triggerExecute]:"queryPipelineTriggers",[Yo.triggerQuery]:"queryPipelineTriggers",[Yo.triggerRedirect]:"queryPipelineTriggers",[Yo.queryError]:"errors",[Yo.queryErrorBack]:"errors",[Yo.queryErrorClear]:"errors",[Yo.queryErrorRetry]:"errors",[Yo.pagerNext]:"getMoreResults",[Yo.pagerPrevious]:"getMoreResults",[Yo.pagerNumber]:"getMoreResults",[Yo.pagerResize]:"getMoreResults",[Yo.pagerScrolling]:"getMoreResults",[Yo.facetSearch]:"facet",[Yo.facetShowLess]:"facet",[Yo.facetShowMore]:"facet",[Yo.recommendation]:"recommendation",[Yo.likeSmartSnippet]:"smartSnippet",[Yo.dislikeSmartSnippet]:"smartSnippet",[Yo.expandSmartSnippet]:"smartSnippet",[Yo.collapseSmartSnippet]:"smartSnippet",[Yo.openSmartSnippetFeedbackModal]:"smartSnippet",[Yo.closeSmartSnippetFeedbackModal]:"smartSnippet",[Yo.sendSmartSnippetReason]:"smartSnippet",[Yo.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Yo.clearRecentQueries]:"recentQueries",[Yo.recentResultClick]:"recentlyClickedDocuments",[Yo.clearRecentResults]:"recentlyClickedDocuments",[Yo.showLessFoldedResults]:"folding",[Ho.expandToFullUI]:"interface",[Ho.openUserActions]:"User Actions",[Ho.showPrecedingSessions]:"User Actions",[Ho.showFollowingSessions]:"User Actions",[Ho.clickViewedDocument]:"User Actions",[Ho.clickPageView]:"User Actions",[Yo.caseDetach]:"case",[Yo.likeGeneratedAnswer]:"generatedAnswer",[Yo.dislikeGeneratedAnswer]:"generatedAnswer",[Yo.openGeneratedAnswerSource]:"generatedAnswer",[Yo.generatedAnswerStreamEnd]:"generatedAnswer",[Yo.generatedAnswerSourceHover]:"generatedAnswer",[Yo.generatedAnswerCopyToClipboard]:"generatedAnswer",[Yo.generatedAnswerHideAnswers]:"generatedAnswer",[Yo.generatedAnswerShowAnswers]:"generatedAnswer",[Yo.generatedAnswerFeedbackSubmit]:"generatedAnswer"},Ko=class{constructor(){this.runtime=new No,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(da.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(da.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(da.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(da.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Ha}};function Zo(e){let t=e.join(";");return t.length<=256?t:Zo(e.slice(1))}var Xo=e=>{let t=function(e){return e.map((e=>e.replace(/;/g,"")))}(e),r=function(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}(t);return Zo(r)};function es(e){let t="string"==typeof e.partialQueries?e.partialQueries:Xo(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:Xo(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ts,rs,ns,is=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||Bo();this.coveoAnalyticsClient=r?new Ko:new Wo(e)}disable(){this.coveoAnalyticsClient instanceof Wo&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ko}enable(){this.coveoAnalyticsClient=new Wo(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Yo.interfaceLoad)}logInterfaceLoad(){return va(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Yo.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return va(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Yo.recommendation)}logRecommendation(){return va(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Yo.recommendationOpen,e,t)}logRecommendationOpen(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Yo.staticFilterClearAll,e)}logStaticFilterClearAll(e){return va(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Yo.staticFilterSelect,e)}logStaticFilterSelect(e){return va(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Yo.staticFilterDeselect,e)}logStaticFilterDeselect(e){return va(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Yo.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return va(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Yo.interfaceChange,e)}logInterfaceChange(e){return va(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Yo.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return va(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Yo.didyoumeanClick)}logDidYouMeanClick(){return va(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Yo.resultsSort,e)}logResultsSort(e){return va(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Yo.searchboxSubmit)}logSearchboxSubmit(){return va(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Yo.searchboxClear)}logSearchboxClear(){return va(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Yo.searchboxAsYouType)}logSearchboxAsYouType(){return va(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Yo.breadcrumbFacet,e)}logBreadcrumbFacet(e){return va(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Yo.breadcrumbResetAll)}logBreadcrumbResetAll(){return va(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Yo.documentQuickview,e,t)}logDocumentQuickview(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Yo.documentOpen,e,t)}logDocumentOpen(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Yo.omniboxAnalytics,es(e))}logOmniboxAnalytics(e){return va(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Yo.omniboxFromLink,es(e))}logOmniboxFromLink(e){return va(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Yo.searchFromLink)}logSearchFromLink(){return va(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Yo.triggerNotify,e)}logTriggerNotify(e){return va(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Yo.triggerExecute,e)}logTriggerExecute(e){return va(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Yo.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return va(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Yo.undoTriggerQuery,e)}logUndoTriggerQuery(e){return va(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Yo.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return va(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Yo.pagerResize,e)}logPagerResize(e){return va(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Yo.pagerNumber,e)}logPagerNumber(e){return va(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Yo.pagerNext,e)}logPagerNext(e){return va(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Yo.pagerPrevious,e)}logPagerPrevious(e){return va(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Yo.pagerScrolling)}logPagerScrolling(){return va(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Yo.facetClearAll,e)}logFacetClearAll(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Yo.facetSearch,e)}logFacetSearch(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Yo.facetSelect,e)}logFacetSelect(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Yo.facetDeselect,e)}logFacetDeselect(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Yo.facetExclude,e)}logFacetExclude(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Yo.facetUnexclude,e)}logFacetUnexclude(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Yo.facetSelectAll,e)}logFacetSelectAll(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Yo.facetUpdateSort,e)}logFacetUpdateSort(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Yo.facetShowMore,e)}logFacetShowMore(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Yo.facetShowLess,e)}logFacetShowLess(e){return va(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Yo.queryError,e)}logQueryError(e){return va(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return va(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorBack);return{description:e.description,log:()=>va(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorBack)}))}}))}logQueryErrorBack(){return va(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return va(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorRetry);return{description:e.description,log:()=>va(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorRetry)}))}}))}logQueryErrorRetry(){return va(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return va(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Yo.queryErrorClear);return{description:e.description,log:()=>va(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Yo.queryErrorClear)}))}}))}logQueryErrorClear(){return va(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Yo.likeSmartSnippet)}logLikeSmartSnippet(){return va(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Yo.dislikeSmartSnippet)}logDislikeSmartSnippet(){return va(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Yo.expandSmartSnippet)}logExpandSmartSnippet(){return va(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Yo.collapseSmartSnippet)}logCollapseSmartSnippet(){return va(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Yo.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Yo.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return va(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Yo.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return va(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return va(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return va(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Yo.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return va(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Yo.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Yo.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Yo.copyToClipboard,e,t)}logCopyToClipboard(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Yo.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Yo.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Yo.recentQueryClick)}logRecentQueryClick(){return va(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Yo.clearRecentQueries)}logClearRecentQueries(){return va(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Yo.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Yo.clearRecentResults)}logClearRecentResults(){return va(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Yo.noResultsBack)}logNoResultsBack(){return va(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Yo.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Yo.showLessFoldedResults)}logShowLessFoldedResults(){return va(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:null===(r=e.payload)||void 0===r?void 0:r.customData}}makeCustomEvent(e,t,r=Jo[e]){return va(this,void 0,void 0,(function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Jo[e]){return va(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return va(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return va(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return va(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return va(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return va(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return va(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return va(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return va(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Wo?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Yo.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return va(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Yo.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return va(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Yo.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return va(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Yo.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Yo.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Yo.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Yo.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Yo.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Yo.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return va(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Yo.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return va(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Yo.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return va(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},as=Object.assign({},Ga),os=Object.keys(as).map((e=>as[e])),ss=class extends Ja{constructor({client:e,uuidGenerator:t=Qa}){super({client:e,uuidGenerator:t}),this.ticket={}}getApi(e){let t=super.getApi(e);return null!==t?t:"setTicket"===e?this.setTicket:null}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook(((e,...[t])=>-1!==os.indexOf(e)?this.addSVCDataToPayload(e,t):t)),this.client.registerAfterSendEventHook(((e,...[t])=>(-1!==os.indexOf(e)&&this.updateLocationInformation(e,t),t)))}addHooksForPageView(){this.client.addEventTypeMapping(as.pageview,{newEventType:da.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(as.event,{newEventType:da.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys(null!==(r=this.actionData)&&void 0!==r?r:{}).length>0?{svcActionData:this.actionData}:{}),i=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},i),n),t)}getTicketPayload(){return(e=>Za(e).filter((t=>void 0!==e[t])).reduce(((t,r)=>{let n=eo[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})}),{}))(this.ticket)}};ss.Id="svc",function(e){e.click="click",e.flowStart="flowStart"}(ts||(ts={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(rs||(rs={})),function(e){e.quit="Quit",e.solved="Solved"}(ns||(ns={}));var ls=class{constructor(e,t){var r;this.options=e,this.provider=t;let n=(null===(r=e.enableAnalytics)||void 0===r||r)&&!Bo();this.coveoAnalyticsClient=n?new Wo(e):new Ko,this.svc=new ss({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof Wo&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ko,this.svc=new ss({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Wo(this.options),this.svc=new ss({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(rs.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(rs.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(rs.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(rs.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(rs.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(rs.nextCaseStep,{stage:null==e?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(rs.caseCancelled,{reason:ns.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(rs.caseSolved,{reason:ns.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(rs.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ts.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",ts.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},us=(e,t=!0)=>{let{caseContext:r,caseId:n,caseNumber:i}=e,a=ha(e,["caseContext","caseId","caseNumber"]),o=(e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach((r=>{var n;let i=null===(n=e.caseContext)||void 0===n?void 0:n[r];i&&(t[`context_${r}`]=i)})),t})(e);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:i},a),!!o.context_Case_Subject&&{CaseSubject:o.context_Case_Subject}),t&&o)},cs=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||Bo();this.coveoAnalyticsClient=r?new Ko:new Wo(e)}disable(){this.coveoAnalyticsClient instanceof Wo&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Ko}enable(){this.coveoAnalyticsClient=new Wo(this.opts)}logInterfaceLoad(e){if(e){let t=us(e);return this.logSearchEvent(Yo.interfaceLoad,t)}return this.logSearchEvent(Yo.interfaceLoad)}logInterfaceChange(e){let t=us(e);return this.logSearchEvent(Yo.interfaceChange,t)}logStaticFilterDeselect(e){let t=us(e);return this.logSearchEvent(Yo.staticFilterDeselect,t)}logFetchMoreResults(e){if(e){let t=us(e);return this.logCustomEvent(Yo.pagerScrolling,Object.assign(Object.assign({},t),{type:"getMoreResults"}))}return this.logCustomEvent(Yo.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let t=us(e);return this.logSearchEvent(Yo.breadcrumbFacet,t)}logBreadcrumbResetAll(e){if(e){let t=us(e);return this.logSearchEvent(Yo.breadcrumbResetAll,t)}return this.logSearchEvent(Yo.breadcrumbResetAll)}logFacetSelect(e){let t=us(e);return this.logSearchEvent(Yo.facetSelect,t)}logFacetExclude(e){let t=us(e);return this.logSearchEvent(Yo.facetExclude,t)}logFacetDeselect(e){let t=us(e);return this.logSearchEvent(Yo.facetDeselect,t)}logFacetUpdateSort(e){let t=us(e);return this.logSearchEvent(Yo.facetUpdateSort,t)}logFacetClearAll(e){let t=us(e);return this.logSearchEvent(Yo.facetClearAll,t)}logFacetShowMore(e){let t=us(e,!1);return this.logCustomEvent(Yo.facetShowMore,t)}logFacetShowLess(e){let t=us(e,!1);return this.logCustomEvent(Yo.facetShowLess,t)}logQueryError(e){let t=us(e,!1);return this.logCustomEvent(Yo.queryError,t)}logPagerNumber(e){let t=us(e,!1);return this.logCustomEvent(Yo.pagerNumber,t)}logPagerNext(e){let t=us(e,!1);return this.logCustomEvent(Yo.pagerNext,t)}logPagerPrevious(e){let t=us(e,!1);return this.logCustomEvent(Yo.pagerPrevious,t)}logDidYouMeanAutomatic(e){if(e){let t=us(e);return this.logSearchEvent(Yo.didyoumeanAutomatic,t)}return this.logSearchEvent(Yo.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let t=us(e);return this.logSearchEvent(Yo.didyoumeanClick,t)}return this.logSearchEvent(Yo.didyoumeanClick)}logResultsSort(e){let t=us(e);return this.logSearchEvent(Yo.resultsSort,t)}logSearchboxSubmit(e){if(e){let t=us(e);return this.logSearchEvent(Yo.searchboxSubmit,t)}return this.logSearchEvent(Yo.searchboxSubmit)}logContextChanged(e){let t=us(e);return this.logSearchEvent(Ho.contextChanged,t)}logExpandToFullUI(e){let t=us(e);return this.logCustomEvent(Ho.expandToFullUI,t)}logOpenUserActions(e){let t=us(e,!1);return this.logCustomEvent(Ho.openUserActions,t)}logShowPrecedingSessions(e){let t=us(e,!1);return this.logCustomEvent(Ho.showPrecedingSessions,t)}logShowFollowingSessions(e){let t=us(e,!1);return this.logCustomEvent(Ho.showFollowingSessions,t)}logViewedDocumentClick(e,t){return this.logCustomEvent(Ho.clickViewedDocument,Object.assign(Object.assign({},us(t,!1)),{document:e}))}logPageViewClick(e,t){return this.logCustomEvent(Ho.clickPageView,Object.assign(Object.assign({},us(t,!1)),{pageView:e}))}logDocumentOpen(e,t,r){return this.logClickEvent(Yo.documentOpen,e,t,r?us(r,!1):void 0)}logCopyToClipboard(e,t,r){return this.logClickEvent(Yo.copyToClipboard,e,t,r?us(r,!1):void 0)}logCaseSendEmail(e,t,r){return this.logClickEvent(Yo.caseSendEmail,e,t,r?us(r,!1):void 0)}logFeedItemTextPost(e,t,r){return this.logClickEvent(Yo.feedItemTextPost,e,t,r?us(r,!1):void 0)}logDocumentQuickview(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(Yo.documentQuickview,e,t,r?Object.assign(Object.assign({},us(r,!1)),n):n)}logCaseAttach(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(Yo.caseAttach,e,t,r?Object.assign(Object.assign({},us(r,!1)),n):n)}logCaseDetach(e,t){return this.logCustomEvent(Yo.caseDetach,t?Object.assign(Object.assign({},us(t,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(Yo.likeSmartSnippet,e?us(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(Yo.dislikeSmartSnippet,e?us(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(Yo.expandSmartSnippet,e?us(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(Yo.collapseSmartSnippet,e?us(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(Yo.openSmartSnippetFeedbackModal,e?us(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(Yo.closeSmartSnippetFeedbackModal,e?us(e,!1):void 0)}logSmartSnippetFeedbackReason(e,t,r){return this.logCustomEvent(Yo.sendSmartSnippetReason,r?Object.assign(Object.assign({},us(r,!1)),{reason:e,details:t}):{reason:e,details:t})}logExpandSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(Yo.expandSmartSnippetSuggestion,t?Object.assign(Object.assign({},us(t,!1)),r):r)}logCollapseSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(Yo.collapseSmartSnippetSuggestion,t?Object.assign(Object.assign({},us(t,!1)),r):r)}logOpenSmartSnippetSource(e,t,r){return this.logClickEvent(Yo.openSmartSnippetSource,e,t,r?us(r,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,t,r){return this.logClickEvent(Yo.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},us(r,!1)),t):t)}logOpenSmartSnippetInlineLink(e,t,r){return this.logClickEvent(Yo.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},r?Object.assign(Object.assign({},us(r,!1)),t):t)}logOpenSmartSnippetSuggestionInlineLink(e,t,r){return this.logClickEvent(Yo.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},us(r,!1)),t):t)}logLikeGeneratedAnswer(e,t){return this.logCustomEvent(Yo.likeGeneratedAnswer,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logDislikeGeneratedAnswer(e,t){return this.logCustomEvent(Yo.dislikeGeneratedAnswer,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logOpenGeneratedAnswerSource(e,t){return this.logCustomEvent(Yo.openGeneratedAnswerSource,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logGeneratedAnswerSourceHover(e,t){return this.logCustomEvent(Yo.generatedAnswerSourceHover,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,t){return this.logCustomEvent(Yo.generatedAnswerCopyToClipboard,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logGeneratedAnswerHideAnswers(e,t){return this.logCustomEvent(Yo.generatedAnswerHideAnswers,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logGeneratedAnswerShowAnswers(e,t){return this.logCustomEvent(Yo.generatedAnswerShowAnswers,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,t){return this.logCustomEvent(Yo.generatedAnswerFeedbackSubmit,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logRephraseGeneratedAnswer(e,t){return this.logSearchEvent(Yo.rephraseGeneratedAnswer,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(Yo.retryGeneratedAnswer,e?Object.assign({},us(e,!1)):{})}logGeneratedAnswerStreamEnd(e,t){return this.logCustomEvent(Yo.generatedAnswerStreamEnd,t?Object.assign(Object.assign({},us(t,!1)),e):e)}logCustomEvent(e,t){return va(this,void 0,void 0,(function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},yield this.getBaseCustomEventRequest(r)),{eventType:Jo[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}))}logSearchEvent(e,t){return va(this,void 0,void 0,(function*(){return this.coveoAnalyticsClient.sendSearchEvent(yield this.getBaseSearchEventRequest(e,t))}))}logClickEvent(e,t,r,n){return va(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(i)}))}logShowMoreFoldedResults(e,t,r){return va(this,void 0,void 0,(function*(){return this.logClickEvent(Yo.showMoreFoldedResults,e,t,r?us(r,!1):void 0)}))}logShowLessFoldedResults(e){return va(this,void 0,void 0,(function*(){return this.logCustomEvent(Yo.showLessFoldedResults,e?us(e,!1):void 0)}))}getBaseCustomEventRequest(e){return va(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},yield this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return va(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return va(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Wo?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},ds=e=>new Wo(e).getCurrentVisitorId(),fs=e=>{let t=new Wo(e);t.clear(),t.deleteHttpOnlyVisitorId()},ps=new Fa.HistoryStore,gs=(e,t)=>"function"==typeof t?(...r)=>{let n=Qn(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,hs=(e,t)=>(...r)=>{let n=Qn(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}},vs=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||ei()}},ms="2.38.3",ys=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return(e=>{let t=this.state.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"})()}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[e,n]of Object.entries(t))r[`context_${e}`]=n;return r.coveoHeadlessVersion=ms,r}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||ei()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},Ss=class extends ys{constructor(){super(...arguments),this.initialState={url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},bs=(e,t)=>"productListing"in e&&e.productListing?e.productListing.facets.results.find((e=>e.facetId===t)):"search"in e&&e.search?e.search.response.facets.find((e=>e.facetId===t)):void 0,ws=(e,t)=>{var r;return null==(r=e.facetSet[t])?void 0:r.request},Cs=(e,t)=>{let r=bs(e,t);if(function(e,t){return!!t&&t.facetId in e.facetSet}(e,r))return r},Is=(e,t)=>{let r=Cs(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]},ks=(e,t)=>{let r=Cs(e,t);return r?r.values.filter((e=>"idle"!==e.state)):[]},Os=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function As(e){let{activeValue:t,ancestryMap:r}=function(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}(e);return t?function(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}(t,r):[]}var xs=(e,t)=>{let r=bs(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r},qs=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},Rs=(e,t)=>{var r;let n=xs(e,t);return As(null!=(r=null==n?void 0:n.values)?r:[])},Es=(e,t)=>{var r;let n=qs(e,t);return As(null!=(r=null==n?void 0:n.currentValues)?r:[])},Fs=(e,t)=>{let r=Ys(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:Hs(n,e)}};function Ds(e,t){let{facetId:r,facetValue:n}=e;return{...Fs(r,t),facetValue:"hierarchical"===Gs(t,r)?_s(t,r):n}}function js(e){var t,r,n,i,a;return{facetSet:null!=(t=e.facetSet)?t:{},categoryFacetSet:null!=(r=e.categoryFacetSet)?r:{},dateFacetSet:null!=(n=e.dateFacetSet)?n:{},numericFacetSet:null!=(i=e.numericFacetSet)?i:{},automaticFacetSet:null!=(a=e.automaticFacetSet)?a:Gi()}}var Ts=e=>{let t=[];return Vs(e).forEach(((r,n)=>{let i=Gs(e,r.facetId),a=Bs(r,n+1);if(Ms(r)){if(!Es(e,r.facetId).length)return;t.push({...a,...Ns(e,r.facetId),facetType:i,state:"selected"})}else r.currentValues.forEach(((e,n)=>{if("idle"===e.state)return;let o=Ls(e,n+1,i),s=Ps(r)?Qs(e):$s(e);t.push({...a,...o,...s})}))})),Us(e).forEach(((e,r)=>{let n=zs(e,r+1);e.values.forEach(((e,r)=>{if("idle"===e.state)return;let i=Ls(e,r+1,"specific"),a=Qs(e);t.push({...n,...i,...a})}))})),t},Ps=e=>"specific"===e.type,Ms=e=>"hierarchical"===e.type,Vs=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),Us=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),Ls=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),$s=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Qs=e=>({displayValue:e.value,value:e.value}),_s=(e,t)=>Es(e,t).map((e=>e.value)).join(";"),Ns=(e,t)=>{let r=_s(e,t);return{value:r,valuePosition:1,displayValue:r}},zs=(e,t)=>({title:Hs(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Bs=(e,t)=>({title:Hs(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Hs=(e,t)=>`${e}_${t}`,Ys=(e,t)=>{var r,n,i,a,o;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(i=e.dateFacetSet[t])?void 0:i.request)||(null==(a=e.numericFacetSet[t])?void 0:a.request)||(null==(o=e.automaticFacetSet.set[t])?void 0:o.response)},Gs=(e,t)=>{let r=Ys(e,t);return r?r.type:"specific"},Ws=class extends ys{getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||""}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return Ts(js(this.state))}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||xi().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||0}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.search)?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.results.length)||0}},Js=class extends ys{constructor(){super(...arguments),this.initialState={url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}};var Ks=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var Zs=function(){let e="coveo_";return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(0===t.lastIndexOf(r,0))return t.substring(r.length,t.length)}return null},setItem(t,r,n){let i=(e=>{let t=window.location.hostname.split(".").slice(-2);return 2==t.length?t.join("."):""})(),a=`;expires=${new Date((new Date).getTime()+n).toUTCString()}`,o=i?`;domain=${i}`:"";document.cookie=`${e}${t}=${r}${a}${o};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}();async function Xs(e,t){return fetch(e,t).catch((e=>{throw new Error(`${e.message}: The "host" value is invalid or a network error occured, according to the FetchAPI's response.`,{cause:e})}))}function el(){return{getItem:()=>null,removeItem(){},setItem(){}}}function tl(){return function(){try{return"object"==typeof window}catch{return!1}}()?{runtime:"browser",fetch:(e,t)=>Xs(e,t),send:async(e,t,r)=>{if(!navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([r],{type:"application/json"})))throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.");return null},getReferrerUrl:()=>function(){let e=document.referrer;return""===e?null:e}(),getUrl:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:{getItem:e=>Zs.getItem(e)||localStorage.getItem(e),removeItem(e){Zs.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),Zs.setItem(e,t,31556952e3)}}}:{runtime:"node",fetch:(e,t)=>Xs(e,t),send:async(e,t,r)=>(Xs(e,{method:"POST",body:r,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),null),getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>crypto.randomUUID(),storage:el()}}var rl="0.6.3";function nl(e,t,r,n){let{getReferrerUrl:i,getUrl:a,getUserAgent:o}=r,s=function(e){let{trackingId:t}=e;return{trackingId:t}}(t),l=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:`relay@${rl}`,clientId:l,userAgent:o(),referrerUrl:i(),url:a()})}var il="*";function al({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode}})}function ol(e){let t=function(e){let t=al(e);return{get:()=>t,update:e=>{t=al({...t,...e})}}}(e),r=function(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(r,n){n?function(r){let n=t(r);n>=0&&e.splice(n,1)}({type:r,callback:n}):function(t){if(t===il)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}(r)}return{add:function(n){return t(n)<0&&e.push(n),()=>r(n.type,n.callback)},call:function(t){e.forEach((e=>{if(function(e,t){return"*"===e.type||t===e.type}(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))},remove:r}}(),n=()=>"disabled"==t.get().mode?{runtime:"null",fetch:()=>Promise.resolve(new Response(JSON.stringify(""))),send:async()=>null,getReferrerUrl:()=>null,getUrl:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:el()}:tl(),i=function(e){let t="visitorId";return{getClientId:()=>{let r=e.storage,n=r.getItem(t),i=n&&function(e){return"string"==typeof e&&Ks.test(e)}(n)?n:e.generateUUID();return r.setItem(t,i),i},clear:()=>{e.storage.removeItem(t)}}}(n());return{emit:(e,a)=>{let o=t.get(),s=n(),l=function(e,t,r,n,i){return{...t,meta:nl(e,r,n,i)}}(e,a,o,s,i);return async function(e){let{listenerManager:t,event:r,config:n}=e;return"disabled"!==n.mode&&t.call(r),"validate"===n.mode?async function({config:e,environment:t,event:r}){let{url:n,token:i}=e,a={"Content-Type":"application/json",Authorization:`Bearer ${i}`},o=await t.fetch(`${n}/validate`,{method:"POST",body:JSON.stringify([r]),headers:a}),s=await o.json();if(!o.ok)throw new Error({...s});if(!s)return{valid:!1,errors:[{type:"",message:"disabled",path:""}]};let{valid:l,errors:u}=s[0];return{valid:l,errors:u??[]}}(e):async function({event:e,config:t,environment:r}){let{url:n,token:i}=t;return r.send(n,i,JSON.stringify([e]))}(e)}({config:o,environment:s,event:l,listenerManager:r})},getMeta:e=>nl(e,t.get(),n(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:rl,clearStorage:()=>{i.clear()}}}var sl=class extends ys{getFacetState(){return Ts(js(this.getState()))}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||sl.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||""}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.search)?void 0:e.response.pipeline)||this.state.pipeline||sl.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),i=super.getBaseMetadata(),a=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return a&&(i.generativeQuestionAnsweringId=a),i}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return void 0!==(null==(e=t.generatedAnswer)?void 0:e.isVisible)&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||xi().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||0}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||0}},ll=sl;ll.fallbackPipelineName="default";var ul=()=>{let e=ps.getHistory().reverse().find((e=>"PageView"===e.name&&e.value));return e?e.value:""};function cl(e){let t=dl(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return function(e,t){return[...e.reduce(((e,t)=>{let r=(e=>e.uniqueId)(t);return e.has(r)||e.set(r,t),e}),new Map).values()]}([e,...t,...r])}function dl(e){return e.childResults?e.childResults.flatMap((e=>[e,...dl(e)])):[]}var fl=(e,t,r)=>function(...n){let i=1===n.length?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return pl(i)},pl=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:o})=>(null!=r||(r=e=>new o(e)),function(e,t){let r=t=>function(e){return Object.assign(e,{instantlyCallable:!0})}(Wt(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:o}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:o})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:o,log:s}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:o,action:r((async(e,{getState:t,extra:r})=>await s({state:t(),extra:r})))}}}),n}(e,(async({getState:e,analyticsClientMiddleware:o,preprocessRequest:s,logger:l})=>{let u=[],c={log:async({state:e})=>{for(let t of u)await t(e)}},d=e(),f=a({getState:e,logger:l,analyticsClientMiddleware:o,preprocessRequest:s,provider:r(e)}),p=await t(f,e());c.description=null==p?void 0:p.description,u.push((async e=>{(e=>"legacy"===e.configuration.analytics.analyticsMode)(e)&&await async function(e,t,r,n,i){t((()=>r));let a=await(null==e?void 0:e.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}(p,r,e,l,f.coveoAnalyticsClient)}));let g=(e=>{let t=e.configuration.accessToken,r=e.configuration.analytics.trackingId,{emit:n}=ol({url:e.configuration.analytics.nextApiBaseUrl,token:t,trackingId:r});return n})(d);return u.push((async e=>{if((e=>"next"===e.configuration.analytics.analyticsMode)(e)&&i&&n){let t=n(e);await async function(e,t,r){await e(t,r)}(g,i,t)}})),c}))),gl=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{e(t,r)}}),hl=fl((({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new ll(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,l=a.configuration.analytics.runtimeEnvironment,u=a.configuration.analytics.enabled,c=new is({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:gs(e,n),beforeSendHooks:[hs(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return u||c.disable(),c}),(e=>e),ll),vl=(fl((({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new vs(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,l=a.configuration.analytics.runtimeEnvironment,u=a.configuration.analytics.enabled,c=new ls({enableAnalytics:u,token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:gs(e,n),beforeSendHooks:[hs(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return u||c.disable(),c}),gl,vs),fl((({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Ws(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,l=a.configuration.analytics.runtimeEnvironment,u=a.configuration.analytics.enabled,c=new cs({enableAnalytics:u,token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:gs(e,n),beforeSendHooks:[hs(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return u||c.disable(),c}),gl,Ws),fl((({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Ss(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,l=a.configuration.analytics.runtimeEnvironment,u=a.configuration.analytics.enabled,c=new is({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:gs(e,n),beforeSendHooks:[hs(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return u||c.disable(),c}),(e=>e),Ss),fl((({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Js(t)})=>{let a=t(),o=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,l=a.configuration.analytics.runtimeEnvironment,u=a.configuration.analytics.enabled,c=new is({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:gs(e,n),beforeSendHooks:[hs(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},i);return u||c.disable(),c}),(e=>e),Js)),ml=(e,t)=>{var r;let n=-1,i=null==(r=t.search)?void 0:r.results;return n=Ol(e,i),n<0&&(n=function(e,t){for(let[r,n]of t.entries())if(-1!==Ol(e,cl(n)))return r;return-1}(e,i)),n<0&&(n=0),function(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:Cl(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Il(e),queryPipeline:r.pipeline||Li()}}(e,n+(null!=(o=null==(a=t.pagination)?void 0:a.firstResult)?o:0),t);var a,o},yl=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),Sl={urihash:new un,sourcetype:new un,permanentid:new un},bl={uniqueId:vn,raw:new dn({values:Sl}),title:vn,uri:vn,clickUri:vn,rankingModifier:new un({required:!1,emptyAllowed:!0})};function wl(e){return Object.assign({},...Object.keys(Sl).map((t=>({[t]:e[t]}))))}function Cl(e){let t=e.raw.author;return rn(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Il(e){let t=e.raw.source;return rn(t)?"unknown":t}var kl=e=>new Xr(bl).validate(function(e){return Object.assign({},...Object.keys(bl).map((t=>({[t]:e[t]}))),{raw:wl(e.raw)})}(e));function Ol(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}var Al=e=>wn(e,{evt:vn,type:mn}),xl=e=>hl("analytics/generic/search",(t=>{Al(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)})),ql=e=>hl("analytics/generic/click",((t,r)=>(kl(e.result),Al(e),t.makeClickEvent(e.evt,ml(e.result,r),yl(e.result),e.meta)))),Rl=e=>hl("analytics/generic/custom",(t=>(Al(e),t.makeCustomEventWithType(e.evt,e.type,e.meta)))),El=()=>hl("analytics/interface/load",(e=>e.makeInterfaceLoad())),Fl=()=>hl("analytics/interface/change",((e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2}))),Dl=()=>hl("analytics/interface/searchFromLink",(e=>e.makeSearchFromLink())),jl=e=>hl("analytics/interface/omniboxFromLink",(t=>t.makeOmniboxFromLink(e))),Tl=()=>mn,Pl=()=>vn,Ml=ht("configuration/updateBasicConfiguration",(e=>wn(e,{accessToken:mn,organizationId:mn,platformUrl:mn}))),Vl=ht("configuration/updateSearchConfiguration",(e=>wn(e,{apiBaseUrl:mn,pipeline:new un({required:!1,emptyAllowed:!0}),searchHub:mn,timezone:mn,locale:mn,authenticationProviders:new pn({required:!1,each:vn})}))),Ul=ht("configuration/updateAnalyticsConfiguration",(e=>($n()&&(e.enabled=!1),wn(e,{enabled:new on({default:!0}),originContext:Tl(),originLevel2:Tl(),originLevel3:Tl(),apiBaseUrl:mn,nextApiBaseUrl:mn,runtimeEnvironment:new en,anonymous:new on({default:!1}),deviceId:mn,userDisplayName:mn,documentLocation:mn,trackingId:mn,analyticsMode:new un({constrainTo:["legacy","next"],required:!1,default:"legacy"})})))),Ll=ht("configuration/analytics/disable"),$l=ht("configuration/analytics/enable"),Ql=ht("configuration/analytics/originlevel2",(e=>wn(e,{originLevel2:Pl()}))),_l=ht("configuration/analytics/originlevel3",(e=>wn(e,{originLevel3:Pl()}))),Nl={q:new un,enableQuerySyntax:new on,aq:new un,cq:new un,firstResult:new nn({min:0}),numberOfResults:new nn({min:0}),sortCriteria:new un,f:new dn,fExcluded:new dn,cf:new dn,nf:new dn,df:new dn,debug:new on,sf:new dn,tab:new un,af:new dn},zl=ht("searchParameters/restore",(e=>wn(e,Nl))),Bl=ht("debug/enable"),Hl=ht("debug/disable"),Yl=Pt(Xn(),(e=>{e.addCase(Bl,(()=>!0)).addCase(Hl,(()=>!1)).addCase(zl,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),Gl=ht("history/undo"),Wl=ht("history/redo"),Jl=ht("history/snapshot"),Kl=Wt("history/back",(async(e,{dispatch:t})=>{t(Gl()),await t(Xl())})),Zl=Wt("history/forward",(async(e,{dispatch:t})=>{t(Wl()),await t(Xl())})),Xl=Wt("history/change",(async(e,{getState:t})=>t().history.present)),eu=ht("pipeline/set",(e=>wn(e,new un({required:!0,emptyAllowed:!0})))),tu=Pt(Li(),(e=>{e.addCase(eu,((e,t)=>t.payload)).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase(Vl,((e,t)=>t.payload.pipeline||e))})),ru=ht("searchHub/set",(e=>wn(e,new un({required:!0,emptyAllowed:!0})))),nu=Pt(ei(),(e=>{e.addCase(ru,((e,t)=>t.payload)).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase(Vl,((e,t)=>t.payload.searchHub||e))})),iu=ht("breadcrumb/deselectAll"),au=ht("breadcrumb/deselectAllNonBreadcrumbs"),ou=ht("facet/updateFacetAutoSelection",(e=>wn(e,{allow:new on({required:!0})}))),su=class extends ll{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:xi().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:0}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:0}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}},lu=e=>hl("analytics/instantResult/open",((t,r)=>(kl(e),t.makeDocumentOpen(ml(e,r),yl(e)))),(e=>new su(e))),uu={id:vn},cu={...uu,q:yn},du=ht("instantResults/register",(e=>wn(e,uu))),fu=ht("instantResults/updateQuery",(e=>wn(e,cu))),pu=ht("instantResults/clearExpired",(e=>wn(e,uu))),gu=new nn({required:!0,min:0}),hu=ht("pagination/registerNumberOfResults",(e=>wn(e,gu))),vu=ht("pagination/updateNumberOfResults",(e=>wn(e,gu))),mu=ht("pagination/registerPage",(e=>wn(e,gu))),yu=ht("pagination/updatePage",(e=>wn(e,gu))),Su=ht("pagination/nextPage"),bu=ht("pagination/previousPage"),wu=ht("query/updateQuery",(e=>wn(e,{q:new un,enableQuerySyntax:new on}))),Cu=async(e,t)=>({analytics:{clientId:await ds(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...ul()&&{pageId:ul()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:"next"===e.analyticsMode}}),Iu=async(e,t)=>{var r,n,i,a;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await ds(e.configuration.analytics),actionsHistory:ps.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(i=e.advancedSearchQueries)?void 0:i.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(a=e.advancedSearchQueries)?void 0:a.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Cu(e.configuration.analytics,t),...e.excerptLength&&!rn(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},ku=ht("didYouMean/enable"),Ou=ht("didYouMean/disable"),Au=ht("didYouMean/automaticCorrections/disable"),xu=ht("didYouMean/automaticCorrections/enable"),qu=ht("didYouMean/correction",(e=>wn(e,vn))),Ru=()=>hl("analytics/didyoumean/click",(e=>e.makeDidYouMeanClick())),Eu=new dn({values:{undoneQuery:yn},options:{required:!0}}),Fu=()=>hl("analytics/trigger/query",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null})),Du=e=>hl("analytics/trigger/query/undo",(t=>(wn(e,Eu),t.makeUndoTriggerQuery(e)))),ju=()=>hl("analytics/trigger/notify",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.notifications.length)?e.makeTriggerNotify({notifications:t.triggers.notifications}):null})),Tu=()=>hl("analytics/trigger/redirect",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.redirectTo)?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null})),Pu=()=>hl("analytics/trigger/execute",((e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.executions.length)?e.makeTriggerExecute({executions:t.triggers.executions}):null})),Mu=ht("trigger/query/ignore",(e=>wn(e,new un({emptyAllowed:!0,required:!0})))),Vu=ht("trigger/query/modification",(e=>wn(e,new dn({values:{originalQuery:mn,modification:mn}})))),Uu=()=>hl("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Lu=e=>hl("search/queryError",((t,r)=>{var n,i,a,o;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||xi().q,aq:(null==(i=r.advancedSearchQueries)?void 0:i.aq)||Ui().aq,cq:(null==(a=r.advancedSearchQueries)?void 0:a.cq)||Ui().cq,dq:(null==(o=r.advancedSearchQueries)?void 0:o.dq)||Ui().dq,errorType:e.type,errorMessage:e.message})})),$u=d(C()),Qu=d(L()),_u=d(C()),Nu=d($());_u.default.extend(Nu.default);var zu="YYYY/MM/DD@HH:mm:ss",Bu="1401-01-01";function Hu(e,t){let r=(0,_u.default)(e,t);return r.isValid()||t?r:(0,_u.default)(e,zu)}function Yu(e){return e.format(zu)}function Gu(e,t){let r=Hu(e,t);if(!r.isValid())throw new Error(`Could not parse the provided date "${e}"${t?` with the format "${t}""`:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."}`);Wu(r)}function Wu(e){if(e.isBefore(Bu))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}$u.default.extend(Qu.default);var Ju=["past","now","next"],Ku=["minute","hour","day","week","month","quarter","year"],Zu=e=>{let t="now"===e;return{amount:new nn({required:!t,min:1}),unit:new un({required:!t,constrainTo:Ku}),period:new un({required:!0,constrainTo:Ju})}};function Xu(e){if("string"==typeof e&&!nc(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?ic(e):e;new Xr(Zu(t.period)).validate(t);let r=ec(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Wu(r)}function ec(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,$u.default)().subtract(r,n);case"next":return(0,$u.default)().add(r,n);case"now":return(0,$u.default)()}}function tc(e){return Yu(ec(ic(e)))}function rc(e){return e.toLocaleLowerCase().split("-")}function nc(e){let[t,r,n]=rc(e);if("now"===t)return!0;if(!Ju.includes(t)||!Ku.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function ic(e){let[t,r,n]=rc(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function ac(e){return Xu(e),ic(e)}function oc(e){return`start${e}`}function sc(e){return`end${e}`}function lc(e){var t;let r={dateFacetValueMap:{}};return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>function(e,t){if(function(e){return"dateRange"===e.type}(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>function(e,t,r){let n=e.start,i=e.end;return nc(n)&&(n=tc(n),r.dateFacetValueMap[t][oc(n)]=e.start),nc(i)&&(i=tc(i),r.dateFacetValueMap[t][sc(i)]=e.end),{...e,start:n,end:i}}(e,r,t)))}}return e}(e,r)))},mappings:r}}function uc(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function cc(e){return Object.values(e).map((e=>e.request))}var dc=1,fc=5e3,pc=async(e,t)=>{var r,n;let i=function(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive)),i=(null==n?void 0:n.expression.trim())||"",a=function(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}(e);return[r,i,...a].filter((e=>!!e)).join(" AND ")}(e),a=function(e){var t;return uc(function(e){return function(e){var t,r,n,i;return[...hc(null!=(t=e.facetSet)?t:{}),...vc(null!=(r=e.numericFacetSet)?r:{}),...vc(null!=(n=e.dateFacetSet)?n:{}),...cc(null!=(i=e.categoryFacetSet)?i:{})]}(e).filter((({facetId:t})=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i}))}(e),null!=(t=e.facetOrder)?t:[])}(e),o=function(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map((e=>e.response)).map(gc).filter((e=>e.currentValues.length>0)):void 0}(e);return lc({...await Iu(e,t),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...i&&{cq:i},...a.length&&{facets:a},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>fc?fc-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...(null==(n=e.generatedAnswer)?void 0:n.responseFormat)&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat}}}})};function gc(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>"selected"===e.state));return{field:t,label:r,currentValues:i}}function hc(e){return cc(e).map((e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function vc(e){return cc(e).map((e=>{let t=e.currentValues.some((({state:e})=>"idle"!==e));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}var mc=class{constructor(e,t=(e=>{this.dispatch(wu({q:e}))})){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let i=(new Date).getTime(),a=function(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>function(e,t){return function(e,t){return e.facetId in t.dateFacetValueMap}(e,t)?{...e,values:e.values.map((r=>function(e,t,r){return{...e,start:r.dateFacetValueMap[t][oc(e.start)]||e.start,end:r.dateFacetValueMap[t][sc(e.end)]||e.end}}(r,e.facetId,t)))}:e}(e,t)))}}:e}(await this.extra.apiClient.search(t,r),e);return{response:a,duration:(new Date).getTime()-i,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return yi(e.response)?(this.dispatch(Lu(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:o}=r;if(0!==a.length||0===o.length||!n||!i)return null;let s=this.getCurrentQuery(),{correctedQuery:l}=r.queryCorrections[0],u=await this.automaticallyRetryQueryWithCorrection(l);return yi(u.response)?(this.dispatch(Lu(u.response.error)),this.rejectWithValue(u.response.error)):(this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra),this.dispatch(Jl(Ki(this.getState()))),{...u,response:{...u.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:s,analyticsAction:hl("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic()))})}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let i=(null==(t=n.triggers.find((e=>"query"===e.type)))?void 0:t.content)||"";if(!i)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===i)return this.dispatch(Mu("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(i);return yi(o.response)?(this.dispatch(Lu(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(Jl(Ki(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:Fu()})}processSuccessResponse(e){return this.dispatch(Jl(Ki(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return(e=>void 0!==e.success)(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await pc(this.getState()),{origin:"mainSearch"});return this.dispatch(qu(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(Vu({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await pc(this.getState()),{origin:"mainSearch"})}getStateAfterResponse(e,t,r,n){var i,a;return{...r,query:{q:e,enableQuerySyntax:null!=(a=null==(i=r.query)?void 0:i.enableQuerySyntax)?a:xi().enableQuerySyntax},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},extendedResults:{},duration:t,response:n,results:n.results}}}getCurrentQuery(){var e;let t=this.getState();return void 0!==(null==(e=t.query)?void 0:e.q)?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}},yc=Wt("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;wn(e,{q:new un,enableQuerySyntax:new on,clearFilters:new on}),e.clearFilters&&(r(iu()),r(au())),r(ou({allow:!0})),r(wu({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(yu(1))})),Sc=Wt("search/executeSearch",(async(e,t)=>{let r=t.getState();xc(r);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=await pc(r,o),l=new mc({...t,analyticsAction:e}),u=await l.fetchFromAPI(s,{origin:"mainSearch"});return await l.process(u)})),bc=Wt("search/fetchPage",(async(e,t)=>{let r=t.getState();xc(r);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new mc({...t,analyticsAction:e}),l=await pc(r,o),u=await s.fetchFromAPI(l,{origin:"mainSearch"});return await s.process(u)})),wc=Wt("search/fetchMoreResults",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await Uu().prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new mc({...t,analyticsAction:Uu()}),l=await kc(r,o),u=await s.fetchFromAPI(l,{origin:"mainSearch"});return await s.process(u)})),Cc=Wt("search/fetchFacetValues",(async(e,t)=>{let r=t.getState(),{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:o}=await e.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),s=new mc({...t,analyticsAction:e}),l=await Ac(r,o),u=await s.fetchFromAPI(l,{origin:"facetValues"});return await s.process(u)})),Ic=Wt("search/fetchInstantResults",(async(e,t)=>{wn(e,{id:vn,q:vn,maxResultsPerQuery:new nn({required:!0,min:1}),cacheTimeout:new nn});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new mc({...t,analyticsAction:hl("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new su(e)))},(r=>{t.dispatch(fu({q:r,id:e.id}))})),o=await Oc(i,r,n),s=await a.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),l=await a.process(s);return"response"in l?{results:l.response.results,searchUid:l.response.searchUid,analyticsAction:l.analyticsAction,totalCountFiltered:l.response.totalCountFiltered,duration:l.duration}:l})),kc=async(e,t)=>{var r,n,i,a;let o=await pc(e,t);return o.request={...o.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(a=null==(i=e.search)?void 0:i.results.length)?a:0)},o},Oc=async(e,t,r)=>lc({...await Iu(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t}),Ac=async(e,t)=>{let r=await pc(e,t);return r.request.numberOfResults=0,r},xc=e=>{var t;e.configuration.analytics.enabled&&ps.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},qc=(e,t)=>{let r=e;return rn(r[t])?rn(e.raw[t])?null:e.raw[t]:r[t]},Rc=e=>t=>e.every((e=>!rn(qc(t,e)))),Ec=e=>t=>e.every((e=>rn(qc(t,e)))),Fc=(e,t)=>r=>{let n=jc(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},Dc=(e,t)=>r=>{let n=jc(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},jc=(e,t)=>{let r=qc(t,e);return Pn(r)?r:[r]};function Tc(e){return""!==e.search.response.searchUid}function Pc(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response={results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},e.results=[],e.questionAnswer={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}),e.error=n,e.isLoading=!1}function Mc(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Vc(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var Uc=Pt({response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},extendedResults:{}},(e=>{e.addCase(Sc.rejected,((e,t)=>Pc(e,t))),e.addCase(wc.rejected,((e,t)=>Pc(e,t))),e.addCase(bc.rejected,((e,t)=>Pc(e,t))),e.addCase(Sc.fulfilled,((e,t)=>{!function(e,t){Mc(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}(e,t)})),e.addCase(wc.fulfilled,((e,t)=>{Mc(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(bc.fulfilled,((e,t)=>{Mc(e,t),e.results=t.payload.response.results})),e.addCase(Cc.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(Sc.pending,Vc),e.addCase(wc.pending,Vc),e.addCase(bc.pending,Vc)})),Lc=Pt(ms,(e=>e)),$c=d(Q()),Qc=ht("tab/register",(e=>{let t=new dn({values:{id:vn,expression:yn}});return wn(e,t)})),_c=ht("tab/updateActiveTab",(e=>wn(e,vn)));var Nc=Pt(Zn(),(e=>e.addCase(Ml,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${Jn}`,e.analytics.apiBaseUrl=function(e,t){if((e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Kn;let r=((e,t)=>{let r=fi(e);return r&&r.organizationId===t?r:null})(e,t);return r?Hn(t,r.environment).analytics:e}(t.payload.platformUrl,e.organizationId))})).addCase(Vl,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Ul,((e,t)=>{rn(t.payload.enabled)||(!t.payload.enabled&&e.analytics.enabled&&fs(e.analytics),e.analytics.enabled=t.payload.enabled),rn(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),rn(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),rn(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),rn(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),rn(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),rn(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),rn(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),(0,$c.default)()&&(e.analytics.analyticsMode="next"),rn(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),rn(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),rn(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),rn(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),rn(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(Ll,(e=>{e.analytics.enabled=!1,fs(e.analytics)})).addCase($l,(e=>{e.analytics.enabled=!0})).addCase(Ql,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(_l,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(_c,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(zl,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),zc=Nc;function Bc(e,t,r){var n,i,a;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(i=r.callback)&&i,l=r.maxWait,u=Date.now(),c=[],d=function(){var r=[].slice.call(arguments),n=this;return new Promise((function(i,d){var f=o&&void 0===a;if(void 0!==a&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,u=Date.now(),!o){var t=e.apply(n,r);s&&s(t),c.forEach((function(e){return(0,e.resolve)(t)})),c=[]}}),function(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}()),f){var p=e.apply(n,r);return s&&s(p),i(p)}c.push({resolve:i,reject:d})}))};return d.cancel=function(e){void 0!==a&&clearTimeout(a),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},d}var Hc={configuration:zc,version:Lc};function Yc(e,t){var r;let n=function(e,t){var r;let{reducers:n}=e,i=function(e,t){let r,n={...e};return{get combinedReducer(){let e=function(e){let t={};for(let[r,n]of e)t[r]=n;return t}(Object.entries(t).filter((([e])=>!(e in n))).map((([e,t])=>[e,()=>t])));return(e=>(t,n)=>{let i=e(t,n);return r?r(i,n):i})((0,N.combineReducers)({...e,...n}))},containsAll:e=>Object.keys(e).every((e=>e in n)),add(e){Object.keys(e).filter((e=>!(e in n))).forEach((t=>n[t]=e[t]))},addCrossReducer(e){r=e}}}({...Hc,...n},null!=(r=e.preloadedState)?r:{});e.crossReducer&&i.addCrossReducer(e.crossReducer);let a=t.logger,o=function(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",o=function(e,t){let{renewAccessToken:r}=e.configuration,n=function(e,t){let r=0,n=Bc((()=>r=0),500);return i=>a=>async o=>{if("function"!=typeof o)return a(o);let s=await a(o);if(!function(e){var t;return(null==(t=null==e?void 0:e.error)?void 0:t.name)===(new Fn).name}(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let l=await async function(e){try{return await e()}catch(e){return""}}(t);i.dispatch(Ml({accessToken:l})),i.dispatch(o)}}(t,r);return[Wr,n,Jr(t),Gr].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return jt({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),Kr(n.logger)]})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:a})}(e,t,i);return{addReducers(e){i.containsAll(e)||(i.add(e),o.replaceReducer(i.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch($l())},disableAnalytics(){o.dispatch(Ll())},get state(){return o.getState()},logger:a,store:o}}(e,t),{accessToken:i,organizationId:a}=e.configuration,{organizationEndpoints:o}=e.configuration,s=(null==o?void 0:o.platform)||e.configuration.platformUrl;(function(e){var t;return!rn(e.configuration.platformUrl)||rn(null==(t=e.configuration.organizationEndpoints)?void 0:t.platform)})(e)&&n.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),function(e){return tn(e.configuration.organizationEndpoints)}(e)?n.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):function(e){let{platform:t}=e.configuration.organizationEndpoints;if(tn(t))return!1;let r=fi(t);return r&&r.organizationId!==e.configuration.organizationId}(e)&&n.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${null==(r=e.configuration.organizationEndpoints)?void 0:r.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),n.dispatch(Ml({accessToken:i,organizationId:a,platformUrl:s}));let l=function(e,t){var r,n;let i=(null==(r=e.configuration.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:a,...o}=null!=(n=e.configuration.analytics)?n:{},s={...o,nextApiBaseUrl:`${i}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:i};return $n()?(t.info("Analytics disabled since doNotTrack is active."),{...s,enabled:!1}):s}(e,n.logger);return l&&n.dispatch(Ul(l)),n}var Gc=d(S());function Wc(e,t){let r=function(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}(e),n=bn,i=function(e){return e.preprocessRequest||ni}(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}var Jc=d(V()),Kc=(e,t,r,n,i,a)=>{let o=e[t];rn(o)||rn(i)||i!==o&&i!==n&&(a.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),a.warn(`To remove this warning, make sure that access token value [${o}] matches engine configuration value [${r}]`))},Zc=(e,t)=>!(rn(e)||t===e),Xc=e=>{try{let t=("undefined"!=typeof atob?atob:Jc.atob)(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"));if(!t)return!1;let r=decodeURIComponent(t.split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(r)}catch(e){return!1}},ed=(e,t)=>(Zc(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),td=(e,t,r,n)=>(Kc(e,"searchHub",t.searchHub,ei(),r,n),ed(e,t)),rd=(e,t)=>(Zc(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),nd=(e,t,r,n)=>(Kc(e,"pipeline",t.pipeline,Li(),r,n),rd(e,t)),id=(e,t)=>(Zc(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),ad=e=>Pt({},(t=>{t.addCase(ru,((t,r)=>{let n=Xc(t.configuration.accessToken);return n?td(n,t,r.payload,e):t})).addCase(eu,((t,r)=>{let n=Xc(t.configuration.accessToken);return n?nd(n,t,r.payload,e):t})).addCase(Ml,((e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=Xc(r);return n?[rd,ed,id].reduce(((e,t)=>t(n,e)),e):e})).addCase(Vl,((t,r)=>{var n;let i=Xc(t.configuration.accessToken);if(!i)return t;let a=td(i,t,r.payload.searchHub,e);return nd(i,a,null==(n=r.payload)?void 0:n.pipeline,e)})).addCase(Ul,((t,r)=>{let n=Xc(t.configuration.accessToken);return n?((e,t,r,n)=>(Kc(e,"userDisplayName",t.configuration.analytics.userDisplayName,Zn().analytics.userDisplayName,r,n),id(e,t)))(n,t,r.payload.userDisplayName,e):t}))})),od={organizationId:vn,accessToken:vn,platformUrl:new un({required:!1,emptyAllowed:!1}),name:new un({required:!1,emptyAllowed:!1}),analytics:new dn({options:{required:!1},values:{enabled:new on({required:!1}),originContext:new un({required:!1}),originLevel2:new un({required:!1}),originLevel3:new un({required:!1}),analyticsMode:new un({constrainTo:["legacy","next"],required:!1})}})},sd=new Xr({...od,search:new dn({options:{required:!1},values:{pipeline:new un({required:!1,emptyAllowed:!0}),searchHub:mn,locale:mn,timezone:mn,authenticationProviders:new pn({required:!1,each:vn})}})});function ld(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:Hn("searchuisamples"),search:{searchHub:"default"}}}var ud={debug:Yl,pipeline:tu,searchHub:nu,search:Uc};function cd(e){let t=function(e){return(0,Gc.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter}})}(e.loggerOptions);!function(e,t){try{sd.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}(e.configuration,t);let r=function(e,t){let{search:r}=e;return new mi({logger:t,preprocessRequest:e.preprocessRequest||ni,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||Qi,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||_i,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||Ni})}(e.configuration,t),n=function(e){return new ga({logger:e})}(t),i={...Wc(e.configuration,t),apiClient:r,streamingClient:n},a=Yc({...e,reducers:ud,crossReducer:ad(t)},i),o=function(e){var t;return{...e.configuration.search,apiBaseUrl:(null==(t=e.configuration.organizationEndpoints)?void 0:t.search)||void 0}}(e);return o&&a.dispatch(Vl(o)),{...a,get state(){return a.state},executeFirstSearch(e=El()){if(Tc(a.state))return;let t=Sc(e);a.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e,n=r&&"omniboxFromLink"===t?jl(r):Dl();this.executeFirstSearch(n)}}}function dd(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(i){i();let a,o=Symbol();return n()&&(t=JSON.stringify(this.state),a=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(o,i),()=>{r.delete(o),n()&&a&&a()}},get state(){return{}}}}var fd=e=>{if(!e)return null;let t=/Document weights:\n((?:.)*?)\n+/g.exec(e),r=/Terms weights:\n((?:.|\n)*)\n+/g.exec(e),n=/Total weight: ([0-9]+)/g.exec(e),i=vd(e);return{documentWeights:pd(t?t[1]:null),termsWeight:hd(r),totalWeight:n?Number(n[1]):null,qreWeights:i}},pd=e=>{let t=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let r=e.match(/(\w+(?:\s\w+)*): ([-0-9]+)/g);if(!r)return null;let n={};for(let e of r){let r=e.match(t);if(r){let e=r[1],t=r[2];n[e]=Number(t)}}return n},gd=(e,t)=>{let r,n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},hd=e=>{let t=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let r=gd(e[1],/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g);if(!r)return null;let n={};for(let e of r){let r=gd(e[1],t),i={};for(let e of r)i[e[1]]={Correlation:Number(e[2]),"TF-IDF":Number(e[3])};let a=pd(e[2]);n[Object.keys(i).join(", ")]={terms:i,Weights:a}}return n},vd=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function md(e){return e.search.response.results.map((e=>({result:e,ranking:fd(e.rankingInfo)})))}var yd=new pn({each:vn,required:!0}),Sd=ht("fields/registerFieldsToInclude",(e=>wn(e,yd))),bd=ht("fields/fetchall/enable"),wd=ht("fields/fetchall/disable"),Cd=Wt("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:a,organizationId:o}=i.configuration,{apiBaseUrl:s}=i.configuration.search,l=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:o,url:s});return yi(l)?n(l.error):l.success.fields})),Id={collectionField:new un({emptyAllowed:!1,required:!1}),parentField:new un({emptyAllowed:!1,required:!1}),childField:new un({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new nn({min:0,required:!1})},kd=ht("folding/register",(e=>wn(e,Id))),Od=Wt("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let i=t(),a=await Iu(i),o=await n.search({...a,q:Ad(i),enableQuerySyntax:!0,cq:`@${i.folding.fields.collection}="${e}"`,filterField:i.folding.fields.collection,childField:i.folding.fields.parent,parentField:i.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return yi(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:i.folding.collections[e].result}}));function Ad(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var xd=Pt(Ai(),(e=>e.addCase(Sd,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(bd,(e=>{e.fetchAllFields=!0})).addCase(wd,(e=>{e.fetchAllFields=!1})).addCase(Cd.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(kd,((e,{payload:t})=>{var r,n,i;let a={collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"};e.fieldsToInclude.push(null!=(r=t.collectionField)?r:a.collection,null!=(n=t.parentField)?n:a.parent,null!=(i=t.childField)?i:a.child)})))),qd=new Xr({enabled:new on({default:!1})});function Rd(e,t={}){if(!function(e){return e.addReducers({debug:Yl,search:Uc,configuration:zc,fields:xd}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e;Cn(e,qd,t.initialState,"buildRelevanceInspector").enabled&&n(Bl());let i=t=>{e.logger.warn(`Flag [ ${t} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let t=e.state,r=t.debug;if(!t.debug)return{isEnabled:r};let{executionReport:n,basicExpression:i,advancedExpression:a,constantExpression:o,userIdentities:s,rankingExpressions:l}=t.search.response,{fieldsDescription:u,fetchAllFields:c}=t.fields;return{isEnabled:r,rankingInformation:md(t),executionReport:n,expressions:{basicExpression:i,advancedExpression:a,constantExpression:o},userIdentities:s,rankingExpressions:l,fieldsDescription:u,fetchAllFields:c}},enable(){n(Bl()),i("debug")},disable(){n(Hl()),n(wd())},enableFetchAllFields(){n(bd()),i("fetchAllFields")},disableFetchAllFields(){n(wd())},fetchFieldsDescription(){!this.state.isEnabled&&n(Bl()),n(Cd()),i("fieldsDescription"),e.logger.warn("For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.\n        \n        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions\n        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude")}}}var Ed=new pn({each:vn,required:!0}),Fd=(e,t)=>(wn(e,vn),cn(t)?wn(t,vn):wn(t,Ed),{payload:{contextKey:e,contextValue:t}}),Dd=ht("context/set",(e=>{for(let[t,r]of Object.entries(e))Fd(t,r);return{payload:e}})),jd=ht("context/add",(e=>Fd(e.contextKey,e.contextValue))),Td=ht("context/remove",(e=>wn(e,vn))),Pd=Pt({contextValues:{}},(e=>{e.addCase(Dd,((e,t)=>{e.contextValues=t.payload})).addCase(jd,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Td,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Xl.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))}));function Md(e){return function(e){if(!function(e){return e.addReducers({context:Pd}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(Dd(e))},add(e,t){r(jd({contextKey:e,contextValue:t}))},remove(e){r(Td(e))}}}(e)}var Vd=ht("dictionaryFieldContext/set",(e=>{let t=new dn({options:{required:!0}}),r=wn(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new pn({each:yn}),a=wn(n,i).error;return a?{payload:e,error:a}:{payload:e}})),Ud=ht("dictionaryFieldContext/add",(e=>{let t=new dn({options:{required:!0},values:{field:yn,key:yn}});return wn(e,t)})),Ld=ht("dictionaryFieldContext/remove",(e=>wn(e,yn))),$d=Pt({contextValues:{}},(e=>{e.addCase(Vd,((e,t)=>{e.contextValues=t.payload})).addCase(Ud,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(Ld,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Xl.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));function Qd(e){if(!function(e){return e.addReducers({dictionaryFieldContext:$d}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.dictionaryFieldContext.contextValues}},set(e){r(Vd(e))},add(e,t){r(Ud({field:e,key:t}))},remove(e){r(Ld(e))}}}var _d=Pt(wi(),(e=>{e.addCase(ku,(e=>{e.enableDidYouMean=!0})).addCase(Ou,(e=>{e.enableDidYouMean=!1})).addCase(xu,(e=>{e.automaticallyCorrectQuery=!0})).addCase(Au,(e=>{e.automaticallyCorrectQuery=!1})).addCase(Sc.pending,(e=>{e.queryCorrection=bi(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(Sc.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||bi(),e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(qu,((e,t)=>{e.wasCorrectedTo=t.payload}))}));function Nd(e){let t=function(e,t={}){if(!function(e){return e.addReducers({configuration:zc,didYouMean:_d}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e;return n(ku()),!1===t.automaticallyCorrectQuery&&n(Au()),{...r,get state(){let t=e.state;return{originalQuery:t.didYouMean.originalQuery,wasCorrectedTo:t.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:t.didYouMean.wasAutomaticallyCorrected,queryCorrection:t.didYouMean.queryCorrection,hasQueryCorrection:""!==t.didYouMean.queryCorrection.correctedQuery||""!==t.didYouMean.wasCorrectedTo}},applyCorrection(){n(qu(this.state.queryCorrection.correctedQuery))}}}(e),{dispatch:r}=e;return{...t,get state(){return t.state},applyCorrection(){t.applyCorrection(),r(Sc(Ru()))}}}var zd=vn,Bd=ht("facetOptions/update",((e={freezeFacetOrder:!0})=>wn(e,{freezeFacetOrder:new on({required:!1})}))),Hd=ht("facetOptions/facet/enable",(e=>wn(e,zd))),Yd=ht("facetOptions/facet/disable",(e=>wn(e,zd))),Gd={facetId:zd,captions:new dn({options:{required:!1}}),numberOfValues:new nn({required:!1,min:1}),query:new un({required:!1,emptyAllowed:!0})},Wd={path:new pn({required:!0,each:vn}),displayValue:yn,rawValue:yn,count:new nn({required:!0,min:0})},Jd=ht("categoryFacet/selectSearchResult",(e=>wn(e,{facetId:zd,value:new dn({values:Wd})}))),Kd=ht("categoryFacetSearch/register",(e=>wn(e,Gd)));function Zd(e,t){var r;let{facetId:n,criterion:i}=t,a=null==(r=e[n])?void 0:r.request;!a||(a.sortCriteria=i)}function Xd(e){!e||(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function ef(e,t){!e||(e.numberOfValues=t)}function tf(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function rf(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];let r=nf(e[0],t),n=r;for(let r of e.splice(1)){let e=nf(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function nf(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var af={state:new en({required:!0}),numberOfResults:new nn({required:!0,min:0}),value:new un({required:!0,emptyAllowed:!0}),path:new pn({required:!0,each:vn}),moreValuesAvailable:new on({required:!1})};function of(e){e.children.forEach((e=>{of(e)})),bn({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},af)}var sf={facetId:zd,field:vn,delimitingCharacter:new un({required:!1,emptyAllowed:!0}),filterFacetCount:new on({required:!1}),injectionDepth:new nn({required:!1,min:0}),numberOfValues:new nn({required:!1,min:1}),sortCriteria:new en({required:!1}),basePath:new pn({required:!1,each:vn}),filterByBasePath:new on({required:!1})},lf=ht("categoryFacet/register",(e=>wn(e,sf))),uf=ht("categoryFacet/toggleSelectValue",(e=>{try{return bn(e.facetId,vn),of(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Sn(t)}}})),cf=ht("categoryFacet/deselectAll",(e=>wn(e,sf.facetId))),df=ht("categoryFacet/updateNumberOfValues",(e=>wn(e,{facetId:sf.facetId,numberOfValues:sf.numberOfValues}))),ff=ht("categoryFacet/updateSortCriterion",(e=>wn(e,{facetId:sf.facetId,criterion:new en}))),pf=ht("categoryFacet/updateBasePath",(e=>wn(e,{facetId:sf.facetId,basePath:new pn({each:vn})}))),gf=Pt({},(e=>{e.addCase(lf,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let i=function(e){return{...hf,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}(r),a=i.numberOfValues;e[n]={request:i,initialNumberOfValues:a}})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e})).addCase(zl,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,i=r[t]||[];(i.length||n.currentValues.length)&&rf(n,i,e[t].initialNumberOfValues)}))})).addCase(ff,((e,t)=>{var r;let{facetId:n,criterion:i}=t.payload,a=null==(r=e[n])?void 0:r.request;!a||(a.sortCriteria=i)})).addCase(pf,((e,t)=>{var r;let{facetId:n,basePath:i}=t.payload,a=null==(r=e[n])?void 0:r.request;!a||(a.basePath=[...i])})).addCase(uf,((e,t)=>{var r;let{facetId:n,selection:i,retrieveCount:a}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=i,l=function(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=vf(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}(o,s.slice(0,s.length-1),a);if(l.length){let e=l[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}let u=vf(i.value,a);u.state="selected",l.push(u),o.numberOfValues=1})).addCase(cf,((e,t)=>{tf(e,t.payload)})).addCase(iu,(e=>{Object.keys(e).forEach((t=>tf(e,t)))})).addCase(ou,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(df,((e,t)=>{var r;let{facetId:n,numberOfValues:i}=t.payload,a=null==(r=e[n])?void 0:r.request;if(a){if(!a.currentValues.length)return ef(a,i);!function(e,t){var r;let{facetId:n,numberOfValues:i}=t,a=null==(r=e[n])?void 0:r.request.currentValues[0];if(a){for(;a.children.length&&"selected"!==(null==a?void 0:a.state);)a=a.children[0];a.retrieveCount=i}}(e,t.payload)}})).addCase(Jd,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;let a=[...n.path,n.rawValue];rf(i.request,a,i.initialNumberOfValues)})).addCase(Cc.fulfilled,((e,t)=>{mf(e,t.payload.response.facets)})).addCase(Sc.fulfilled,((e,t)=>{mf(e,t.payload.response.facets)})).addCase(Yd,((e,t)=>{tf(e,t.payload)}))})),hf={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function vf(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function mf(e,t){t.forEach((t=>{var r;if(!function(e,t){return t.facetId in e}(e,t))return;let n=t.facetId,i=null==(r=e[n])?void 0:r.request;if(!i)return;let a=function(e,t){let r=As(e.currentValues),n=As(t.values);return r.length!==n.length}(i,t);i.currentValues=a?[]:i.currentValues,i.preventAutoSelect=!1}))}function yf(e,t,r){let{facetId:n}=t;if(e[n])return;let i={...Of,...t},a=r();e[n]={options:i,isLoading:!1,response:a,initialNumberOfValues:i.numberOfValues,requestId:""}}function Sf(e,t){let{facetId:r,...n}=t,i=e[r];!i||(i.options={...i.options,...n})}function bf(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function wf(e,t){let r=e[t];!r||(r.isLoading=!1)}function Cf(e,t,r){let{facetId:n,response:i}=t,a=e[n];!a||a.requestId===r&&(a.isLoading=!1,a.response=i)}function If(e,t,r){let{facetId:n}=t,i=e[n];!i||(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=Of.query)}function kf(e,t){Object.keys(e).forEach((r=>If(e,{facetId:r},t)))}var Of={captions:{},numberOfValues:10,query:""},Af=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:i}})=>{let a,o=r();return i(t,vn),a=Ef(o,t)?await(async(e,t,r)=>{let{captions:n,query:i,numberOfValues:a}=t.facetSearchSet[e].options,{field:o,currentValues:s,filterFacetCount:l}=t.facetSet[e].request,u=s.filter((e=>"idle"!==e.state)).map((e=>e.value)),c=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:a,query:c,field:o,ignoreValues:u,filterFacetCount:l,type:"specific",...r?{}:{searchContext:(await pc(t)).request}}})(t,o,e):await(async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,i=t.categoryFacetSet[e].request,{captions:a,query:o,numberOfValues:s}=n,{field:l,delimitingCharacter:u,basePath:c,filterFacetCount:d}=i,f=(e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t})(i),p=f.length?[f]:[],g=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:c,captions:a,numberOfValues:s,query:g,field:l,delimitingCharacter:u,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await pc(t)).request}}})(t,o,e),{facetId:t,response:await n.facetSearch(a)}},xf=Wt("facetSearch/executeSearch",Af(!1)),qf=Wt("facetSearch/executeSearch",Af(!0)),Rf=ht("facetSearch/clearResults",(e=>wn(e,{facetId:zd}))),Ef=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],Ff={facetId:zd,value:new dn({values:{displayValue:yn,rawValue:yn,count:new nn({required:!0,min:0})}})},Df=ht("facetSearch/register",(e=>wn(e,Gd))),jf=ht("facetSearch/update",(e=>wn(e,Gd))),Tf=ht("facetSearch/toggleSelectValue",(e=>wn(e,Ff))),Pf=ht("facetSearch/toggleExcludeValue",(e=>wn(e,Ff))),Mf=Pt({},(e=>{e.addCase(Kd,((e,t)=>{yf(e,t.payload,Vf)})).addCase(jf,((e,t)=>{Sf(e,t.payload)})).addCase(xf.pending,((e,t)=>{bf(e,t.meta.arg,t.meta.requestId)})).addCase(xf.rejected,((e,t)=>{wf(e,t.meta.arg)})).addCase(xf.fulfilled,((e,t)=>{Cf(e,t.payload,t.meta.requestId)})).addCase(Rf,((e,{payload:{facetId:t}})=>{If(e,{facetId:t},Vf)})).addCase(Sc.fulfilled,(e=>{kf(e,Vf)}))}));function Vf(){return{moreValuesAvailable:!1,values:[]}}var Uf=e=>hl("analytics/facet/showMore",((t,r)=>{wn(e,zd);let n=Fs(e,js(r));return t.makeFacetShowMore(n)})),Lf=e=>hl("analytics/facet/showLess",((t,r)=>{wn(e,zd);let n=Fs(e,js(r));return t.makeFacetShowLess(n)})),$f=e=>hl("analytics/facet/sortChange",((t,r)=>{wn(e,{facetId:zd,criterion:new en({required:!0})});let{facetId:n,criterion:i}=e,a=js(r),o={...Fs(n,a),criteria:i};return t.makeFacetUpdateSort(o)})),Qf=e=>hl("analytics/facet/reset",((t,r)=>{wn(e,zd);let n=js(r),i=Fs(e,n);return t.makeFacetClearAll(i)})),_f=e=>hl("analytics/facet/select",((t,r)=>{wn(e,{facetId:zd,facetValue:vn});let n=js(r),i=Ds(e,n);return t.makeFacetSelect(i)})),Nf=e=>hl("analytics/facet/exclude",((t,r)=>{wn(e,{facetId:zd,facetValue:vn});let n=js(r),i=Ds(e,n);return t.makeFacetExclude(i)})),zf=e=>hl("analytics/facet/deselect",((t,r)=>{wn(e,{facetId:zd,facetValue:vn});let n=js(r),i=Ds(e,n);return t.makeFacetDeselect(i)})),Bf=e=>hl("analytics/facet/breadcrumb",((t,r)=>{wn(e,{facetId:zd,facetValue:vn});let n=Ds(e,js(r));return t.makeBreadcrumbFacet(n)})),Hf=(e,t)=>{var r,n;return null==(n=null==(r=e.facetOptions.facets[t])?void 0:r.enabled)||n},Yf=new un({regex:/^[a-zA-Z0-9-_]+$/}),Gf=new un({required:!0}),Wf=new pn({each:new un}),Jf=new un,Kf=new on,Zf=new on,Xf=new nn({min:0}),ep=new nn({min:1}),tp=new on({required:!0}),rp=new dn,np=new un,ip=new dn({values:{captions:rp,numberOfValues:ep,query:np}}),ap=new dn({options:{required:!1},values:{type:new un({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new pn({required:!0,max:25,each:new un({emptyAllowed:!1,required:!0})})}}),op=new on,sp=new pn({min:1,max:25,required:!1,each:new un({emptyAllowed:!1,required:!0})}),lp={value:vn,numberOfResults:new nn({min:0}),state:vn},up={facetId:zd,field:new un({required:!0,emptyAllowed:!0}),filterFacetCount:new on({required:!1}),injectionDepth:new nn({required:!1,min:0}),numberOfValues:new nn({required:!1,min:1}),sortCriteria:new en({required:!1}),resultsMustMatch:new en({required:!1}),allowedValues:ap,customSort:sp},cp=ht("facet/register",(e=>wn(e,up))),dp=ht("facet/toggleSelectValue",(e=>wn(e,{facetId:zd,selection:new dn({values:lp})}))),fp=ht("facet/toggleExcludeValue",(e=>wn(e,{facetId:zd,selection:new dn({values:lp})}))),pp=ht("facet/deselectAll",(e=>wn(e,zd))),gp=ht("facet/updateSortCriterion",(e=>wn(e,{facetId:zd,criterion:new en({required:!0})}))),hp=ht("facet/updateNumberOfValues",(e=>wn(e,{facetId:zd,numberOfValues:new nn({required:!0,min:1})}))),vp=ht("facet/updateIsFieldExpanded",(e=>wn(e,{facetId:zd,isFieldExpanded:new on({required:!0})}))),mp=ht("facet/updateFreezeCurrentValues",(e=>wn(e,{facetId:zd,freezeCurrentValues:new on({required:!0})})));function yp(e){var t,r;return{start:Sp(e.start,e),end:Sp(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function Sp(e,t){let{dateFormat:r}=t;return function(e){return!!e&&"object"==typeof e&&"period"in e}(e)?(Xu(e),function(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}(e)):"string"==typeof e&&nc(e)?(Xu(e),e):(Gu(e,r),Yu(Hu(e,r)))}var bp=ht("rangeFacet/updateSortCriterion",(e=>wn(e,{facetId:zd,criterion:new en({required:!0})}))),wp={state:vn,start:new nn({required:!0}),end:new nn({required:!0}),endInclusive:new on({required:!0}),numberOfResults:new nn({required:!0,min:0})},Cp={start:vn,end:vn,endInclusive:new on({required:!0}),state:vn,numberOfResults:new nn({required:!0,min:0})},Ip=e=>({facetId:zd,selection:"string"==typeof e.start?new dn({values:Cp}):new dn({values:wp})}),kp={start:vn,end:vn,endInclusive:new on({required:!0}),state:vn},Op={facetId:zd,field:vn,currentValues:new pn({required:!1,each:new dn({values:kp})}),generateAutomaticRanges:new on({required:!0}),filterFacetCount:new on({required:!1}),injectionDepth:new nn({required:!1,min:0}),numberOfValues:new nn({required:!1,min:1}),sortCriteria:new en({required:!1}),rangeAlgorithm:new en({required:!1})};function Ap(e){return nc(e)?tc(e):e}function xp(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=yp(e);if(Hu(Ap(t)).isAfter(Hu(Ap(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var qp=ht("dateFacet/register",(e=>{try{return bn(e,Op),xp(e),{payload:e,error:null}}catch(t){return{payload:e,error:Sn(t)}}})),Rp=ht("dateFacet/toggleSelectValue",(e=>wn(e,{facetId:zd,selection:new dn({values:Cp})}))),Ep=ht("dateFacet/toggleExcludeValue",(e=>wn(e,{facetId:zd,selection:new dn({values:Cp})}))),Fp=ht("dateFacet/updateFacetValues",(e=>{try{return bn(e,{facetId:zd,values:new pn({each:new dn({values:Cp})})}),xp({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Sn(t)}}})),Dp=bp,jp=pp,Tp={state:vn,start:new nn({required:!0}),end:new nn({required:!0}),endInclusive:new on({required:!0})},Pp={facetId:zd,field:vn,currentValues:new pn({required:!1,each:new dn({values:Tp})}),generateAutomaticRanges:new on({required:!0}),filterFacetCount:new on({required:!1}),injectionDepth:new nn({required:!1,min:0}),numberOfValues:new nn({required:!1,min:1}),sortCriteria:new en({required:!1}),rangeAlgorithm:new en({required:!1})};function Mp(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var Vp=ht("numericFacet/register",(e=>{try{return wn(e,Pp),Mp(e),{payload:e,error:null}}catch(t){return{payload:e,error:Sn(t)}}})),Up=ht("numericFacet/toggleSelectValue",(e=>wn(e,{facetId:zd,selection:new dn({values:wp})}))),Lp=ht("numericFacet/toggleExcludeValue",(e=>wn(e,{facetId:zd,selection:new dn({values:wp})}))),$p=ht("numericFacet/updateFacetValues",(e=>{try{return bn(e,{facetId:zd,values:new pn({each:new dn({values:wp})})}),Mp({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Sn(t)}}})),Qp=bp,_p=pp,Np=Pt({freezeFacetOrder:!1,facets:{}},(e=>{e.addCase(Bd,((e,t)=>({...e,...t.payload}))).addCase(Sc.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(Sc.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e})).addCase(lf,((e,t)=>{e.facets[t.payload.facetId]={enabled:!0}})).addCase(cp,((e,t)=>{e.facets[t.payload.facetId]={enabled:!0}})).addCase(qp,((e,t)=>{e.facets[t.payload.facetId]={enabled:!0}})).addCase(Vp,((e,t)=>{e.facets[t.payload.facetId]={enabled:!0}})).addCase(Hd,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(Yd,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(zl,((e,t)=>{var r,n,i,a,o;[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.fExcluded)?n:{}),...Object.keys(null!=(i=t.payload.cf)?i:{}),...Object.keys(null!=(a=t.payload.nf)?a:{}),...Object.keys(null!=(o=t.payload.df)?o:{})].forEach((t=>{t in e||(e.facets[t]={enabled:!0}),e.facets[t].enabled=!0}))}))}));function zp(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:i}=e;return[t,r,n,i]}function Bp(e,t){let{state:r,logger:n}=e,{field:i,facetId:a}=t;return a||function(e,t){let{field:r,state:n}=e;if(!function(e){let{field:t,state:r}=e;return zp(r).some((e=>e&&t in e))}(e))return r;let i=`${r}_`,a=function(e,t){let r=zp(t).map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]);return function(e,t){let r=e.map((e=>{let r=e.split(t)[1],n=parseInt(r,10);return Number.isNaN(n)?0:n})).sort().pop();return null!=r?r:0}(r,e)+1}(i,n);return function(e,t){let r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}(r,t),`${i}${a}`}({field:i,state:r},n)}var Hp=new Xr({field:Gf,basePath:Wf,delimitingCharacter:Jf,facetId:Yf,facetSearch:ip,filterByBasePath:Kf,filterFacetCount:Zf,injectionDepth:Xf,numberOfValues:ep,sortCriteria:new un({constrainTo:["alphanumeric","occurrences"]})});function Yp(e,t){let r=e.dispatch,{options:n,getFacetSearch:i}=t,{facetId:a}=n;return{updateText(e){r(jf({facetId:a,query:e,numberOfValues:i().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=i();r(jf({facetId:a,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?qf(a):xf(a))},search(){r(t.isForFieldSuggestions?qf(a):xf(a))},clear(){r(Rf({facetId:a}))},updateCaptions(e){r(jf({facetId:a,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=i(),{query:n}=r,a=e.values;return{...e,values:a,isLoading:t,query:n}}}}function Gp(e,t){let{dispatch:r}=e,n={...Of,...t.options},{facetId:i}=n,a=function(e,t){let{dispatch:r}=e,n={...Of,...t.options},{facetId:i}=n;r(Kd(n));let a=Yp(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[i],isForFieldSuggestions:t.isForFieldSuggestions});return{...a,select(e){r(Jd({facetId:i,value:e}))},get state(){return a.state}}}(e,{options:{...n},isForFieldSuggestions:t.isForFieldSuggestions});r(Kd(n));let o=Yp(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[i],isForFieldSuggestions:t.isForFieldSuggestions});return{...o,...a,select:e=>{a.select(e),r(Bd()),r(Sc(_f({facetId:i,facetValue:e.rawValue})))},get state(){return{...o.state,...a.state}}}}function Wp(e,t){if(!function(e){return e.addReducers({categoryFacetSet:gf,categoryFacetSearchSet:Mf,configuration:zc,search:Uc}),!0}(e))throw En;let r=function(e,t){if(!function(e){return e.addReducers({categoryFacetSet:gf,categoryFacetSearchSet:Mf,facetOptions:Np,configuration:zc,search:Uc}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i=Bp(e,t.options),a={...hf,...Vn("facetSearch",t.options),field:t.options.field,facetId:i},o={facetSearch:{...Of,...t.options.facetSearch},...a};In(e,Hp,o,"buildCategoryFacet");let s=()=>qs(e.state,i);return n(lf(a)),{...r,toggleSelect(e){let t=o.numberOfValues;n(uf({facetId:i,selection:e,retrieveCount:t})),n(Bd())},deselectAll(){n(cf(i)),n(Bd())},sortBy(e){n(ff({facetId:i,criterion:e})),n(Bd())},isSortedBy:e=>s().sortCriteria===e,showMoreValues(){var e;let{numberOfValues:t}=o,{activeValue:r,valuesAsTrees:a}=this.state,s=(null!=(e=null==r?void 0:r.children.length)?e:a.length)+t;n(df({facetId:i,numberOfValues:s})),n(Bd())},showLessValues(){let{numberOfValues:e}=o;n(df({facetId:i,numberOfValues:e})),n(Bd())},enable(){n(Hd(i))},disable(){n(Yd(i))},get state(){var t,r,n,a;let l=s(),u=xs(e.state,i),c=Os(e.state),d=Hf(e.state,i),f=null!=(t=null==u?void 0:u.values)?t:[],p=null!=(r=f.some((e=>e.children.length>0)))&&r,{parents:g,values:h}=function(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}(null==u?void 0:u.values),v=As(f),m=v.length?v[v.length-1]:void 0,y=!!m,S=null!=(a=null!=(n=null==m?void 0:m.moreValuesAvailable)?n:null==u?void 0:u.moreValuesAvailable)&&a,b=m?m.children.length>o.numberOfValues:f.length>o.numberOfValues;return{facetId:i,parents:g,selectedValueAncestry:v,values:h,isHierarchical:p,valuesAsTrees:f,activeValue:m,isLoading:c,hasActiveValues:y,canShowMoreValues:S,canShowLessValues:b,sortCriteria:l.sortCriteria,enabled:d}}}}(e,t),{dispatch:n}=e,i=()=>r.state.facetId,a=Gp(e,{options:{facetId:i(),...t.options.facetSearch},isForFieldSuggestions:!1}),{state:o,...s}=a;return{...r,facetSearch:s,toggleSelect(e){r.toggleSelect(e);let t=function(e,t){let r={facetId:e,facetValue:t.value};return"selected"===t.state?zf(r):_f(r)}(i(),e);n(Sc(t))},deselectAll(){r.deselectAll(),n(Sc(Qf(i())))},sortBy(e){r.sortBy(e),n(Sc($f({facetId:i(),criterion:e})))},showMoreValues(){r.showMoreValues(),n(Cc(Uf(i())))},showLessValues(){r.showLessValues(),n(Cc(Lf(i())))},get state(){return{...r.state,facetSearch:a.state}}}}var Jp=Pt({},(e=>{e.addCase(Df,((e,t)=>{yf(e,t.payload,Kp)})).addCase(jf,((e,t)=>{Sf(e,t.payload)})).addCase(xf.pending,((e,t)=>{bf(e,t.meta.arg,t.meta.requestId)})).addCase(xf.rejected,((e,t)=>{wf(e,t.meta.arg)})).addCase(xf.fulfilled,((e,t)=>{Cf(e,t.payload,t.meta.requestId)})).addCase(Rf,((e,{payload:t})=>{If(e,t,Kp)})).addCase(Sc.fulfilled,(e=>{kf(e,Kp)}))}));function Kp(){return{moreValuesAvailable:!1,values:[]}}ht("productlisting/setUrl",(e=>wn(e,{url:new un({required:!0,url:!0})}))),ht("productlisting/setAdditionalFields",(e=>wn(e,{additionalFields:new pn({required:!0,each:new un({required:!0,emptyAllowed:!1})})})));var Zp=Wt("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:o}=i,s=await o.getProducts(await Xp(a));return yi(s)?(r(Lu(s.error)),n(s.error)):{response:s.success,analyticsAction:vl("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new Js(e)))}})),Xp=async e=>{var t,r,n;let i=function(e){var t;return uc(function(e){var t,r,n,i;return[...cc(null!=(t=e.facetSet)?t:{}),...cc(null!=(r=e.numericFacetSet)?r:{}),...cc(null!=(n=e.dateFacetSet)?n:{}),...cc(null!=(i=e.categoryFacetSet)?i:{})]}(e),null!=(t=e.facetOrder)?t:[])}(e),a=await ds(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&a?{clientId:a}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&eg(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...i.length&&{facets:{requests:i}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||ti.Relevance)!==ti.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function eg(e){return e.debug}var tg=Pt({},(e=>{e.addCase(cp,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=function(e){return{request:e,hasBreadcrumbs:!0}}(function(e){return{...ig,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}(t.payload)))})).addCase(Xl.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(zl,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:i}=e[t],a=r[t]||[],o=n[t]||[],s=i.currentValues.filter((e=>!a.includes(e.value)&&!o.includes(e.value)));i.currentValues=[...a.map(og),...o.map(sg),...s.map(lg)],i.preventAutoSelect=a.length>0,i.numberOfValues=Math.max(a.length+o.length,i.numberOfValues)}))})).addCase(dp,((e,t)=>{var r;let{facetId:n,selection:i}=t.payload,a=null==(r=e[n])?void 0:r.request;if(!a)return;a.preventAutoSelect=!0;let o=a.currentValues.find((e=>e.value===i.value));if(!o)return void rg(a,i);let s="selected"===o.state;o.state=s?"idle":"selected",a.freezeCurrentValues=!0})).addCase(fp,((e,t)=>{var r;let{facetId:n,selection:i}=t.payload,a=null==(r=e[n])?void 0:r.request;if(!a)return;a.preventAutoSelect=!0;let o=a.currentValues.find((e=>e.value===i.value));if(!o)return void rg(a,i);let s="excluded"===o.state;o.state=s?"idle":"excluded",a.freezeCurrentValues=!0})).addCase(mp,((e,t)=>{var r;let{facetId:n,freezeCurrentValues:i}=t.payload,a=null==(r=e[n])?void 0:r.request;!a||(a.freezeCurrentValues=i)})).addCase(pp,((e,t)=>{var r;Xd(null==(r=e[t.payload])?void 0:r.request)})).addCase(iu,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>Xd(e)))})).addCase(au,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>Xd(e)))})).addCase(ou,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(gp,((e,t)=>{Zd(e,t.payload)})).addCase(hp,((e,t)=>{var r;let{facetId:n,numberOfValues:i}=t.payload;ef(null==(r=e[n])?void 0:r.request,i)})).addCase(vp,((e,t)=>{var r;let{facetId:n,isFieldExpanded:i}=t.payload,a=null==(r=e[n])?void 0:r.request;!a||(a.isFieldExpanded=i)})).addCase(Sc.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return ng(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Zp.fulfilled,((e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach((t=>{var r;return ng(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Cc.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>{var r;return ng(null==(r=e[t.facetId])?void 0:r.request,t)}))})).addCase(Tf,((e,t)=>{var r;let{facetId:n,value:i}=t.payload,a=null==(r=e[n])?void 0:r.request;if(!a)return;let{rawValue:o}=i,{currentValues:s}=a,l=s.find((e=>e.value===o));l?l.state="selected":(rg(a,og(o)),a.freezeCurrentValues=!0,a.preventAutoSelect=!0)})).addCase(Pf,((e,t)=>{var r;let{facetId:n,value:i}=t.payload,a=null==(r=e[n])?void 0:r.request;if(!a)return;let{rawValue:o}=i,{currentValues:s}=a,l=s.find((e=>e.value===o));l?l.state="excluded":(rg(a,sg(o)),a.freezeCurrentValues=!0,a.preventAutoSelect=!0)})).addCase(Yd,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];Xd(r)}))}));function rg(e,t){let{currentValues:r}=e,n=r.findIndex((e=>"idle"===e.state)),i=-1===n?r.length:n,a=r.slice(0,i),o=r.slice(i+1);e.currentValues=[...a,t,...o],e.numberOfValues=e.currentValues.length}function ng(e,t){!e||(e.currentValues=t.values.map(ag),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var ig={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function ag(e){let{value:t,state:r}=e;return{value:t,state:r}}function og(e){return{value:e,state:"selected"}}function sg(e){return{value:e,state:"excluded"}}function lg(e){return{...e,state:"idle"}}var ug=e=>"selected"===e.state,cg=e=>"excluded"===e.state,dg=(e,t)=>{let r={facetId:e,facetValue:t.value};return ug(t)?zf(r):_f(r)},fg=(e,t)=>{let r={facetId:e,facetValue:t.value};return cg(t)?zf(r):Nf(r)};function pg(e,t){let{dispatch:r}=e,{options:n,select:i,exclude:a,isForFieldSuggestions:o}=t,{facetId:s}=n;r(Df(n));let l=Yp(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[s],isForFieldSuggestions:o});return{...l,select(e){r(Tf({facetId:s,value:e})),i(e)},exclude(e){r(Pf({facetId:s,value:e})),a(e)},singleSelect(e){r(pp(s)),r(Tf({facetId:s,value:e})),i(e)},singleExclude(e){r(pp(s)),r(Pf({facetId:s,value:e})),a(e)},get state(){let{values:e}=l.state;return{...l.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}var gg={facetId:zd,selection:new dn({values:lp})},hg=Wt("facet/executeToggleSelect",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:i}}=r;i({facetId:e,selection:t},gg),n(dp({facetId:e,selection:t})),n(Bd())})),vg=Wt("facet/executeToggleExclude",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:i}}=r;i({facetId:e,selection:t},gg),n(fp({facetId:e,selection:t})),n(Bd())})),mg=["allValues","atLeastOneValue"],yg=["score","alphanumeric","alphanumericDescending","occurrences","automatic"],Sg=new Xr({facetId:Yf,field:Gf,filterFacetCount:Zf,injectionDepth:Xf,numberOfValues:ep,sortCriteria:new un({constrainTo:yg}),resultsMustMatch:new un({constrainTo:mg}),facetSearch:ip});var bg=new Xr({facetId:Yf,field:Gf,filterFacetCount:Zf,injectionDepth:Xf,numberOfValues:ep,sortCriteria:new un({constrainTo:yg}),resultsMustMatch:new un({constrainTo:mg}),facetSearch:ip,allowedValues:ap,hasBreadcrumbs:op,customSort:sp});function wg(e,t){if(!function(e){return e.addReducers({facetSet:tg,configuration:zc,facetSearchSet:Jp,search:Uc}),!0}(e))throw En;let{dispatch:r}=e,n=function(e,t,r=Sg){if(!function(e){return e.addReducers({facetSet:tg,facetOptions:Np,configuration:zc,facetSearchSet:Jp}),!0}(e))throw En;let{dispatch:n}=e,i=dd(e),a=Bp(e,t.options),o={...ig,...Vn("facetSearch",t.options),field:t.options.field,facetId:a},s={facetSearch:{...Of,...t.options.facetSearch},...o};In(e,r,s,"buildFacet");let l=()=>ws(e.state,a),u=()=>{let{currentValues:e}=l(),t=s.numberOfValues,r=!!e.find((e=>"idle"===e.state));return t<e.length&&r};return n(cp(o)),{...i,toggleSelect:e=>n(hg({facetId:s.facetId,selection:e})),toggleExclude:e=>n(vg({facetId:s.facetId,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&n(pp(a)),this.toggleSelect(e)},toggleSingleExclude:function(e){"idle"===e.state&&n(pp(a)),this.toggleExclude(e)},isValueSelected:ug,isValueExcluded:cg,deselectAll(){n(pp(a)),n(Bd())},sortBy(e){n(gp({facetId:a,criterion:e})),n(Bd())},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=l().numberOfValues,t=s.numberOfValues;n(hp({facetId:a,numberOfValues:e+(t-e%t)})),n(vp({facetId:a,isFieldExpanded:!0})),n(Bd())},showLessValues(){let e=s.numberOfValues,t=Math.max(e,(()=>{let{currentValues:e}=l();return e.filter((e=>"idle"!==e.state)).length})());n(hp({facetId:a,numberOfValues:t})),n(vp({facetId:a,isFieldExpanded:!1})),n(Bd())},enable(){n(Hd(a))},disable(){n(Yd(a))},get state(){let t,r=l(),n=Cs(e.state,a),i=Os(e.state),o=Hf(e.state,a);t="object"==typeof r.sortCriteria?"descending"===r.sortCriteria.order?"alphanumericDescending":"alphanumeric":r.sortCriteria;let s=n?n.values:[],c=s.some((e=>"idle"!==e.state)),d=!!n&&n.moreValuesAvailable,f=r.resultsMustMatch;return{facetId:a,values:s,sortCriterion:t,resultsMustMatch:f,isLoading:i,hasActiveValues:c,canShowMoreValues:d,canShowLessValues:u(),enabled:o}}}}(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},bg),i=()=>n.state.facetId,a=(()=>{let{facetSearch:n}=t.options;return pg(e,{options:{facetId:i(),...n},select:e=>{r(Bd()),r(Sc(_f({facetId:i(),facetValue:e.rawValue})))},exclude:e=>{r(Bd()),r(Sc(Nf({facetId:i(),facetValue:e.rawValue})))},isForFieldSuggestions:!1})})(),{state:o,...s}=a;return{...n,facetSearch:s,toggleSelect(e){n.toggleSelect(e),r(Sc(dg(i(),e)))},toggleExclude(e){n.toggleExclude(e),r(Sc(fg(i(),e)))},deselectAll(){n.deselectAll(),r(Sc(Qf(i())))},sortBy(e){n.sortBy(e),r(Sc($f({facetId:i(),criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(Cc(Uf(i())))},showLessValues(){n.showLessValues(),r(Cc(Lf(i())))},get state(){return{...n.state,facetSearch:a.state}}}}var Cg=e=>"selected"===e.state,Ig=e=>"excluded"===e.state,kg=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return Cg(t)?zf(r):_f(r)},Og=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return Ig(t)?zf(r):Nf(r)},Ag=ht("rangeFacet/executeToggleSelect",(e=>wn(e,Ip(e.selection)))),xg=ht("rangeFacet/executeToggleExclude",(e=>wn(e,Ip(e.selection)))),qg={facetId:zd,selection:new dn({values:Cp})},Rg=Wt("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qg),t(Rp(e)),t(Ag(e)),t(Bd())})),Eg=Wt("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,qg),t(Ep(e)),t(xg(e)),t(Bd())})),Fg={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Dg(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let i=$g(r);r.numberOfValues=i,e[n]=t}function jg(e,t,r){var n;let i=null==(n=e[t])?void 0:n.request;!i||(i.currentValues=r,i.numberOfValues=$g(i))}function Tg(e,t,r){var n;let i=null==(n=e[t])?void 0:n.request;if(!i)return;let a=Lg(i.currentValues,r);if(!a)return;let o="selected"===a.state;a.state=o?"idle":"selected",i.preventAutoSelect=!0}function Pg(e,t,r){var n;let i=null==(n=e[t])?void 0:n.request;if(!i)return;let a=Lg(i.currentValues,r);if(!a)return;let o="excluded"===a.state;a.state=o?"idle":"excluded",i.preventAutoSelect=!0}function Mg(e,t){var r;let n=null==(r=e[t])?void 0:r.request;!n||n.currentValues.forEach((e=>e.state="idle"))}function Vg(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!Lg(n,e);return e.state=t?"selected":"idle",e}));let i=n.filter((e=>!Lg(r.currentValues,e))),a=r.currentValues;a.push(...i),r.numberOfValues=Math.max(r.numberOfValues,a.length)}))}function Ug(e,t,r){t.forEach((t=>{var n;let i=t.facetId,a=null==(n=e[i])?void 0:n.request;if(!a)return;let o=r(t.values);a.currentValues=o,a.preventAutoSelect=!1}))}function Lg(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function $g(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Qg=Pt({},(e=>{e.addCase(qp,((e,t)=>{let{payload:r}=t,n=function(e){return{...Fg,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}(r);Dg(e,function(e){return{request:e}}(n))})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e})).addCase(zl,((e,t)=>{Vg(e,t.payload.df||{})})).addCase(Rp,((e,t)=>{let{facetId:r,selection:n}=t.payload;Tg(e,r,n)})).addCase(Ep,((e,t)=>{let{facetId:r,selection:n}=t.payload;Pg(e,r,n)})).addCase(Fp,((e,t)=>{let{facetId:r,values:n}=t.payload;jg(e,r,n)})).addCase(jp,((e,t)=>{Mg(e,t.payload)})).addCase(iu,(e=>{Object.keys(e).forEach((t=>{Mg(e,t)}))})).addCase(Dp,((e,t)=>{Zd(e,t.payload)})).addCase(Sc.fulfilled,((e,t)=>{Ug(e,t.payload.response.facets,_g)})).addCase(Zp.fulfilled,((e,t)=>{var r,n;Ug(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],_g)})).addCase(Yd,((e,t)=>{Mg(e,t.payload)}))}));function _g(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}function Ng(e,t){let{facetId:r,getRequest:n}=t,i=dd(e),a=e.dispatch;return{...i,isValueSelected:Cg,isValueExcluded:Ig,deselectAll(){a(pp(r)),a(Bd())},sortBy(e){a(bp({facetId:r,criterion:e})),a(Bd())},isSortedBy(e){return this.state.sortCriterion===e},enable(){a(Hd(r))},disable(){a(Yd(r))},get state(){let t=n(),i=bs(e.state,r),a=t.sortCriteria,o=t.resultsMustMatch,s=i?i.values:[],l=Os(e.state),u=Hf(e.state,r),c=s.some((e=>"idle"!==e.state));return{facetId:r,values:s,sortCriterion:a,resultsMustMatch:o,hasActiveValues:c,isLoading:l,enabled:u}}}}function zg(e,t){if(!e.generateAutomaticRanges&&void 0===e.currentValues)throw new Error(`currentValues should be specified for ${t} when generateAutomaticRanges is false.`)}var Bg=["idle","selected","excluded"],Hg=["ascending","descending"],Yg=["even","equiprobable"],Gg={start:new un,end:new un,endInclusive:new on,state:new un({constrainTo:Bg})},Wg=new Xr({facetId:Yf,field:Gf,generateAutomaticRanges:tp,filterFacetCount:Zf,injectionDepth:Xf,numberOfValues:ep,currentValues:new pn({each:new dn({values:Gg})}),sortCriteria:new un({constrainTo:Hg}),rangeAlgorithm:new un({constrainTo:Yg})});function Jg(e,t){In(e,Wg,t,"buildDateFacet"),xp(t)}function Kg(e,t){let r=function(e,t){if(!function(e){return e.addReducers({configuration:zc,search:Uc,dateFacetSet:Qg,facetOptions:Np}),!0}(e))throw En;zg(t.options,"buildDateFacet");let r=e.dispatch,n=Bp(e,t.options),i={currentValues:[],...t.options,facetId:n};Jg(e,i),r(qp(i));let a=Ng(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...a,toggleSelect:e=>r(Rg({facetId:n,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&r(pp(n)),this.toggleSelect(e)},toggleExclude:e=>r(Eg({facetId:n,selection:e})),toggleSingleExclude:function(e){"idle"===e.state&&r(pp(n)),this.toggleExclude(e)},get state(){return a.state}}}(e,t),n=e.dispatch,i=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(Sc(Qf(i())))},sortBy(e){r.sortBy(e),n(Sc($f({facetId:i(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(Sc(kg(i(),e)))},toggleExclude:e=>{r.toggleExclude(e),n(Sc(Og(i(),e)))},get state(){return r.state}}}var Zg=Pt({},(e=>{e.addCase(Vp,((e,t)=>{let{payload:r}=t,n=function(e){return{...Fg,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}(r);Dg(e,function(e){return{request:e}}(n))})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e})).addCase(zl,((e,t)=>{Vg(e,t.payload.nf||{})})).addCase(Up,((e,t)=>{let{facetId:r,selection:n}=t.payload;Tg(e,r,n)})).addCase(Lp,((e,t)=>{let{facetId:r,selection:n}=t.payload;Pg(e,r,n)})).addCase($p,((e,t)=>{let{facetId:r,values:n}=t.payload;jg(e,r,n)})).addCase(_p,((e,t)=>{Mg(e,t.payload)})).addCase(iu,(e=>{Object.keys(e).forEach((t=>{Mg(e,t)}))})).addCase(Qp,((e,t)=>{Zd(e,t.payload)})).addCase(Sc.fulfilled,((e,t)=>{Ug(e,t.payload.response.facets,Xg)})).addCase(Zp.fulfilled,((e,t)=>{var r,n;Ug(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],Xg)})).addCase(Yd,((e,t)=>{Mg(e,t.payload)}))}));function Xg(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var eh={facetId:zd,selection:new dn({values:wp})},th=Wt("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,eh),t(Up(e)),t(Ag(e)),t(Bd())})),rh=(Wt("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,eh),t(Lp(e)),t(xg(e)),t(Bd())})),{start:new nn,end:new nn,endInclusive:new on,state:new un({constrainTo:Bg})}),nh=new Xr({facetId:Yf,field:Gf,generateAutomaticRanges:tp,filterFacetCount:Zf,injectionDepth:Xf,numberOfValues:ep,currentValues:new pn({each:new dn({values:rh})}),sortCriteria:new un({constrainTo:Hg}),resultsMustMatch:new un({constrainTo:mg}),rangeAlgorithm:new un({constrainTo:Yg})});function ih(e,t){In(e,nh,t,"buildNumericFacet"),Mp(t)}function ah(e){return{endInclusive:!1,state:"idle",...e}}function oh(e,t){if(!function(e){return e.addReducers({numericFacetSet:Zg,configuration:zc,search:Uc}),!0}(e))throw En;let r=function(e,t){if(!function(e){return e.addReducers({numericFacetSet:Zg,facetOptions:Np,configuration:zc,search:Uc}),!0}(e))throw En;zg(t.options,"buildNumericFacet");let r=e.dispatch,n=Bp(e,t.options),i={currentValues:[],...t.options,facetId:n};ih(e,i),r(Vp(i));let a=Ng(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...a,toggleSelect:e=>r(th({facetId:n,selection:e})),toggleSingleSelect(e){"idle"===e.state&&r(pp(n)),this.toggleSelect(e)},get state(){return a.state}}}(e,t),n=e.dispatch,i=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(Sc(Qf(i())))},sortBy(e){r.sortBy(e),n(Sc($f({facetId:i(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(Sc(kg(i(),e)))},get state(){return{...r.state}}}}var sh=(e,t)=>{let r=bs(e,t);if(function(e,t){return!!t&&t.facetId in e.numericFacetSet}(e,r))return r},lh=(e,t)=>(sh(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state)),uh=(e,t)=>(sh(e,t)||{values:[]}).values.filter((e=>"selected"===e.state));function ch(e,t){if(!function(e){return e.addReducers({numericFacetSet:Zg,configuration:zc,search:Uc}),!0}(e))throw En;let r=function(e,t){var r;if(!function(e){return e.addReducers({numericFacetSet:Zg,facetOptions:Np,configuration:zc,search:Uc}),!0}(e))throw En;let n=dd(e),{dispatch:i}=e,a=()=>e.state,o=Bp(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return ih(e,s),i(Vp(s)),{...n,clear:()=>{i($p({facetId:o,values:[]})),i(Bd())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=$p({facetId:o,values:[t]});return!r.error&&(i(r),i(Bd()),!0)},enable(){i(Hd(o))},disable(){i(Yd(o))},get state(){let t=Os(a()),r=Hf(e.state,o),n=uh(a(),o),i=n.length?n[0]:void 0;return{facetId:o,isLoading:t,range:i,enabled:r}}}}(e,t),{dispatch:n}=e,i=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(Sc(Qf(i())))},setRange:e=>{let t=r.setRange(e);return t&&n(Sc(_f({facetId:i(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}var dh=(e,t)=>{let r=bs(e,t);if(function(e,t){return!!t&&t.facetId in e.dateFacetSet}(e,r))return r},fh=(e,t)=>(dh(e,t)||{values:[]}).values.filter((e=>"selected"===e.state)),ph=(e,t)=>(dh(e,t)||{values:[]}).values.filter((e=>"idle"!==e.state));function gh(e,t){if(!function(e){return e.addReducers({dateFacetSet:Qg,configuration:zc,search:Uc}),!0}(e))throw En;let r=function(e,t){var r;if(!function(e){return e.addReducers({dateFacetSet:Qg,facetOptions:Np,configuration:zc,search:Uc}),!0}(e))throw En;let n=dd(e),{dispatch:i}=e,a=()=>e.state,o=Bp(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return Jg(e,s),i(qp(s)),{...n,clear:()=>{i(Fp({facetId:o,values:[]})),i(Bd())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Fp({facetId:o,values:[t]});return!r.error&&(i(r),i(Bd()),!0)},enable(){i(Hd(o))},disable(){i(Yd(o))},get state(){let t=Os(a()),r=Hf(e.state,o),n=fh(a(),o),i=n.length?n[0]:void 0;return{facetId:o,isLoading:t,range:i,enabled:r}}}}(e,t),{dispatch:n}=e,i=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(Sc(Qf(i())))},setRange:e=>{let t=r.setRange(e);return t&&n(Sc(_f({facetId:i(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}var hh=Pt([],(e=>{e.addCase(Sc.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e}))})),vh=()=>hl("history/analytics/forward",(e=>e.makeSearchEvent("historyForward"))),mh=()=>hl("history/analytics/backward",(e=>e.makeSearchEvent("historyBackward"))),yh=()=>hl("history/analytics/noresultsback",(e=>e.makeNoResultsBack())),Sh=Object.getOwnPropertyNames,bh=Object.getOwnPropertySymbols,wh=Object.prototype.hasOwnProperty;function Ch(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function Ih(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var i=n.cache,a=i.get(t),o=i.get(r);if(a&&o)return a===r&&o===t;i.set(t,r),i.set(r,t);var s=e(t,r,n);return i.delete(t),i.delete(r),s}}function kh(e){return Sh(e).concat(bh(e))}var Oh=Object.hasOwn||function(e,t){return wh.call(e,t)};function Ah(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var xh="_owner",qh=Object.getOwnPropertyDescriptor,Rh=Object.keys;function Eh(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Fh(e,t){return Ah(e.getTime(),t.getTime())}function Dh(e,t,r){if(e.size!==t.size)return!1;for(var n,i,a={},o=e.entries(),s=0;(n=o.next())&&!n.done;){for(var l=t.entries(),u=!1,c=0;(i=l.next())&&!i.done;){var d=n.value,f=d[0],p=d[1],g=i.value,h=g[0],v=g[1];!u&&!a[c]&&(u=r.equals(f,h,s,c,e,t,r)&&r.equals(p,v,f,h,e,t,r))&&(a[c]=!0),c++}if(!u)return!1;s++}return!0}function jh(e,t,r){var n,i=Rh(e),a=i.length;if(Rh(t).length!==a)return!1;for(;a-- >0;)if((n=i[a])===xh&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Oh(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Th(e,t,r){var n,i,a,o=kh(e),s=o.length;if(kh(t).length!==s)return!1;for(;s-- >0;)if((n=o[s])===xh&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!Oh(t,n)||!r.equals(e[n],t[n],n,n,e,t,r)||(i=qh(e,n),a=qh(t,n),(i||a)&&(!i||!a||i.configurable!==a.configurable||i.enumerable!==a.enumerable||i.writable!==a.writable)))return!1;return!0}function Ph(e,t){return Ah(e.valueOf(),t.valueOf())}function Mh(e,t){return e.source===t.source&&e.flags===t.flags}function Vh(e,t,r){if(e.size!==t.size)return!1;for(var n,i,a={},o=e.values();(n=o.next())&&!n.done;){for(var s=t.values(),l=!1,u=0;(i=s.next())&&!i.done;)!l&&!a[u]&&(l=r.equals(n.value,i.value,n.value,i.value,e,t,r))&&(a[u]=!0),u++;if(!l)return!1}return!0}function Uh(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Lh=Array.isArray,$h="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,Qh=Object.assign,_h=Object.prototype.toString.call.bind(Object.prototype.toString);function Nh(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,i=e.createState,a=e.strict,o=void 0!==a&&a,s=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?Th:Eh,areDatesEqual:Fh,areMapsEqual:n?Ch(Dh,Th):Dh,areObjectsEqual:n?Th:jh,arePrimitiveWrappersEqual:Ph,areRegExpsEqual:Mh,areSetsEqual:n?Ch(Vh,Th):Vh,areTypedArraysEqual:n?Th:Uh};if(r&&(i=Qh({},i,r(i))),t){var a=Ih(i.areArraysEqual),o=Ih(i.areMapsEqual),s=Ih(i.areObjectsEqual),l=Ih(i.areSetsEqual);i=Qh({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}(e),l=function(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,o=e.areRegExpsEqual,s=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,u,c){if(e===u)return!0;if(null==e||null==u||"object"!=typeof e||"object"!=typeof u)return e!=e&&u!=u;var d=e.constructor;if(d!==u.constructor)return!1;if(d===Object)return i(e,u,c);if(Lh(e))return t(e,u,c);if(null!=$h&&$h(e))return l(e,u,c);if(d===Date)return r(e,u,c);if(d===RegExp)return o(e,u,c);if(d===Map)return n(e,u,c);if(d===Set)return s(e,u,c);var f=_h(e);return"[object Date]"===f?r(e,u,c):"[object RegExp]"===f?o(e,u,c):"[object Map]"===f?n(e,u,c):"[object Set]"===f?s(e,u,c):"[object Object]"===f?"function"!=typeof e.then&&"function"!=typeof u.then&&i(e,u,c):"[object Arguments]"===f?i(e,u,c):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&a(e,u,c)}}(s),u=n?n(l):function(e){return function(t,r,n,i,a,o,s){return e(t,r,s)}}(l);return function(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(e,o){var s=n(),l=s.cache,u=void 0===l?t?new WeakMap:void 0:l,c=s.meta;return r(e,o,{cache:u,equals:i,meta:c,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return r(e,t,o)}}({circular:r,comparator:l,createState:i,equals:u,strict:o})}function zh(e,t,r=((e,t)=>e===t)){return e.length===t.length&&-1===e.findIndex(((e,n)=>!r(t[n],e)))}function Bh(e,t){return e.length===t.length&&e.every((e=>-1!==t.findIndex((t=>Hh(e,t)))))}Nh(),Nh({strict:!0}),Nh({circular:!0}),Nh({circular:!0,strict:!0}),Nh({createInternalComparator:function(){return Ah}}),Nh({strict:!0,createInternalComparator:function(){return Ah}}),Nh({circular:!0,createInternalComparator:function(){return Ah}}),Nh({circular:!0,createInternalComparator:function(){return Ah},strict:!0});var Hh=Nh({createCustomConfig:e=>({...e,areArraysEqual:Bh})}),Yh=Pt(Ji(),(e=>{e.addCase(Jl,((e,t)=>Gh(e,t.payload)?void 0:t.payload))})),Gh=(e,t)=>Wh(e.context,t.context)&&Jh(e.dictionaryFieldContext,t.dictionaryFieldContext)&&ov(e.advancedSearchQueries,t.advancedSearchQueries)&&Kh(e.tabSet,t.tabSet)&&Xh(e.staticFilterSet,t.staticFilterSet)&&tv(e.facetSet,t.facetSet)&&tv(e.dateFacetSet,t.dateFacetSet)&&tv(e.numericFacetSet,t.numericFacetSet)&&nv(e.automaticFacetSet,t.automaticFacetSet)&&rv(e.categoryFacetSet,t.categoryFacetSet)&&iv(e.pagination,t.pagination)&&av(e.query,t.query)&&sv(e,t)&&lv(e.pipeline,t.pipeline)&&uv(e.searchHub,t.searchHub)&&cv(e.facetOrder,t.facetOrder)&&dv(e.debug,t.debug),Wh=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Jh=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Kh=(e,t)=>{let r=Zh(e),n=Zh(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},Zh=e=>Object.values(e).find((e=>e.isActive)),Xh=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=ev(e[r]),i=ev(n);if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},ev=e=>e.values.filter((e=>"idle"!==e.state)),tv=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter((e=>"idle"!==e.state)),i=n.request.currentValues.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},rv=(e,t)=>{var r;for(let[n,i]of Object.entries(t)){if(!e[n])return!1;let t=As(null==(r=e[n])?void 0:r.request.currentValues).map((({value:e})=>e)),a=As(null==i?void 0:i.request.currentValues).map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},nv=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter((e=>"idle"!==e.state)),i=n.response.values.filter((e=>"idle"!==e.state));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},iv=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,av=(e,t)=>JSON.stringify(e)===JSON.stringify(t),ov=(e,t)=>JSON.stringify(e)===JSON.stringify(t),sv=(e,t)=>e.sortCriteria===t.sortCriteria,lv=(e,t)=>e===t,uv=(e,t)=>e===t,cv=(e,t)=>zh(e,t),dv=(e,t)=>e===t,fv=(e=>{let{actionTypes:t,reducer:r}=e,n=Bi();return(e=n,i)=>{switch(i.type){case t.undo:return(e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let i=t[t.length-1];return{past:t.slice(0,t.length-1),present:i,future:[r,...n]}})(e);case t.redo:return(e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e})(e);case t.snapshot:return(e=>{let{action:t,state:r,reducer:n}=e,{past:i,present:a}=r,o=n(a,t);return a?a===o?r:{past:[...i,a],present:o,future:[]}:Bi(o)})({state:e,reducer:r,action:i});default:return e}}})({actionTypes:{redo:Wl.type,undo:Gl.type,snapshot:Jl.type},reducer:Yh});function pv(e){if(!function(e){return e.addReducers({history:fv,configuration:zc,facetOrder:hh}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e,n=e=>e.past.length>0&&!rn(e.present);return{...t,get state(){return e.state.history},async back(){!n(this.state)||(await r(Kl()),r(Sc(mh())))},async forward(){!this.state.future.length||!this.state.present||(await r(Zl()),r(Sc(vh())))},async backOnNoResults(){!n(this.state)||(await r(Kl()),r(Sc(yh())))}}}var gv=new nn({min:1,default:Yi,required:!1}),hv={desiredCount:new nn({min:1,max:10,default:Hi,required:!1}),numberOfValues:gv},vv=ht("automaticFacet/setOptions",(e=>wn(e,hv))),mv=ht("automaticFacet/deselectAll",(e=>wn(e,zd))),yv=vn,Sv=ht("automaticFacet/toggleSelectValue",(e=>wn(e,{field:yv,selection:new dn({values:lp})}))),bv=Pt({firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0},(e=>{e.addCase(hu,((e,t)=>{let r=Cv(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=Iv(r,n)})).addCase(vu,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(_c,(e=>{e.firstResult=0})).addCase(mu,((e,t)=>{let r=t.payload;e.firstResult=Iv(r,e.numberOfResults)})).addCase(yu,((e,t)=>{let r=t.payload;e.firstResult=Iv(r,e.numberOfResults)})).addCase(bu,(e=>{let t=Cv(e),r=Math.max(t-1,dc);e.firstResult=Iv(r,e.numberOfResults)})).addCase(Su,(e=>{let t=Cv(e),r=function(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Ov(t,r)}(e),n=Math.min(t+1,r);e.firstResult=Iv(n,e.numberOfResults)})).addCase(Xl.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(zl,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults})).addCase(Sc.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Zp.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(pp,(e=>{wv(e)})).addCase(dp,(e=>{wv(e)})).addCase(cf,(e=>{wv(e)})).addCase(uf,(e=>{wv(e)})).addCase(Jd,(e=>{wv(e)})).addCase(Rp,(e=>{wv(e)})).addCase(Up,(e=>{wv(e)})).addCase(iu,(e=>{wv(e)})).addCase(Fp,(e=>{wv(e)})).addCase($p,(e=>{wv(e)})).addCase(Tf,(e=>{wv(e)})).addCase(Sv,(e=>{wv(e)}))}));function wv(e){e.firstResult=0}function Cv(e){let{firstResult:t,numberOfResults:r}=e;return kv(t,r)}function Iv(e,t){return(e-1)*t}function kv(e,t){return Math.round(e/t)+1}function Ov(e,t){let r=Math.min(e,fc);return Math.ceil(r/t)}function Av(e){return e.pagination.numberOfResults}var xv=e=>{let t=function(e){return e.pagination.firstResult}(e);return kv(t,Av(e))},qv=e=>{let t=function(e){return e.pagination.totalCountFiltered}(e);return Ov(t,Av(e))},Rv=(e,t)=>{let r=xv(e),n=qv(e),i=function(e,t){let r=t%2==0,n=Math.floor(t/2);return{start:e-n,end:e+(r?n-1:n)}}(r,t);return i=function(e){let t=Math.max(dc-e.start,0);return{start:e.start+t,end:e.end+t}}(i),i=function(e,t){let r=Math.max(e.end-t,0);return{start:Math.max(e.start-r,dc),end:e.end-r}}(i,n),function(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}(i)},Ev=()=>hl("analytics/pager/resize",((e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||10})})),Fv=()=>hl("analytics/pager/number",((e,t)=>e.makePagerNumber({pagerNumber:xv(t)}))),Dv=()=>hl("analytics/pager/next",((e,t)=>e.makePagerNext({pagerNumber:xv(t)}))),jv=()=>hl("analytics/pager/previous",((e,t)=>e.makePagerPrevious({pagerNumber:xv(t)}))),Tv=new Xr({numberOfPages:new nn({default:5,min:0})}),Pv=new Xr({page:new nn({min:1})});function Mv(e,t={}){let{dispatch:r}=e,n=function(e,t={}){if(!function(e){return e.addReducers({configuration:zc,pagination:bv}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i=In(e,Tv,t.options,"buildPager"),a=Cn(e,Pv,t.initialState,"buildPager").page;a&&n(mu(a));let o=()=>{let{numberOfPages:t}=i;return Rv(e.state,t)};return{...r,get state(){let t=xv(e.state),r=qv(e.state),n=t>dc&&r>0,i=t<r;return{currentPage:t,currentPages:o(),maxPage:r,hasPreviousPage:n,hasNextPage:i}},selectPage(e){n(yu(e))},nextPage(){n(Su())},previousPage(){n(bu())},isCurrentPage(e){return e===this.state.currentPage}}}(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(bc(Fv()))},nextPage(){n.nextPage(),r(bc(Dv()))},previousPage(){n.previousPage(),r(bc(jv()))}}}function Vv(e){return function(e){if(!function(e){return e.addReducers({search:Uc}),!0}(e))throw En;let t=dd(e),r=()=>e.state;return{...t,get state(){return{hasError:null!==r().search.error,error:r().search.error}}}}(e)}function Uv(e){if(!function(e){return e.addReducers({search:Uc}),!0}(e))throw En;return{...dd(e),get state(){let t=e.state;return{hasError:null!==t.search.error,isLoading:t.search.isLoading,hasResults:!!t.search.results.length,firstSearchExecuted:Tc(t)}}}}function Lv(e){return function(e){if(!function(e){return e.addReducers({search:Uc,pagination:bv}),!0}(e))throw En;let t=dd(e),r=Uv(e),n=()=>e.state,i=()=>{let e=n().search.duration/1e3;return Math.round(100*(e+Number.EPSILON))/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:i(),firstResult:n().pagination.firstResult+1,hasDuration:0!==n().search.duration,hasQuery:""!==n().search.queryExecuted,lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}(e)}var $v=new Xr({fieldsToInclude:new pn({required:!1,each:new un({required:!0,emptyAllowed:!1})})});function Qv(e,t){if(!function(e){return e.addReducers({search:Uc,configuration:zc,fields:xd}),!0}(e))throw En;let r=dd(e),n=Uv(e),{dispatch:i}=e,a=In(e,$v,null==t?void 0:t.options,"buildCoreResultList");a.fieldsToInclude&&i(Sd(a.fieldsToInclude));let o=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,s=0,l=0,u=!1;return{...r,get state(){let t=e.state;return{...n.state,results:t.search.results,moreResultsAvailable:o(),searchResponseId:t.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading)if(o()){if(Date.now()-s<200){if(l++,l>=5)return s=Date.now(),!u&&e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),void(u=!0)}else l=0;u=!1,(null==t?void 0:t.fetchMoreResultsActionCreator)&&i(null==t?void 0:t.fetchMoreResultsActionCreator()).then((()=>s=Date.now()))}else e.logger.info("No more results are available for the result list to fetch.")}}}function _v(e,t){return Qv(e,{...t,fetchMoreResultsActionCreator:wc})}var Nv={results:new pn({required:!0,each:new dn({values:bl})}),maxLength:new nn({required:!0,min:1,default:10})},zv=ht("recentResults/registerRecentResults",(e=>wn(e,Nv))),Bv=ht("recentResults/pushRecentResult",(e=>(kl(e),{payload:e}))),Hv=ht("recentResults/clearRecentResults"),Yv=e=>hl("analytics/result/open",((t,r)=>(kl(e),t.makeDocumentOpen(ml(e,r),yl(e)))));function Gv(e,t,r){if(!function(e){return e.addReducers({configuration:zc}),!0}(e))throw En;let n,i={selectionDelay:1e3,debounceWait:1e3,...t.options};return{select:Bc(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function Wv(e,t){let r=!1;return Gv(e,t,(()=>{r||(r=!0,e.dispatch(Yv(t.options.result))),e.dispatch(Bv(t.options.result))}))}function Jv(e,t){let r=!1;return Gv(e,t,(()=>{r||(r=!0,e.dispatch(lu(t.options.result))),e.dispatch(Bv(t.options.result))}))}var Kv=new Xr({numberOfResults:new nn({min:0})});function Zv(e,t={}){if(!function(e){return e.addReducers({pagination:bv,configuration:zc}),!0}(e))throw En;let r=function(e,t={}){if(!function(e){return e.addReducers({pagination:bv,configuration:zc}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i=Cn(e,Kv,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==i&&n(hu(i)),{...r,get state(){return{numberOfResults:e.state.pagination.numberOfResults}},set(e){n(vu(e))},isSetTo(e){return e===this.state.numberOfResults}}}(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(bc(Ev()))}}}var Xv={id:vn},em=ht("querySuggest/register",(e=>wn(e,{...Xv,count:new nn({min:0})}))),tm=ht("querySuggest/unregister",(e=>wn(e,Xv))),rm=ht("querySuggest/selectSuggestion",(e=>wn(e,{...Xv,expression:yn}))),nm=ht("querySuggest/clear",(e=>wn(e,Xv))),im=Wt("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i}})=>{i(e,Xv);let a=e.id,o=await am(a,t()),s=await n.querySuggest(o);return yi(s)?r(s.error):{id:a,q:o.q,...s.success}})),am=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?ps.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await ds(t.configuration.analytics),...t.configuration.analytics.enabled&&await Cu(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),om=()=>hl("analytics/searchbox/submit",(e=>e.makeSearchboxSubmit())),sm={id:vn,query:yn},lm=ht("querySet/register",(e=>wn(e,sm))),um=ht("querySet/update",(e=>wn(e,sm))),cm=Pt({},(e=>{e.addCase(lm,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(um,((e,t)=>{let{id:r,query:n}=t.payload;fm(e,r,n)})).addCase(rm,((e,t)=>{let{id:r,expression:n}=t.payload;fm(e,r,n)})).addCase(Sc.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;dm(e,r)})).addCase(zl,((e,t)=>{rn(t.payload.q)||dm(e,t.payload.q)})).addCase(Xl.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))fm(e,r,n)}))}));function dm(e,t){Object.keys(e).forEach((r=>e[r]=t))}var fm=(e,t,r)=>{t in e&&(e[t]=r)},pm=e=>hl("analytics/querySuggest",((t,r)=>{let n=gm(r,e);return t.makeOmniboxAnalytics(n)}));function gm(e,t){let{id:r,suggestion:n}=t,i=e.querySuggest&&e.querySuggest[r];if(!i)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=i.completions.map((e=>e.expression)),o=i.partialQueries.length-1,s=i.partialQueries[o]||"",l=i.responseId;return{suggestionRanking:a.indexOf(n),partialQuery:s,partialQueries:i.partialQueries,suggestions:a,querySuggestResponseId:l}}var hm=Pt({},(e=>e.addCase(em,((e,t)=>{let r=t.payload.id;r in e||(e[r]=function(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}(t.payload))})).addCase(tm,((e,t)=>{delete e[t.payload.id]})).addCase(im.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)})).addCase(im.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(im.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)})).addCase(nm,((e,t)=>{let r=e[t.payload.id];!r||(r.responseId="",r.completions=[],r.partialQueries=[])})))),vm=Pt(xi(),(e=>e.addCase(wu,((e,t)=>({...e,...t.payload}))).addCase(qu,((e,t)=>{e.q=t.payload})).addCase(rm,((e,t)=>{e.q=t.payload.expression})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e})).addCase(zl,((e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax})))),mm={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},ym={open:new un,close:new un},Sm={id:vn,numberOfSuggestions:new nn({min:0}),enableQuerySyntax:new on,highlightOptions:new dn({values:{notMatchDelimiters:new dn({values:ym}),exactMatchDelimiters:new dn({values:ym}),correctionDelimiters:new dn({values:ym})}}),clearFilters:new on},bm=new Xr(Sm);function wm(e,t={}){let r=function(e,t){var r,n;if(!function(e){return e.addReducers({query:vm,querySuggest:hm,configuration:zc,querySet:cm,search:Uc}),!0}(e))throw En;let i=dd(e),{dispatch:a}=e,o=(null==(r=t.options)?void 0:r.id)||Tn("search_box"),s={id:o,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...mm,...t.options};In(e,bm,s,"buildSearchBox"),a(lm({id:o,query:e.state.query.q})),s.numberOfSuggestions&&a(em({id:o,count:s.numberOfSuggestions}));let l=()=>e.state.querySet[s.id],u=async e=>{let{enableQuerySyntax:r,clearFilters:n}=s;a(yc({q:l(),enableQuerySyntax:r,clearFilters:n})),await a(t.executeSearchActionCreator(e))};return{...i,updateText(e){a(um({id:o,query:e})),this.showSuggestions()},clear(){a(um({id:o,query:""})),a(nm({id:o}))},showSuggestions(){s.numberOfSuggestions&&a(t.fetchQuerySuggestionsActionCreator({id:o}))},selectSuggestion(e){a(rm({id:o,expression:e})),u(pm({id:o,suggestion:e})).then((()=>{a(nm({id:o}))}))},submit(e=om()){u(e),a(nm({id:o}))},get state(){let t=e.state,r=t.querySuggest[s.id],n=function(e,t){return e?e.completions.map((e=>({highlightedValue:ia(e.highlighted,t),rawValue:e.expression}))):[]}(r,s.highlightOptions),i=!!r&&r.isLoading;return{value:l(),suggestions:n,isLoading:t.search.isLoading,isLoadingSuggestions:i}}}}(e,{...t,executeSearchActionCreator:Sc,fetchQuerySuggestionsActionCreator:im});return{...r,submit(){r.submit(om())},get state(){return r.state}}}var Cm=Pt({},(e=>{e.addCase(du,((e,t)=>{let{id:r}=t.payload;e[r]||(e[r]={q:"",cache:{}})})),e.addCase(fu,((e,t)=>{let{q:r,id:n}=t.payload;!r||(e[n].q=r)})),e.addCase(pu,((e,t)=>{let{id:r}=t.payload;Object.entries(e[r].cache).forEach((([t,n])=>{Wi(n)&&delete e[r].cache[t]}))})),e.addCase(Ic.pending,((e,t)=>{for(let t in e)for(let r in e[t].cache)e[t].cache[r].isActive=!1;if(!km(e,t.meta))return void Im(e,t.meta);let r=km(e,t.meta);r.isLoading=!0,r.isActive=!0,r.error=null})),e.addCase(Ic.fulfilled,((e,t)=>{let{results:r,searchUid:n,totalCountFiltered:i,duration:a}=t.payload,{cacheTimeout:o}=t.meta.arg,s=km(e,t.meta);s.isActive=!0,s.searchUid=n,s.isLoading=!1,s.error=null,s.results=r,s.expiresAt=o?o+Date.now():0,s.totalCountFiltered=i,s.duration=a})),e.addCase(Ic.rejected,((e,t)=>{let r=km(e,t.meta);r.error=t.error||null,r.isLoading=!1,r.isActive=!1}))})),Im=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},km=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},Om={searchBoxId:mn,maxResultsPerQuery:new nn({required:!0,min:1}),cacheTimeout:new nn},Am=new Xr(Om);function xm(e,t){if(!function(e){return e.addReducers({instantResults:Cm}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i={searchBoxId:t.options.searchBoxId||Tn("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};In(e,Am,i,"buildInstantResults");let a=i.searchBoxId;n(du({id:a}));let o=()=>e.state.instantResults[a],s=e=>o().cache[e],l=()=>o().q,u=()=>{let e=s(l());return e?e.isLoading?[]:e.results:[]};return{...r,updateQuery(e){if(!e)return;let t=s(e);(!t||!t.isLoading&&(t.error||Wi(t)))&&n(Ic({id:a,q:e,maxResultsPerQuery:i.maxResultsPerQuery,cacheTimeout:i.cacheTimeout})),n(fu({id:a,q:e}))},clearExpired(){n(pu({id:a}))},get state(){let e=l(),t=s(e);return{q:e,isLoading:(null==t?void 0:t.isLoading)||!1,error:(null==t?void 0:t.error)||null,results:u()}}}}var qm=()=>hl("analytics/sort/results",((e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Vi()}))),Rm={by:new hn({enum:Ri,required:!0})},Em=ht("sortCriteria/register",(e=>Dm(e))),Fm=ht("sortCriteria/update",(e=>Dm(e))),Dm=e=>gn(e)?(e.forEach((e=>wn(e,Rm))),{payload:e}):wn(e,Rm),jm=Pt(Vi(),(e=>{e.addCase(Em,((e,t)=>Ei(t.payload))).addCase(Fm,((e,t)=>Ei(t.payload))).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e})).addCase(zl,((e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e}))}));function Tm(e,t){var r;if(!function(e){return e.addReducers({configuration:zc,sortCriteria:jm}),!0}(e))throw En;let n=dd(e),{dispatch:i}=e;!function(e,t){if(!t)return;let r=new Xr({criterion:new pn({each:Mi})}),n=function(e){return e.criterion?gn(e.criterion)?e.criterion:[e.criterion]:[]}(t),i={...t,criterion:n};Cn(e,r,i,"buildSort")}(e,t.initialState);let a=null==(r=t.initialState)?void 0:r.criterion;return a&&i(Em(a)),{...n,sortBy(e){i(Fm(e)),i(yu(1))},isSortedBy(e){return this.state.sortCriteria===Ei(e)},get state(){return{sortCriteria:e.state.sortCriteria}}}}function Pm(e,t={}){let{dispatch:r}=e,n=Tm(e,t);return{...n,get state(){return n.state},sortBy(e){n.sortBy(e),r(Sc(qm()))}}}var Mm=vn,Vm=new dn({options:{required:!0},values:{caption:yn,expression:yn,state:new un({constrainTo:["idle","selected","excluded"]})}}),Um=new pn({required:!0,each:Vm}),Lm=ht("staticFilter/register",(e=>wn(e,{id:Mm,values:Um}))),$m=ht("staticFilter/toggleSelect",(e=>wn(e,{id:Mm,value:Vm}))),Qm=ht("staticFilter/toggleExclude",(e=>wn(e,{id:Mm,value:Vm}))),_m=ht("staticFilter/deselectAllFilterValues",(e=>wn(e,Mm))),Nm=e=>hl("analytics/staticFilter/select",(t=>t.makeStaticFilterSelect(e))),zm=e=>hl("analytics/staticFilter/deselect",(t=>t.makeStaticFilterDeselect(e))),Bm=e=>hl("analytics/staticFilter/clearAll",(t=>t.makeStaticFilterClearAll(e))),Hm=Pt({},(e=>e.addCase(Lm,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase($m,((e,t)=>{let{id:r,value:n}=t.payload,i=e[r];if(!i)return;let a=i.values.find((e=>e.caption===n.caption));if(!a)return;let o="selected"===a.state;a.state=o?"idle":"selected"})).addCase(Qm,((e,t)=>{let{id:r,value:n}=t.payload,i=e[r];if(!i)return;let a=i.values.find((e=>e.caption===n.caption));if(!a)return;let o="excluded"===a.state;a.state=o?"idle":"excluded"})).addCase(_m,((e,t)=>{let r=e[t.payload];!r||r.values.forEach((e=>e.state="idle"))})).addCase(iu,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(zl,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))}))));function Ym(e){return{state:"idle",...e}}var Gm=new Xr({id:Mm,values:Um});function Wm(e,t){if(!function(e){return e.addReducers({staticFilterSet:Hm}),!0}(e))throw En;In(e,Gm,t.options,"buildStaticFilter");let r=dd(e),{dispatch:n}=e,{id:i}=t.options;return n(Lm(t.options)),{...r,toggleSelect(e){let t=Jm(i,e);n($m({id:i,value:e})),n(Sc(t))},toggleSingleSelect(e){let t=Jm(i,e);"idle"===e.state&&n(_m(i)),n($m({id:i,value:e})),n(Sc(t))},toggleExclude(e){let t=Jm(i,e);n(Qm({id:i,value:e})),n(Sc(t))},toggleSingleExclude(e){let t=Jm(i,e);"idle"===e.state&&n(_m(i)),n(Qm({id:i,value:e})),n(Sc(t))},deselectAll(){let e=Bm({staticFilterId:i});n(_m(i)),n(Sc(e))},isValueSelected:e=>"selected"===e.state,isValueExcluded:e=>"excluded"===e.state,get state(){var t;let r=(null==(t=e.state.staticFilterSet[i])?void 0:t.values)||[],n=r.some((e=>"idle"!==e.state));return{id:i,values:r,hasActiveValues:n}}}}function Jm(e,t){let{caption:r,expression:n,state:i}=t;return("idle"===i?Nm:zm)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}var Km=Pt({},(e=>{e.addCase(Qc,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(_c,((e,t)=>{Zm(e,t.payload)})).addCase(zl,((e,t)=>{Zm(e,t.payload.tab||"")})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.tabSet)?n:e}))}));function Zm(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var Xm=new Xr({expression:yn,id:vn}),ey=new Xr({isActive:new on});function ty(e,t){let{dispatch:r}=e,n=function(e,t){if(function(e){let t=Zn().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}(t.options.id),!function(e){return e.addReducers({configuration:zc,tabSet:Km}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e;In(e,Xm,t.options,"buildTab");let i=Cn(e,ey,t.initialState,"buildTab"),{id:a,expression:o}=t.options;return n(Qc({id:a,expression:o})),i.isActive&&n(_c(a)),{...r,select(){n(_c(a))},get state(){var t;return{isActive:null==(t=e.state.tabSet[a])?void 0:t.isActive}}}}(e,t);return{...n,get state(){return n.state},select(){n.select(),r(Sc(Fl()))}}}function ry(e){return function(e){if(!function(e){return e.addReducers({search:Uc,facetOptions:Np}),!0}(e))throw En;return{...dd(e),sort(e){return uc(e,this.state.facetIds)},get state(){return{facetIds:e.state.search.response.facets.map((e=>e.facetId))}}}}(e)}var ny={categoryFacetId:zd,categoryFacetPath:new pn({required:!0,each:vn})},iy=e=>hl("analytics/categoryFacet/breadcrumb",((t,r)=>(wn(e,ny),t.makeBreadcrumbFacet(((e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t],i=null==n?void 0:n.request.field;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:i,categoryFacetTitle:`${i}_${t}`}})(r,e))))),ay=()=>hl("analytics/facet/deselectAllBreadcrumbs",(e=>e.makeBreadcrumbResetAll())),oy=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field;return{facetId:t,facetField:n,facetTitle:`${n}_${t}`,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},sy=e=>hl("analytics/dateFacet/breadcrumb",((t,r)=>{wn(e,Ip(e.selection));let n=oy(r,e);return t.makeBreadcrumbFacet(n)})),ly=e=>hl("analytics/numericFacet/breadcrumb",((t,r)=>{wn(e,Ip(e.selection));let n=oy(r,e);return t.makeBreadcrumbFacet(n)})),uy=e=>Object.keys(e.facetSet).map((t=>{let r=e.facetValuesSelector(e.engine.state,t).map((r=>({value:r,deselect:()=>{"selected"===r.state?e.executeToggleSelect({facetId:t,selection:r}):"excluded"===r.state&&e.executeToggleExclude({facetId:t,selection:r})}})));return{facetId:t,field:e.facetSet[t].request.field,values:r}})).filter((e=>e.values.length));function cy(e){if(!function(e){return e.addReducers({configuration:zc,search:Uc,facetSet:tg,numericFacetSet:Zg,dateFacetSet:Qg,categoryFacetSet:gf}),!0}(e))throw En;let t=function(e){let t=dd(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(iu())},deselectBreadcrumb(e){e.deselect()}}}(e),{dispatch:r}=e,n=()=>e.state,i=()=>{let t={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:e,selection:t})=>{let n=Bf({facetId:e,facetValue:t.value});r(dp({facetId:e,selection:t})),r(mp({facetId:e,freezeCurrentValues:!1})),r(Sc(n))},executeToggleExclude:({facetId:e,selection:t})=>{let n=Bf({facetId:e,facetValue:t.value});r(fp({facetId:e,selection:t})),r(mp({facetId:e,freezeCurrentValues:!1})),r(Sc(n))},facetValuesSelector:ks};return uy(t)},a=()=>{let t={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:e=>{r(Up(e)),r(Sc(ly(e)))},executeToggleExclude:e=>{r(Lp(e)),r(Sc(ly(e)))},facetValuesSelector:lh};return uy(t)},o=()=>{let t={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:e=>{r(Rp(e)),r(Sc(sy(e)))},executeToggleExclude:e=>{r(Ep(e)),r(Sc(sy(e)))},facetValuesSelector:ph};return uy(t)},s=()=>Object.keys(n().categoryFacetSet).map(l).filter((e=>e.path.length)),l=e=>{let t=Rs(n(),e);return{facetId:e,field:n().categoryFacetSet[e].request.field,path:t,deselect:()=>{r(cf(e)),r(Sc(iy({categoryFacetPath:t.map((e=>e.value)),categoryFacetId:e})))}}},u=()=>{var e;let t=null!=(e=n().staticFilterSet)?e:{};return Object.values(t).map(c)},c=e=>{let{id:t,values:r}=e,n=r.filter((e=>"idle"!==e.state)).map((e=>d(t,e)));return{id:t,values:n}},d=(e,t)=>({value:t,deselect:()=>{let{caption:n,expression:i}=t,a=zm({staticFilterId:e,staticFilterValue:{caption:n,expression:i}});"selected"===t.state?r($m({id:e,value:t})):"excluded"===t.state&&r(Qm({id:e,value:t})),r(Sc(a))}}),f=()=>{var e,t;let r=null!=(t=null==(e=n().automaticFacetSet)?void 0:e.set)?t:{};return Object.values(r).map((e=>p(e.response)))},p=e=>{let{field:t,label:r}=e,n=e.values.filter((e=>"selected"===e.state)).map((e=>g(t,e)));return{facetId:t,field:t,label:r,values:n}},g=(e,t)=>({value:t,deselect:()=>{let n=Bf({facetId:e,facetValue:t.value});r(Sv({field:e,selection:t})),r(Sc(n))}});return{...t,get state(){return{facetBreadcrumbs:i(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:o(),staticFilterBreadcrumbs:u(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:!![...i(),...a(),...o(),...s(),...u(),...f()].length}},deselectAll:()=>{t.deselectAll(),r(Sc(ay()))}}}function dy(e){return"redirect"===e.type}var fy=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(dy);return e.length?e[0].content:null}},py=ht("standaloneSearchBox/register",(e=>wn(e,{id:vn,redirectionUrl:vn}))),gy=ht("standaloneSearchBox/reset",(e=>wn(e,{id:vn}))),hy=ht("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>wn(e,{id:vn}))),vy=ht("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),my=Wt("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:i,validatePayload:a}})=>{a(e,{id:new un({emptyAllowed:!1})});let o=await Sy(r()),s=await i.plan(o);if(yi(s))return n(s.error);let{redirectionUrl:l}=new fy(s.success);return l&&t(yy(l)),l||""})),yy=e=>hl("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),Sy=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await ds(e.configuration.analytics)},...e.configuration.analytics.enabled&&await Cu(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}),by=Pt({},(e=>e.addCase(py,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=wy(n))})).addCase(gy,((e,t)=>{let{id:r}=t.payload,n=e[r];n&&(e[r]=wy(n.defaultRedirectionUrl))})).addCase(my.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!0)})).addCase(my.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];!n||(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(my.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!1)})).addCase(hy,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="searchFromLink")})).addCase(vy,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));function wy(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var Cy=new Xr({...Sm,redirectionUrl:new un({required:!0,emptyAllowed:!1})});function Iy(e,t){if(!function(e){return e.addReducers({standaloneSearchBoxSet:by,configuration:zc,query:vm,querySuggest:hm}),!0}(e))throw En;let{dispatch:r}=e,n=()=>e.state,i=t.options.id||Tn("standalone_search_box"),a={id:i,highlightOptions:{...t.options.highlightOptions},...mm,...t.options};In(e,Cy,a,"buildStandaloneSearchBox");let o=wm(e,{options:a});return r(py({id:i,redirectionUrl:a.redirectionUrl})),{...o,updateText(e){o.updateText(e),r(hy({id:i}))},selectSuggestion(e){let t=gm(n(),{id:i,suggestion:e});r(rm({id:i,expression:e})),r(vy({id:i,metadata:t})),this.submit()},afterRedirection(){r(gy({id:i}))},submit(){r(wu({q:this.state.value,enableQuerySyntax:a.enableQuerySyntax})),r(my({id:i}))},get state(){let e=n().standaloneSearchBoxSet[i];return{...o.state,isLoading:e.isLoading,redirectTo:e.redirectTo,analytics:e.analytics}}}}function ky(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Oy(e){let t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function Ay(e={},t={},r=!1){let n=Object.keys(e),i=Object.keys(t),a=n.filter((e=>!i.includes(e)));if(a.length){let t=a[0];return e[t].length>1?Qf(t):zf({facetId:t,facetValue:e[t][0]})}let o=i.filter((e=>!n.includes(e)));if(o.length){let e=o[0];return r?Nf({facetId:e,facetValue:t[e][0]}):_f({facetId:e,facetValue:t[e][0]})}let s=i.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!s)return Fl();let l=e[s],u=t[s],c=u.filter((e=>!l.includes(e)));if(c.length)return r?Nf({facetId:s,facetValue:c[0]}):_f({facetId:s,facetValue:c[0]});let d=l.filter((e=>!u.includes(e)));return d.length?zf({facetId:s,facetValue:d[0]}):Fl()}function xy(e={},t={}){return Ay(Oy(e),Oy(t))}function qy(e){var t,r,n,i,a,o;return{q:xi().q,enableQuerySyntax:xi().enableQuerySyntax,aq:null!=(r=null==(t=e.advancedSearchQueries)?void 0:t.defaultFilters.aq)?r:Ui().defaultFilters.aq,cq:null!=(i=null==(n=e.advancedSearchQueries)?void 0:n.defaultFilters.cq)?i:Ui().defaultFilters.cq,firstResult:0,numberOfResults:null!=(o=null==(a=e.pagination)?void 0:a.defaultNumberOfResults)?o:10,sortCriteria:Vi(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Xn(),sf:{},tab:"",af:{}}}var Ry=new Xr({parameters:new dn({options:{required:!0},values:Nl})});function Ey(e,t){return{...qy(e.state),...t}}function Fy(e){let t=e.state;return{...Dy(t),...jy(t),...Ty(t),...Py(t,My,"f"),...Py(t,Vy,"fExcluded"),...Uy(t),...Ly(t),...$y(t),..._y(t)}}function Dy(e){if(void 0===e.query)return{};let t=e.query.q;return t!==xi().q?{q:t}:{}}function jy(e){var t;let r=Object.values(null!=(t=e.tabSet)?t:{}).find((e=>e.isActive));return r?{tab:r.id}:{}}function Ty(e){if(void 0===e.sortCriteria)return{};let t=e.sortCriteria;return t!==Vi()?{sortCriteria:t}:{}}function Py(e,t,r){if(void 0===e.facetSet)return{};let n=Object.entries(e.facetSet).filter((([t])=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i})).map((([e,{request:r}])=>{let n=t(r.currentValues);return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{[r]:n}:{}}function My(e){return e.filter((e=>"selected"===e.state)).map((e=>e.value))}function Vy(e){return e.filter((e=>"excluded"===e.state)).map((e=>e.value))}function Uy(e){if(void 0===e.categoryFacetSet)return{};let t=Object.entries(e.categoryFacetSet).filter((([t])=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i})).map((([e,t])=>{let r=As(t.request.currentValues).map((e=>e.value));return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{cf:t}:{}}function Ly(e){if(void 0===e.numericFacetSet)return{};let t=Object.entries(e.numericFacetSet).filter((([t])=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i})).map((([e,{request:t}])=>{let r=Qy(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{nf:t}:{}}function $y(e){if(void 0===e.dateFacetSet)return{};let t=Object.entries(e.dateFacetSet).filter((([t])=>{var r,n,i;return null==(i=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||i})).map((([e,{request:t}])=>{let r=Qy(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{df:t}:{}}function Qy(e){return e.filter((e=>"selected"===e.state))}function _y(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;if(void 0===r)return{};let n=Object.entries(r).map((([e,{response:t}])=>{let r=My(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(n).length?{af:n}:{}}function Ny(e,t){let{dispatch:r}=e,n=function(e,t){let{dispatch:r}=e,n=dd(e);return Cn(e,Ry,t.initialState,"buildSearchParameterManager"),r(zl(t.initialState.parameters)),{...n,synchronize(t){let n=Ey(e,t);r(zl(n))},get state(){return{parameters:Fy(e)}}}}(e,t);return{...n,synchronize(t){let i=zy(e),a=Ey(e,i),o=Ey(e,t);Hh(a,o)||!function(e,t){return function(e,t){let r=e.state.tabSet,n=t.tab;if(!r||!Object.entries(r).length||!n)return!0;let i=n in r;return i||e.logger.warn(`The tab search parameter "${n}" is invalid. Ignoring change.`),i}(e,t)}(e,o)||(n.synchronize(t),r(Sc(function(e,t){return e.q!==t.q?om():e.sortCriteria!==t.sortCriteria?qm():e.firstResult!==t.firstResult?Fv():e.numberOfResults!==t.numberOfResults?Ev():ky(e.f,t.f)?Ay(e.f,t.f):ky(e.fExcluded,t.fExcluded)?Ay(e.fExcluded,t.fExcluded,!0):ky(e.cf,t.cf)?Ay(e.cf,t.cf):ky(e.af,t.af)?Ay(e.af,t.af):ky(e.nf,t.nf)?xy(e.nf,t.nf):ky(e.df,t.df)?xy(e.df,t.df):Fl()}(a,o))))},get state(){return{parameters:zy(e)}}}}function zy(e){let t=e.state;return{...Fy(e),...By(t),...Hy(t),...Yy(t),...Gy(t),...Wy(t),...Ky(t),...Jy(t)}}function By(e){if(void 0===e.query)return{};let t=e.query.enableQuerySyntax;return void 0!==t&&t!==xi().enableQuerySyntax?{enableQuerySyntax:t}:{}}function Hy(e){if(void 0===e.advancedSearchQueries)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function Yy(e){if(void 0===e.advancedSearchQueries)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function Gy(e){if(void 0===e.pagination)return{};let t=e.pagination.firstResult;return 0!==t?{firstResult:t}:{}}function Wy(e){if(void 0===e.pagination)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function Jy(e){if(void 0===e.staticFilterSet)return{};let t=Object.entries(e.staticFilterSet).map((([e,t])=>{let r=function(e){return e.filter((e=>"selected"===e.state)).map((e=>e.caption))}(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{sf:t}:{}}function Ky(e){if(void 0===e.debug)return{};let t=e.debug;return t!==Xn()?{debug:t}:{}}var Zy="&",Xy="=",eS="..",tS="...";function rS(){return{serialize:nS,deserialize:sS}}function nS(e){return Object.entries(e).map(iS).filter((e=>e)).join(Zy)}function iS(e){let[t,r]=e;return dS(t)?function(e){return["f","af","cf","sf","fExcluded"].includes(e)}(t)?function(e){return!!aS(e)&&oS(e,(e=>"string"==typeof e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>`${e}-${t}${Xy}${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(Zy)}(t,r):"":"nf"===t||"df"===t?function(e){return!!aS(e)&&oS(e,(e=>aS(e)&&"start"in e&&"end"in e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t,endInclusive:r})=>`${e}${r?tS:eS}${t}`)).join(",");return`${e}-${t}${Xy}${n}`})).join(Zy)}(t,r):"":`${t}${Xy}${encodeURIComponent(r)}`:""}function aS(e){return!(!e||"object"!=typeof e)}function oS(e,t){return 0===Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length}function sS(e){return e.split(Zy).map((e=>function(e){let[t,...r]=e.split(Xy);return[t,r.join(Xy)]}(e))).map(lS).filter(cS).map(fS).reduce(((e,t)=>{let[r,n]=t;if(gS(r)){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function lS(e){let[t,r]=e,n=/^(f|fExcluded|cf|nf|df|sf|af)-(.+)$/.exec(t);if(!n)return e;let i=n[1],a=n[2],o=function(e,t){return"nf"===e?function(e){return e.map((e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=hS(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}})).filter((({start:e,end:t})=>Number.isFinite(e)&&Number.isFinite(t))).map((({start:e,end:t,endInclusive:r})=>ah({start:e,end:t,state:"selected",endInclusive:r})))}(t):"df"===e?function(e){return e.map((e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=hS(e);return{start:r,end:n,endInclusive:t}})).filter((({start:e,end:t})=>uS(e)&&uS(t))).map((({start:e,end:t,endInclusive:r})=>yp({start:e,end:t,state:"selected",endInclusive:r})))}(t):t}(i,r.split(",")),s={[a]:o};return[i,JSON.stringify(s)]}function uS(e){try{return function(e){return Yu(Hu(e))===e}(e)?(Gu(e,zu),!0):!!nc(e)&&(Xu(e),!0)}catch(e){return!1}}function cS(e){let t=dS(e[0]),r=2===e.length;return t&&r}function dS(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,fExcluded:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0,af:!0}}function fS(e){let[t,r]=e;return"enableQuerySyntax"===t||"debug"===t?[t,"true"===r]:"firstResult"===t||"numberOfResults"===t?[t,parseInt(r)]:gS(t)?[t,pS(r)]:[t,decodeURIComponent(r)]}function pS(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>cn(e)?decodeURIComponent(e):e))})),r}function gS(e){return["f","fExcluded","cf","nf","df","sf","af"].includes(e)}function hS(e){let t=-1!==e.indexOf(tS),[r,n]=e.split(t?tS:eS);return{isEndInclusive:t,startAsString:r,endAsString:n}}var vS=new Xr({fragment:new un});function mS(e,t){let r;function n(){r=e.state.search.requestId}if(!function(e){return e.addReducers({configuration:zc}),!0}(e))throw En;Cn(e,vS,t.initialState,"buildUrlManager");let i=dd(e),a=t.initialState.fragment;n();let o=Ny(e,{initialState:{parameters:yS(a)}});return{...i,subscribe(t){let i=()=>{let i=this.state.fragment;!function(e,t){if(e===t)return!0;let r=yS(e),n=yS(t);return Hh(r,n)}(a,i)&&r!==e.state.search.requestId&&(a=i,t()),n()};return i(),e.subscribe(i)},get state(){return{fragment:rS().serialize(o.state.parameters)}},synchronize(e){a=e;let t=yS(e);o.synchronize(t)}}}function yS(e){return rS().deserialize(e)}function SS(e){return Uv(e)}async function bS(e,t){var r;let{search:n,accessToken:i,organizationId:a,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:i,organizationId:a,enableNavigation:!1,...o.enabled&&{visitorId:await ds(e.configuration.analytics)},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var wS=Wt("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),a=await bS(i,e),o=await t.apiClient.html(a);return yi(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}})),CS=ht("resultPreview/next"),IS=ht("resultPreview/previous"),kS=ht("resultPreview/prepare",(e=>wn(e,{results:new pn({required:!0})}))),OS=Wt("resultPreview/updateContentURL",(async(e,{getState:t,extra:r})=>{let n=t(),i=((e,t)=>{let r=new di(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),void 0!==e.q&&r.addParam("q",e.q),void 0!==e.enableNavigation&&r.addParam("enableNavigation",`${e.enableNavigation}`),void 0!==e.requestedOutputSize&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),void 0!==e.visitorId&&r.addParam("visitorId",`${e.visitorId}`),r.href})(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(null==i?void 0:i.length)>2048&&r.logger.error("The content URL was truncated as it exceeds the maximum allowed length of 2048 characters."),{contentURL:i}})),AS=e=>hl("analytics/resultPreview/open",((t,r)=>{kl(e);let n=ml(e,r),i=yl(e);return t.makeDocumentQuickview(n,i)})),xS=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:i}={uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]};e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=i},qS=e=>e.filter((e=>e.hasHtmlVersion)).map((e=>e.uniqueId)),RS=Pt({uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]},(e=>{e.addCase(wS.pending,(e=>{e.isLoading=!0})).addCase(wS.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1})).addCase(Sc.fulfilled,((e,t)=>{xS(e),e.resultsWithPreview=qS(t.payload.response.results)})).addCase(wc.fulfilled,((e,t)=>{xS(e),e.resultsWithPreview=e.resultsWithPreview.concat(qS(t.payload.response.results))})).addCase(bc.fulfilled,xS).addCase(kS,((e,t)=>{e.resultsWithPreview=qS(t.payload.results)})).addCase(CS,(e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t})).addCase(IS,(e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t})).addCase(OS.fulfilled,((e,t)=>{e.contentURL=t.payload.contentURL}))}));function ES(e,t){if(!function(e){return e.addReducers({search:Uc}),!0}(e))throw En;let{dispatch:r}=e,n=()=>e.state.search.results,i=function(e,t,r,n,i){if(!function(e){return e.addReducers({configuration:zc,resultPreview:RS}),!0}(e))throw En;let{dispatch:a}=e,o=()=>e.state,s=dd(e),{result:l,maximumPreviewSize:u}=t.options,c=()=>{let{resultsWithPreview:e,position:t}=o().resultPreview;return e[t]},d=e=>{a(OS({uniqueId:e,requestedOutputSize:u,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||a(wS({uniqueId:e,requestedOutputSize:u})),i&&i()};return{...s,fetchResultContent(){d(l.uniqueId)},next(){a(CS()),d(c())},previous(){a(IS()),d(c())},get state(){let e=o(),t=l.hasHtmlVersion,r=e.resultPreview;return{content:l.uniqueId===r.uniqueId?r.content:"",resultHasPreview:t,isLoading:r.isLoading,contentURL:r.contentURL,currentResultUniqueId:c()}}}}(e,t,bS,"/html",(()=>{e.dispatch(AS(t.options.result))}));return r(kS({results:n()})),{...i,get state(){return{...i.state,currentResult:n().findIndex((e=>e.uniqueId===i.state.currentResultUniqueId))+1,totalResults:n().length}}}}var FS={logShowMoreFoldedResults:e=>hl("analytics/folding/showMore",((t,r)=>(kl(e),t.makeShowMoreFoldedResults(ml(e,r),yl(e))))),logShowLessFoldedResults:()=>hl("analytics/folding/showLess",(e=>e.makeShowLessFoldedResults()))};function DS(e,t){return e.raw[t.parent]}function jS(e,t){let r=e.raw[t.child];return Pn(r)?r[0]:r}function TS(e,t,r,n=[]){let i=jS(e,r);return i?-1!==n.indexOf(i)?[]:t.filter((t=>{let n=jS(t,r)===jS(e,r);return DS(t,r)===i&&!n})).map((e=>({result:e,children:TS(e,t,r,[...n,i])}))):[]}function PS(e){return e.parentResult?PS(e.parentResult):e}function MS(e,t,r){var n;let i=cl(e),a=null!=(n=null!=r?r:function(e,t){return e.find((e=>{let r=void 0===DS(e,t),n=function(e,t){return void 0!==(e||t)&&e===t}(DS(e,t),jS(e,t));return r||n}))}(i,t))?n:PS(e);return{result:a,children:TS(a,i,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function VS(e,t,r){let n={};return e.forEach((e=>{let i=function(e,t){return e.raw[t.collection]}(e,t);!i||!jS(e,t)&&!e.parentResult||(n[i]=MS(e,t,r))})),n}function US(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var LS=Pt({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},(e=>e.addCase(Sc.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?VS(t.response.results,e.fields):{}})).addCase(bc.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?VS(t.response.results,e.fields):{}})).addCase(wc.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...VS(t.response.results,e.fields)}:{}})).addCase(kd,((e,{payload:t})=>{var r,n,i,a;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(i=t.childField)?i:e.fields.child},filterFieldRange:null!=(a=t.numberOfFoldedResults)?a:e.filterFieldRange}})).addCase(Od.pending,((e,{meta:t})=>{US(e,t.arg).isLoadingMoreResults=!0})).addCase(Od.rejected,((e,{meta:t})=>{US(e,t.arg).isLoadingMoreResults=!1})).addCase(Od.fulfilled,((e,{payload:{collectionId:t,results:r,rootResult:n}})=>{let i=VS(r,e.fields,n);if(!i||!i[t])throw new Error(`Unable to create collection ${t} from received results: ${JSON.stringify(r)}. Folding most probably in an invalid state... `);e.collections[t]=i[t],e.collections[t].moreResultsAvailable=!1})))),$S=new Xr(Id);function QS(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let e=QS(n.children,t);if(e)return e}}return null}function _S(e,t={}){let r=function(e,t,r){var n;if(!function(e){return e.addReducers({search:Uc,configuration:Nc,folding:LS,query:vm}),!0}(e))throw En;let i=Qv(e,t),{dispatch:a}=e,o=(null==(n=t.options)?void 0:n.folding)?In(e,$S,t.options.folding,"buildFoldedResultList"):{};return a(kd({...o})),{...i,loadCollection:n=>{a(t.loadCollectionActionCreator(n.result.raw[e.state.folding.fields.collection])),a(r.logShowMoreFoldedResults(n.result))},logShowMoreFoldedResults:e=>{a(r.logShowMoreFoldedResults(e))},logShowLessFoldedResults:()=>{a(r.logShowLessFoldedResults())},findResultById(e){return QS(this.state.results,(t=>t.result.uniqueId===e.result.uniqueId))},findResultByCollection(e){return QS(this.state.results,(t=>t.result.raw.foldingcollection===e.result.raw.foldingcollection))},get state(){let t=e.state;return{...i.state,results:i.state.results.map((e=>{let r=e.raw[t.folding.fields.collection];return r&&t.folding.collections[r]?t.folding.collections[r]:{result:e,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}}))}}}}(e,{...t,loadCollectionActionCreator:Od},FS);return{...r,get state(){return r.state}}}var NS=Pt({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}},(e=>e.addCase(Sc.pending,(e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}})).addCase(Sc.fulfilled,((e,t)=>{var r;let n=[],i=[],a=[],o=[];t.payload.response.triggers.forEach((e=>{switch(e.type){case"redirect":n.push(e.content);break;case"query":i.push(e.content);break;case"execute":a.push({functionName:e.content.name,params:e.content.params});break;case"notify":o.push(e.content)}})),e.redirectTo=null!=(r=n[0])?r:"",e.query=e.queryModification.newQuery,e.executions=a,e.notifications=o})).addCase(Vu,((e,t)=>{e.queryModification={...t.payload,queryToIgnore:""}})).addCase(Mu,((e,t)=>{e.queryModification.queryToIgnore=t.payload}))));function zS(e){if(!function(e){return e.addReducers({triggers:NS}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e,n=()=>e.state,i=n().triggers.redirectTo;return{...t,subscribe(t){let n=()=>{let e=i!==this.state.redirectTo;i=this.state.redirectTo,e&&this.state.redirectTo&&(t(),r(Tu()))};return n(),e.subscribe(n)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function BS(e){if(!function(e){return e.addReducers({triggers:NS,query:vm}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e,n=()=>e.state,i=()=>n().triggers.queryModification.newQuery,a=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:i(),originalQuery:a(),wasQueryModified:""!==i()}},undo(){r(Mu(i())),r(wu({q:a()})),r(Sc(Du({undoneQuery:i()})))}}}function HS(e){if(!function(e){return e.addReducers({triggers:NS}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e,n=()=>e.state,i=n().triggers.executions;return{...t,subscribe(t){let n=()=>{let e=!zh(this.state.executions,i,((e,t)=>e.functionName===t.functionName&&zh(e.params,t.params)));i=this.state.executions,e&&this.state.executions.length&&(t(),r(Pu()))};return n(),e.subscribe(n)},get state(){return{executions:n().triggers.executions}}}}function YS(e){if(!function(e){return e.addReducers({triggers:NS}),!0}(e))throw En;let t=dd(e),{dispatch:r}=e,n=()=>e.state,i=n().triggers.notifications;return{...t,subscribe(t){let n=()=>{let e=!zh(i,this.state.notifications);i=this.state.notifications,e&&(t(),r(ju()))};return n(),e.subscribe(n)},get state(){return{notifications:n().triggers.notifications}}}}var GS=()=>new dn({values:{questionAnswerId:vn},options:{required:!0}}),WS=()=>new dn({values:{linkText:yn,linkURL:yn},options:{required:!0}});function JS(e){return wn(e,GS())}function KS(e,t){var r,n;let i=null!=t?t:null==(n=null==(r=e.search)?void 0:r.questionAnswer)?void 0:n.documentId;return i&&e.search&&function(e,t,r){return e.search.results.find((e=>qc(e,t)===r))}(e,i.contentIdKey,i.contentIdValue)}function ZS(e,t){var r,n,i,a,o;let s=null!=(n=null==(r=e.questionAnswering)?void 0:r.relatedQuestions.findIndex((e=>e.questionAnswerId===t)))?n:-1;if(-1===s)return null;let l=null==(o=null==(a=null==(i=e.search)?void 0:i.questionAnswer)?void 0:a.relatedQuestions)?void 0:o[s];return null!=l?l:null}var XS=()=>hl("analytics/smartSnippet/expand",(e=>e.makeExpandSmartSnippet())),eb=()=>hl("analytics/smartSnippet/collapse",(e=>e.makeCollapseSmartSnippet())),tb=()=>hl("analytics/smartSnippet/like",(e=>e.makeLikeSmartSnippet())),rb=()=>hl("analytics/smartSnippet/dislike",(e=>e.makeDislikeSmartSnippet()));function nb(){return hl("analytics/smartSnippet/source/open",((e,t)=>{let r=KS(t);return e.makeOpenSmartSnippetSource(ml(r,t),yl(r))}))}var ib=e=>hl("analytics/smartSnippet/source/open",((t,r)=>{wn(e,WS());let n=KS(r);return t.makeOpenSmartSnippetInlineLink(ml(n,r),{...yl(n),...e})})),ab=()=>hl("analytics/smartSnippet/feedbackModal/open",(e=>e.makeOpenSmartSnippetFeedbackModal())),ob=()=>hl("analytics/smartSnippet/feedbackModal/close",(e=>e.makeCloseSmartSnippetFeedbackModal())),sb=e=>hl("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason(e))),lb=e=>hl("analytics/smartSnippet/sendFeedback",(t=>t.makeSmartSnippetFeedbackReason("other",e))),ub=e=>hl("analytics/smartSnippetSuggestion/expand",((t,r)=>{JS(e);let n=ZS(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),cb=e=>hl("analytics/smartSnippetSuggestion/expand",((t,r)=>{JS(e);let n=ZS(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),db=e=>hl("analytics/smartSnippet/source/open",((t,r)=>{wn(e,GS());let n=ZS(r,e.questionAnswerId);if(!n)return null;let i=KS(r,n.documentId);return i?t.makeOpenSmartSnippetSuggestionSource(ml(i,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null})),fb=(e,t)=>hl("analytics/smartSnippet/source/open",((r,n)=>{wn(e,GS()),wn(t,WS());let i=ZS(n,e.questionAnswerId);if(!i)return null;let a=KS(n,i.documentId);return a?r.makeOpenSmartSnippetSuggestionInlineLink(ml(a,n),{question:i.question,answerSnippet:i.answerSnippet,documentId:i.documentId,linkText:t.linkText,linkURL:t.linkURL}):null})),pb={logExpandSmartSnippet:XS,logCollapseSmartSnippet:eb,logLikeSmartSnippet:tb,logDislikeSmartSnippet:rb,logOpenSmartSnippetSource:nb,logOpenSmartSnippetInlineLink:ib,logOpenSmartSnippetFeedbackModal:ab,logCloseSmartSnippetFeedbackModal:ob,logSmartSnippetFeedback:sb,logSmartSnippetDetailedFeedback:lb,logExpandSmartSnippetSuggestion:ub,logCollapseSmartSnippetSuggestion:cb,logOpenSmartSnippetSuggestionSource:db},gb=ht("smartSnippet/expand"),hb=ht("smartSnippet/collapse"),vb=ht("smartSnippet/like"),mb=ht("smartSnippet/dislike"),yb=ht("smartSnippet/feedbackModal/open"),Sb=ht("smartSnippet/feedbackModal/close"),bb=ht("smartSnippet/related/expand",(e=>JS(e))),wb=ht("smartSnippet/related/collapse",(e=>JS(e))),Cb=(e,t)=>e.findIndex((e=>e.questionAnswerId===t.questionAnswerId));function Ib({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Un({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}var kb=Pt({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]},(e=>e.addCase(gb,(e=>{e.expanded=!0})).addCase(hb,(e=>{e.expanded=!1})).addCase(vb,(e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1})).addCase(mb,(e=>{e.liked=!1,e.disliked=!0})).addCase(yb,(e=>{e.feedbackModalOpen=!0})).addCase(Sb,(e=>{e.feedbackModalOpen=!1})).addCase(Sc.fulfilled,((e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map(((t,r)=>function(e,t){let r=Ib(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}(t,e.relatedQuestions[r]))),n=Ib(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[],relatedQuestions:r,questionAnswerId:n}})).addCase(bb,((e,t)=>{let r=Cb(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(wb,((e,t)=>{let r=Cb(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)}))));function Ob(e,t){if(!function(e){return e.addReducers({search:Uc,questionAnswering:kb}),!0}(e))throw En;let r=new Set,n=null,i={},a=(a,o)=>{let{searchResponseId:s}=e.state.search;(e=>{n!==e&&(n=e,i={},r.clear())})(s);let l=Un({...a,questionAnswerId:o});return l in i||(i[l]=((n,i,a)=>{var o;return Gv(e,{options:{selectionDelay:null==(o=null==t?void 0:t.options)?void 0:o.selectionDelay}},(()=>{(e=>!!r.has(e)||(r.add(e),!1))(i)||e.dispatch(a?fb({questionAnswerId:a},n):ib(n))}))})(a,l,o)),i[l]};return{selectInlineLink(e,t){var r;null==(r=a(e,t))||r.select()},beginDelayedSelectInlineLink(e,t){var r;null==(r=a(e,t))||r.beginDelayedSelect()},cancelPendingSelectInlineLink(e,t){var r;null==(r=a(e,t))||r.cancelPendingSelect()}}}function Ab(e,t){var r;let n=function(e,t,r){var n;if(!function(e){return e.addReducers({search:Uc,questionAnswering:kb}),!0}(e))throw En;let i=dd(e),a=()=>e.state,o=()=>KS(a()),s=null,l=Gv(e,{options:{selectionDelay:null==(n=null==r?void 0:r.options)?void 0:n.selectionDelay}},(()=>{let r=o();if(!r)return void(s=null);let{searchResponseId:n}=a().search;s!==n&&(s=n,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(Bv(r)))}));return{...i,get state(){let e=a();return{question:e.search.questionAnswer.question,answer:e.search.questionAnswer.answerSnippet,documentId:e.search.questionAnswer.documentId,expanded:e.questionAnswering.expanded,answerFound:""!==e.search.questionAnswer.answerSnippet,liked:e.questionAnswering.liked,disliked:e.questionAnswering.disliked,feedbackModalOpen:e.questionAnswering.feedbackModalOpen,source:o()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(gb())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(hb())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(vb())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(mb())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(yb())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(Sb())},sendFeedback(r){e.dispatch(t.logSmartSnippetFeedback(r)),e.dispatch(Sb())},sendDetailedFeedback(r){e.dispatch(t.logSmartSnippetDetailedFeedback(r)),e.dispatch(Sb())},selectSource(){l.select()},beginDelayedSelectSource(){l.beginDelayedSelect()},cancelPendingSelectSource(){l.cancelPendingSelect()}}}(e,pb,t),i=Ob(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}});return{...n,get state(){return n.state},selectInlineLink(e){i.selectInlineLink(e)},beginDelayedSelectInlineLink(e){i.beginDelayedSelectInlineLink(e)},cancelPendingSelectInlineLink(e){i.cancelPendingSelectInlineLink(e)}}}function xb(e,t){if(!function(e){return e.addReducers({search:Uc,questionAnswering:kb}),!0}(e))throw En;let r=()=>e.state,n=new Set,i=null,a={},o=o=>{let{searchResponseId:s}=r().search;(e=>{i!==e&&(i=e,a={},n.clear())})(s);let l=(e=>{let t=r(),n=ZS(t,e);return n?KS(t,n.documentId):null})(o);return l?(o in a||(a[o]=((r,i)=>{var a;return Gv(e,{options:{selectionDelay:null==(a=null==t?void 0:t.options)?void 0:a.selectionDelay}},(()=>{(e=>!!n.has(e)||(n.add(e),!1))(i)||(e.dispatch(db({questionAnswerId:i})),e.dispatch(Bv(r)))}))})(l,o)),a[o]):null};return{selectSource(e){var t;null==(t=o(e))||t.select()},beginDelayedSelectSource(e){var t;null==(t=o(e))||t.beginDelayedSelect()},cancelPendingSelectSource(e){var t;null==(t=o(e))||t.cancelPendingSelect()}}}function qb(e,t){var r,n;let i=function(e,t){if(!function(e){return e.addReducers({search:Uc,questionAnswering:kb}),!0}(e))throw En;let r=dd(e),n=t=>{let{contentIdKey:r,contentIdValue:n}=t;return e.state.search.results.find((e=>qc(e,r)===n))};return{...r,get state(){let t=e.state;return{questions:t.search.questionAnswer.relatedQuestions.map(((e,r)=>({question:e.question,answer:e.answerSnippet,documentId:e.documentId,questionAnswerId:t.questionAnswering.relatedQuestions[r].questionAnswerId,expanded:t.questionAnswering.relatedQuestions[r].expanded,source:n(e.documentId)})))}},expand(r){let n={questionAnswerId:r};e.dispatch(t.logExpandSmartSnippetSuggestion(n)),e.dispatch(bb(n))},collapse(r){let n={questionAnswerId:r};e.dispatch(t.logCollapseSmartSnippetSuggestion(n)),e.dispatch(wb(n))}}}(e,pb),a=Ob(e,{options:{selectionDelay:null==(r=null==t?void 0:t.options)?void 0:r.selectionDelay}}),o=xb(e,{options:{selectionDelay:null==(n=null==t?void 0:t.options)?void 0:n.selectionDelay}});return{...i,get state(){return i.state},selectSource(e){o.selectSource(e)},beginDelayedSelectSource(e){o.beginDelayedSelectSource(e)},cancelPendingSelectSource(e){o.cancelPendingSelectSource(e)},selectInlineLink(e,t){a.selectInlineLink(t,e)},beginDelayedSelectInlineLink(e,t){a.beginDelayedSelectInlineLink(t,e)},cancelPendingSelectInlineLink(e,t){a.cancelPendingSelectInlineLink(t,e)}}}var Rb={queries:new pn({required:!0,each:new un({emptyAllowed:!1})}),maxLength:new nn({required:!0,min:1,default:10})},Eb=ht("recentQueries/registerRecentQueries",(e=>wn(e,Rb))),Fb=ht("recentQueries/clearRecentQueries"),Db=()=>hl("analytics/recentQueries/clear",(e=>e.makeClearRecentQueries())),jb=()=>hl("analytics/recentQueries/click",(e=>e.makeRecentQueryClick())),Tb=Pt({queries:[],maxLength:10},(e=>{e.addCase(Eb,((e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(Fb,(e=>{e.queries=[]})).addCase(Sc.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;if(!r.length||!n.length)return;e.queries=e.queries.filter((e=>e!==r));let i=e.queries.slice(0,e.maxLength-1);e.queries=[r,...i]}))})),Pb={queries:[]},Mb={maxLength:10,clearFilters:!0},Vb=new Xr({queries:new pn({required:!0})}),Ub=new Xr({maxLength:new nn({required:!0,min:1}),clearFilters:new on});function Lb(e,t){if(!function(e){return e.addReducers({search:Uc,recentQueries:Tb}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i={...Mb,...null==t?void 0:t.options},a={...Pb,...null==t?void 0:t.initialState};!function(e,t){In(e,Ub,null==t?void 0:t.options,"buildRecentQueriesList"),Cn(e,Vb,null==t?void 0:t.initialState,"buildRecentQueriesList")}(e,{options:i,initialState:a});let o={queries:a.queries,maxLength:i.maxLength};return n(Eb(o)),{...r,get state(){let t=e.state;return{...t.recentQueries,analyticsEnabled:t.configuration.analytics.enabled}},clear(){n(Db()),n(Fb())},executeRecentQuery(e){let t=new nn({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);n(yc({q:this.state.queries[e],clearFilters:i.clearFilters})),n(Sc(jb()))}}}var $b=e=>hl("analytics/recentResults/click",((t,r)=>(kl(e),t.makeRecentResultClick(ml(e,r),yl(e))))),Qb=()=>hl("analytics/recentResults/clear",(e=>e.makeClearRecentResults())),_b=Pt({results:[],maxLength:10},(e=>{e.addCase(zv,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(Hv,(e=>{e.results=[]})).addCase(Bv,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))})),Nb={initialState:{results:[]},options:{maxLength:10}},zb=new Xr({results:new pn({required:!0})}),Bb=new Xr({maxLength:new nn({required:!0,min:1})});function Hb(e,t){if(!function(e){return e.addReducers({recentResults:_b}),!0}(e))throw En;let r=dd(e),{dispatch:n}=e,i={...Nb,...t};!function(e,t){In(e,Bb,null==t?void 0:t.options,"buildRecentResultsList"),Cn(e,zb,null==t?void 0:t.initialState,"buildRecentResultsList")}(e,i);let a={results:i.initialState.results,maxLength:i.options.maxLength};return n(zv(a)),{...r,get state(){return e.state.recentResults},clear(){n(Qb()),n(Hv())}}}function Yb(e,t){return Gv(e,t,(()=>e.dispatch($b(t.options.result))))}function Gb(e,t){if(!function(e){return e.addReducers({facetOptions:Np}),!0}(e))throw En;let r=t=>{var r,n;return null!=(n=null==(r=e.state.facetOptions.facets[t])?void 0:r.enabled)&&n},n=t=>{var r,n,i,a,o,s,l,u,c,d,f,p,g,h,v,m;return null!=(m=null!=(v=null!=(f=null!=(l=null==(i=null==(n=null==(r=e.state.facetSet)?void 0:r[t])?void 0:n.request)?void 0:i.currentValues)?l:null==(s=null==(o=null==(a=e.state.categoryFacetSet)?void 0:a[t])?void 0:o.request)?void 0:s.currentValues)?f:null==(d=null==(c=null==(u=e.state.numericFacetSet)?void 0:u[t])?void 0:c.request)?void 0:d.currentValues)?v:null==(h=null==(g=null==(p=e.state.dateFacetSet)?void 0:p[t])?void 0:g.request)?void 0:h.currentValues)?m:null},i=t=>t in e.state.facetOptions.facets,a=()=>Un({isFacetRegistered:i(t.facetId),parentFacets:t.conditions.map((({parentFacetId:e})=>i(e)?{enabled:r(e),values:n(e)}:null))}),o=()=>{if(!i(t.facetId))return;let a=r(t.facetId),o=t.conditions.some((e=>{if(!r(e.parentFacetId))return!1;let t=n(e.parentFacetId);return null!==t&&e.condition(t)}));a!==o&&(e.dispatch(o?Hd(t.facetId):Yd(t.facetId)),e.state.facetSet&&Object.entries(e.state.facetSet).forEach((([t,r])=>r.request.freezeCurrentValues&&e.dispatch(mp({facetId:t,freezeCurrentValues:!1})))))};if(!t.conditions.length)return{stopWatching(){}};let s=a(),l=e.subscribe((()=>{(()=>{let e=a();return e!==s&&(s=e,!0)})()&&o()}));return o(),{stopWatching(){l()}}}function Wb(e,t){if(!function(e){return e.addReducers({facetSet:tg,configuration:zc,facetSearchSet:Jp,search:Uc}),!0}(e))throw En;let{facetSearch:r,allowedValues:n,...i}=t.options.facet,a=Bp(e,i);e.dispatch(cp({...ig,...i,facetId:a,...n&&{allowedValues:{type:"simple",values:n}}}));let o=pg(e,{options:{...r,facetId:a},select:t=>{e.dispatch(Bd()),e.dispatch(Sc(_f({facetId:a,facetValue:t.rawValue})))},exclude:t=>{e.dispatch(Bd()),e.dispatch(Sc(Nf({facetId:a,facetValue:t.rawValue})))},isForFieldSuggestions:!0});return{...dd(e),...o,updateText:function(e){o.updateText(e),o.search()},get state(){return o.state}}}function Jb(e,t){if(!function(e){return e.addReducers({categoryFacetSet:gf,configuration:zc,categoryFacetSearchSet:Mf,search:Uc}),!0}(e))throw En;let{facetSearch:r,...n}=t.options.facet,i=Bp(e,n);e.dispatch(lf({...hf,...n,facetId:i}));let a=Gp(e,{options:{...r,facetId:i},isForFieldSuggestions:!0});return{...dd(e),...a,updateText:function(e){a.updateText(e),a.search()},get state(){return a.state}}}var Kb=Pt(Gi(),(e=>{e.addCase(Sc.fulfilled,((e,t)=>{var r;e.set={};let n=null==(r=t.payload.response.generateAutomaticFacets)?void 0:r.facets;null==n||n.forEach((t=>{e.set[t.field]={response:t}}))})).addCase(vv,((e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)})).addCase(Sv,((e,t)=>{var r;let{field:n,selection:i}=t.payload,a=null==(r=e.set[n])?void 0:r.response;if(!a)return;let o=a.values.find((e=>e.value===i.value));if(!o)return;let s="selected"===o.state;o.state=s?"idle":"selected"})).addCase(mv,((e,t)=>{var r;let n=t.payload,i=null==(r=e.set[n])?void 0:r.response;if(i)for(let e of i.values)e.state="idle"})).addCase(zl,((e,t)=>{var r,n,i;let a=null!=(r=t.payload.af)?r:{},o=Object.keys(e.set);for(let t in a)if(!e.set[t]){let r=Zb(t),n=a[t].map((e=>Xb(e)));r.values.push(...n),e.set[t]={response:r}}for(let t of o)if(!(t in a)){let r=null==(n=e.set[t])?void 0:n.response;for(let e of r.values)e.state="idle"}for(let t in a){let r=null==(i=e.set[t])?void 0:i.response;if(r){let e=r.values;for(let r of e)a[t].includes(r.value)?"idle"===r.state&&(r.state="selected"):r.state="idle"}}})).addCase(Xl.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.automaticFacetSet.set).length)return t.payload.automaticFacetSet})).addCase(iu,(e=>{Object.values(e.set).forEach((({response:e})=>{e.values.forEach((e=>e.state="idle"))}))}))}));function Zb(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function Xb(e){return{value:e,state:"selected",numberOfResults:0}}function ew(e,t){if(!function(e){return e.addReducers({automaticFacetSet:Kb,configuration:zc,search:Uc}),!0}(e))throw En;let{dispatch:r}=e,n=function(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}(t.options);return r(vv(n)),{...dd(e),get state(){var t,r;return{automaticFacets:null!=(r=null==(t=e.state.search.response.generateAutomaticFacets)?void 0:t.facets.map((t=>function(e,t){let{dispatch:r}=e,n=dd(e),{field:i}=t;return{...n,toggleSelect(e){r(Sv({field:i,selection:e})),r(Sc(dg(i,e)))},deselectAll(){r(mv(i)),r(Sc(Qf(i)))},get state(){var t,r;let n=null==(r=null==(t=e.state.automaticFacetSet)?void 0:t.set[i])?void 0:r.response;return n?{field:n.field,label:n.label,values:n.values}:{field:"",values:[],label:""}}}}(e,{field:t.field}))))?r:[]}}}}function tw(e,t){var r,n;return null==(n=null==(r=e.generatedAnswer)?void 0:r.citations)?void 0:n.find((e=>e.id===t))}function rw(e){var t,r,n;return null==(n=null==(r=null==(t=e.search)?void 0:t.response)?void 0:r.extendedResults)?void 0:n.generativeQuestionAnsweringId}var nw=()=>hl("analytics/generatedAnswer/retry",(e=>e.makeRetryGeneratedAnswer())),iw=e=>hl("analytics/generatedAnswer/rephrase",((t,r)=>{let n=rw(r);return n?t.makeRephraseGeneratedAnswer({generativeQuestionAnsweringId:n,rephraseFormat:e.answerStyle}):null})),aw=e=>hl("analytics/generatedAnswer/openAnswerSource",((t,r)=>{let n=rw(r),i=tw(r,e);return n&&i?t.makeOpenGeneratedAnswerSource({generativeQuestionAnsweringId:n,permanentId:i.permanentid,citationId:i.id}):null})),ow=(e,t)=>hl("analytics/generatedAnswer/hoverCitation",((r,n)=>{let i=rw(n),a=tw(n,e);return i&&a?r.makeGeneratedAnswerSourceHover({generativeQuestionAnsweringId:i,permanentId:a.permanentid,citationId:a.id,citationHoverTimeMs:t}):null})),sw=()=>hl("analytics/generatedAnswer/like",((e,t)=>{let r=rw(t);return r?e.makeLikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null})),lw=()=>hl("analytics/generatedAnswer/dislike",((e,t)=>{let r=rw(t);return r?e.makeDislikeGeneratedAnswer({generativeQuestionAnsweringId:r}):null})),uw=e=>hl("analytics/generatedAnswer/sendFeedback",((t,r)=>{let n=rw(r);return n?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:e}):null})),cw=e=>hl("analytics/generatedAnswer/sendFeedback",((t,r)=>{let n=rw(r);return n?t.makeGeneratedAnswerFeedbackSubmit({generativeQuestionAnsweringId:n,reason:"other",details:e}):null})),dw=()=>hl("analytics/generatedAnswer/show",((e,t)=>{let r=rw(t);return r?e.makeGeneratedAnswerShowAnswers({generativeQuestionAnsweringId:r}):null})),fw=()=>hl("analytics/generatedAnswer/hide",((e,t)=>{let r=rw(t);return r?e.makeGeneratedAnswerHideAnswers({generativeQuestionAnsweringId:r}):null})),pw=()=>hl("analytics/generatedAnswer/copy",((e,t)=>{let r=rw(t);return r?e.makeGeneratedAnswerCopyToClipboard({generativeQuestionAnsweringId:r}):null})),gw=["default","bullet","step","concise"],hw=new un({required:!0}),vw=new un,mw=new on({required:!0}),yw={id:hw,title:hw,uri:hw,permanentid:hw,clickUri:vw},Sw=ht("generatedAnswer/setIsVisible",(e=>wn(e,mw))),bw=ht("generatedAnswer/updateMessage",(e=>wn(e,{textDelta:hw}))),ww=ht("generatedAnswer/updateCitations",(e=>wn(e,{citations:new pn({required:!0,each:new dn({values:yw})})}))),Cw=ht("generatedAnswer/updateError",(e=>wn(e,{message:vw,code:new nn({min:0})}))),Iw=ht("generatedAnswer/resetAnswer"),kw=ht("generatedAnswer/like"),Ow=ht("generatedAnswer/dislike"),Aw=ht("generatedAnswer/feedbackModal/open"),xw=ht("generatedAnswer/feedbackModal/close"),qw=ht("generatedAnswer/setIsLoading",(e=>wn(e,mw))),Rw=ht("generatedAnswer/setIsStreaming",(e=>wn(e,mw))),Ew=ht("generatedAnswer/updateResponseFormat",(e=>wn(e,{answerStyle:new un({required:!0,constrainTo:gw})}))),Fw=Wt("generatedAnswer/streamAnswer",(async(e,t)=>{var r;let n=t.getState(),{dispatch:i,extra:a}=t,{setAbortControllerRef:o}=e,s=await(async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:null==(t=e.search.extendedResults)?void 0:t.generativeQuestionAnsweringId}})(n);i(qw(!0));let l=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,u=null==(r=a.streamingClient)?void 0:r.streamGeneratedAnswer(s,{write:e=>{l(s)&&(i(qw(!1)),e.payload&&e.payloadType&&((e,t)=>{switch(e){case"genqa.messageType":i(bw(JSON.parse(t)));break;case"genqa.citationsType":i(ww(JSON.parse(t)));break;case"genqa.endOfStreamType":i(Rw(!1)),i((e=>hl("analytics/generatedAnswer/streamEnd",((t,r)=>{let n=rw(r);return n?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:n,answerGenerated:e}):null})))(JSON.parse(t).answerGenerated));break;default:n.debug&&a.logger.warn(`Unknown payloadType: "${e}"`)}})(e.payloadType,e.payload))},abort:e=>{l(s)&&i(Cw(e))},close:()=>{l(s)&&i(Rw(!1))},resetAnswer:()=>{l(s)&&i(Iw())}});u?o(u):i(qw(!1))})),Dw=Pt({isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1},(e=>e.addCase(Sw,((e,{payload:t})=>{e.isVisible=t})).addCase(bw,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=t.textDelta,delete e.error})).addCase(ww,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(t.citations),delete e.error})).addCase(Cw,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...t,isRetryable:1===t.code},e.citations=[],delete e.answer})).addCase(kw,(e=>{e.liked=!0,e.disliked=!1})).addCase(Ow,(e=>{e.liked=!1,e.disliked=!0})).addCase(Aw,(e=>{e.feedbackModalOpen=!0})).addCase(xw,(e=>{e.feedbackModalOpen=!1})).addCase(Iw,(e=>({isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,responseFormat:e.responseFormat,isVisible:e.isVisible}))).addCase(qw,((e,{payload:t})=>{e.isLoading=t})).addCase(Rw,((e,{payload:t})=>{e.isStreaming=t})).addCase(Ew,((e,{payload:t})=>{e.responseFormat=t}))));function jw(e,t={}){var r,n;if(!function(e){return e.addReducers({generatedAnswer:Dw}),!0}(e))throw En;let i,a,o,{dispatch:s}=e,l=dd(e),u=()=>e.state,c=e=>{i=e},d=null==(r=t.initialState)?void 0:r.isVisible;void 0!==d&&s(Sw(d));let f=null==(n=t.initialState)?void 0:n.responseFormat;return f&&s(Ew(f)),e.subscribe((()=>{let e=u(),t=e.search.requestId,r=e.search.extendedResults.generativeQuestionAnsweringId;a!==t&&(a=t,null==i||i.abort(),s(Iw())),!(i&&!(null==i?void 0:i.signal.aborted)||(i=void 0,0))&&r&&r!==o&&(o=r,s(Fw({setAbortControllerRef:c})))})),{...l,get state(){return u().generatedAnswer},retry(){s(Sc(nw()))},like(){s(kw()),s(sw())},dislike(){s(Ow()),s(lw())},openFeedbackModal(){s(Aw())},closeFeedbackModal(){s(xw())},sendFeedback(e){s(uw(e)),s(xw())},sendDetailedFeedback(e){s(cw(e)),s(xw())},logCitationClick(e){s(aw(e))},logCitationHover(e,t){s(ow(e,t))},rephrase(e){s(Ew(e)),s(Sc(iw(e)))},show(){this.state.isVisible||(s(Sw(!0)),s(dw()))},hide(){this.state.isVisible&&(s(Sw(!1)),s(fw()))},logCopyToClipboard(){s(pw())}}}function Tw(e,t){let r=!1;return Gv(e,t,(()=>{r||(r=!0,e.dispatch(aw(t.options.citation.id)))}))}var Pw=()=>new un({required:!1,emptyAllowed:!0}),Mw=ht("advancedSearchQueries/update",(e=>wn(e,{aq:Pw(),cq:Pw(),lq:Pw(),dq:Pw()}))),Vw=ht("advancedSearchQueries/register",(e=>wn(e,{aq:Pw(),cq:Pw(),lq:Pw(),dq:Pw()}))),Uw=Pt(Ui(),(e=>{e.addCase(Mw,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;tn(r)||(e.aq=r,e.aqWasSet=!0),tn(n)||(e.cq=n,e.cqWasSet=!0),tn(i)||(e.lq=i,e.lqWasSet=!0),tn(a)||(e.dq=a,e.dqWasSet=!0)})).addCase(Vw,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;tn(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),tn(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),tn(i)||(e.defaultFilters.lq=i,e.lqWasSet||(e.lq=i)),tn(a)||(e.defaultFilters.dq=a,e.dqWasSet||(e.dq=a))})).addCase(Xl.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(zl,((e,t)=>{let{aq:r,cq:n}=t.payload;tn(r)||(e.aq=r,e.aqWasSet=!0),tn(n)||(e.cq=n,e.cqWasSet=!0)}))}));function Lw(e){return e.addReducers({advancedSearchQueries:Uw}),{updateAdvancedSearchQueries:Mw,registerAdvancedSearchQueries:Vw}}function $w(e){return e.addReducers({categoryFacetSet:gf}),{deselectAllCategoryFacetValues:cf,registerCategoryFacet:lf,toggleSelectCategoryFacetValue:uf,updateCategoryFacetNumberOfValues:df,updateCategoryFacetSortCriterion:ff,updateFacetAutoSelection:ou,updateCategoryFacetBasePath:pf}}function Qw(e){return e.addReducers({facetSet:tg}),{deselectAllFacetValues:pp,registerFacet:cp,toggleSelectFacetValue:dp,toggleExcludeFacetValue:fp,updateFacetIsFieldExpanded:vp,updateFacetNumberOfValues:hp,updateFacetSortCriterion:gp,updateFreezeCurrentValues:mp,updateFacetAutoSelection:ou}}function _w(e){return e.addReducers({configuration:zc}),{disableAnalytics:Ll,enableAnalytics:$l,setOriginLevel2:Ql,setOriginLevel3:_l,updateAnalyticsConfiguration:Ul,updateBasicConfiguration:Ml}}function Nw(e){return e.addReducers({configuration:zc,pipeline:tu,searchHub:nu}),{updateSearchConfiguration:Vl}}function zw(e){return e.addReducers({context:Pd}),{addContext:jd,removeContext:Td,setContext:Dd}}function Bw(e){return e.addReducers({dictionaryFieldContext:$d}),{addContext:Ud,removeContext:Ld,setContext:Vd}}function Hw(e){return e.addReducers({debug:Yl}),{disableDebug:Hl,enableDebug:Bl}}function Yw(e){return e.addReducers({dateFacetSet:Qg}),{deselectAllDateFacetValues:jp,registerDateFacet:qp,toggleSelectDateFacetValue:Rp,toggleExcludeDateFacetValue:Ep,updateDateFacetSortCriterion:Dp,updateDateFacetValues:Fp}}function Gw(e){return e.addReducers({facetOptions:Np}),{updateFacetOptions:Bd,enableFacet:Hd,disableFacet:Yd}}function Ww(e){return e.addReducers({didYouMean:_d,query:vm}),{applyDidYouMeanCorrection:qu,disableDidYouMean:Ou,enableDidYouMean:ku,enableAutomaticQueryCorrection:xu,disableAutomaticQueryCorrection:Au}}function Jw(e){return e.addReducers({fields:xd}),{registerFieldsToInclude:Sd,enableFetchAllFields:bd,disableFetchAllFields:wd,fetchFieldsDescription:Cd}}function Kw(e){return e.addReducers({history:fv,facetOrder:hh}),{back:Kl,forward:Zl}}function Zw(e){return e.addReducers({numericFacetSet:Zg}),{deselectAllNumericFacetValues:_p,registerNumericFacet:Vp,toggleSelectNumericFacetValue:Up,toggleExcludeNumericFacetValue:Lp,updateNumericFacetSortCriterion:Qp,updateNumericFacetValues:$p}}function Xw(e){return e.addReducers({folding:LS}),{registerFolding:kd,loadCollection:Od}}function eC(e){return e.addReducers({pagination:bv}),{nextPage:Su,previousPage:bu,registerNumberOfResults:hu,registerPage:mu,updateNumberOfResults:vu,updatePage:yu}}function tC(e){return e.addReducers({pipeline:tu}),{setPipeline:eu}}function rC(e){return e.addReducers({query:vm}),{updateQuery:wu}}function nC(e){return e.addReducers({querySet:cm}),{registerQuerySetQuery:lm,updateQuerySetQuery:um}}function iC(e){return e.addReducers({instantResults:Cm}),{registerInstantResults:du,updateInstantResultsQuery:fu,clearExpiredResults:pu}}function aC(e){return e.addReducers({querySuggest:hm,querySet:cm}),{clearQuerySuggest:nm,fetchQuerySuggestions:im,registerQuerySuggest:em,selectQuerySuggestion:rm}}function oC(e){return e.addReducers({search:Uc}),{executeSearch:Sc,fetchMoreResults:wc,fetchFacetValues:Cc,fetchPage:bc,fetchInstantResults:Ic}}function sC(e){return e.addReducers({searchHub:nu}),{setSearchHub:ru}}function lC(e){return e.addReducers({sortCriteria:jm}),{registerSortCriterion:Em,updateSortCriterion:Fm}}function uC(e){return e.addReducers({standaloneSearchBoxSet:by}),{registerStandaloneSearchBox:py,fetchRedirectUrl:my,updateAnalyticsToSearchFromLink:hy,updateAnalyticsToOmniboxFromLink:vy,resetStandaloneSearchBox:gy}}function cC(e){return e.addReducers({staticFilterSet:Hm}),{registerStaticFilter:Lm,toggleSelectStaticFilterValue:$m,toggleExcludeStaticFilterValue:Qm,deselectAllStaticFilterValues:_m}}function dC(e){return e.addReducers({tabSet:Km}),{registerTab:Qc,updateActiveTab:_c}}function fC(e){return e.addReducers({questionAnswering:kb}),{collapseSmartSnippet:hb,expandSmartSnippet:gb,dislikeSmartSnippet:mb,likeSmartSnippet:vb,openFeedbackModal:yb,closeFeedbackModal:Sb,expandSmartSnippetRelatedQuestion:bb,collapseSmartSnippetRelatedQuestion:wb}}function pC(e){return e.addReducers({}),{deselectAllBreadcrumbs:iu,deselectAllNonBreadcrumbs:au}}function gC(e){return e.addReducers({recentQueries:Tb}),{registerRecentQueries:Eb,clearRecentQueries:Fb}}function hC(e){return e.addReducers({recentResults:_b}),{registerRecentResults:zv,clearRecentResults:Hv,pushRecentResult:Bv}}var vC=ht("excerptLength/set",(e=>wn(e,new nn({min:0,required:!0})))),mC=Pt({length:void 0},(e=>{e.addCase(vC,((e,t)=>{e.length=t.payload}))}));function yC(e){return e.addReducers({excerptLength:mC}),{setExcerptLength:vC}}function SC(e){return e.addReducers({resultPreview:RS}),{fetchResultContent:wS,updateContentURL:OS,nextPreview:CS,previousPreview:IS,preparePreviewPagination:kS}}function bC(e){return e.addReducers({generatedAnswer:Dw}),{resetAnswer:Iw}}var wC,CC=new Xr({content:new en({required:!0}),conditions:new en({required:!0}),priority:new nn({required:!1,default:0,min:0}),fields:new pn({required:!1,each:vn})});function IC(e){if(!function(e){return e.addReducers({fields:xd}),!0}(e))throw En;let t=[];return{registerTemplates(...r){let n=[];(e=>{e.forEach((e=>{if(CC.validate(e),!e.conditions.every((e=>e instanceof Function)))throw new Zr("Each result template conditions should be a function that takes a result as an argument and returns a boolean")}))})(r),r.forEach((e=>{let r={...e,priority:e.priority||0,fields:e.fields||[]};t.push(r),n.push(...r.fields)})),t.sort(((e,t)=>t.priority-e.priority)),n.length&&e.dispatch(Sd(n))},selectTemplate(e){let r=t.find((t=>t.conditions.every((t=>t(e)))));return r?r.content:null}}}function kC(e){return e.addReducers({}),{logClearBreadcrumbs:ay,logInterfaceLoad:El,logSearchFromLink:Dl,logOmniboxFromLink:jl,logInterfaceChange:Fl,logDidYouMeanClick:Ru,logCategoryFacetBreadcrumb:iy,logFacetBreadcrumb:Bf,logFacetClearAll:Qf,logFacetDeselect:zf,logFacetSelect:_f,logFacetShowLess:Lf,logFacetShowMore:Uf,logFacetUpdateSort:$f,logDateFacetBreadcrumb:sy,logNumericFacetBreadcrumb:ly,logNavigateBackward:mh,logNavigateForward:vh,logPageNext:Dv,logPageNumber:Fv,logPagePrevious:jv,logPagerResize:Ev,logSearchboxSubmit:om,logQuerySuggestionClick:pm,logResultsSort:qm,logDislikeSmartSnippet:rb,logLikeSmartSnippet:tb,logOpenSmartSnippetFeedbackModal:ab,logCloseSmartSnippetFeedbackModal:ob,logSmartSnippetFeedback:sb,logSmartSnippetDetailedFeedback:lb,logExpandSmartSnippet:XS,logCollapseSmartSnippet:eb,logExpandSmartSnippetSuggestion:ub,logCollapseSmartSnippetSuggestion:cb,logNoResultsBack:yh,logStaticFilterSelect:Nm,logStaticFilterDeselect:zm,logStaticFilterClearAll:Bm,logTriggerQuery:Fu,logUndoTriggerQuery:Du,logNotifyTrigger:ju,logTriggerRedirect:Tu,logTriggerExecute:Pu}}function OC(e){return e.addReducers({}),{logDocumentOpen:Yv,logOpenSmartSnippetSource:nb,logOpenSmartSnippetSuggestionSource:db,logOpenSmartSnippetInlineLink:ib,logOpenSmartSnippetSuggestionInlineLink:fb}}function AC(e){return e.addReducers({}),{logSearchEvent:xl,logClickEvent:ql,logCustomEvent:Rl}}function xC(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{let n=t.trim().split(" "),i=n[0].toLowerCase(),a=n[1]&&n[1].toLowerCase();if(n.length>2||""===i)throw r;if(!function(e){return void 0===e||e===qi.Ascending||e===qi.Descending}(a))throw new Error(`Wrong criterion sort order "${a}" in expression "${e}". Order should either be "${qi.Ascending}" or "${qi.Descending}"`);return function(e){let{by:t,order:r}=e;switch(t){case Ri.Relevancy:return Fi();case Ri.QRE:return Ti();case Ri.NoSort:return Pi();case Ri.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Di(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return ji(t,r)}}({by:i,order:a})}))}function qC(e){return e.negate?"NOT ":""}function RC(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function EC(){let e=[],t="and";return{addExpression(t){return e.push(t),this},addKeyword(t){return e.push(function(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}(t)),this},addNear(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{startTerm:r,otherTerms:n}=e,i=function(e){return e.map((e=>{let{endTerm:t,maxKeywordsBetween:r}=e;return`near:${r} ${t}`})).join(" ")}(n),a=`${r} ${i}`;return e.negate?`${t}(${a})`:a}}}(t)),this},addExactMatch(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{expression:r}=e;return`${t}"${r}"`}}}(t)),this},addFieldExists(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{field:r}=e;return`${t}@${r}`}}}(t)),this},addStringField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t}=e,r=qC(e),n=RC(e.operator),i=e.values.map((e=>`"${e}"`));return`${r}@${t}${n}${1===i.length?i[0]:`(${i.join(",")})`}`}}}(t)),this},addStringFacetField(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{field:r,operator:n,value:i}=e;return`${t}@${r}${RC(n)}${"fuzzyMatch"===n?` $quoteVar(value: ${i})`:`("${i}")`}`}}}(t)),this},addNumericField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t,value:r}=e;return`${qC(e)}@${t}${RC(e.operator)}${r}`}}}(t)),this},addNumericRangeField(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{field:r,from:n,to:i}=e;return`${t}@${r}${RC("isExactly")}${n}..${i}`}}}(t)),this},addDateField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=RC(e.operator);return`${qC(e)}@${t}${n}${r}`}}}(t)),this},addDateRangeField(t){return e.push(function(e){return{toQuerySyntax(){let t=qC(e),{field:r,from:n,to:i}=e;return`${t}@${r}${RC("isExactly")}${n}..${i}`}}}(t)),this},addQueryExtension(t){return e.push(function(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=function(e){return Object.entries(e).map((e=>{let[t,r]=e;return`${t}: ${"string"==typeof r?r:r.toQuerySyntax()}`})).join(", ")}(r);return`$${t}(${n})`}}}(t)),this},joinUsing(e){return t=e,this},toQuerySyntax(){let r=function(e){return"and"===e?"AND":"OR"}(t),n=e.map((e=>e.toQuerySyntax())).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}(e=>{e.getResultProperty=qc,e.fieldsMustBeDefined=Rc,e.fieldsMustNotBeDefined=Ec,e.fieldMustMatch=Fc,e.fieldMustNotMatch=Dc})(wC||(wC={}));var FC={buildMockRaw:ta,buildMockSearchAppEngine:function(e={}){let t=function(e={},t,r=ea){let n=(0,Hr.default)({level:"silent"}),i=Xi(e,t),{store:a,apiClient:o}=r(n,i),s=a(i),l=()=>{},{state:u,...c}=e;return{store:s,apiClient:o,state:Xi(e,t),subscribe:jest.fn((()=>l)),get dispatch(){return s.dispatch},get actions(){return s.getActions()},findAsyncAction(e){let t=this.actions.find((t=>t.type===e.type));return function(e){return!!e&&"meta"in e}(t)?t:void 0},logger:n,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...c}}(e,Zi);return{...t,executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn(),apiClient:t.apiClient}},buildMockResult:function(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:ta(),isUserActionView:!1,...e}},createMockState:Zi};"undefined"==typeof window&&(_()||(global.crypto=require("crypto")),!_().getRandomValues&&_().webcrypto&&(global.crypto.getRandomValues=_().webcrypto.getRandomValues.bind(_().webcrypto)))}));